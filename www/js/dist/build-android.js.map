{"version":3,"sources":["boot/EC.Boot.getProjects.js","boot/EC.Boot.handleDeviceEvents.js","boot/EC.Boot.init.js","boot/EC.Boot.onDeviceReady.js","utils/EC.DevicePosition.initGoogleMap.js","utils/EC.DevicePosition.js","utils/EC.DevicePosition.loadGoogleMapsApi.js","utils/EC.DevicePosition.updateGoogleMap.js","utils/EC.Notification.js","utils/EC.Ui.js","utils/EC.Utils.js","config/EC.Config.js","config/EC.Const.js","parsing/EC.Parse.js","parsing/EC.Parse.mapPositionToInput.js","parsing/EC.Parse.parseInputObject.js","parsing/EC.Parse.parseXML.js","routing/EC.Routing.branchInputsPageEvents.js","routing/EC.Routing.changePage.js","routing/EC.Routing.goBack.js","routing/EC.Routing.indexPageEvents.js","routing/EC.Routing.inputsPageEvents.js","localisation/EC.Dictionary.js","localisation/EC.Localise.js","model/database/Structure/EC.Branch.commitBranchForms.js","model/database/Structure/EC.Branch.commitBranchForms_IOS.js","model/database/Structure/EC.Branch.commitBranchInputOptions.js","model/database/Structure/EC.Branch.commitBranchInputs.js","model/database/Structure/EC.Branch.js","model/database/Structure/EC.DBAdapter.js","model/database/Structure/EC.Hierarchy.commitForms.js","model/database/Structure/EC.Hierarchy.commitForms_IOS.js","model/database/Structure/EC.Hierarchy.commitInputOptions.js","model/database/Structure/EC.Hierarchy.commitInputs.js","model/database/Structure/EC.Hierarchy.commitProject.js","model/database/Structure/EC.Hierarchy.js","model/database/Structure/EC.Structure.commitAll.js","model/database/Select/EC.Select.getAllProjectEntries.js","model/database/Select/EC.Select.getAllowDownloadEdits.js","model/database/Select/EC.Select.getBranchChildrenFiles.js","model/database/Select/EC.Select.getBranchEntries.js","model/database/Select/EC.Select.getBranchEntryKeys.js","model/database/Select/EC.Select.getBranchEntryValues.js","model/database/Select/EC.Select.getBranchFiles.js","model/database/Select/EC.Select.getBranchFormDetails.js","model/database/Select/EC.Select.getBranchFormLocalIDs.js","model/database/Select/EC.Select.getBranchForms.js","model/database/Select/EC.Select.getBranchInputs.js","model/database/Select/EC.Select.getBranchInputsLocalIDs.js","model/database/Select/EC.Select.getBranchSyncedFiles.js","model/database/Select/EC.Select.getChildEntries.js","model/database/Select/EC.Select.getChildEntriesForDeletion.js","model/database/Select/EC.Select.getCountBranchEntries.js","model/database/Select/EC.Select.getEntries.js","model/database/Select/EC.Select.getEntryKeys.js","model/database/Select/EC.Select.getEntryValues.js","model/database/Select/EC.Select.getForms.js","model/database/Select/EC.Select.getFullParentPath.js","model/database/Select/EC.Select.getHierarchyChildrenFiles.js","model/database/Select/EC.Select.getHierarchyEntriesForDeletion.js","model/database/Select/EC.Select.getHierarchyFiles.js","model/database/Select/EC.Select.getHierarchySyncedFiles.js","model/database/Select/EC.Select.getInputs.js","model/database/Select/EC.Select.getLocalInputIDs.js","model/database/Select/EC.Select.getProjectRowId_IOS.js","model/database/Select/EC.Select.getProjects.js","model/database/Select/EC.Select.getSyncedEntryKeys.js","model/database/Select/EC.Select.hasBranchMediaFiles.js","model/database/Select/EC.Select.js","model/database/Select/upload/EC.Select.getBranchForms.js","model/database/Select/upload/EC.Select.getOneBranchAudioFile.js","model/database/Select/upload/EC.Select.getOneBranchEntry.js","model/database/Select/upload/EC.Select.getOneBranchMediaFile.js","model/database/Select/upload/EC.Select.getOneBranchMediaPerType.js","model/database/Select/upload/EC.Select.getOneBranchPhotoFile.js","model/database/Select/upload/EC.Select.getOneBranchVideoFile.js","model/database/Select/upload/EC.Select.getOneHierarchyEntry.js","model/database/Select/upload/EC.Select.getOneHierarchyMediaFile.js","model/database/Select/upload/EC.Select.getOneHierarchyMediaPerType.js","model/database/Select/upload/EC.Select.getUploadURL.js","model/database/Update/EC.Update.commitBranchForm.js","model/database/Update/EC.Update.countSyncedDeleted.js","model/database/Update/EC.Update.emptyMediaValues.js","model/database/Update/EC.Update.flagOneFileAsSynced.js","model/database/Update/EC.Update.js","model/database/Update/EC.Update.setBranchEntryAsSynced.js","model/database/Update/EC.Update.setCachedBranchesAsStored.js","model/database/Update/EC.Update.setHierarchyEntryAsSynced.js","model/database/Update/EC.Update.unsyncAllEntries.js","model/database/Update/EC.Update.unsyncOneHierarchyEntry.js","model/database/Update/EC.Update.updateCountersOnEntriesDownload.js","model/database/Update/EC.Update.updateCountersOnEntriesRestore.js","model/database/Update/EC.Update.updateCountersOnSingleBranchEntryInsertion.js","model/database/Update/EC.Update.updateCountersOnSingleEntryDeletion.js","model/database/Update/EC.Update.updateCountersOnSingleEntryInsertion.js","model/database/Update/EC.Update.updateCountersOnSyncedEntriesDeletion.js","model/database/Update/EC.Update.updateHierarchyEntryValues.js","model/database/Create/EC.Create.commitRemoteEntry.js","model/database/Create/EC.Create.insertBranchDataRows.js","model/database/Create/EC.Create.insertBranchFormValues.js","model/database/Create/EC.Create.insertFormValues.js","model/database/Create/EC.Create.js","model/database/Delete/EC.Delete.deleteAllEntries.js","model/database/Delete/EC.Delete.deleteAllSynced.js","model/database/Delete/EC.Delete.deleteBranchEntry.js","model/database/Delete/EC.Delete.deleteCachedBranchEntries.js","model/database/Delete/EC.Delete.deleteChildEntries.js","model/database/Delete/EC.Delete.deleteEntry.js","model/database/Delete/EC.Delete.deleteProject.js","model/database/Delete/EC.Delete.js","model/database/Delete/EC.Delete.removeHierarchyChildrenEntries.js","model/database/Delete/EC.Delete.removeHierarchyEntry.js","model/database/Delete/EC.Delete.removeLinkedBranchChildEntries.js","model/database/Delete/EC.Delete.removeLinkedBranchEntries.js","model/database/Delete/EC.Delete.removeSyncedBranchEntries.js","model/database/Delete/EC.Delete.removeSyncedHierarchyEntries.js","model/file/EC.File.backup.js","model/file/EC.File.copyVideo.js","model/file/EC.File.createMediaDirs.js","model/file/EC.File.deleteAllMedia.js","model/file/EC.File.hasBackup.js","model/file/EC.File.move.js","model/file/EC.File.moveVideo.js","model/file/EC.File.remove.js","model/file/EC.File.restoreFromBackup.js","model/file/EC.File.uploadFile.js","model/file/EC.File.writeProjectDataAsCSV.js","controller/branch_inputs/EC.BranchInputs.js","controller/branch_inputs/navigation/EC.BranchInputs.backToHierarchyForm.js","controller/branch_inputs/navigation/EC.BranchInputs.bindBackBtn.js","controller/branch_inputs/navigation/EC.BranchInputs.gotoNextPage.js","controller/branch_inputs/navigation/EC.BranchInputs.gotoPrevPage.js","controller/branch_inputs/navigation/EC.BranchInputs.onNextBtnTapped.js","controller/branch_inputs/navigation/EC.BranchInputs.onPrevBtnTapped.js","controller/branch_inputs/navigation/EC.BranchInputs.popInputsTrail.js","controller/branch_inputs/navigation/EC.BranchInputs.pushInputsTrail.js","controller/branch_inputs/navigation/EC.BranchInputs.spliceInputsTrail.js","controller/branch_inputs/render/EC.BranchInputs.prepareFeedback.js","controller/branch_inputs/render/EC.BranchInputs.prepareFirstInput.js","controller/branch_inputs/render/EC.BranchInputs.renderFeedbackView.js","controller/branch_inputs/render/EC.BranchInputs.renderInput.js","controller/branch_inputs/render/EC.BranchInputs.renderInputView.js","controller/branch_inputs/render/EC.BranchInputs.renderSaveConfirmView.js","controller/branch_inputs/render/EC.BranchInputs.renderStoreEditFeedback.js","controller/branch_inputs/render/EC.BranchInputs.updateFormCompletion.js","controller/branch_inputs/store/EC.BranchInputs.amendSkippedValues.js","controller/branch_inputs/store/EC.BranchInputs.buildRows.js","controller/branch_inputs/store/EC.BranchInputs.js","controller/branch_inputs/store/EC.BranchInputs.prepareStoreEdit.js","controller/branch_inputs/store/EC.BranchInputs.saveValuesOnExit.js","controller/branch_inputs/store/EC.BranchInputs.storeData.js","controller/branch_inputs/types/EC.BranchAudio.js","controller/branch_inputs/types/EC.BranchBarcode.js","controller/branch_inputs/types/EC.BranchCheckbox.js","controller/branch_inputs/types/EC.BranchDate.js","controller/branch_inputs/types/EC.BranchDecimal.js","controller/branch_inputs/types/EC.BranchDropdown.js","controller/branch_inputs/types/EC.BranchInteger.js","controller/branch_inputs/types/EC.BranchLocation.js","controller/branch_inputs/types/EC.BranchPhoto.js","controller/branch_inputs/types/EC.BranchRadio.js","controller/branch_inputs/types/EC.BranchText.js","controller/branch_inputs/types/EC.BranchTextarea.js","controller/branch_inputs/types/EC.BranchTime.js","controller/branch_inputs/types/EC.BranchVideo.js","controller/branch_inputs/values/EC.BranchInputs.getCachedInputValue.js","controller/branch_inputs/values/EC.BranchInputs.getCloneValue.js","controller/branch_inputs/values/EC.BranchInputs.getCurrentValue.js","controller/branch_inputs/values/EC.BranchInputs.isEmptyPrimaryKey.js","controller/branch_inputs/values/EC.BranchInputs.setCachedInputValue.js","controller/branch_inputs/values/EC.BranchInputs.validateValue.js","controller/download/EC.Download.js","controller/entries/EC.Entries.getBranchEntriesList.js","controller/entries/EC.Entries.getBranchEntryValues.js","controller/entries/EC.Entries.getEntryValues.js","controller/entries/EC.Entries.getList.js","controller/entries/EC.Entries.js","controller/entries/EC.Entries.renderBranchEntriesList.js","controller/entries/EC.Entries.renderBranchEntryValues.js","controller/entries/EC.Entries.renderCachedList.js","controller/entries/EC.Entries.renderChildEntriesList.js","controller/entries/EC.Entries.renderEntryValues.js","controller/entries/EC.Entries.renderList.js","controller/export/EC.EmailBackup.js","controller/export/EC.Export.saveProjectDataToCSV.js","controller/forms/EC.Forms.getList.js","controller/forms/EC.Forms.renderList.js","controller/inputs/EC.Inputs.js","controller/inputs/navigation/EC.Inputs.backToBranchEntryValuesList.js","controller/inputs/navigation/EC.Inputs.backToEntriesList.js","controller/inputs/navigation/EC.Inputs.backToEntryValuesList.js","controller/inputs/navigation/EC.Inputs.bindBackBtn.js","controller/inputs/navigation/EC.Inputs.gotoNextPage.js","controller/inputs/navigation/EC.Inputs.gotoPrevPage.js","controller/inputs/navigation/EC.Inputs.onNextBtnTapped.js","controller/inputs/navigation/EC.Inputs.onPrevBtnTapped.js","controller/inputs/navigation/EC.Inputs.popInputsTrail.js","controller/inputs/navigation/EC.Inputs.pushInputsTrail.js","controller/inputs/navigation/EC.Inputs.spliceInputsTrail.js","controller/inputs/render/EC.Inputs.prepareFeedback.js","controller/inputs/render/EC.Inputs.prepareFirstInput.js","controller/inputs/render/EC.Inputs.renderFeedbackView.js","controller/inputs/render/EC.Inputs.renderInput.js","controller/inputs/render/EC.Inputs.renderInputView.js","controller/inputs/render/EC.Inputs.renderSaveConfirmView.js","controller/inputs/render/EC.Inputs.renderStoreEditFeedback.js","controller/inputs/store/EC.Inputs.amendSkippedValues.js","controller/inputs/store/EC.Inputs.buildRows.js","controller/inputs/store/EC.Inputs.prepareStoreEdit.js","controller/inputs/store/EC.Inputs.saveValuesOnExit.js","controller/inputs/store/EC.Inputs.storeData.js","controller/inputs/types/EC.AddBranch.js","controller/inputs/types/EC.Audio.js","controller/inputs/types/EC.Barcode.js","controller/inputs/types/EC.Checkbox.js","controller/inputs/types/EC.Date.js","controller/inputs/types/EC.Decimal.js","controller/inputs/types/EC.Dropdown.js","controller/inputs/types/EC.Integer.js","controller/inputs/types/EC.Location.js","controller/inputs/types/EC.Photo.js","controller/inputs/types/EC.Radio.js","controller/inputs/types/EC.Text.js","controller/inputs/types/EC.Textarea.js","controller/inputs/types/EC.Time.js","controller/inputs/types/EC.Video.js","controller/inputs/values/EC.Inputs.getCachedInputValue.js","controller/inputs/values/EC.Inputs.getCloneValue.js","controller/inputs/values/EC.Inputs.getCurrentValue.js","controller/inputs/values/EC.Inputs.getMainFormCurrentKeyValue.js","controller/inputs/values/EC.Inputs.isEmptyPrimaryKey.js","controller/inputs/values/EC.Inputs.setCachedInputValue.js","controller/inputs/values/EC.Inputs.validateValue.js","controller/inputs/values/EC.Inputs.valuesMatch.js","controller/projects/EC.Project.backupCurrentProject.js","controller/projects/EC.Project.js","controller/projects/EC.Project.loadRemoteXML.js","controller/projects/EC.Project.renderAddProjectView.js","controller/projects/EC.Project.request.js","controller/projects/EC.Project.restoreFromBackup.js","controller/settings/EC.Settings.js","controller/upload/EC.Upload.bindUploadButtons.js","controller/upload/EC.Upload.handleMedia.js","controller/upload/EC.Upload.js","controller/upload/EC.Upload.postBranchEntries.js","controller/upload/EC.Upload.postOneBranchEntry.js","controller/upload/EC.Upload.postOneHierarchyEntry.js","controller/upload/EC.Upload.prepareOneBranchEntry.js","controller/upload/EC.Upload.prepareOneHierarchyEntry.js","controller/upload/EC.Upload.renderUploadView.js","controller/upload/EC.Upload.renderUploadViewFeedback.js","controller/upload/EC.Upload.uploadNextFile.js","model/database/Test/EC.Test.insertEntries.js"],"names":["EC","window","Boot","getProjects","setTimeout","navigator","splashscreen","hide","localStorage","is_db_set","Const","SET","console","log","Project","getList","$","when","DBAdapter","init","then","handleDeviceEvents","onBackButton","page_id","mobile","activePage","attr","INDEX","app","exitApp","BARCODE","BRANCH_PREFIX","is_dismissing_barcode","PHOTO","swipebox","isOpen","Routing","goBack","click","removeItem","onResume","document","addEventListener","jqmReady","Deferred","cordovaReady","Utils","isChrome","resolve","JSON","originalParse","parse","text","DEBUG","sessionStorage","app_loaded","clear","undefined","project_server_url","EPICOLLECT_SERVER_URL","bind","autoload_project_url","handleOpenURL","url","project_name_parts","project_name","split","onDeviceReady","DEVICE_LANGUAGE","Localise","setLanguage","BASE_URI","location","href","replace","device","version","setMediaDirPaths","platform","IOS","File","createMediaDirs","setIOSRootPath","setIOSPersistentStoragePath","ANDROID","globalization","getLocaleName","locale","device_language","value","substring","stringify","Object","keys","Dictionary","indexOf","getPreferredLanguage","language","db","openDatabase","indexPageEvents","inputsPageEvents","branchInputsPageEvents","Ui","bindBtnStates","QUERY_LIMIT","ITEMS_PER_PAGE","QUERY_ENTRIES_OFFSET","QUERY_CHILD_ENTRIES_OFFSET","QUERY_PARENT_ENTRIES_OFFSET","FastClick","attach","body","setPhoneUUID","uuid","IDFVPlugin","getIdentifier","result","error","project_names","plugins","appPreferences","fetch","DevicePosition","module","initGoogleMap","self","this","deferred","current_position","google","maps","LatLng","coords","latitude","longitude","map_options","center","lat","lng","zoom","disableDefaultUI","map","Map","getElementById","marker","Marker","position","draggable","circle","Circle","radius","accuracy","fillColor","fillOpacity","strokeColor","strokeOpacity","bindTo","fitBounds","getBounds","event","addListenerOnce","addListener","debug","latLng","Notification","showToast","promise","timeout","is_first_attempt","is_api_loaded","is_enhanced_map_on","parseInt","watchTimeout","Infinity","getCurrentPosition","onSuccess","setCoords","onError","reject","geolocation","maximumAge","enableHighAccuracy","watchPosition","onWatchSuccess","clearWatch","geolocation_request","onWatchError","code","showAlert","getTranslation","message","altitude","altitude_accuracy","altitudeAccuracy","heading","getCoordsFormattedText","getCoordsEmptyText","loadGoogleMapsApi","mapIsLoaded","hasGoodConnection","getScript","done","script","textStatus","fail","jqxhr","settings","exception","updateGoogleMap","the_title","the_message","notification","alert","askConfirm","onConfirmCallback","has_data_to_save","the_current_input","is_branch","response","current_input","_confirmCallback","btn_index","executeFunctionByName","_saveConfirmCallback","showProgressDialog","BranchInputs","saveValuesOnExit","Inputs","confirm","duration","toast","show","a","b","title","loading","textVisible","theme","html","activityStart","ActivityIndicator","hideProgressDialog","activityStop","edit_mode","colors","tap_action_overlay","default_button_background","list_item_background","fa_entry_value_embedded_btn_default","_this","on","e","preventDefault","stopPropagation","css","isNumber","n","isNaN","parseFloat","isFinite","getParameterByName","name","regex","RegExp","results","exec","search","decodeURIComponent","isAudioFileStored","the_cache_path","_the_file_path","file_path","cache_path","file_path_parts","pop","join","generateAudioFileName","filename","getTimestamp","is_good","connection","type","Connection","NONE","UNKNOWN","the_uuid","UUID","getPhoneUUID","_generateGUID","d","Date","getTime","guid","c","r","Math","random","floor","toString","getGenKey","sqlitePlugin","isOpera","opera","userAgent","chrome","sleep","milliseconds","i","start","parseTimestampDate2Posix","the_format","the_type","elements","iLength","format","formatted_elements","length","push","parseDate","the_date","date","day","getDate","month","getMonth","year","getFullYear","format_parts","parsed_date_parts","parseIOSDate","the_ios_date","date_parts","parseTime","hours24","getHours","hours12","minutes","getMinutes","seconds","getSeconds","_addZero","num","parseIOSTime","the_ios_time","time","time_parts","setForms","the_forms","forms","getParentAndChildForms","the_form_id","parent_form_id","parent_form_name","child_form_id","child_form_name","form_id","_id","parent","pname","child","cname","parseLocationString","the_string","string","temp_array","SKIPPED","isURL","regexp","test","isValidEmail","the_email","re","getForms","isGPSEnabled","_onGpsChecked","isEnabled","cordova","diagnostic","isLocationEnabled","functionName","context","args","Array","prototype","slice","call","arguments","splice","namespaces","func","apply","parseJumpString","the_jump_string","raw_jumps","obj","parsed_jumps","jump_to","charAt","jump_when","JUMP_VALUE_IS_NOT","jump_value","substr","JUMP_ALWAYS","JUMP_FIELD_IS_BLANK","JUMP_VALUE_IS","getLocalFormID","the_form_name","isFormGenKeyHidden","is_genkey_hidden","isBranchFormGenKeyHidden","form","branch_form","getLocalInputID","the_ref","inputs","local_input_ids","ref","getFormPrimaryKeyRef","key","projectHasBranches","has_branches","getFormParentPrimaryKeyRef","getFormByID","getEntriesCount","count","entries","getParentFormByChildID","the_child_form_id","updateFormsObj","getChildrenForms","changeHashNavigationDirection","the_hash","the_new_direction","hash","direction","inArray","the_array","the_value","is_case_sensitive","findWord","array","word","item","toLowerCase","getVersionName","version_name","getAppVersion","the_version_name","getAppName","app_name","the_app_name","getExportDirName","dir","getPageBaseURI","base_uri","KITKAT_REGEX","LOLLIPOP_REGEX","ANDROID_ASSETS_ABS_PATH","IOS_ASSETS_ABS_PATH","isValidValue","the_input","the_clone_value","validation","is_valid","input","clone_value","BRANCH","INTEGER","DECIMAL","is_primary_key","ENTRY_ROOT_PATH_SEPARATOR","match","has_double_check","max_range","min_range","is_required","DROPDOWN","RADIO","CHECKBOX","NO_OPTION_SELECTED","fileSystem","documents_path","toURL","root","nativeURL","resolveLocalFileSystemURL","file","applicationDirectory","requestFileSystem","LocalFileSystem","PERSISTENT","IOS_APP_PRIVATE_URI","PHOTO_DIR","AUDIO_DIR","VIDEO_DIR","getIOSFilename","the_filenames","the_current_filename","filenames","current_filename","timestamp","mapLabelToValue","the_inputs","_getInputByRef","_getCheckboxLabels","j","value_as_array","jLength","options","labels","trim","label","_getDropdownOrRadioLabel","mapped_label","hasConnection","network","Config","unique","concat","searchElement","fromIndex","pivot","TypeError","abs","equals","is_strict","sort","String","startsWith","defineProperty","enumerable","configurable","writable","searchString","trunc","hasOwnProperty","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","prop","ANDROID_APP_PRIVATE_URI","TEXT","TEXTAREA","DATE","TIME","LOCATION","AUDIO","VIDEO","BRANCH_VIEWS_DIR","INPUT_VIEWS_DIR","VIEWS_DIR","HTML_FILE_EXT","PHOTO_FILE_EXTENSION","TRANSACTION_SUCCESS","TRANSACTION_ERROR","DELETE","DELETE_SINGLE_ENTRY","RESTORE","INSERT","DOWNLOAD","START_HIERARCHY_UPLOAD","STOP_HIERARCHY_UPLOAD","HIERARCHY_RECURSION","START_BRANCH_UPLOAD","STOP_BRANCH_UPLOAD","BRANCH_RECURSION","ADDING","FORWARD","BACKWARD","EDITING","PREVIOUS","NEXT","VIEW","INDEX_VIEW","UPLOAD_VIEW","DOWNLOAD_VIEW","EMAIL_BACKUP_VIEW","ENTRIES_LIST_VIEW","SETTINGS_VIEW","ADD_PROJECT_VIEW","FORMS_VIEW","SAVE_CONFIRM_VIEW","BRANCH_ENTRIES_LIST_VIEW","BRANCH_SAVE_CONFIRM_VIEW","BRANCH_FEEDBACK_VIEW","PROJECT_NAME_MAX_LENGTH","FORM_NAME_MAX_LENGTH","INPUTS","PROJECT_LIST","FORMS","FILLER","PHOTO_AVAILABLE_LABEL","PHOTO_NOT_AVAILABLE_LABEL","AUDIO_AVAILABLE_LABEL","AUDIO_NOT_AVAILABLE_LABEL","VIDEO_AVAILABLE_LABEL","VIDEO_NOT_AVAILABLE_LABEL","END_OF_FORM","PROXY","CACHED_FILENAME_LENGTH","ENGLISH","ITALIAN","Parse","is_form_genkey_hidden","form_key","project","parsed_forms","branch_inputs","form_inputs_positions","input_list","branch_options","getHierarchyForms","hierarchy_forms","getBranchForms","branch_forms","mapPositionToInput","the_xml","form_children","form_num","positions","main","form_name","hierarchy_skip_key","xml","input_positions","form_position","branch_skip_keys","find","each","children","index","_getInputPosition","parseInputArray","the_raw_array","the_form_num","the_form_type","parseInputObject","the_raw_input","input_position","form_type","parsed_input","datetime_format","has_jump","jumps","has_advanced_jump","is_genkey","default_value","is_searchable","is_title","branch_form_name","parseXML","the_data","form_has_media","form_has_branches","data","malformed_json","json","raw_forms","xml2json","ecml","model","submission","allowDownloadEdits","downloadFromServer","uploadToServer","total_hierarchy_forms","total_branch_forms","form_obj","isArray","barcode","audio","video","photo","textarea","radio","select1","select","branch","total_inputs","has_media","renderInput","getInputAt","branch_current_position","next","trigger","renderSaveConfirmView","renderFeedbackView","changePage","the_view","the_path","page_uri","page","view","transition","reverse","changeHash","allowSamePageTransition","the_page_id","back_btn","inactive_tab","input_views_ids","branch_input_views_ids","hierarchy_views_ids","branch_views_ids","action_views_ids","back_nav_hash","back_nav_url","is_project_deleted","$query_param","delegateTarget","baseURI","Forms","decodeURI","Entries","getEntryValues","Settings","renderView","renderAddProjectView","EmailBackup","renderSendEmailView","Upload","renderUploadView","Download","renderDownloadView","silentScroll","previous_tapped_entry_Y","applyToPlaceholders","getBranchEntriesList","getBranchEntryValues","en","home","help","rate_us","add_project","loading_project","search_project","projects","filter_project","no_projects_found","project_list","type_project_name_here","tap_the","button","add","to","to_add","to_add_one","upload_to","upload_data","upload_images","upload_audios","upload_videos","remote_server_url","pagination","app_version","backup_data","restore_data","email_backup","download_remote_data","unsync_entries","delete_entries","export_all_entries_to_csv","export_all_entries_to_csv_confirm","delete_synced","delete_media","delete_project","show_more","no_entries_found","enter_email","email_backup_to","select_form_download","delete_entry","unsync_entry","prev","record","stop","play","recording","no_audio_available","scan","type_confirm","pk_not_editable","add_branch_form","list_branch_entries","set_location","take_photo","tap_to_store","store","store_edit","data_saved_success","branch_data_saved_success","add_another","list","add_video","play_video","back_to","project_already_loaded","exit","exit_confirm","value_exist","invalid_integer","invalid_decimal","pk_reserved_char","invalid_regex","values_unmatched","out_of_range","reserved_keyword","field_required","invalid_xml","connection_timeout","connection_lost","project_not_found_on_server","project_not_found","unknow_error","leaving_current_form","save_before_leave","edit_saved","missing_pk","gps_disabled","locating","wait","location_acquired","location_fail","location_service_fail","failed_because","download_success","parent_key_for_1","parent_key_for_2","parent_key_for_3","no_internet","invalid_email","invalid_email_client","generic_error","entry_unsynced","entry_deleted","all_data_synced","all_entries_deleted","data_exported_to_csv","all_media_deleted","all_synced_deleted","branch_entry_deleted","delete_branch_entry","delete_entry_confirm","unsync_entry_confirm","delete_entry_with_children_confirm","unsync_all_data","unsync_all_data_confirm","delete_project_confirm","delete_all_entries","delete_all_entries_confirm","delete_all_media","delete_all_media_confirm","delete_all_synced","delete_all_synced_confirm","backup_data_confirm","restore_data_confirm","warning","edited_jump","success","project_backup_success","project_deleted","project_no_spaces_allowed","project_empty_not_allowed","project_restored","upload_error","no_backup_saved","all_images_uploaded","all_audios_uploaded","all_videos_uploaded","uploading","data_upload_success","check_your_internet","settings_saved_success","questions","sending_message","backup_for","backup_for_project","is_attached","select_one_option","photo_available","no_photo","audio_available","no_audio","video_available","no_video","no","save","dismiss","it","project_restored_","the_key","key_to_lookup","translated_string","applyToHTML","the_language","strings","placeholders","Branch","project_insertId","branch_forms_IDs","branch_form_num_index","_errorCB","the_tx","the_result","_commitBranchFormsTX","tx","query","iLenght","id","executeSql","_commitBranchFormsSQLSuccess","insertId","_commitBranchFormsSuccessCB","commitBranchForms","the_branch_forms","the_project_insertId","transaction","branch_max_form_ID","_getHighestIdTX","reset_seq_query","_getHighestIdSQLSuccess","errorCB","_resetSequenceSQLSuccess","rows","_getHighestIdSuccessCB","branch_input_options","branch_inputs_IDs","_commitBranchInputOptionsTX","k","kLength","branch_input_id","_commitBranchInputOptionsSQLSuccess","_commitBranchInputOptionsSuccessCB","commitBranchInputOptions","the_brach_input_options","the_branch_inputs_ids","branch_input_option_index","branch_forms_with_media","_commitBranchInputsTX","current_form_num","current_form_id","input_type","input_ref","_commitBranchInputsSQLSuccess","_commitBranchInputsSuccessCB","commitBranchInputs","the_branch_inputs","the_branch_forms_ids","the_error","cq_ec_projects","cq_ec_forms","cq_ec_branch_forms","cq_ec_inputs","cq_ec_branch_inputs","cq_ec_input_options","cq_ec_branch_input_options","cq_ec_data","cq_ec_branch_data","tq_delete_forms","tq_delete_branch_forms","tq_delete_inputs","tq_delete_branch_inputs","tq_delete_input_options","tq_delete_branch_input_options","tq_delete_ec_data","tq_delete_ec_branch_data","dtq_delete_forms","dtq_delete_branch_forms","dtq_delete_inputs","dtq_delete_branch_inputs","dtq_delete_input_options","dtq_delete_branch_input_options","dtq_delete_ec_data","dtq_delete_ec_branch_data","_initDB","_initSuccessCB","Hierarchy","forms_IDs","form_num_index","_commitFormsSQLSuccess","project_id","Delete","deleteProject","_commitFormsSuccessCB","_commitFormsTX","commitForms","the_forms_object","max_form_ID","_insertFormsSQLSuccess","_insertFormsSuccessCB","_insertFormsTX","input_options","inputs_IDs","_commitOneOption","the_input_id","the_label","input_id","_commitInputOptionsSQLSuccess","_commitInputOptionsTX","_commitInputOptionsSuccessCB","commitInputOptions","the_input_options","the_inputs_ids","input_option_index","forms_with_media","_commitInputsTX","_commitInputsSQLSuccess","_commitInputsSuccessCB","commitInputs","the_inputs_object","the_forms_ids","_commitProjectTX","_commitProjectSQLSuccess","_commitProjectSuccessCB","Select","getProjectRowId","the_project_id","commitProject","the_project_object","Structure","commitAll","the_project","hierarchy_forms_IDs","hierarchy_inputs","hierarchy_inputs_IDs","hierarchy_options","branch_data_rows","branch_form_names","form_counter","branch_form_counter","_getAllProjectEntriesTX","branch_select_query","select_query","_getAllProjectEntriesSQLSuccessCB","_getAllProjectBranchEntriesSQLSuccessCB","_getAllProjectEntriesSuccessCB","current_data_rows","total_entries","data_rows","current_branch_form_name","getAllProjectEntries","allow_download_edits","_getADEFlagTX","_getADEFlagSQLSuccess","_getADEFlagTXSuccessCB","getAllowDownloadEdits","files","_getBranchChildrenFilesSQLSuccessCB","_getBranchChildrenFilesTX","entry_key","_getBranchChildrenFilesSuccessCB","getBranchChildrenFiles","deletion_entries","hierarchy_key_value","offset","titles","full_titles","branch_primary_keys","_getBranchEntriesSuccessCB","setCachedBranchEntryKeys","_getEntriesTitlesTX","_getEntriesTitlesSuccessCB","hierarchy_entry_key_value","_getEntriesTitlesSQLSuccess","full_title","_getBranchEntriesTX","_getBranchEntriesSQLSuccess","query_error_message","getBranchEntries","the_branch_form_name","the_hierarchy_entry_key_value","the_offset","entry_keys","_getEntryKeys","_getEntryKeysSQLSuccess","_getEntryKeysSuccessCB","getBranchEntryKeys","values","_getBranchEntryValuesTX","_getBranchEntryValuesSQLSuccess","current_input_id","_getBranchEntryValuesSuccessCB","the_entry_key","hierarchy_entry_key","_selectBranchFilesSQLSuccessCB","_getBranchFilesTX","select_branch_files_query","_getBranchFilesSuccessCB","getBranchFiles","the_hierarchy_entry_key","_getBranchFormDetailsTX","_getBranchFormDetailsSQLSuccess","_getBranchFormDetailsSuccessCB","getBranchFormDetails","mapped_branch_forms","_getBranchFormLocalIDsTX","_getBranchFormLocalIDsSQLSuccess","_getBranchFormLocalIDsSuccessCB","getBranchFormLocalIDs","the_branch_form_names","_getBranchFormsSuccessCB","_getBranchFormsSQLSuccess","_getBranchFormsTX","has_jumps","branch_input_options_ids","_getBranchInputsSuccessCB","_getBranchInputOptionsTX","_getBranchInputOptionsSuccessCB","_getBranchInputsSQLSuccess","_getBranchInputOptionsSQLSuccess","_getBranchInputsTX","getBranchInputs","branch_entry_keys","cached_keys","form_level_keys","mapped_branch_inputs","_getBranchInputsLocalIDsTX","_getBranchInputsLocalIDsSQLSuccess","_getBranchInputsLocalIDsSuccessCB","getBranchInputsLocalIDs","hierarchy_entry_keys","_getBranchSyncedFilesSuccessCB","_getBranchSyncedFilesSQLSuccessCB","_getBranchSyncedFilesTX","getBranchSyncedFiles","the_hierarchy_entry_keys","children_offset","prev_parent_children","parent_offset","form_total_inputs","parent_form_total_entries","form_total_entries","is_loading_more","query_limit","new_request","parents","parent_counter","children_counter","nested_children_counter","_getChildEntriesParentsTX","_getChildEntriesParentsSQLSuccess","_getChildEntriesParentsSuccessCB","_getAllChildrenTX","_getAllChildrenSuccessCB","appendMoreChildEntries","renderChildEntriesList","_getAllChildrenSQLSuccessCB","child_full_title","row","_getNestedChildrenCountTX","_getNestedChildrenCountSuccessCB","total_children_loaded","getNextParentChildEntries","parent_path","form_tree","_getNestedChildrenCountSQLSuccessCB","nested_children_count","getChildEntries","the_parent_offset","the_children_offset","the_total_of_children_loaded","getMoreChildEntries","last_parent","parent_key","child_entries","child_counters","parent_entries","_getChildEntriesForDeletionSQLSuccessCB","amount","_getChildEntriesForDeletionTX","_getChildEntriesForDeletionSuccessCB","getChildEntriesForDeletion","_getCountBranchEntriesTX","_getCountBranchEntriesSuccessCB","getCountBranchEntries","the_hierarchy_key_value","_getChildrenCountTX","breadcrumb_trail","breadcrumbs","_getChildrenCountSQLSuccessCB","_getChildrenCountSuccessCB","appendMoreEntries","child_counter","primary_keys","_getEntriesSuccessCB","_getChildrenCount","_getEntriesTX","_getEntriesSQLSuccess","renderList","getEntries","the_parent_key","getEntryKeys","branches","_getEntryValues","_getEntryValuesSQLSuccess","_getEntryValuesSuccessCB","the_parent_path","total_synced_rows","total_entries_rows","total_media_files","total_branch_media_files","total_all_synced_rows","button_states","_getFormsSuccessCB","_getDataInfoTX","_getDataInfoSuccessCB","has_data_synced_query","has_entries_query","has_media_query","has_all_synced_query","_onDataSyncedSQLSuccess","_onHasEntriesSQLSuccess","_onHasMediaSQLSuccess","_onHasAllSyncedSQLSuccess","branch_form_with_media_ids","delete_media_files","delete_synced_entries","hasBranchMediaFiles","is_media_found","_getFormsTX","_getFormsSQLSuccess","immediate_parent_key_value","full_parent_path","_getFullParentPathSQLSuccess","_getFullParentPathSuccessCB","_getFullParentPathTX","getFullParentPath","the_immediate_parent_key_value","_getHierarchyChildrenFilesSQLSuccessCB","_getHierarchyChildrenFilesTX","_getHierarchyChildrenFilesSuccessCB","getHierarchyChildrenFiles","the_form","counters","_getHierarchyEntriesForDeletionSQLSuccessCB","_getHierarchyEntriesForDeletionTX","_getHierarchyEntriesForDeletionSuccessCB","getHierarchyEntriesForDeletion","_selectHierarchyFilesSQLSuccessCB","_getHierarchyFilesTX","_getHierarchyFilesSuccessCB","getHierarchyFiles","_getHierarchySyncedFilesSuccessCB","_getHierarchySyncedFilesSQLSuccessCB","_getHierarchySyncedFilesTX","getHierarchySyncedFiles","has_location","input_options_ids","_getInputsSuccessCB","_getInputOptionsTX","_getInputOptionsSuccessCB","_getInputsSQLSuccess","_getInputOptionsSQLSuccess","_getInputsTX","getInputs","input_ids","getLocalInputIDs","_getInputsIDsTX","_getInputsIDsSuccessCB","_getInputsIDsSQLSuccess","_getProjectRowIdSuccessCB","_getProjectRowIdSQLSuccess","_getProjectRowIdTX","the_project_name","_getProjectsSuccessCB","_getProjectsTX","_getProjectsSQLSuccess","_getSyncedEntryKeysTX","_getSyncedEntryKeysSQLSuccess","_getSyncedEntryKeysSuccessCB","getSyncedEntryKeys","branch_forms_ids","_getBranchMediaFileSuccessCB","_getBranchMediaFileSQLSuccess","_getBranchMediaFileTX","_getOneBranchAudioFileTX","getOneBranchAudioFileSQLSuccess","_getOneBranchAudioFileSuccessCB","getOneBranchAudioFile","branch_entry_values","branch_entry_key","branch_entry","_getOneEntryKeyTX","_getOneEntryKeySQLSuccess","_getOneBranchEntryTX","_getOneBranchEntrySuccessCB","current_branch_form","shift","getOneBranchEntry","action","renderUploadViewFeedback","_getOneBranchEntrySQLSuccess","location_string","location_obj","values_counter","created_on","hierarchy_entry_key_ref","current_branch_entry","prepareOneBranchEntry","_getOneEntryKeySuccessCB","_getOneHierarchyEntryKeyValueTX","_getOneHierarchyEntryKeyValueSQLSuccess","_getOneHierarchyEntryKeyValueSuccessCB","is_called_from_view","media_type","_getOneBranchMediaFileTX","getOneBranchMediaFileSQLSuccess","_getOneBranchMediaFileSuccessCB","getOneBranchMediaFile","image","_getOneHierarchyMediaPerTypeTX","hierarchy_query","_getOneImageSQLSuccess","_getOneAudioSQLSuccess","_getOneVideoSQLSuccess","_getOneHierarchyMediaPerTypeSuccessCB","getOneHierarchyMediaPerType","_getOneBranchPhotoFileTX","getOneBranchPhotoFileSQLSuccess","_getOneBranchPhotoFileSuccessCB","getOneBranchPhotoFile","_getOneBranchVideoFileTX","getOneBranchVideoFileSQLSuccess","_getOneBranchVideoFileSuccessCB","getOneBranchVideoFile","entry","hierarchy_entry_values","_getParentRef","_getOneHierarchyEntryTX","_getOneHierarchyEntrySuccessCB","current_form","getOneHierarchyEntry","_getOneHierarchyEntrySQLSuccess","parent_ref","path","parent_key_value","current_entry","prepareOneHierarchyEntry","_getOneHierarchyMediaFileTX","getOneHierarchyMediaFileSQLSuccess","_getOneHierarchyMediaFileSuccessCB","getOneHierarchyMediaFile","hierarchy_image","hierarchy_audio","hierarchy_video","upload_URL","_getProjectURLTX","getProjectURLSQLSuccess","_getProjectURLSuccessCB","setUploadURL","getUploadURL","Update","form_values","_insertFormValuesTX","_insertFormValuesSQLSuccessCB","_insertFormValuesSuccessCB","commitBranchForm","the_form_values","rows_deleted","deleted_entries","_getDeletedTotal","the_rows_deleted","total_deleted","_updateEntriesCountSuccessCB","_updateEntriesCountTX","_onUpdateEntriesCountSQLSuccess","countSyncedDeleted","_emptyMediaValuesTX","branch_query","_emptyMediaValuesSQLSuccessCB","_emptyMediaValuesErrorCB","_emptyBranchMediaValuesSQLSuccessCB","_emptyMediaValuesSuccessCB","emptyMediaValues","the_hierarchy_forms","row_id","is_branch_file","_flagOneFileAsSyncedTX","table","_flagOneFileAsSyncedSuccessCB","flagOneFileAsSynced","the_row_id","the_is_branch_file_flag","branch_rows_to_sync","_updateDataSyncedFlagTX","_updateDataSyncedFlagSuccessCB","setBranchEntryAsSynced","the_branch_rows_to_sync","main_form_key_value","cached_branch_entry_keys","_updateStoredFlagTX","_updateStoredFlagSQLSuccess","_updateStoredFlagSuccessCB","setCachedBranchesAsStored","the_cached_branch_entry_keys","the_main_form_key_value","rows_to_sync","setHierarchyEntryAsSynced","the_hierarchy_rows_to_sync","_unsyncAllEntriesTX","_unsyncAllEntriesSQLSuccess","_unsyncAllEntriesErrorCB","_unsyncAllBranchEntriesSQLSuccess","_unsyncAllEntriesSuccessCB","unsyncAllEntries","rows_to_unsync","_unsyncOneHierarchyEntryTX","update_query","_unsyncOneHierarchyEntrySQLSuccess","_unsyncOneHierarchyEntryErrorCB","_unsyncOneHierarchyEntrySuccessCB","_unsyncBranchEntriesTX","_unsyncBranchEntriesSuccessCB","_unsyncBranchEntriesSQLSuccess","unsyncOneHierarchyEntry","the_rows","updateCountersOnEntriesDownload","_updateCountersOnEntriesDownloadTX","_updateCountersOnEntriesDownloadCB","forms_data_left","old_forms","forms_data_restored","updateCountersOnEntriesRestore","the_amount","the_forms_data_left","is_active","_updateCountersOnEntriesRestoreTX","_updateCountersOnEntriesRestoreSuccessCB","_updateCountersOnSingleBranchEntryInsertionTX","_updateCountersOnSingleBranchEntryInsertionSuccessCB","updateCountersOnSingleBranchEntryInsertion","_doUpdate","_updateCountersOnSingleEntryDeletionTX","_updateCountersOnSingleEntryDeletionSuccessCB","updateCountersOnSingleEntryDeletion","the_counters","updateCountersOnSingleEntryInsertion","_updateCountersOnSingleEntryInsertionTX","_updateCountersOnSingleEntryInsertionSuccessCB","branch_to_store","_updateCountersOnSyncedEntriesDeletionSuccessCB","_updateCountersOnSyncedEntriesDeletionTX","updateCountersOnSyncedEntriesDeletion","_updateHierarchyEntryValuesSQLSuccessCB","_updateHierarchyEntryValuesTX","_updateHierarchyEntryValuesSuccessCB","updateHierarchyEntryValues","Create","_parseLocationObjToString","the_location_obj","bearing","_insertEntryValues","the_current_remote_entry","the_current_remote_entry_key","the_current_remote_timestamp","remote_ref_value","remote_ref_value_location","current_remote_entry","current_remote_entry_key","current_remote_timestamp","_insertNewRowSQLSuccessCB","remote_entry","updated_entries_counter","entry_key_ref","local_entries_keys","_getFormLocalDataTX","query_entry_key","query_inputs","_getFormPrimaryKeysSQLSuccessCB","_getFormInputsSQLSuccessCB","dre_inputs","dre_local_entries_keys","_insertTopFormValuesTX","created","_insertChildFormValuesTX","_updateLocalRowWithRemoteTX","_updateLocalRowWithRemoteSQLSuccessCB","_updateLocalRowWithRemoteSuccessCB","_getFormLocalDataSuccessCB","immediate_parent_form","hierarchy_entry_key_value_ref","_insertTopFormValuesSuccessCB","the_full_parent_path","_insertChildFormValuesSuccessCB","commitRemoteEntry","the_remote_entry","branch_rows","mapped_input_ids","_getLocalBranchFormID","the_name","_getLocalBranchInputID","_insertBranchDataRowsTX","local_branch_form_id","local_branch_input_id","is_data_synced","is_media_synced","is_cached","is_stored","remote_flag","_insertBranchFormValuesSQLSuccessCB","_insertBranchDataRowsSuccessCB","insertBranchDataRows","the_branch_forms_data","the_mapped_branch_forms","the_mapped_input_ids","branch_form_values","_insertBranchFormValuesTX","_insertBranchFormValuesSuccessCB","branch_form_id","insertBranchFormValues","the_branch_form_values","the_key_value","main_form_entry_key","insertFormValues","single_entry_values","single_entry_key","local_form_id","hierarchy_forms_data","_insertSingleEntryValues","the_entry_values","_insertSingleEntryValuesTX","_insertSingleEntryValuesSuccessCB","insertAllFormsData","the_hierarchy_data","insertEntries","the_single_form_values","current_entry_key","current_entry_values","local_input_id","_insertSingleEntryValuesSQLSuccessCB","_deleteAllEntriesTX","delete_branches_query","delete_query","update_count_query","_deleteAllEntriesSQLSuccessCB","_deleteAllEntriesErrorCB","_deleteAllEntriesSuccessCB","deleteAllMedia","deleteAllEntries","the_action","_doDeletion","removeSyncedHierarchyEntries","_deleteSynced","deletion_counters","deletion_files","remove","_handleBranches","the_entry_keys","the_files","removeSyncedBranchEntries","the_current_form","deletion_synced_entry_keys","deleteAllSynced","rows_to_delete","media_types","_deleteBranchEntryTX","stored","_deleteBranchEntryErrorCB","_deleteBranchEntrySuccessCB","deleteBranchEntry","_deleteCachedBranchEntriesTX","_deleteCachedBranchEntriesSQLSuccessCB","_deleteCachedBranchEntriesSuccessCB","deleteCachedBranchEntries","_doChildrenDeletion","removeHierarchyChildrenEntries","children_forms","current_child_form","_removeChildren","the_entries","_handleChildBranches","removeLinkedBranchChildEntries","child_hierarchy_files","child_branch_files","deleteChildEntries","removeLinkedBranchEntries","removeHierarchyEntry","deleteEntry","the_current_form_id","_deleteProjectTX","res","_deleteProjectSQLSuccessCB","_deleteProjectErrorCB","_deleteProjectSuccessCB","_removeHierarchyChildrenEntriesTX","_removeHierarchyChildrenEntriesSuccessCB","_removeHierarchyEntryTX","_removeHierarchyEntrySuccessCB","_removeLinkedBranchChildEntriesTX","_removeLinkedBranchChildEntriesSuccessCB","_removeLinkedBranchEntriesSQLSuccessCB","_removeLinkedBranchEntriesTX","_removeLinkedBranchEntriesSuccessCB","_removeSyncedBranchEntriesTX","_removeSyncedBranchEntriesSuccessCB","_removeSyncedHierarchyEntriesTX","_removeSyncedHierarchyEntriesSuccessCB","_writeFile","the_content","gotFS","the_fileSystem","backup_path","fullPath","getFile","create","exclusive","gotFileEntry","fileEntry","createWriter","gotFileWriter","writer","onwritestart","onwriteend","evt","txt_content","write","backup","video_path","cached_filename","copyVideo","the_video_path","is_branch_flag","onLFSSuccess","the_video_file_entry","the_file_system","fs","copyTo","externalCacheDirectory","resolveLocalFileSystemURI","onCreateSuccess","_createMediaDir","onCreateFail","media_dir","dirs","getDirectory","are_media_folders_created","onIOSRFSSuccess","onIOSRFSError","dataDirectory","has_project_been_deleted","the_media_dirs","app_private_dir_path","media_dirs","_onDirSuccess","the_dir","dir_entry","_onDirDeleted","_onDirDeleteError","removeRecursively","_onDirError","hasBackup","gotBackupSuccess","gotBackupFail","gotFSfail","move","_getMediaDir","the_file_type","onDirReadSuccess","the_dir_entries","processEntry","the_entry","the_parent_dir","onGetDirectorySuccess","onMovedOK","buildRows","onMovedFail","parent_dir","destination","project_dir","stored_filename","moveTo","onGetDirectoryFail","onLFSError","stored_filepath","parts","dir_entries","onFileError","onDirReadError","createReader","readEntries","cached_filepath","cached","moveVideo","the_cache_video_uri","_removeOneFile","full_path","_onGetFileSuccess","_onGetFileError","the_file_entry","file_entry","_onRemoveSuccess","_onRemoveError","restoreFromBackup","readAsText","reader","FileReader","onloadend","target","forms_data","branch_data","uploadFile","the_file_row","the_media_dir","file_URI","app_private_dir","ft","FileTransfer","_doUpload","is_branch_image","is_branch_audio","is_branch_video","mimeType","fileKey","fileName","onprogress","progressEvent","upload","_onFileUploadSuccess","_onFileUploadError","the_project_url","uploadNextFile","handleMedia","writeProjectDataAsCSV","onGotFS","filesystem","onCreateDirSuccess","zip_content","folder","export_dir","csv","zip","JSZip","Papa","unparse","quotes","delimiter","newline","generate","compression","externalRootDirectory","the_position","getPrimaryKeyRefPosition","branch_edit_position","setInputs","prepareFirstInput","the_has_jumps_flag","branch_inputs_total","branch_form_has_jumps","getFormDetails","the_primary_keys","all_branches_keys","current_branch_form_primary_keys","is_branch_form_cached","getCachedBranchEntryKeys","getJumpDestinationPosition","backToHierarchyForm","current_input_position","back_from_branch","bindBackBtn","is_data_saved","back_btn_label","off","one","is_jump_found","_checkJumps","the_jumps","the_current_value","branch_destination_position","branch_destination","current_value","gotoNextPage","branch_current_input","next_branch_input","next_page","next_branch_value","is_branch_genkey_hidden","is_checkbox","pushInputsTrail","setCachedInputValue","gotoPrevPage","prev_page","branch_inputs_trail","prev_input_position","prev_input","popInputsTrail","onNextBtnTapped","wls","branch_input","branch_edit_id","branch_edit_type","getCurrentValue","branch_cached_value","getCachedInputValue","validateValue","branch_edit_mode","valuesMatch","branch_has_new_jump_sequence","onPrevBtnTapped","branch_current_value","primary_key","spliceInputsTrail","how_many_to_remove","prepareFeedback","the_status","status","the_first_input","first_input_position","branch_inputs_values","add_another_entry_btn","back_to_main_btn","first_branch_input","prev_btn","next_btn","is_prev_button_hidden","removeClass","renderInputView","addClass","prepareStoreEdit","updateFormCompletion","the_branch_input","branch_value","BranchInputTypes","integer","decimal","checkbox","dropdown","store_btn","store_edit_btn","percentage_bar","percentage_txt","onStoreValues","renderStoreEditFeedback","is_positive","the_length","ratio","ceil","amendSkippedValues","max_skipped_position","is_found","the_filenameToTimestamp","value_obj","filename_parts","extension","key_position","hierarchy_key_position","ios_filenames","key_value","is_remote","branch_edit_hash","branch_edit_key_value","parent_key_position","the_current_position","form_has_jumps","getCloneValue","storeData","the_ctx","branch_media_files","getCachedMediaFiles","val","isEmptyPrimaryKey","recordAudio","header_btns","stop_btn","stopRecordAudio","record_btn","play_btn","ongoing_recording_spinner","current_path","mediaRec","Media","audio_feedback","cached_audio_uri","err","startRecord","stopRecord","release","stopPlayingAudio","current_audio","playAudio","onPlayStatusChange","audio_full_path_uri","span_label","stored_audio_uri","TEMPORARY","double_entry","clone","scanner","scanner_confirm","scan_result","scan_result_confirm","barcodeScanner","cancelled","CHECKBOX_CHECKED","DISABLED","HTML","option_value","option_label","option_id","append","datepicker","ios_datepicker","selected_date","datePicker","mode","allowOldDates","returned_date","new_date","blur","focus","ios_date","removeAttr","SELECTED","option_index","input_holder","_showAcquiredLocation","accuracy_result","accuracy_tip","set_location_result","set_location_btn","_getLocation","requestPosition","onGCPSuccess","onGCPError","requests","empty","app_storage_dir","image_full_path_uri","camera_btn","store_image_uri","cache_image_uri","canvas_portrait_dom","canvas_landscape_dom","canvas_portrait","canvas_landscape","context_portrait","getContext","clearRect","width","height","context_landscape","iOS_popup","popup","_renderThumb","the_image_uri","Image","source","src","onerror","onload","thumb_height","thumb_width","canvas","imageSmoothingEnabled","drawImage","restore","Camera","PictureSourceType","CAMERA","camera_options","quality","destinationType","DestinationType","FILE_URI","sourceType","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","correctOrientation","saveToPhotoAlbum","targetWidth","targetHeight","camera","getPicture","onGPSuccess","onGPError","image_uri","RADIO_CHECKED","timepicker","ios_timepicker","ios_time","timeStamp","video_full_path_uri","cached_path","video_sd_path","video_btn","play_video_btn","store_video_uri","cache_video_uri","ios_video_player_wrapper","ios_video_player","_renderVideo","the_video_file_path","the_cached_filename","load","onCaptureVideoSuccess","the_media_object","the_cached_video_path","temp_cache_path","video_full_path","onCaptureVideoError","current_cached_video","videoPlayer","limit","capture","captureVideo","branch_values","empty_value","got_value","checkboxes_values","is_empty_primary_key","is_primary_key_flag","checkbox_values","_isUniqueValue","current_branch_form_keys","_commitRemoteEntry","the_single_remote_entry","parent_form","chosen_form_id","chosen_form_name","_performRequest","the_url","ajax","crossDomain","dataType","request","responseText","fetchRemoteData","form_btn","dom_list","_form_btn_handler","getMainFormCurrentKeyValue","the_branch_entries","renderBranchEntriesList","the_hash_to_parse","is_child_form_nav","branch_entry_values_url","the_values","renderBranchEntryValues","nav_parent_path","current_view_url_parts","breadcrumbs_trail","current_view_url","back_edit_nav_url","setItem","renderEntryValues","entries_totals","getItem","entries_total","load_more_parameters","cached_entries_list","unsyncEntry","inputs_values","panel","forms_list_items","allMediaDeletedFeedback","allEntriesDeletedFeedback","_allSyncedDeletedFeedback","current_count_holder","current_form_list_item","forms_list","new_count","addEntry","edit_position","exportAllEntriesToCSV","Export","saveProjectDataToCSV","_bindBackBtn","_buildList","current_entries_total","load_more_btn","load_more_spinner","getMoreEntries","listview","getMoreBranchEntries","appendMoreBranchEntries","totals","_bindActionBarBtns","ctx_menu_btn","delete_branch_entry_btn","entry_value_edit_btn","dropdown_label","radio_label","data_synced","nav_drawer_btn","home_btn","settings_btn","add_entry_btn","reached_settings_view_from","renderCachedList","back_children","trail","back_href","header","inactive_label","action_bar_btn","active_tab","inactive_tab_hash","inactive_tab_label","back_url","_buildChildEntriesList","the_form_tree","full_parent","the_child_entries","active_label","selected_list","hasClass","unsync_entry_btn","delete_entry_btn","entry_value_btn","input_page_href","inputs_trail","active_key","active_tab_label","watch_position","form_has_location","branch_total_entries","empty_entries_list","empty_entries_list_form_name","top","cached_entries","mailto","_getBackupPath","subject","back_btn_href","mailto_holder","send_email_btn","plugin","email","isServiceAvailable","is_available","open","cc","bcc","attachments","isHtml","_parseFormAllEntries","has_parent_flag","single_entry_raw","has_parent","_parseSingleEntry","the_single_raw_entry","parent_key_ref","parent_key_ref_value","temp","location_value","single_entry_parsed","parsed_forms_json","params","has_backup","the_btn_states","upload_btn","the_button_states","navbar_label","email_backup_btn","download_remote_data_btn","unsync_all_entries_btn","delete_project_btn","delete_all_entries_btn","delete_synced_entries_btn","delete_media_files_btn","backup_project_data_btn","restore_from_backup_btn","export_data_to_csv_btn","btn_states","the_has_location_flag","backToBranchEntryValuesList","backToEntriesList","has_cached","backToEntryValuesList","parent_path_array","destination_position","inputs_length","next_input","next_value","edit_id","edit_type","cached_value","has_new_jump_sequence","inputs_total","back_nav_hash_parts","list_entries_btn","add_child_btn","first_input","branchFormCacheReady","branchEntriesCacheReady","InputTypes","addBranch","the_count","the_branch_form","clearListeners","media_files","_getCachedMediaFiles","add_branch_btn","list_branch_entries_btn","list_entries_count","_addBranchEntry","_listBranchEntries","now","lastFocus","has_got_location","map_canvas","textarea_coords","setPosition","setOptions","_handleSetLocation","cached_coords","branch_entries","the_cached_value","the_input_type","is_matching","matches_count","_projectBackupFeedback","mail_backup_btn","backupCurrentProject","_autoload","the_project_to_autoload","project_to_autoload","project_params","project_xml_URL","add_project_btn","the_projects","renderEmptyList","ios_project_form_url","navbar","loadRemoteXML","cached_project_names","epicollect_server_url","load_project_btn","input_value","autocomplete_spinning_loader","project_url","_load","_loadProjectFromXML","request_timeout","$ul","$input","request_delay","clearTimeout","tagName","innerText","the_project_xml_url","is_project_xml_valid","_restoreFeedback","the_input_ids","project_server_url_holder","pagination_radio_btns","save_btn","version_name_label","enhance_map_checkbox","is","checked","history","back","checkboxradio","bindUploadButtons","the_has_hard_reload_flag","back_button_label","has_hard_reload","upload_data_btn","upload_images_btn","upload_audios_btn","upload_videos_btn","all_synced_message","hierarchy_rows_to_sync","is_branch_entry","current_image_file","current_audio_file","current_video_file","audio_synced","photo_synced","video_synced","_audioCheck","the_audio","_photoCheck","the_image","_videoCheck","the_video","main_rows_to_post","main_entries","upload_data_feedback","postBranchEntries","postOneBranchEntry","branch_entry_post_obj","param","postOneHierarchyEntry","_sendRequest","hierarchy_entry_post_obj","the_table","ecTimeCreated","ecPhoneID","appendBranchEntryValue","the_entry_value","current_ref","main_entry_key","parent_value","appendEntryValue","_onOneHierarchyEntryFound","_onOneHierarchyEntryNotFound","_onOneBranchEntryFound","the_branch_entry","_onOneBranchEntryNotFound","is_successful","the_media_type","the_branch_image","the_branch_audio","the_branch_video","Test","_makeString","how_long","possible","total","_onupdateHierarchyEntriesCounterSQLCB","_updateHierarchyEntriesCounterTX","_onCounterUpdateSuccessCB","the_total"],"mappings":"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16B,QAAAC,IAAA,iCACAD,QAAAC,IAAAy6B,GACA16B,QAAAC,IAAAb,GAAA8C,MAAA8f,oBAEAhb,GACA5H,GAAAm4B,OCZA,IAAAn4B,IAAAA,MACAA,IAAAkB,UAAAlB,GAAAkB,cACAlB,GAAAkB,UAAA,WACA,YAgBA,IAAA8G,GAGAuzB,GAAA,GACA,6CACA,4DACA,gBACA,8CACA,2CACA,iCACA,yBACA,6BACA,0CACA,kBAAA,sBACA,gCACA,qBACAnqB,KAAA,IAIAoqB,GAAA,GAAA,0CACA,+DACA,kCACA,gBACA,kBACA,eACA,2BACA,kCACA,qCACA,yCACA,gCACA,kFAEA,oBAAApqB,KAAA,IAIAqqB,GAAA,GAAA,iDAEA,+DACA,kCACA,gBACA,kBACA,eACA,2BACA,kCACA,yCACA,gCACA,kFAEA,oBAAArqB,KAAA,IAIAsqB,GAAA,GACA,4CACA,gEACA,gCACA,cACA,sBACA,gBACA,wBACA,gBACA,4BACA,uBACA,8BACA,oBACA,sBACA,0BACA,sBACA,6BACA,yBACA,iBACA,sBACA,gBACA,gCACA,0BACA,2BACA,yEACA,iBACA,MACAtqB,KAAA,IAIAuqB,GAAA,GACA,mDACA,gEACA,gCACA,cACA,sBACA,gBACA,wBACA,gBACA,4BACA,uBACA,8BACA,oBACA,sBACA,0BACA,sBACA,6BACA,yBACA,iBACA,sBACA,gBACA,gCACA,0BACA,gFAEA,iBACA,MACAvqB,KAAA,IAIAwqB,GAAA,GACA,kDACA,+DACA,iCACA,wBACA,0BACA,2BACA,6EACA,iBACA,MACAxqB,KAAA,IAGAyqB,GAAA,GACA,yDACA,+DACA,iCACA,wBACA,0BACA,2BACA,oFAEA,iBACA,MACAzqB,KAAA,IAGA0qB,GAAA,GACA,yCACA,+DACA,gCACA,+BACA,gCACA,sCACA,qCACA,iBACA,eACA,iCACA,6BACA,gBACA,uCACA,wCACA,kCACA,yBACA,6EACA,iBACA,MACA1qB,KAAA,IAGA2qB,GAAA,GACA,gDACA,+DACA,gCACA,+BACA,qCACA,mCACA,gCACA,qCACA,iBAC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","file":"build-android.js","sourcesContent":["/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device, onDeviceReady*/\nvar EC = window.EC || {};\nEC.Boot = EC.Boot || {};\n\nEC.Boot.getProjects = function () {\n    'use strict';\n\n    window.setTimeout(function () {\n        navigator.splashscreen.hide();\n    }, 1000);\n\n    //if database already set, just list projects\n    if (window.localStorage.is_db_set === EC.Const.SET) {\n        console.log('getting list');\n        EC.Project.getList();\n    }\n    else {\n\n        //Initialise database BEFORE listing empty project view\n        $.when(EC.DBAdapter.init()).then(function () {\n\n            //database is set\n            window.localStorage.is_db_set = EC.Const.SET;\n            //window.localStorage.stress_test = EC.Const.SET;\n            EC.Project.getList();\n        });\n    }\n}\n","/* jslint vars: true , nomen: true devel: true, plusplus: true*/\n/* global $, jQuery, cordova, device, onDeviceReady*/\nvar EC = window.EC || {};\nEC.Boot = EC.Boot || {};\n\nEC.Boot.handleDeviceEvents = function () {\n    'use strict';\n    /**\n     * Handle back button on Android devices\n     */\n    window.onBackButton = function () {\n\n        var page_id = $.mobile.activePage.attr('id');\n\n        //if the current page is the home page and the user press the back button, exit\n        // app\n        if (page_id === EC.Const.INDEX) {\n            navigator.app.exitApp();\n        }\n        else {\n\n            //check if user pressed back button while doing a barcode scan\n            if ((page_id === EC.Const.BARCODE || page_id === EC.Const.BRANCH_PREFIX + EC.Const.BARCODE ) && window.localStorage.is_dismissing_barcode) {\n                window.localStorage.removeItem('is_dismissing_barcode');\n            }\n            else {\n\n                if ((page_id === EC.Const.PHOTO || page_id === EC.Const.BRANCH_PREFIX + EC.Const.PHOTO) && $.swipebox.isOpen) {\n                    // close swipebox on back button (Android)\n                    $('a#swipebox-close').click();\n                }\n                else {\n                    EC.Routing.goBack(page_id);\n                }\n            }\n            //navigator.app.backHistory();\n        }\n    }\n\n//handle app resume\n    window.onResume = function () {\n        console.log('App resumed');\n    };\n    document.addEventListener('resume', window.onResume, false);\n};\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device, onDeviceReady*/\nvar EC = window.EC || {};\nEC.Boot = EC.Boot || {};\n\n/**\n * Init application triggering onDeviceReady when both jQuery Mobile and Cordova\n * are ready\n *\n * Also disable console.log() when debugging is off (EC.Const.DEBUG is set manually)\n */\nEC.Boot.init = function () {\n    'use strict';\n\n\n    //wait for both JQM pageinit and PG onDeviceReady before doing anything\n    var jqmReady = $.Deferred();\n    var cordovaReady = $.Deferred();\n\n    //handle device events\n    EC.Boot.handleDeviceEvents();\n\n    //manually trigger ondeviceready on Chrome browser  only\n    if (EC.Utils.isChrome()) {\n        console.log('deviceready Chrome');\n        cordovaReady.resolve();\n    }\n\n    //fix JSON.parse bug for old Android V8 Javascript\n    JSON.originalParse = JSON.parse;\n    JSON.parse = function (text) {\n\n        if (text) {\n            return JSON.originalParse(text);\n        }\n        // no longer crashing on null value but just returning null\n        return [];\n\n    };\n\n    //disable console.log if not debugging\n    if (EC.Const.DEBUG === 0) {\n        console.log = function () {\n            //\n        };\n    }\n\n    //check if we are launching a new instance of the app on the device\n    if (!window.sessionStorage.app_loaded && !EC.Utils.isChrome()) {\n        window.localStorage.clear();\n    }\n\n    //set default server url for projects if no one is defined\n    if (window.localStorage.project_server_url === undefined) {\n        console.log('EC.Const.EPICOLLECT_SERVER_URL - ' + EC.Const.EPICOLLECT_SERVER_URL);\n        window.localStorage.project_server_url = EC.Const.EPICOLLECT_SERVER_URL;\n    }\n\n    //resolve when jqm page is ready\n    $(document).bind('pageinit', jqmReady.resolve);\n\n    //resolve when Cordova ready\n    document.addEventListener('deviceready', cordovaReady.resolve, false);\n\n    //attach global handler to be used when opening app using custom scheme\n    //scheme://key=value\n    window.localStorage.autoload_project_url = '';\n    window.handleOpenURL = function (url) {\n\n        console.log('handleOpenURL called with ' + url);\n\n        var project_name_parts;\n        var project_name;\n\n        if (url) {\n\n            project_name_parts = url.split('://project?');\n            //project_name = url.replace('epicollect5://project?', '');\n            project_name = project_name_parts[1];\n            project_name = 'http://' + project_name;\n            window.localStorage.autoload_project_url = project_name;\n\n            EC.Boot.getProjects();\n        }\n    };\n\n    // all ready, trigger app!\n    $.when(jqmReady, cordovaReady).then(function () {\n        console.log('both JQM and Cordova triggered init event');\n        EC.Boot.onDeviceReady();\n    });\n\n};\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device, onDeviceReady*/\nvar EC = window.EC || {};\nEC.Boot = EC.Boot || {};\n\nEC.Boot.onDeviceReady = function () {\n\n    'use strict';\n\n    if (!EC.Utils.isChrome()) {\n\n\n\n        console.log('OS version: ' + window.device.version);\n\n        //set media dir paths based on platform\n        EC.Utils.setMediaDirPaths();\n\n        //request iOS persistent file system\n        if (window.device.platform === EC.Const.IOS) {\n\n            //create media folders 'images', 'audios', 'videos'\n            $.when(EC.File.createMediaDirs()).then(function () {\n\n                //set iOS app root path at run time as app identifier can change\n                EC.Utils.setIOSRootPath();\n\n                //cache persistent storage path\n                EC.Utils.setIOSPersistentStoragePath();\n\n            });\n\n        }\n\n        if (window.device.platform === EC.Const.ANDROID) {\n\n            //create Android media folders\n            $.when(EC.File.createMediaDirs()).then(function () {\n                console.log('Android media folders created');\n            });\n\n            navigator.globalization.getLocaleName(function (locale) {\n\n                var device_language = locale.value.substring(0, 2);\n\n                console.log('ANDROID language: ' + JSON.stringify(locale) + '\\n');\n\n                console.log(JSON.stringify(Object.keys(EC.Dictionary)));\n\n                //if the device language is not localised default to English\n                if (Object.keys(EC.Dictionary).indexOf(device_language) !== -1) {\n                    //set language globally getting the first part of locale.value\n                    window.localStorage.DEVICE_LANGUAGE = device_language;\n                }\n                else {\n                    //fallback to English as default language\n                    window.localStorage.DEVICE_LANGUAGE = 'en';\n                }\n\n                EC.Localise.setLanguage(window.localStorage.DEVICE_LANGUAGE);\n\n            }, function () {\n                console.log('Error getting locale\\n');\n\n                //fallback to English as default language\n                window.localStorage.DEVICE_LANGUAGE = 'en';\n                EC.Localise.setLanguage(window.localStorage.DEVICE_LANGUAGE);\n\n            });\n        }\n\n        if (window.device.platform === EC.Const.IOS) {\n            navigator.globalization.getPreferredLanguage(function (language) {\n\n                var device_language = language.value.substring(0, 2);\n\n                //if the device language is not localised default to English\n                if (Object.keys(EC.Dictionary).indexOf(device_language) !== -1) {\n                    //set language globally getting the first part of locale.value\n                    window.localStorage.DEVICE_LANGUAGE = device_language;\n                }\n                else {\n                    //fallback to English as default language\n                    window.localStorage.DEVICE_LANGUAGE = 'en';\n                }\n\n                EC.Localise.setLanguage(window.localStorage.DEVICE_LANGUAGE);\n\n                console.log('IOS language: ' + language.value + '\\n');\n            }, function () {\n                console.log('Error getting language\\n');\n                //fallback to English as default language\n                window.localStorage.DEVICE_LANGUAGE = 'en';\n                EC.Localise.setLanguage(window.localStorage.DEVICE_LANGUAGE);\n            });\n        }\n\n    }\n    else {\n        //fallback to English as default language\n        window.localStorage.DEVICE_LANGUAGE = 'en';\n        EC.Localise.setLanguage(window.localStorage.DEVICE_LANGUAGE);\n\n        //set base URI for debugging on Chrome\n        window.localStorage.BASE_URI = window.location.href.replace('index.html', '');\n    }\n\n    EC.db = EC.Utils.openDatabase();\n\n    //Deal with JQM page events\n    EC.Routing.indexPageEvents();\n    EC.Routing.inputsPageEvents();\n    EC.Routing.branchInputsPageEvents();\n\n    //Bind button states and overlays\n    EC.Ui.bindBtnStates();\n\n    //set pagination parameters\n    if (!window.localStorage.QUERY_LIMIT) {\n        window.localStorage.QUERY_LIMIT = EC.Const.ITEMS_PER_PAGE;\n    }\n    window.localStorage.QUERY_ENTRIES_OFFSET = 0;\n    window.localStorage.QUERY_CHILD_ENTRIES_OFFSET = 0;\n    window.localStorage.QUERY_PARENT_ENTRIES_OFFSET = 0;\n\n    window.sessionStorage.app_loaded = 0;\n\n    $(function () {\n        FastClick.attach(document.body);\n    });\n\n    if (!EC.Utils.isChrome()) {\n\n        document.addEventListener('backbutton', window.onBackButton, false);\n\n        //set the device UUID (depending on platform)\n        switch (window.device.platform) {\n\n            //on Android, it is possible to uniquely track a device (at the time of writing,\n            // KitKat 4.4.2 is the latest release)\n            case EC.Const.ANDROID:\n                EC.Utils.setPhoneUUID(device.uuid);\n                break;\n\n            case EC.Const.IOS:\n                window.IDFVPlugin.getIdentifier(function (result) {\n                    console.log('Vendor ID:' + result);\n                    EC.Utils.setPhoneUUID(result);\n                }, function (error) {\n                    console.log(error);\n                    EC.Utils.setPhoneUUID('no_ios_id_available');\n                });\n                break;\n\n        }\n\n    }\n    else {\n        EC.Utils.setPhoneUUID('Chrome_Beta');\n    }\n\n    if (!window.localStorage.project_names) {\n        window.localStorage.project_names = JSON.stringify([]);\n    }\n\n    //test referrer on Android platform\n    if (window.device) {\n        if (window.device.platform === EC.Const.ANDROID) {\n\n            window.plugins.appPreferences.fetch(function (value) {\n                console.log('Referrer value is ****************************' + value);\n            }, function (error) {\n                console.log('Referrer value error! ************************' + JSON.stringify(error));\n            }, 'referrer');\n        }\n    }\n\n    EC.Boot.getProjects();\n}\n","/*global $, jQuery, cordova, device, ActivityIndicator, Connection*/\nvar EC = EC || {};\nEC.DevicePosition = EC.DevicePosition || {};\nEC.DevicePosition = (function (module) {\n    'use strict';\n\n    module.initGoogleMap = function () {\n\n        var self = this;\n        var deferred = new $.Deferred();\n\n        self.current_position = new google.maps.LatLng(self.coords.latitude, self.coords.longitude);\n        self.map_options = {\n            center: {lat: self.coords.latitude, lng: self.coords.longitude},\n            zoom: 16,\n            disableDefaultUI: true\n        };\n\n        self.map = new google.maps.Map(document.getElementById('map-canvas'), self.map_options);\n        //add current user position\n        self.marker = new google.maps.Marker({\n            position: self.current_position,\n            map: self.map,\n            draggable: true\n        });\n\n        //draw accuracy circle\n        self.circle = new google.maps.Circle({\n            center: self.current_position,\n            radius: self.coords.accuracy,\n            map: self.map,\n            fillColor: '#0000FF',\n            fillOpacity: 0.2,\n            strokeColor: '0',\n            strokeOpacity: 0\n        });\n\n        self.marker.bindTo('position', self.circle, 'center');\n        self.map.fitBounds(self.circle.getBounds());\n\n        //let's use 'idle' event and a 2 secs timeout, to play it safe\n        // 'tilesloaded' could not be fire if there are network problems\n        window.google.maps.event.addListenerOnce(self.map, 'idle', function () {\n            window.setTimeout(function () {\n                deferred.resolve();\n            }, 2000);\n        });\n\n        window.google.maps.event.addListener(self.marker, 'dragend', function (event) {\n            console.debug('final position is ' + event.latLng.lat() + ' / ' + event.latLng.lng());\n            self.coords.latitude = event.latLng.lat();\n            self.coords.latitude = event.latLng.lng();\n            EC.Notification.showToast('Marker dragged by user', 'short');\n        });\n\n        return deferred.promise();\n    };\n\n    return module;\n\n}(EC.DevicePosition));\n","/*global $, jQuery, cordova, device, ActivityIndicator*/\nvar EC = EC || {};\nEC.DevicePosition = EC.DevicePosition || {};\nEC.DevicePosition = (function (module) {\n    'use strict';\n\n    module.map = {};\n    module.marker = {};\n    module.circle = {};\n    module.coords = {};\n    module.current_position = {};\n    module.map_options = {};\n    module.timeout = 30000;\n    module.is_first_attempt = true;\n    module.is_api_loaded = false;\n    //the 'is_enhanced_map_on' flag changes a lot, if the device loses connection and stuff, so it is a good idea to always request it via a function\n    module.is_enhanced_map_on = function () {\n        return parseInt(window.localStorage.is_enhanced_map_on, 10) === 1;\n    };\n\n    module.watchTimeout = function () {\n        //set unlimited timeout for watch position to avoid timeout error on iOS when the device does not move\n        // see http://goo.gl/tYsBSC, http://goo.gl/jYQhgr, http://goo.gl/8oR1g2\n        return (window.device.platform === EC.Const.IOS) ? Infinity : 30000;\n    };\n\n    module.getCurrentPosition = function () {\n\n        var deferred = new $.Deferred();\n        var self = this;\n\n        //resolve passing position to caller\n        function onSuccess(position) {\n            self.setCoords(position);\n            deferred.resolve();\n        }\n\n        function onError(error) {\n            console.log(error);\n            deferred.reject();\n        }\n\n        navigator.geolocation.getCurrentPosition(onSuccess, onError, {\n            maximumAge: 0,\n            timeout: self.timeout,\n            enableHighAccuracy: true\n        });\n\n        return deferred.promise();\n    };\n\n    module.watchPosition = function () {\n\n        var deferred = new $.Deferred();\n        var geolocation_request;\n        var timeout = EC.DevicePosition.watchTimeout();\n        var self = this;\n\n        function onWatchSuccess(position) {\n\n            console.log('onWatchSuccess called, accuracy: ' + position.coords.accuracy);\n\n            //get HTML5 geolocation coords values replacing null with '' for not available values\n            self.setCoords(position);\n            //clear the current watch\n            window.navigator.geolocation.clearWatch(geolocation_request);\n            deferred.resolve(true);\n        }\n\n        //onError Callback\n        function onWatchError(error) {\n\n            console.log(error);\n            window.navigator.geolocation.clearWatch(geolocation_request);\n\n            switch (error.code) {\n                case 1:\n                    if (window.device.platform === EC.Const.IOS) {\n                        EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('location_service_fail'));\n                    }\n                    break;\n                case 3:\n                    EC.Notification.showAlert(EC.Localise.getTranslation('error'), error.message + EC.Localise.getTranslation('location_fail'));\n                    break;\n                default :\n                    EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('unknow_error'));\n            }\n            deferred.resolve(false);\n        }\n\n        //on first attempt, get a quick and rough location just to get started\n        //We do not use getCurrentPosition as it tends to give back a cached position when is it called, not looking for a new one each time\n        if (self.is_first_attempt) {\n            geolocation_request = navigator.geolocation.watchPosition(onWatchSuccess, onWatchError, {\n                maximumAge: 0,\n                timeout: timeout,\n                enableHighAccuracy: true\n            });\n            self.is_first_attempt = false;\n        }\n        else {\n\n            /*\n             on subsequent calls, check position for 3 secs and return.\n             this will improve cases when watchPositionretunr immediately with the same value, as it might return more than once during the 3 secs period\n             */\n            window.setTimeout(function () {\n\n                //be safe in case after 3 secs we still do not have a location, and resolve to show old values\n                window.navigator.geolocation.clearWatch(geolocation_request);\n                deferred.resolve(true);\n                console.log('setTimeout called without location');\n            }, 30000);\n\n            //get location using watchPosition for more accurate results, It is called automatically when movement is detected,\n            //not only when requesting it. Do thjis when user wants to improve location\n            geolocation_request = navigator.geolocation.watchPosition(onWatchSuccess, onWatchError, {\n                maximumAge: 0,\n                timeout: timeout,\n                enableHighAccuracy: true\n            });\n        }\n\n        return deferred.promise();\n    };\n\n    module.setCoords = function (position) {\n\n        var self = this;\n        //get HTML5 geolocation coords values replacing null with '' for not available values\n        self.coords = {\n            latitude: (position.coords.latitude === null) ? '' : position.coords.latitude,\n            longitude: (position.coords.longitude === null) ? '' : position.coords.longitude,\n            altitude: (position.coords.altitude === null) ? '' : position.coords.altitude,\n            accuracy: (position.coords.accuracy === null) ? '' : position.coords.accuracy,\n            altitude_accuracy: (position.coords.altitudeAccuracy === null) ? '' : position.coords.altitudeAccuracy,\n            heading: (position.coords.heading === null) ? '' : position.coords.heading\n        };\n    };\n\n    module.getCoordsFormattedText = function () {\n\n        return 'Latitude: ' + this.coords.latitude + ',\\n' + //\n            'Longitude: ' + this.coords.longitude + ',\\n' + //\n            'Altitude: ' + this.coords.altitude + ',\\n' + //\n            'Accuracy: ' + this.coords.accuracy + ',\\n' + //\n            'Altitude Accuracy: ' + this.coords.altitude_accuracy + ',\\n' + //\n            'Heading: ' + this.coords.heading + '\\n';\n\n    };\n\n    module.getCoordsEmptyText = function () {\n        return 'Latitude: ,\\n' + 'Longitude: ,\\n' + 'Altitude: ,\\n' + 'Accuracy: ,\\n' + 'Altitude Accuracy: ,\\n' + 'Heading: \\n';\n    };\n\n    return module;\n}(EC.DevicePosition));\n","/*global $, jQuery, cordova, device, ActivityIndicator, Connection*/\nvar EC = EC || {};\nEC.DevicePosition = EC.DevicePosition || {};\nEC.DevicePosition.loadGoogleMapsApi = function () {\n    'use strict';\n\n    var deferred = new $.Deferred();\n\n    //callback from Google Maps API needs to be in the global scope\n    window.mapIsLoaded = function () {\n        // EC.DevicePosition.is_api_loaded = true;\n        deferred.resolve();\n    };\n\n    //is the Api already loaded?\n    if (window.google !== undefined && window.google.maps) {\n        console.log('Maps API cached already');\n        //if no connection, exit and warn user todo\n        if (EC.Utils.hasGoodConnection()) {\n            //load API from server\n            //connection looks good, try to load tiles\n            deferred.resolve();\n        }\n        else {\n            //could not load API\n            deferred.reject();\n        }\n    }\n    else {\n\n        if (EC.Utils.hasGoodConnection()) {\n\n            $.getScript('https://maps.googleapis.com/maps/api/js?sensor=true&callback=mapIsLoaded')\n                .done(function (script, textStatus) {\n                    console.log(textStatus);\n                })\n                .fail(function (jqxhr, settings, exception) {\n                    console.log(jqxhr + exception);\n                    deferred.reject();\n                });\n        }\n        else {\n            //could not load API\n            deferred.reject();\n        }\n    }\n\n    return deferred.promise();\n};\n\n\n\n\n\n\n","/*global $, jQuery, cordova, device, ActivityIndicator, Connection*/\nvar EC = EC || {};\nEC.DevicePosition = EC.DevicePosition || {};\nEC.DevicePosition = (function (module) {\n    'use strict';\n\n    module.updateGoogleMap = function () {\n\n        var self = this;\n        var deferred = new $.Deferred();\n\n        //get info from map on the dom: if the details are the same, we are navigation to an existing map on the dom, no need to update\n\n        self.current_position = new google.maps.LatLng(self.coords.latitude, self.coords.longitude);\n        self.map_options = {\n            center: {lat: self.coords.latitude, lng: self.coords.longitude},\n            zoom: 16,\n            disableDefaultUI: true\n        };\n\n        self.map = new google.maps.Map(document.getElementById('map-canvas'), self.map_options);\n        //add current user position\n        self.marker = new google.maps.Marker({\n            position: self.current_position,\n            map: self.map,\n            draggable: true\n        });\n\n        //draw accuracy circle\n        self.circle = new google.maps.Circle({\n            center: self.current_position,\n            radius: self.coords.accuracy,\n            map: self.map,\n            fillColor: '#0000FF',\n            fillOpacity: 0.2,\n            strokeColor: '0',\n            strokeOpacity: 0\n        });\n\n        self.marker.bindTo('position', self.circle, 'center');\n        self.map.fitBounds(self.circle.getBounds());\n\n        //let's use 'idle' event and a 2 secs timeout, to play it safe\n        // 'tilesloaded' could not be fire if there are network problems\n        window.google.maps.event.addListenerOnce(self.map, 'idle', function () {\n            window.setTimeout(function () {\n                deferred.resolve();\n            }, 2000);\n        });\n\n        window.google.maps.event.addListener(self.marker, 'dragend', function (event) {\n            console.debug('final position is ' + event.latLng.lat() + ' / ' + event.latLng.lng());\n            self.coords.latitude = event.latLng.lat();\n            self.coords.latitude = event.latLng.lng();\n            EC.Notification.showToast('Marker dragged by user', 'short');\n        });\n\n        return deferred.promise();\n    };\n\n    return module;\n\n}(EC.DevicePosition));\n","/*global $, jQuery, cordova, device, ActivityIndicator*/\n\nvar EC = EC || {};\nEC.Notification = EC.Notification || {};\nEC.Notification = (function () {\n    'use strict';\n\n    /*\n     *\tDisplay native alert popup based on the platform we are running the\n     * app on\n     */\n    var showAlert = function (the_title, the_message) {\n        if (navigator.notification && !EC.Utils.isChrome()) {\n            navigator.notification.alert(the_message, null, the_title, 'ok');\n        } else {\n            alert(the_title ? the_title + ': ' + the_message : the_message);\n        }\n\n    };\n\n    var askConfirm = function (the_title, the_message, onConfirmCallback, has_data_to_save, the_current_input, is_branch) {\n\n        var current_input = the_current_input;\n        var response;\n\n        if (navigator.notification && !EC.Utils.isChrome()) {\n\n            var _confirmCallback = function (btn_index) {\n                console.log('btn_index: ' + btn_index);\n\n                if (btn_index === 1) {\n                    EC.Utils.executeFunctionByName(onConfirmCallback, window);\n                } else {\n                    return;\n                }\n            };\n\n            var _saveConfirmCallback = function (btn_index) {\n\n                switch (btn_index) {\n\n                    case 1:\n                        //exit without saving current form data\n                        EC.Utils.executeFunctionByName(onConfirmCallback, window);\n                        break;\n\n                    case 2:\n                        //save data before leaving form\n                        EC.Notification.showProgressDialog();\n\n                        if (is_branch) {\n                            EC.BranchInputs.saveValuesOnExit(current_input);\n                        } else {\n                            EC.Inputs.saveValuesOnExit(current_input);\n                        }\n\n                        break;\n                    default:\n                        return;\n                }\n\n            };\n\n            //cordova async confirm\n            if (has_data_to_save) {\n                //we have a third option: save the data before exiting\n                navigator.notification.confirm(the_message, _saveConfirmCallback, the_title, [EC.Localise.getTranslation('no'), EC.Localise.getTranslation('save'), EC.Localise.getTranslation('dismiss')]);\n            } else {\n                //normal confirmation just 2 options (Android and iOS options\n                // order is inverted, use iOS order)\n\n                if (window.device.platform === EC.Const.IOS) {\n                    navigator.notification.confirm(the_message, _confirmCallback, the_title, [EC.Localise.getTranslation('confirm'), EC.Localise.getTranslation('dismiss')]);\n                }\n\n                if (window.device.platform === EC.Const.ANDROID) {\n                    navigator.notification.confirm(the_message, _confirmCallback, the_title, [EC.Localise.getTranslation('confirm'), EC.Localise.getTranslation('dismiss')]);\n                }\n\n            }\n\n        } else {\n\n            //standard javascript confirm, synced call\n            response = confirm(the_title ? the_title + ': ' + the_message : the_message);\n            if (response) {\n                EC.Utils.executeFunctionByName(onConfirmCallback, window);\n            } else {\n                return;\n            }\n        }\n\n    };\n\n    /*\n     * Show a native toast notification (All platforms)\n     */\n    var showToast = function (text, duration) {\n\n        var toasts;\n\n        //show only an alert when testing on browser\n        if (EC.Utils.isChrome()) {\n            alert(text);\n            return;\n        }\n\n        window.plugins.toast.show(text, duration, 'bottom', function (a) {\n            // console.log('toast success: ' + a);\n        }, function (b) {\n            alert('toast error: ' + b);\n        });\n\n    };\n\n    /*\n     * Show a progress dialog (spinning loader)\n     */\n    var showProgressDialog = function (the_title, the_message) {\n\n        var title = the_title;\n        var message = the_message;\n        var ActivityIndicator;\n\n        if (EC.Utils.isChrome()) {\n\n            $.mobile.loading('show', {\n                text: the_message,\n                textVisible: true,\n                theme: 'a',\n                html: ''\n            });\n\n        } else {\n\n            switch (window.device.platform) {\n\n                case EC.Const.ANDROID:\n                    navigator.notification.activityStart(title || '', message || 'Loading...');\n                    break;\n\n                case EC.Const.IOS:\n\n                    window.ActivityIndicator.show(message);\n                    break;\n\n            }\n        }\n\n    };\n\n    /*\n     * Hide progress dialog\n     */\n    var hideProgressDialog = function () {\n\n        var ActivityIndicator;\n\n        if (EC.Utils.isChrome()) {\n\n            $.mobile.loading('hide');\n            return;\n\n        }\n\n        console.log('Platform: ' + device.platform);\n\n        switch (window.device.platform) {\n\n            case EC.Const.ANDROID:\n                /*\n                 * here we use a timeout as the activityStop() is buggy,\n                 * sometimes does not trigger if other js code is running.\n                 * Setting a timeout seems to fix the problems\n                 */\n                window.setTimeout(function () {\n                    navigator.notification.activityStop();\n                }, 500);\n                break;\n\n            case EC.Const.IOS:\n\n                if (window.ActivityIndicator) {\n\n                    //if edit mode remove it without timeout\n                    if (window.localStorage.edit_mode) {\n                        window.ActivityIndicator.hide();\n                    } else {\n                        window.setTimeout(function () {\n                            window.ActivityIndicator.hide();\n                        }, 500);\n                    }\n\n                }\n\n                break;\n\n        }\n    };\n\n    return {\n        showAlert: showAlert,\n        askConfirm: askConfirm,\n        showToast: showToast,\n        showProgressDialog: showProgressDialog,\n        hideProgressDialog: hideProgressDialog\n    };\n\n}());\n","/* jslint vars: true , nomen: true devel: true, plusplus: true*/\n/* global $, jQuery*/\nvar EC = EC || {};\nEC.Ui = EC.Ui || {};\nEC.Ui = {\n\n  \n\n    colors: {\n        tap_action_overlay: '#2a6fc3',\n        default_button_background: '#EEEEEE',\n        list_item_background: '#DDDDDD',\n        fa_entry_value_embedded_btn_default: '#000000'\n    },\n\n    bindBtnStates: function () {\n        'use strict';\n        \n        var _this = this;\n\n        //bind events to apply hover effect on buttons (Action Bar)\n        $(document).on('vmousedown', 'div.ui-btn-right', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css('background-color', _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', 'div.ui-btn-right', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css('background', 'none');\n\n        });\n\n        //bind events to apply hover effect on action buttons large (Action Bar top left)\n        $(document).on('vmousedown', 'div.h-nav-item', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', 'div.h-nav-item', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background\", \"none\");\n\n        });\n\n        //bind events to apply hover effect on navigation list item (sidebar options)\n        $(document).on('vmousedown', 'li.v-nav-item', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', 'li.v-nav-item', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.list_item_background);\n\n        });\n\n        //bind events to apply hover effect on autocomplete list items\n        $(document).on('vmousedown', 'li.h-nav-item', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', 'li.h-nav-item', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.list_item_background);\n\n        });\n\n        // //bind events to apply hover effect on navbar(secondary navigation)\n        $(document).on('vmousedown', 'li.inactive-tab', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', 'li.inactive-tab', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.default_button_background);\n\n        });\n\n        //bind events to apply hover effect on prev/next button on inputs page (secondary navigation)\n        $(document).on('vmousedown', '.input-prev-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', '.input-prev-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.default_button_background);\n\n        });\n\n        //bind events to apply hover effect on prev/next button on inputs page (secondary navigation)\n        $(document).on('vmousedown', '.input-next-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', '.input-next-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.default_button_background);\n\n        });\n\n        //bind events to apply hover effect on embedded buttons\n        $(document).on('vmousedown', 'div.embedded-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', 'div.embedded-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.default_button_background);\n\n        });\n\n        //bind events to apply hover effect on embedded buttons\n        $(document).on('vmousedown', 'i.fa-ep-entry-value-embedded-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', 'i.fa-ep-entry-value-embedded-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"color\", _this.colors.fa_entry_value_embedded_btn_default);\n\n        });\n\n        //bind events to apply hover effect on \"show more\" buttons\n        $(document).on('vmousedown', '.more-items-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.tap_action_overlay);\n\n        });\n\n        $(document).on('vmouseup', '.more-items-btn', function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            $(this).css(\"background-color\", _this.colors.default_button_background);\n\n        });\n\n    }\n};\n\n","/*global $, jQuery, cordova, Connection, LocalFileSystem*/\n\nvar EC = EC || {};\nEC.Utils = EC.Utils || {};\nEC.Utils = (function () {\n    'use strict';\n\n    var UUID;\n    var project = {};\n    var forms = [];\n\n    //UUID is the phone ID set by Phonegap (see Phonegap docs)\n    var setPhoneUUID = function (the_uuid) {\n        this.UUID = the_uuid;\n        console.log('device UUID: ' + this.UUID);\n    };\n\n    var getPhoneUUID = function () {\n        return this.UUID;\n    };\n\n    //return a v4 GUID\n    var _generateGUID = function () {\n        var d = new Date().getTime();\n        var guid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n        });\n        return guid;\n    };\n\n    //auto gen key is based ion GUID v4\n    var getGenKey = function () {\n        //auto generate a unique key in the form <guid>_<timestamp>\n        return _generateGUID();\n    };\n\n    //return UNIX Epoch timestamp (seconds, 10 digits)\n    var getTimestamp = function () {\n        return Math.floor((new Date().getTime()) / 1000);\n    };\n\n    //open db based on platform\n    var openDatabase = function () {\n\n        if (EC.Utils.isChrome()) {\n            console.log('chrome websql db init');\n            //Chrome Chrome\n            return window.openDatabase('epicollect', '1.0', 'Epicollect', 5 * 1024 * 1024);\n\n        }\n\n        console.log('native SQLite db init');\n\n        //native implementation via SQLite plugin\n        return window.sqlitePlugin.openDatabase({\n            name: 'epicollect'\n        });\n        //return window.sqlitePlugin.openDatabase({name: 'epicollect',\n        // bgType: 0});\n\n    };\n\n    //check if the environment is the Chrome browser (using feature detection\n    // http://goo.gl/x4jcS) so we will have to trigger deviceready manually\n    // and also NOT call any Phonegap functions\n    var isChrome = function () {\n        var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n        // Opera 8.0+ (UA detection to detect Blink/v8-powered Opera)\n        return !!window.chrome && !isOpera;\n    };\n\n\n    var sleep = function (milliseconds) {\n\n        var i;\n        var start = new Date().getTime();\n        for (i = 0; i < 1e7; i++) {\n            if ((new Date().getTime() - start) > milliseconds) {\n                break;\n            }\n        }\n    };\n\n    /*\n     * Parse the specified date format(Timestamp mask) to POSIX standards\n     * (DateBox)\n     */\n    var parseTimestampDate2Posix = function (the_format, the_type) {\n\n        var format = the_format;\n        var type = the_type;\n        var elements;\n        var formatted_elements = [];\n        var i;\n        var iLength;\n\n        //split format based on its type\n        elements = (type === 'date') ? format.split('/') : format.split(':');\n\n        iLength = elements.length;\n        for (i = 0; i < iLength; i++) {\n\n            switch (elements[i]) {\n\n                case 'dd':\n                    formatted_elements.push('%d');\n                    break;\n\n                case 'MM':\n                    formatted_elements.push('%m');\n                    break;\n\n                case 'yyyy':\n                    formatted_elements.push('%Y');\n                    break;\n\n                case 'YYYY':\n                    formatted_elements.push('%Y');\n                    break;\n\n                //hours in 24 format\n                case 'HH':\n                    formatted_elements.push('%H');\n                    break;\n\n                //hours in 12 format\n                case 'hh':\n                    formatted_elements.push('%I');\n                    break;\n\n                case 'mm':\n                    formatted_elements.push('%M');\n                    break;\n\n                case 'ss':\n                    formatted_elements.push('%S');\n                    break;\n            }//switch\n\n        }//for\n\n        return (type === 'date') ? formatted_elements.join('/') : formatted_elements.join(':');\n\n    };\n\n    /** Parse a JS date according to the specified format.\n     *  On Android, date is returned by the datePicker Phonegap plugin in the\n     * form of yyyy/mm/dd\n     *  and it is converted to a javascript date\n     *\n     *  @param {the_date} a JS Date object\n     *  @param {the_format} the format to parse the date to for presentation\n     *  Returns the formatted string\n     */\n    var parseDate = function (the_date, the_format) {\n\n        var date = the_date;\n        var format = the_format;\n        var day = date.getDate();\n        var month = date.getMonth() + 1;\n        //months start from 0\n        var year = date.getFullYear();\n\n        var format_parts = format.split('/');\n        var parsed_date_parts = [];\n        var i;\n        var iLength = format_parts.length;\n\n        for (i = 0; i < iLength; i++) {\n\n            switch (format_parts[i]) {\n\n                case 'dd':\n                    parsed_date_parts.push(day);\n                    break;\n                case 'MM':\n                    parsed_date_parts.push(month);\n                    break;\n                case 'yyyy':\n                    parsed_date_parts.push(year);\n                    break;\n            }\n\n        }\n\n        return parsed_date_parts.join('/');\n\n    };\n\n    /**\n     * Parse an iOS input type='date' value according to the specified\n     * format.\n     * The HTML5 date input specification [1] refers to the RFC3339\n     * specification [2], which specifies a full-date     format equal to:\n     * yyyy-mm-dd\n     * Returns the formatted string\n     */\n    var parseIOSDate = function (the_ios_date, the_format) {\n\n        var date = the_ios_date;\n        var date_parts = date.split('-');\n        var format = the_format;\n        var day = date_parts[2];\n        var month = date_parts[1];\n        var year = date_parts[0];\n\n        var format_parts = format.split('/');\n        var parsed_date_parts = [];\n        var i;\n        var iLength = format_parts.length;\n\n        for (i = 0; i < iLength; i++) {\n\n            switch (format_parts[i]) {\n\n                case 'dd':\n                    parsed_date_parts.push(day);\n                    break;\n                case 'MM':\n                    parsed_date_parts.push(month);\n                    break;\n                case 'yyyy':\n                    parsed_date_parts.push(year);\n                    break;\n            }\n\n        }\n\n        return parsed_date_parts.join('/');\n\n    };\n\n    //Parse time according to the specified format. Returns the formatted\n    // time string\n    var parseTime = function (the_date, the_format) {\n\n        var date = the_date;\n        var format = the_format;\n        var hours24 = date.getHours();\n        var hours12 = ((hours24 + 11) % 12) + 1;\n        var minutes = date.getMinutes();\n        var seconds = date.getSeconds();\n\n        var format_parts = format.split(':');\n        var parsed_date_parts = [];\n        var i;\n        var iLength = format_parts.length;\n\n        var _addZero = function (num) {\n            return (num >= 0 && num < 10) ? '0' + num : num;\n        };\n        for (i = 0; i < iLength; i++) {\n            switch (format_parts[i]) {\n                case 'hh':\n                    parsed_date_parts.push(hours12);\n                    break;\n                case 'HH':\n                    parsed_date_parts.push(_addZero(hours24));\n                    break;\n                case 'mm':\n                    parsed_date_parts.push(_addZero(minutes));\n                    break;\n                case 'ss':\n                    parsed_date_parts.push(_addZero(seconds));\n                    break;\n            }\n        }\n        return parsed_date_parts.join(':');\n    };\n\n    /**\n     * Parse time according to the specified format.\n     * @param {the_ios_time} time in the form HH:mm:ss\n     * @para, {the_format} format to display time\n     * Returns the formatted time string\n     */\n    var parseIOSTime = function (the_ios_time, the_format) {\n\n        var time = the_ios_time;\n        var format = the_format;\n\n        var time_parts = time.split(':');\n\n        var hours24 = parseInt(time_parts[0], 10);\n        var hours12 = ((hours24 + 11) % 12) + 1;\n        var minutes = parseInt(time_parts[1], 10);\n        var seconds = parseInt(time_parts[2], 10);\n\n        var format_parts = format.split(':');\n        var parsed_date_parts = [];\n        var i;\n        var iLength = format_parts.length;\n\n        var _addZero = function (num) {\n            return (num >= 0 && num < 10) ? '0' + num : num;\n        };\n        for (i = 0; i < iLength; i++) {\n            switch (format_parts[i]) {\n                case 'hh':\n                    parsed_date_parts.push(hours12);\n                    break;\n                case 'HH':\n                    parsed_date_parts.push(_addZero(hours24));\n                    break;\n                case 'mm':\n                    parsed_date_parts.push(_addZero(minutes));\n                    break;\n                case 'ss':\n                    parsed_date_parts.push(_addZero(seconds));\n                    break;\n            }\n        }\n        return parsed_date_parts.join(':');\n    };\n\n    var setProject = function (the_project) {\n\n        this.project = the_project;\n    };\n\n    var getProject = function () {\n\n        return this.project;\n    };\n\n    var setForms = function (the_forms) {\n\n        this.forms = the_forms;\n\n        window.localStorage.forms = JSON.stringify(this.forms);\n\n    };\n\n    /*\n     * form tree is defined by @num sequence, i.e form num=2 is always the\n     * child of form num=1 and so on\n     *\n     * @return an object { parent: <id>, pname: <parent name>, child: <id>,\n     * cname: <child name>} with an id of 0 if parent or\n     * child is not applicable\n     */\n    var getParentAndChildForms = function (the_form_id) {\n\n        //get forms object if it is not defined\n        this.forms = this.forms || JSON.parse(window.localStorage.forms);\n\n        var form_id = parseInt(the_form_id, 10);\n        var i;\n        var iLength = this.forms.length;\n        var parent_form_id;\n        var parent_form_name;\n        var child_form_id;\n        var child_form_name;\n\n        for (i = 0; i < iLength; i++) {\n\n            //get current form num\n            if (parseInt(this.forms[i]._id, 10) === form_id) {\n\n                if (i - 1 === -1) {\n                    //return 0 if this is the top parent form in the tree\n                    parent_form_id = 0;\n                    parent_form_name = '';\n\n                }\n                else {\n                    parent_form_id = this.forms[i - 1]._id;\n                    parent_form_name = this.forms[i - 1].name;\n                }\n\n                if (i + 1 === iLength) {\n\n                    child_form_id = 0;\n                    child_form_name = '';\n\n                }\n                else {\n                    //return 0 if this is the bottom child in the tree\n                    child_form_id = this.forms[i + 1]._id;\n                    child_form_name = this.forms[i + 1].name;\n                }\n\n                return {\n                    parent: parent_form_id,\n                    pname: parent_form_name,\n                    child: child_form_id,\n                    cname: child_form_name\n                };\n\n            }\n\n        }//for\n\n    };\n\n    /*\n     * Parse location string returning a json object with all the properties\n     * in the form property: value\n     *\n     * Also remove any new line or carriage return from the values\n     *\n     * if the value is skipped, return an object with empty properties\n     */\n    var parseLocationString = function (the_string) {\n\n        var string = the_string;\n        var coords = {};\n        var temp_array = string.split(',');\n\n\n        if (temp_array[0] === EC.Const.SKIPPED) {\n            coords.latitude = '';\n            coords.longitude = '';\n            coords.altitude = '';\n            coords.accuracy = '';\n            coords.heading = '';\n\n        }\n        else {\n            coords.latitude = parseFloat(temp_array[0].replace('Latitude: ', '').replace(/(\\r\\n|\\n|\\r)/gm, ''));\n            coords.longitude = parseFloat(temp_array[1].replace('Longitude: ', '').replace(/(\\r\\n|\\n|\\r)/gm, ''));\n            coords.altitude = parseFloat(temp_array[2].replace('Altitude: ', '').replace(/(\\r\\n|\\n|\\r)/gm, ''));\n            coords.accuracy = parseFloat(temp_array[3].replace('Accuracy: ', '').replace(/(\\r\\n|\\n|\\r)/gm, ''));\n            coords.heading = parseFloat(temp_array[5].replace('Heading: ', '').replace(/(\\r\\n|\\n|\\r)/gm, ''));\n\n            //remove NAN todo better find a new way...\n            coords.latitude = isNaN(coords.latitude) ? '' : coords.latitude;\n            coords.longitude = isNaN(coords.longitude) ? '' : coords.longitude;\n            coords.altitude = isNaN(coords.altitude) ? '' : coords.altitude;\n            coords.accuracy = isNaN(coords.accuracy) ? '' : coords.accuracy;\n            coords.heading = isNaN(coords.heading) ? '' : coords.heading;\n        }\n\n        return coords;\n    };\n\n    //test is astring is a valid URL\n    var isURL = function (the_string) {\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n        return regexp.test(the_string);\n    };\n\n    var isValidEmail = function (the_email) {\n        var re = /^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/;\n        return re.test(the_email);\n    };\n\n    var getForms = function () {\n        return this.forms;\n    };\n\n    var isGPSEnabled = function () {\n\n        var is_gps_enabled = true;\n        var deferred = new $.Deferred();\n\n        function _onGpsChecked(isEnabled) {\n            console.log('gps is ' + isEnabled);\n            if (!isEnabled) {\n                deferred.reject();\n            }\n            else {\n                deferred.resolve();\n            }\n        }\n\n        if (!EC.Utils.isChrome()) {\n\n            switch (window.device.platform) {\n\n                case EC.Const.ANDROID:\n                    cordova.plugins.diagnostic.isLocationEnabled(_onGpsChecked);\n                    break;\n                case EC.Const.IOS:\n                    //TODO: resolve until we have a way to get this via\n                    // Cordova, maybe allowing location at the beginning is\n                    // enough\n                    deferred.resolve();\n                    break;\n            }\n        }\n        return deferred.promise();\n    };\n\n    //execute a function passing its full namespaced name (and window as\n    // context) form_tr\n    //http://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string\n    var executeFunctionByName = function (functionName, context /*, args */) {\n\n        var i;\n        var args = Array.prototype.slice.call(arguments).splice(2);\n        var namespaces = functionName.split('.');\n        var func = namespaces.pop();\n        for (i = 0; i < namespaces.length; i++) {\n            context = context[namespaces[i]];\n        }\n        return context[func].apply(this, args);\n    };\n\n    /*\n     * When jumps are defined in the xml they are a comma separated list of\n     * values like:\n     *\n     * ecplus_University_ctrl16,1,ecplus_University_ctrl16,!1\n     *\n     * odd item is identifier to jump to\n     * even element is the INDEX of the value (starting from 1) that trigger\n     * the jump for RADIO and DROPDOWN\n     * for CHECKBOX, the even element is  bizzarely the VALUE that trigger\n     * the jump (not the INDEX). Go figure\n     * the '!' will define the jump logic (is/is not)\n     * END means the end off the form\n     * ALL means jump always\n     *\n     */\n    var parseJumpString = function (the_jump_string) {\n\n        var raw_jumps;\n        var parsed_jumps = [];\n        var i;\n        var iLength;\n        var obj;\n\n        raw_jumps = the_jump_string.split(',');\n        iLength = raw_jumps.length;\n\n        for (i = 0; i < iLength; i += 2) {\n\n            obj = {};\n\n            //even element is a jump destination, as @ref\n            obj.jump_to = raw_jumps[i];\n\n            if (raw_jumps[i + 1].charAt(0) === '!') {\n\n                obj.jump_when = EC.Const.JUMP_VALUE_IS_NOT;\n                obj.jump_value = raw_jumps[i + 1].substr(1);\n\n            }\n            else {\n\n                switch (raw_jumps[i + 1]) {\n\n                    case EC.Const.JUMP_ALWAYS:\n                        obj.jump_when = EC.Const.JUMP_ALWAYS;\n                        obj.jump_value = '';\n                        break;\n\n                    case EC.Const.JUMP_FIELD_IS_BLANK:\n                        obj.jump_when = EC.Const.JUMP_FIELD_IS_BLANK;\n                        obj.jump_value = '';\n                        break;\n\n                    default:\n                        obj.jump_when = obj.jump_when = EC.Const.JUMP_VALUE_IS;\n                        obj.jump_value = raw_jumps[i + 1];\n\n                }\n\n            }\n\n            parsed_jumps.push(obj);\n\n        }\n\n        return parsed_jumps;\n\n    };\n\n    var getLocalFormID = function (the_form_name) {\n\n        var forms = JSON.parse(window.localStorage.forms);\n        var i;\n        var iLength = forms.length;\n        var name = the_form_name;\n\n        for (i = 0; i < iLength; i++) {\n\n            if (forms[i].name === name) {\n                return forms[i]._id;\n            }\n\n        }\n\n    };\n\n    var isFormGenKeyHidden = function () {\n\n        var forms = JSON.parse(window.localStorage.forms);\n        var form_id = parseInt(window.localStorage.form_id, 10);\n        var i;\n        var iLength = forms.length;\n\n        for (i = 0; i < iLength; i++) {\n\n            if (parseInt(forms[i]._id, 10) === form_id) {\n                return parseInt(forms[i].is_genkey_hidden, 10);\n            }\n\n        }\n\n    };\n\n    var isBranchFormGenKeyHidden = function () {\n\n        var form = JSON.parse(window.localStorage.branch_form);\n\n        return form.is_genkey_hidden;\n\n    };\n\n    var getLocalInputID = function (the_ref) {\n\n        var inputs = JSON.parse(window.localStorage.local_input_ids);\n        var i;\n        var iLength = inputs.length;\n        var ref = the_ref;\n\n        for (i = 0; i < iLength; i++) {\n\n            if (inputs[i].ref === ref) {\n\n                return inputs[i]._id;\n\n            }\n\n        }\n    };\n\n    var getFormPrimaryKeyRef = function (the_form_id) {\n\n        var form_id = parseInt(the_form_id, 10);\n        var forms = JSON.parse(window.localStorage.forms);\n        var i;\n        var iLength = forms.length;\n\n        for (i = 0; i < iLength; i++) {\n\n            if (forms[i]._id === form_id) {\n\n                return forms[i].key;\n            }\n        }\n\n    };\n\n    var projectHasBranches = function () {\n\n        var forms = JSON.parse(window.localStorage.forms);\n        var i;\n        var iLength = forms.length;\n        var has_branches = false;\n\n        for (i = 0; i < iLength; i++) {\n\n            if (parseInt(forms[i].has_branches, 10) === 1) {\n                has_branches = true;\n            }\n        }\n        return has_branches;\n\n    };\n\n    //to keep track of parent-child relationship, we need the 'ref' of the parent form for some features\n    var getFormParentPrimaryKeyRef = function (the_form_id) {\n\n        var form_id = parseInt(the_form_id, 10);\n        var forms = JSON.parse(window.localStorage.forms);\n        var i;\n        var iLength = forms.length;\n\n        for (i = 0; i < iLength; i++) {\n            if (forms[i]._id === form_id) {\n                return forms[i - 1].key;\n            }\n        }\n    };\n\n    var getFormByID = function (the_form_id) {\n\n        var form_id = parseInt(the_form_id, 10);\n        var forms = JSON.parse(window.localStorage.forms);\n        var i;\n        var iLength = forms.length;\n\n        for (i = 0; i < iLength; i++) {\n\n            if (parseInt(forms[i]._id, 10) === form_id) {\n\n                return forms[i];\n            }\n        }\n\n    };\n\n    var getEntriesCount = function () {\n\n        var i;\n        var iLength;\n        var forms = JSON.parse(window.localStorage.forms);\n        var count = 0;\n\n        for (i = 0; i < iLength; i++) {\n            count += parseInt(forms[i].entries, 10);\n        }\n        return count;\n    };\n\n    var getParentFormByChildID = function (the_child_form_id) {\n\n        var form_id = parseInt(the_child_form_id, 10);\n        var forms = JSON.parse(window.localStorage.forms);\n        var i;\n        var iLength = forms.length;\n\n        for (i = 0; i < iLength; i++) {\n            if (forms[i]._id === form_id) {\n                return forms[i - 1];\n            }\n        }\n    };\n\n    var updateFormsObj = function (the_form_id) {\n\n        var forms = JSON.parse(window.localStorage.forms);\n        var form_id = parseInt(the_form_id, 10);\n        var i;\n        var iLength = forms.length;\n\n        for (i = 0; i < iLength; i++) {\n\n            if (forms[i]._id === form_id) {\n\n                //increase entries counter\n                forms[i].entries = forms[i].entries + 1;\n                break;\n            }\n        }\n\n        window.localStorage.forms = JSON.stringify(forms);\n\n    };\n\n    var getChildrenForms = function (the_form_id) {\n\n        var forms = JSON.parse(window.localStorage.forms);\n        var form_id = parseInt(the_form_id, 10);\n        var i;\n        var iLength = forms.length;\n\n        for (i = 0; i < iLength; i++) {\n\n            if (forms[i]._id === form_id) {\n\n                //return all the elements after the current index\n                return forms.slice(i + 1, iLength + 1);\n            }\n        }\n    };\n\n    var changeHashNavigationDirection = function (the_hash, the_new_direction) {\n\n        var hash = the_hash.split('&');\n        var direction = hash[hash.length - 1].split('=');\n\n        direction[direction.length - 1] = the_new_direction;\n\n        hash[hash.length - 1] = direction[0] + '=' + direction[1];\n\n        console.log(hash);\n\n        return hash.join('&');\n\n    };\n\n    //check if a value is in the array, return true on success\n    var inArray = function (the_array, the_value, is_case_sensitive) {\n\n        if (!the_array) {\n            return false;\n        }\n\n        function findWord(array, word) {\n            return -1 < array.map(function (item) {\n                    return item.toLowerCase();\n                }).indexOf(word.toLowerCase());\n        }\n\n        //case sensitive search\n        if (is_case_sensitive) {\n            return (the_array.indexOf(the_value) !== -1);\n        }\n\n        // case not sensitive search\n        return findWord(the_array, the_value);\n    };\n\n    /*\n     * Get app version name\n     */\n    var getVersionName = function () {\n\n        var version_name;\n        var deferred = new $.Deferred();\n\n        cordova.getAppVersion(function (the_version_name) {\n            console.log('App version ' + the_version_name);\n            version_name = the_version_name;\n            deferred.resolve(version_name);\n        });\n\n        return deferred.promise();\n\n    };\n\n    var getAppName = function () {\n\n        var app_name;\n        var deferred = new $.Deferred();\n\n        cordova.getAppVersion.getAppName(function (the_app_name) {\n            console.log('App name ' + the_app_name);\n            app_name = the_app_name;\n            deferred.resolve(app_name);\n        });\n\n        return deferred.promise();\n\n    };\n\n    var getExportDirName = function () {\n\n        var dir;\n        var deferred = new $.Deferred();\n\n        cordova.getAppVersion.getAppName(function (the_app_name) {\n\n            //sanitise app name to be used as a directory (remove all special chars with '-')\n            dir = the_app_name.replace(/[^\\w\\s]/gi, '-')\n            dir += '-export';\n            deferred.resolve(dir);\n        });\n\n        return deferred.promise();\n\n    };\n\n    //get absolute path for page urls\n    var getPageBaseURI = function () {\n\n        var base_uri;\n\n        //if we are testing with Chrome Chrome/browser on the iMac (replace based on your\n        // dev environment if needed)\n        if (EC.Utils.isChrome()) {\n\n            base_uri = window.localStorage.BASE_URI;\n\n        }\n        else {\n\n            switch (window.device.platform) {\n\n                case 'Android':\n\n                    //@debug on: old android platforms need jsHybugger to run\n                    // as a service, newer platform do not\n                    //check if the phone is running anything less than 4.4.*\n                    // KitKat then request pages via the service if needed\n                    console.log('kitkat regex: ' + EC.Const.KITKAT_REGEX.test(window.device.version));\n                    if (EC.Const.DEBUG === 1 && !(EC.Const.KITKAT_REGEX.test(window.device.version) || EC.Const.LOLLIPOP_REGEX.test(window.device.version))) {\n\n                        //base_uri = 'content://jsHybugger.org/file:///android_asset/www/';\n                        //@debug off\n                        base_uri = EC.Const.ANDROID_ASSETS_ABS_PATH;\n\n                    }\n                    else {\n\n                        //@debug off\n                        base_uri = EC.Const.ANDROID_ASSETS_ABS_PATH;\n                    }\n\n                    break;\n\n                case 'iOS':\n\n                    base_uri = EC.Const.IOS_ASSETS_ABS_PATH;\n                    break;\n\n            }\n        }\n        return base_uri;\n    };\n\n    var isValidValue = function (the_input, the_value, the_clone_value) {\n\n        var self = this;\n\n        //store validation details in coordsheadin.\n        var validation = {\n            is_valid: true,\n            message: ''\n        };\n\n        var input = the_input;\n        var value = the_value;\n        var pattern;\n        var clone_value = the_clone_value;\n\n        //return immediately if input is branch\n        if (input.type === EC.Const.BRANCH) {\n            return validation;\n        }\n\n        //return immediately if input is integer value is not an integer but\n        // a float (user can enter the dot, depending on the native keyboard\n        // layout)\n        if (input.type === EC.Const.INTEGER) {\n\n            //check if number value is integer, not float\n            if (parseFloat(value) !== parseInt(value, 10) && value !== '') {\n\n                validation.is_valid = false;\n                validation.message = EC.Localise.getTranslation('invalid_integer');\n\n                return validation;\n            }\n        }\n\n        /** for iOS only: it is currently NOT possible to show a keyboard\n         * with only numbers and the dot '.' to input decimal values\n         *  therefore the full keyboard is shown and we need to sanitise the\n         * input against wrong chars\n         *\n         */\n        if (input.type === EC.Const.DECIMAL) {\n\n            //check if value is a decimal value (http://goo.gl/Q4J4cU)\n            if (!self.isNumber(value)) {\n\n                if (value !== '') {\n                    validation.is_valid = false;\n                    validation.message = EC.Localise.getTranslation('invalid_decimal');\n\n                    return validation;\n                }\n\n            }\n        }\n\n        //if the value is a primary key, check that is does not contain the\n        // char set as ENTRY_ROOT_PATH_SEPARATOR\n        if (input.is_primary_key === 1 && value.indexOf(EC.Const.ENTRY_ROOT_PATH_SEPARATOR) !== -1) {\n\n            validation.is_valid = false;\n            validation.message = EC.Localise.getTranslation('pk_reserved_char') + EC.Const.ENTRY_ROOT_PATH_SEPARATOR;\n\n            return validation;\n\n        }\n\n        //check if the input needs to match a regular expression\n        if (input.regex !== '') {\n\n            if (!value.match(input.regex)) {\n\n                validation.is_valid = false;\n                validation.message = EC.Localise.getTranslation('invalid_regex') + input.regex;\n\n                return validation;\n            }\n        }\n\n        //check if the value has a double check. In that case 'value' will\n        // contain 2 values to match\n        if (parseInt(input.has_double_check, 10) === 1) {\n\n            if (value !== clone_value) {\n\n                validation.is_valid = false;\n                validation.message = EC.Localise.getTranslation('values_unmatched');\n\n                return validation;\n            }\n        }\n\n        //check if the value is within the max range\n        if (input.max_range !== '') {\n\n            //use parseFloat as it can be an integer or a decimal value\n            if (parseFloat(value) > parseFloat(input.max_range)) {\n\n                validation.is_valid = false;\n                validation.message = EC.Localise.getTranslation('out_of_range');\n\n                return validation;\n            }\n        }\n\n        //check if the value is within the min range\n        if (input.min_range !== '') {\n\n            //use parseFloat as it can be an integer or a decimal value\n            if (parseFloat(value) < parseFloat(input.min_range)) {\n\n                validation.is_valid = false;\n                validation.message = EC.Localise.getTranslation('out_of_range');\n\n                return validation;\n            }\n        }\n\n        //check the user did not entered the reserved word _skipp3d_\n        if (input.value === EC.Const.SKIPPED) {\n\n            validation.is_valid = false;\n            validation.message = EC.Localise.getTranslation('reserved_keyword');\n\n            return validation;\n\n        }\n\n        //check if the input is required\n        if (parseInt(input.is_required, 10) === 1) {\n\n            //if the input is a dropdown, radio or checkbox, check for\n            // NO_OPTION_SELECTED label\n            if (input.type === EC.Const.DROPDOWN || input.type === EC.Const.RADIO || input.type === EC.Const.CHECKBOX) {\n\n                if (value === EC.Const.NO_OPTION_SELECTED) {\n\n                    validation.is_valid = false;\n                    validation.message = EC.Localise.getTranslation('field_required');\n\n                    return validation;\n                }\n\n            }\n            else {\n\n                if (value === '') {\n\n                    validation.is_valid = false;\n                    validation.message = EC.Localise.getTranslation('field_required');\n\n                    return validation;\n                }\n\n            }\n        }\n\n        return validation;\n    };\n\n    // get iOS app root path (www)\n    var setIOSRootPath = function () {\n\n        function onSuccess(fileSystem) {\n\n            var documents_path;\n\n            //get absolute path on iOS 8, there is a bug in Cordova 3.7 see\n            // http://goo.gl/lUIqyl\n            if (window.device.platform === EC.Const.IOS && parseFloat(window.device.version) >= 8) {\n\n                documents_path = fileSystem.toURL();\n\n                EC.Const.IOS_ASSETS_ABS_PATH = documents_path.replace('file:////', 'file:///private/');\n                EC.Const.IOS_ASSETS_ABS_PATH += 'www/';\n                console.log('iOS 8+ root www - ' + EC.Const.IOS_ASSETS_ABS_PATH);\n            }\n            else {\n\n                /* Very imp!!!! they changed the property from 'fullPath'\n                 * (Cordova  2.9) to 'nativeURL' somewhere in time!!!!\n                 */\n\n                console.log(fileSystem);\n\n                documents_path = fileSystem.root.nativeURL;\n                documents_path = documents_path.replace('Documents/', '');\n\n                //IOS_ASSETS_ABS_PATH : 'Epicollect5 64bit.app/www/' -> we ned to append this\n                EC.Const.IOS_ASSETS_ABS_PATH = documents_path + EC.Const.IOS_ASSETS_ABS_PATH;\n\n                console.log('iOS root www - ' + EC.Const.IOS_ASSETS_ABS_PATH);\n            }\n        }\n\n        function onError(error) {\n\n            console.log(JSON.stringify(error));\n        }\n\n        //on iOS 8, get the Directory Entry using new method\n        if (window.device.platform === EC.Const.IOS && parseFloat(window.device.version) >= 8) {\n            window.resolveLocalFileSystemURL(cordova.file.applicationDirectory, onSuccess, onError);\n        }\n        else {\n\n            //on other platforms, use legacy method\n            window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onSuccess, onError);\n        }\n\n    };\n\n    var setIOSPersistentStoragePath = function () {\n\n        function onSuccess(fileSystem) {\n\n            EC.Const.IOS_APP_PRIVATE_URI = fileSystem.root.nativeURL;\n\n            /*remove 'file://' from path: images from iOS application folder\n             * will need the 'file://'\n             * to be loaded, but audio and video files will not:\n             * http://stackoverflow.com/questions/24205331/mp3-audio-playback-not-working-with-cordova-3-5-on-ios\n             */\n            EC.Const.IOS_APP_PRIVATE_URI = EC.Const.IOS_APP_PRIVATE_URI.slice(7);\n\n            console.log('iOS Documents path - ' + EC.Const.IOS_APP_PRIVATE_URI);\n        }\n\n        function onError(error) {\n            console.log(JSON.stringify(error));\n        }\n\n        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onSuccess, onError);\n    };\n\n    var setMediaDirPaths = function () {\n\n        switch (window.device.platform) {\n\n            case EC.Const.ANDROID:\n                EC.Const.PHOTO_DIR = '/files/images/';\n                EC.Const.AUDIO_DIR = '/files/audios/';\n                EC.Const.VIDEO_DIR = '/files/videos/';\n                break;\n            case EC.Const.IOS:\n                EC.Const.PHOTO_DIR = 'images/';\n                EC.Const.AUDIO_DIR = 'audios/';\n                EC.Const.VIDEO_DIR = 'videos/';\n                break;\n\n        }\n\n    };\n\n    /**\n     *\n     * @param {Object} the_filenames an array mapping filenames against their\n     * timestamps\n     * @param {Object} the_current_filename The filename to look the\n     * timestamp for\n     *\n     * get the filename for a photo saved in persistent storage on iOS.\n     * Cordova Camera API returns an image URI like <cdv_photo_001.jpg> on\n     * iOS tmp folder\n     * but we save the file using the timestamp in the Documents folder, as\n     * wee do on Android\n     * (where the timestamp is used as file name by default).\n     */\n    var getIOSFilename = function (the_filenames, the_current_filename) {\n\n        var i;\n        var filenames = the_filenames;\n        var current_filename = the_current_filename;\n        var iLength = filenames.length;\n\n        for (i = 0; i < iLength; i++) {\n            if (filenames[i].filename === current_filename) {\n                return filenames[i].timestamp;\n            }\n        }\n    };\n\n    function isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function getParameterByName(name) {\n        name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n        var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)'),\n            results = regex.exec(location.search);\n        return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n    }\n\n    var mapLabelToValue = function (the_value, the_inputs) {\n\n        function _getInputByRef(the_ref, the_inputs) {\n\n            var inputs = the_inputs;\n            var i;\n            var iLength = inputs.length;\n\n            for (i = 0; i < iLength; i++) {\n\n                if (inputs[i].ref === the_ref) {\n                    return inputs[i];\n                }\n            }\n        }\n\n        function _getCheckboxLabels(the_value, the_current_input) {\n\n            var value_as_array = the_value.value.split(',');\n            var current_input = the_current_input;\n            var i;\n            var j;\n            var iLength = value_as_array.length;\n            var jLength = current_input.options.length;\n            var labels = [];\n            for (i = 0; i < iLength; i++) {\n                for (j = 0; j < jLength; j++) {\n\n                    if (current_input.options[j].value === value_as_array[i].trim()) {\n                        labels.push(current_input.options[j].label);\n                    }\n\n                }\n            }\n\n            return labels;\n\n        }\n\n        function _getDropdownOrRadioLabel(the_value, the_current_input) {\n\n            var i;\n            var current_input = the_current_input;\n            var value = the_value;\n            var iLength = current_input.options.length;\n\n            for (i = 0; i < iLength; i++) {\n                if (current_input.options[i].value === value.value.trim()) {\n                    return current_input.options[i].label;\n                }\n            }\n        }\n\n        var value = the_value;\n        var ref = value.ref;\n        var inputs = the_inputs;\n        var current_input = _getInputByRef(ref, inputs);\n        var mapped_label;\n\n        switch (value.type) {\n\n            //value.value will be an array\n            case EC.Const.CHECKBOX:\n                //for checkboxes, mapped_label will be a csv\n                mapped_label = _getCheckboxLabels(value, current_input);\n                break;\n\n            //value.value will be string\n            case EC.Const.DROPDOWN:\n\n                mapped_label = _getDropdownOrRadioLabel(value, current_input);\n                break;\n\n            //value.value will be string\n            case EC.Const.RADIO:\n\n                mapped_label = _getDropdownOrRadioLabel(value, current_input);\n                break;\n\n        }\n\n        return mapped_label;\n\n    };\n\n    //check if the audio files is stored or cache, comparing the paths\n    function isAudioFileStored(the_cache_path, _the_file_path) {\n\n        var file_path = _the_file_path;\n        var cache_path = the_cache_path;\n        var file_path_parts = file_path.split('/');\n\n        file_path_parts.pop();\n        file_path = file_path_parts.join('/');\n        file_path += '/';\n\n        console.log('cache_path ' + cache_path);\n        console.log('file_path' + file_path);\n\n        return (file_path === cache_path) ? false : true;\n\n    }\n\n    function generateAudioFileName() {\n\n        var filename;\n\n        switch (window.device.platform) {\n\n            case EC.Const.ANDROID:\n                //build filename timestamp + mp4 (Cordova 2.9 sources have been modified manually\n                // to record high quality audio)\n                filename = EC.Utils.getTimestamp() + '.mp4';\n                break;\n\n            case EC.Const.IOS:\n\n                //build filename timestamp + wav (iOS only records to files of type .wav and\n                // returns an error if the file name extension is not correct.)\n                filename = EC.Utils.getTimestamp() + '.wav';\n                break;\n\n        }\n\n        return filename;\n\n    }\n\n    //check if there is a internet connection (cordova online and offline events consider Connection.UNKNOWN as online? Better to use this function)\n    var hasConnection = function () {\n        //return immediately if testing on Chrome\n        if (EC.Utils.isChrome()) {\n            return true;\n        }\n        if (navigator.network) {\n            return !(navigator.network.connection.type === Connection.NONE || navigator.network.connection.type === Connection.UNKNOWN);\n        }\n    };\n\n    //check if the connection is good enough to load map tiles (well, CELL network type is not available on iOS so this function is exactly like hasConnection)\n    function hasGoodConnection() {\n\n        var is_good = true;\n\n        switch (navigator.connection.type) {\n\n            case Connection.NONE:\n                console.log('no internet connection');\n                is_good = false;\n                break;\n\n            case Connection.UNKNOWN:\n                console.log('unknown internet connection');\n                is_good = false;\n                break;\n\n            //this would be great but Cell network info are not available on iOS\n            //case Connection.CELL_2G:\n            //    console.log('2G connection too weak');\n            //    is_good = false;\n            //    break;\n            //\n            //case Connection.CELL:\n            //    console.log('Connection too weak');\n            //    is_good = false;\n            //    break;\n        }\n        //I assume the connection is good enough to load the map tiles\n        return is_good;\n    }\n\n    return {\n\n        setForms: setForms,\n        getForms: getForms,\n        getPhoneUUID: getPhoneUUID,\n        setPhoneUUID: setPhoneUUID,\n        getGenKey: getGenKey,\n        getParentAndChildForms: getParentAndChildForms,\n        getTimestamp: getTimestamp,\n        hasConnection: hasConnection,\n        openDatabase: openDatabase,\n        isChrome: isChrome,\n        projectHasBranches: projectHasBranches,\n        parseTimestampDate2Posix: parseTimestampDate2Posix,\n        parseDate: parseDate,\n        parseIOSDate: parseIOSDate,\n        parseTime: parseTime,\n        parseIOSTime: parseIOSTime,\n        parseLocationString: parseLocationString,\n        parseJumpString: parseJumpString,\n        isURL: isURL,\n        isNumber: isNumber,\n        sleep: sleep,\n        isGPSEnabled: isGPSEnabled,\n        executeFunctionByName: executeFunctionByName,\n        getLocalInputID: getLocalInputID,\n        getLocalFormID: getLocalFormID,\n        isValidEmail: isValidEmail,\n        getFormPrimaryKeyRef: getFormPrimaryKeyRef,\n        getFormParentPrimaryKeyRef: getFormParentPrimaryKeyRef,\n        getFormByID: getFormByID,\n        getEntriesCount: getEntriesCount,\n        isFormGenKeyHidden: isFormGenKeyHidden,\n        isBranchFormGenKeyHidden: isBranchFormGenKeyHidden,\n        getParentFormByChildID: getParentFormByChildID,\n        updateFormsObj: updateFormsObj,\n        getChildrenForms: getChildrenForms,\n        changeHashNavigationDirection: changeHashNavigationDirection,\n        inArray: inArray,\n        getVersionName: getVersionName,\n        getAppName:getAppName,\n        getExportDirName: getExportDirName,\n        getPageBaseURI: getPageBaseURI,\n        isValidValue: isValidValue,\n        setIOSRootPath: setIOSRootPath,\n        setMediaDirPaths: setMediaDirPaths,\n        setIOSPersistentStoragePath: setIOSPersistentStoragePath,\n        getIOSFilename: getIOSFilename,\n        getParameterByName: getParameterByName,\n        mapLabelToValue: mapLabelToValue,\n        isAudioFileStored: isAudioFileStored,\n        generateAudioFileName: generateAudioFileName,\n        hasGoodConnection: hasGoodConnection\n    };\n\n}());\n\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n * Small library of utility function helpful when running epicollect5 on older platforms or when a custom function is necessary\n *\n */\nvar EC = window.EC || {};\nEC.Config = (function () {\n    'use strict';\n\n    //concatenate array only keeping unique values\n    Array.prototype.unique = function () {\n\n        var i;\n        var j;\n        var a = this.concat();\n\n        for (i = 0; i < a.length; ++i) {\n            for (j = i + 1; j < a.length; ++j) {\n                if (a[i] === a[j]) {\n                    a.splice(j--, 1);\n                }\n            }\n        }\n        return a;\n    };\n\n    //search element in array\n    if (!Array.prototype.indexOf) {\n        Array.prototype.indexOf = function (searchElement, fromIndex) {\n            var i, pivot = fromIndex || 0, length;\n\n            if (!this) {\n                throw new TypeError();\n            }\n\n            length = this.length;\n\n            if (length === 0 || pivot >= length) {\n                return -1;\n            }\n\n            if (pivot < 0) {\n                pivot = length - Math.abs(pivot);\n            }\n\n            for (i = pivot; i < length; i++) {\n                if (this[i] === searchElement) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }//indexOf\n\n    //check if two arrays are identical, strict flag if the elements need to be in the same order\n    Array.prototype.equals = function (array, is_strict) {\n\n        var i;\n\n        if (!array) {\n            return false;\n        }\n        if (arguments.length === 1) {\n            is_strict = true;\n        }\n\n        if (this.length !== array.length) {\n            return false;\n        }\n        for (i = 0; i < this.length; i++) {\n            if (this[i] instanceof Array && array[i] instanceof Array) {\n                if (!this[i].equals(array[i], is_strict)) {\n                    return false;\n                }\n            }\n            if (is_strict && this[i] !== array[i]) {\n                return false;\n            }\n            if (!is_strict) {\n                return this.sort().equals(array.sort(), true);\n            }\n        }\n        return true;\n    };\n\n    //https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n    //check if a string start with the passed substring/char\n    if (!String.prototype.startsWith) {\n        Object.defineProperty(String.prototype, 'startsWith', {\n            enumerable: false,\n            configurable: false,\n            writable: false,\n            value: function (searchString, position) {\n                position = position || 0;\n                return this.indexOf(searchString, position) === position;\n            }\n        });\n    }//startsWith\n\n    /* Truncate a string\n     * @param {n} the length\n     */\n    String.prototype.trunc = function (n) {\n        return this.substr(0, n - 1) + (this.length > n ? '...' : '');\n    };\n\n    // From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\n    if (!Object.keys) {\n        Object.keys = (function () {\n            var hasOwnProperty = Object.prototype.hasOwnProperty, hasDontEnumBug = !({\n                toString: null\n            }).propertyIsEnumerable('toString'), dontEnums = ['toString', 'toLocaleString', 'valueOf', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'], dontEnumsLength = dontEnums.length;\n\n            return function (obj) {\n                if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n                    throw new TypeError('Object.keys called on non-object');\n                }\n\n                var result = [], prop, i;\n\n                for (prop in obj) {\n                    if (hasOwnProperty.call(obj, prop)) {\n                        result.push(prop);\n                    }\n                }\n\n                if (hasDontEnumBug) {\n                    for (i = 0; i < dontEnumsLength; i++) {\n                        if (hasOwnProperty.call(obj, dontEnums[i])) {\n                            result.push(dontEnums[i]);\n                        }\n                    }\n                }\n                return result;\n            };\n        }());\n    }\n}());\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\nvar EC = EC || {};\nEC.Const = EC.Const || {};\n\n//Define constant values to be used across the application\nEC.Const = (function () {\n    'use strict';\n\n    return {\n        //debug on/off\n        DEBUG: 1,\n\n        //platforms\n        ANDROID: 'Android',\n        IOS: 'iOS',\n        ANDROID_ASSETS_ABS_PATH: 'file:///android_asset/www/',\n        IOS_ASSETS_ABS_PATH: 'Epicollect+.app/www/',\n\n        //file paths\n        ANDROID_APP_PRIVATE_URI: 'file:///data/data/uk.ac.imperial.epicollectplus.html5',\n        IOS_APP_PRIVATE_URI: '', //set at run time, it is the Documents folder or the Library folder\n        // folder\n\n        //input types\n        TEXT: 'text', //\n        TEXTAREA: 'textarea',\n        INTEGER: 'integer',\n        DECIMAL: 'decimal',\n        DATE: 'date',\n        TIME: 'time',\n        RADIO: 'radio',\n        CHECKBOX: 'checkbox',\n        DROPDOWN: 'select',\n        BARCODE: 'barcode',\n        LOCATION: 'location',\n        AUDIO: 'audio',\n        VIDEO: 'video',\n        PHOTO: 'photo',\n        BRANCH: 'branch',\n        BRANCH_PREFIX: 'branch-',\n        //PHOTO_DIR : '/files/images/',\n        PHOTO_DIR: '', //defined at run time\n        AUDIO_DIR: '', //defined at run time\n        VIDEO_DIR: '', //defined at run time\n        BRANCH_VIEWS_DIR: 'branch_inputs/',\n        INPUT_VIEWS_DIR: 'inputs/',\n        VIEWS_DIR: 'views/',\n        HTML_FILE_EXT: '.html',\n        PHOTO_FILE_EXTENSION: 'jpg',\n\n        //transaction callback log\n        TRANSACTION_SUCCESS: 'TRANSACTION SUCCESS ',\n        TRANSACTION_ERROR: 'TRANSACTION ERROR ----------------------------------------------------------------**',\n\n        //Model actions\n        DELETE: 'delete',\n        DELETE_SINGLE_ENTRY: 'delete_single_entry',\n        RESTORE: 'restore',\n        INSERT: 'insert',\n        DOWNLOAD: 'download',\n\n        //Upload actions\n        START_HIERARCHY_UPLOAD: 'start_hierarchy_upload',\n        STOP_HIERARCHY_UPLOAD: 'stop_hierarchy_upload',\n        HIERARCHY_RECURSION: 'hierarchy_recursion',\n        START_BRANCH_UPLOAD: 'start_branch_upload',\n        STOP_BRANCH_UPLOAD: 'stop_branch_upload',\n        BRANCH_RECURSION: 'branch_recursion',\n\n        //navigation\n        ADDING: 'adding',\n        FORWARD: 'forward',\n        BACKWARD: 'backward',\n        EDITING: 'editing',\n        PREVIOUS: 'previous',\n        NEXT: 'next',\n        VIEW: 'view',\n\n        //hierarchy views\n        INDEX_VIEW: 'index.html',\n        UPLOAD_VIEW: 'upload.html',\n        DOWNLOAD_VIEW: 'download.html',\n        EMAIL_BACKUP_VIEW: 'email-backup.html',\n        ENTRIES_LIST_VIEW: 'entries-list.html',\n        SETTINGS_VIEW: 'settings.html',\n        ADD_PROJECT_VIEW: 'add-project.html',\n        FORMS_VIEW: 'forms.html',\n        SAVE_CONFIRM_VIEW: 'save-confirm.html',\n\n        //branch views\n        BRANCH_ENTRIES_LIST_VIEW: 'branch-entries-list.html',\n        BRANCH_SAVE_CONFIRM_VIEW: 'branch-save-confirm.html',\n        BRANCH_FEEDBACK_VIEW: 'branch-feedback.html',\n\n        //max length for strings before triggering ellipsis\n        PROJECT_NAME_MAX_LENGTH: 22,\n        FORM_NAME_MAX_LENGTH: 12,\n\n        //pagination\n        ITEMS_PER_PAGE: 20,\n\n        //various\n        SET: 1,\n        INDEX: 'index',\n        INPUTS: 'inputs',\n        PROJECT_LIST: 'Project List',\n        FORMS: 'Forms',\n        FILLER: '_fill3r_', //extra element to add to breadcrumb for\n        // navigation\n\n        //labels\n        NO_OPTION_SELECTED: 'select_one_option',\n        PHOTO_AVAILABLE_LABEL: 'photo_available',\n        PHOTO_NOT_AVAILABLE_LABEL: 'no_photo',\n        AUDIO_AVAILABLE_LABEL: 'audio_available',\n        AUDIO_NOT_AVAILABLE_LABEL: 'no_audio',\n        VIDEO_AVAILABLE_LABEL: 'video_available',\n        VIDEO_NOT_AVAILABLE_LABEL: 'no_video',\n\n        //jumps\n        JUMP_VALUE_IS: 'IS',\n        JUMP_VALUE_IS_NOT: 'IS NOT',\n        JUMP_ALWAYS: 'ALL',\n        JUMP_FIELD_IS_BLANK: 'NULL',\n        SKIPPED: '_skipp3d_', //flag to set as a value when an input field\n        // is skipped by a jump\n        END_OF_FORM: 'END',\n\n        // default server\n        EPICOLLECT_SERVER_URL: 'http://plus.epicollect.net/',\n\n        //proxy to load xml in Chrome (CORS)\n        //TODO this is not used anymore as we are using a Chrome plugin, it will be removed\n        //http://goo.gl/oQNhwh\n        PROXY: 'http://www.corsproxy.com/plus.epicollect.net/',\n\n        //the length of a cached file <timestamp.extension> (Android)\n        CACHED_FILENAME_LENGTH: 17,\n\n        //this is to concatenate the full path of an entry up to its root, to\n        // identify immediate parent\n        //used for navigation and uniquely identify an entry\n        ENTRY_ROOT_PATH_SEPARATOR: '|',\n\n        //Languages\n        ENGLISH: 'en',\n        ITALIAN: 'it',\n\n        //minimum Android version NOT to run jsHybugger (regEx) 4.4.*\n        KITKAT_REGEX: /^4.4.\\d{1}$/,\n\n        //Lollipop regex\n        LOLLIPOP_REGEX: /^5.\\d{1}$/\n\n    };\n}());\n","/*jslint vars: true , nomen: true, devel: true, plusplus: true*/\r\n/*global $, jQuery, cordova, device*/\r\n/*\r\n * @module EC\r\n * @submodulemodule Parser\r\n *\r\n * Parse the XML (normalising it) and create the following objects matching the DB structure\r\n *\r\n * - Project\r\n * - Forms\r\n * - Inputs\r\n * - Input_options\r\n *\r\n */\r\n\r\nvar EC = EC || {};\r\nEC.Parse = EC.Parse || {};\r\nEC.Parse = (function (module) {\r\n    'use strict';\r\n\r\n    //static variable to expose across the module\r\n    //*******************************************\r\n    module.is_form_genkey_hidden = '';\r\n    module.form_key = '';\r\n    //project definition\r\n    module.project = {};\r\n    //parsed forms\r\n    module.parsed_forms = [];\r\n    //store inputs for hierarchy forms (main) (each element is an object with allthe inputs for a single form)\r\n    module.inputs = [];\r\n    //store inputs for branch forms (main) (each element is an object with allthe inputs for a single form)\r\n    module.branch_inputs = [];\r\n    module.form_inputs_positions = [];\r\n    //store list of inputs for a single form\r\n    module.input_list = [];\r\n    //store sets of option for tags like <radio>, <select> and <select1>\r\n    module.options = [];\r\n    module.branch_options = [];\r\n    //*******************************************\r\n\r\n    module.getHierarchyForms = function () {\r\n\r\n        var self = this;\r\n        var i;\r\n        var iLength = self.parsed_forms.length;\r\n        var hierarchy_forms = [];\r\n\r\n        for (i = 0; i < iLength; i++) {\r\n            if (self.parsed_forms[i].type === 'main') {\r\n                hierarchy_forms.push(self.parsed_forms[i]);\r\n            }\r\n        }\r\n        return hierarchy_forms;\r\n    };\r\n\r\n    module.getBranchForms = function () {\r\n\r\n        var self = this;\r\n        var i;\r\n        var iLength = self.parsed_forms.length;\r\n        var branch_forms = [];\r\n\r\n        for (i = 0; i < iLength; i++) {\r\n            if (self.parsed_forms[i].type === 'branch') {\r\n                branch_forms.push(self.parsed_forms[i]);\r\n            }\r\n        }\r\n        return branch_forms;\r\n    };\r\n    return module;\r\n\r\n}(EC.Parse));\r\n\r\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n * @module EC\n * @submodulemodule Parser\n */\nvar EC = EC || {};\nEC.Parse = ( function(module) {\"use strict\";\n\n\t\t/**\n\t\t * Map the position a form input using the @ref attribute and return an array:\n\t\t * Doing this because when converting to json the same tags are grouped together and we lose the correct inputs order!\n\t\t */\n\n\t\tmodule.mapPositionToInput = function(the_xml) {\n\n\t\t\tvar xml = the_xml;\n\t\t\tvar form_children;\n\t\t\tvar input_positions = [];\n\t\t\tvar form_num;\n\t\t\tvar form_position = 1;\n\t\t\tvar position;\n\t\t\tvar positions;\n\t\t\tvar key;\n\t\t\tvar main;\n\t\t\tvar form_name;\n\t\t\tvar hierarchy_skip_key;\n\t\t\tvar branch_skip_keys = [];\n\n\t\t\t$(xml).find('form').each(function(i) {\n\n\t\t\t\tform_children = $(this).children();\n\t\t\t\tpositions = [];\n\t\t\t\tposition = 1;\n\n\t\t\t\t//get form key value\n\t\t\t\tkey = $(this).attr('key');\n\n\t\t\t\t//get form main value. true: main form, false: branch form\n\t\t\t\tmain = $(this).attr('main');\n\n\t\t\t\tform_num = parseInt($(this).attr('num'), 10);\n\n\t\t\t\t//get form name which is unique within a project\n\t\t\t\tform_name = $(this).attr('name');\n\n\t\t\t\t//loop all the inputs\n\t\t\t\t$(form_children).each(function(index) {\n\n\t\t\t\t\tvar ref = $(this).attr('ref');\n\n\t\t\t\t\tif (form_num === 1) {\n\n\t\t\t\t\t\tif (!hierarchy_skip_key) {\n\t\t\t\t\t\t\thierarchy_skip_key = key;\n\t\t\t\t\t\t\tbranch_skip_keys.push(key);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpositions.push({\n\n\t\t\t\t\t\t\tform_num : form_num,\n\t\t\t\t\t\t\tform_name : form_name,\n\t\t\t\t\t\t\tform_position : form_position,\n\t\t\t\t\t\t\tposition : position,\n\t\t\t\t\t\t\tref : ref\n\n\t\t\t\t\t\t});\n\t\t\t\t\t\tposition++;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t/* remove reference to parent key from child form: we have to skip the input where the @ref is equal to the @key of the immediate parent;\n\t\t\t\t\t\t * that input is there on the xml for legacy reasons. It is used in the old Android client but no more on the new HTML5 implementation\n\t\t\t\t\t\t */\n\n\t\t\t\t\t\tif (ref === hierarchy_skip_key) {\n\n\t\t\t\t\t\t\tpositions.push({\n\n\t\t\t\t\t\t\t\tform_num : form_num,\n\t\t\t\t\t\t\t\tform_name : form_name,\n\t\t\t\t\t\t\t\tform_position : form_position,\n\t\t\t\t\t\t\t\tposition : \"skip\",\n\t\t\t\t\t\t\t\tref : ref\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//check if the current form is a branch, in that case skip the input if the ref is equal to any one of the cached main keys\n\t\t\t\t\t\t\t//(again to skip the useless input there for legacy reasons)\n\t\t\t\t\t\t\tif (main === \"false\" && EC.Utils.inArray(branch_skip_keys, ref)) {\n\n\t\t\t\t\t\t\t\tpositions.push({\n\n\t\t\t\t\t\t\t\t\tform_num : form_num,\n\t\t\t\t\t\t\t\t\tform_name : form_name,\n\t\t\t\t\t\t\t\t\tform_position : form_position,\n\t\t\t\t\t\t\t\t\tposition : \"skip\",\n\t\t\t\t\t\t\t\t\tref : ref\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpositions.push({\n\n\t\t\t\t\t\t\t\t\tform_num : form_num,\n\t\t\t\t\t\t\t\t\tform_name : form_name,\n\t\t\t\t\t\t\t\t\tform_position : form_position,\n\t\t\t\t\t\t\t\t\tposition : position,\n\t\t\t\t\t\t\t\t\tref : ref\n\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tposition++;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\t/*if the form is a main one and not a branch, cache its key\n\t\t\t\t (as it is needed later to recognised a legacy input field to be removed)\n\t\t\t\t as the branch forms are in random order (lol),\n\t\t\t\t the hierarchy forms keys are cached in an array as we have to skip a branch input\n\t\t\t\t if the ref is equal to any of them */\n\t\t\t\tif (main === \"true\") {\n\n\t\t\t\t\thierarchy_skip_key = key;\n\t\t\t\t\tbranch_skip_keys.push(key);\n\t\t\t\t}\n\n\t\t\t\tinput_positions.push(positions);\n\t\t\t\tform_num++;\n\t\t\t\tform_position++;\n\n\t\t\t});\n\n\t\t\tconsole.log(\"input_positions\");\n\t\t\tconsole.log(input_positions, true);\n\n\t\t\treturn input_positions;\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Parse));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n * @module EC\n * @submodulemodule Parser\n */\nvar EC = EC || {};\nEC.Parse = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\n\t\t/*\n\t\t * Return the position of an input within a form based on form name AND the input @ref (uniqueness is given by the composite key)\n\t\t */\n\t\tvar _getInputPosition = function(the_ref, the_form_name) {\n\n\t\t\tvar ref = the_ref;\n\t\t\tvar form_name = the_form_name;\n\t\t\tvar input_position;\n\t\t\tvar i;\n\t\t\tvar iLength = self.form_inputs_positions.length;\n\t\t\tvar j;\n\t\t\tvar jLength;\n\t\t\tvar current_num;\n\t\t\tvar current_ref;\n\t\t\tvar inputs;\n\n\t\t\t//loop all forms\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//loop all inputs within a form\n\t\t\t\tinputs = self.form_inputs_positions[i];\n\t\t\t\tjLength = inputs.length;\n\t\t\t\tfor ( j = 0; j < jLength; j++) {\n\n\t\t\t\t\tif (inputs[j].form_name === form_name && inputs[j].ref === ref) {\n\n\t\t\t\t\t\treturn inputs[j].position;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\t\t\n\t\t/*\n\t\t * Get an array of objects to loop and pass to \"parseInputObject\" for parsing\n\t\t */\n\t\tmodule.parseInputArray = function(the_raw_array, the_type, the_form_num, the_form_type, the_form_name) {\n\n\t\t\tvar self = this;\n\n\t\t\t$.each(the_raw_array, function(key, value) {\n\t\t\t\tself.parseInputObject(value, the_type, the_form_num, the_form_type, the_form_name);\n\t\t\t});\n\t\t};\n\n\n\t\tmodule.parseInputObject = function(the_raw_input, the_type, the_form_num, the_form_type, the_form_name) {\n\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar j;\n\t\t\tvar jLenght;\n\t\t\tvar input_position;\n\t\t\tvar ref;\n\t\t\tvar form_num;\n\t\t\tvar form_type;\n\t\t\tvar form_name;\n\t\t\tvar is_genkey_hidden;\n\n\t\t\tself = this;\n\t\t\tref = the_raw_input[\"@ref\"];\n\t\t\tform_num = the_form_num;\n\t\t\tform_type = the_form_type;\n\t\t\tform_name = the_form_name;\n\n\t\t\t//get input position\n\t\t\tinput_position = _getInputPosition(ref, form_name);\n\n\t\t\t//skip this input if position is set to 'skip'\n\t\t\tif (input_position === \"skip\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar parsed_input = {\n\n\t\t\t\tposition : input_position,\n\t\t\t\tlabel : the_raw_input.label,\n\t\t\t\ttype : the_type,\n\t\t\t\tref : ref,\n\t\t\t\tdatetime_format : \"\",\n\t\t\t\thas_jump : \"\",\n\t\t\t\tjumps : \"\",\n\t\t\t\thas_advanced_jump : \"\"\n\n\t\t\t};\n\n\t\t\tparsed_input.is_genkey = (the_raw_input[\"@genkey\"] === undefined) ? \"\" : 1;\n\n\t\t\tis_genkey_hidden = (the_raw_input[\"@display\"] === undefined) ? 0 : 1;\n\n\t\t\tif (parsed_input.is_genkey === 1 && is_genkey_hidden === 1) {\n\t\t\t\tself.is_form_genkey_hidden = 1;\n\t\t\t}\n\n\t\t\t//Set primary key flag to true  if the input is the primary key for current form\n\t\t\tparsed_input.is_primary_key = (parsed_input.ref === self.form_key) ? 1 : 0;\n\t\t\t\n\t\t\t//#handle a bug in the form builder when a NOT autogenerated key can be hidden (LOL): when a primary key input is hidden, force it to be autogenerated\n\t\t\tif(parsed_input.is_primary_key === 1 && is_genkey_hidden === 1){\n\t\t\t\tself.is_form_genkey_hidden = 1;\n\t\t\t}\n\n\t\t\t//if @default is present, there is a default value set for this input\n\t\t\tparsed_input.default_value = (the_raw_input[\"@default\"] === undefined) ? \"\" : parsed_input.default_value = the_raw_input[\"@default\"];\n\n\t\t\t//if @integer is present, convert the type to integer (it defaults to text)\n\t\t\tif (the_raw_input[\"@integer\"] !== undefined) {\n\t\t\t\tparsed_input.type = \"integer\";\n\n\t\t\t}\n\n\t\t\t//if @decimal is present, convert the type to integer (it defaults to text)\n\t\t\tif (the_raw_input[\"@decimal\"] !== undefined) {\n\t\t\t\tparsed_input.type = \"decimal\";\n\n\t\t\t}\n\n\t\t\t//if @setdate or @date  is present, convert the type to date (it defaults to text) and add the \"format\" attribute\n\t\t\tif (the_raw_input[\"@setdate\"] !== undefined || the_raw_input[\"@date\"] !== undefined) {\n\n\t\t\t\tparsed_input.type = \"date\";\n\t\t\t\tparsed_input.datetime_format = the_raw_input[\"@setdate\"] || the_raw_input[\"@date\"];\n\n\t\t\t\t//also add the setdate value as default to indicate it needs to default to current date\n\t\t\t\tparsed_input.default_value = the_raw_input[\"@setdate\"] || \"\";\n\n\t\t\t}\n\n\t\t\t//if @settime or @time is present, convert the type to time (it defaults to text) and add the \"format\" attribute\n\t\t\tif (the_raw_input[\"@settime\"] !== undefined || the_raw_input[\"@time\"] !== undefined) {\n\n\t\t\t\tparsed_input.type = \"time\";\n\t\t\t\tparsed_input.datetime_format = the_raw_input[\"@settime\"] || the_raw_input[\"@time\"];\n\n\t\t\t\t//also add the settime value as default to indicate it needs to default to current time\n\t\t\t\tparsed_input.default_value = the_raw_input[\"@settime\"] || \"\";\n\t\t\t}\n\n\t\t\t//set regex if any @regex is specified\n\t\t\tparsed_input.regex = (the_raw_input[\"@regex\"] === undefined) ? \"\" : the_raw_input[\"@regex\"];\n\n\t\t\t//set max and min value if any specified (not numeric fields will get \"none\")\n\t\t\tparsed_input.max_range = (the_raw_input[\"@max\"] === undefined) ? \"\" : the_raw_input[\"@max\"];\n\t\t\tparsed_input.min_range = (the_raw_input[\"@min\"] === undefined) ? \"\" : the_raw_input[\"@min\"];\n\n\t\t\t//set is_required to true or false based on the @required present or not\n\t\t\tparsed_input.is_required = (the_raw_input[\"@required\"] === undefined) ? 0 : 1;\n\n\t\t\t//set search flag: this will be used for the advanced search function\n\t\t\tparsed_input.is_searchable = (the_raw_input[\"@search\"] === undefined) ? 0 : 1;\n\n\t\t\t/*\n\t\t\t * set title to true or false based on the @title present or not\n\t\t\t *\n\t\t\t * !--XML form builder needs to force at least one occurrence of @title --!\n\t\t\t */\n\t\t\tparsed_input.is_title = (the_raw_input[\"@title\"] === undefined) ? 0 : 1;\n\n\t\t\t//set is_double_entry flag based on @verify present or not\n\t\t\tparsed_input.has_double_check = (the_raw_input[\"@verify\"] === undefined) ? 0 : 1;\n\n\t\t\tif (the_raw_input[\"@jump\"] !== undefined) {\n\n\t\t\t\t//Set flag about this input triggering a jump or not\n\t\t\t\tparsed_input.has_jump = 1;\n\n\t\t\t\tparsed_input.jumps = the_raw_input[\"@jump\"];\n\t\t\t}\n\n\t\t\t//<radio>, <select> (checkbox), <select1>(select) will have list of available options attached as \"item\" array\n\t\t\tif (the_type === EC.Const.RADIO || the_type === EC.Const.CHECKBOX || the_type === EC.Const.DROPDOWN) {\n\n\t\t\t\t//add set of options to options array, to link back to each input using @ref, @num\n\n\t\t\t\t//options for hierarchy forms (main)\n\t\t\t\tif (form_type === \"main\") {\n\t\t\t\t\tself.options.push({\n\t\t\t\t\t\tnum : the_form_num,\n\t\t\t\t\t\tref : the_raw_input[\"@ref\"],\n\t\t\t\t\t\toptions : the_raw_input.item\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\t//options for branch form\n\t\t\t\t\tself.branch_options.push({\n\t\t\t\t\t\tnum : the_form_num,\n\t\t\t\t\t\tref : the_raw_input[\"@ref\"],\n\t\t\t\t\t\toptions : the_raw_input.item\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}//if\n\n\t\t\t//if the type is branch, set branch_form value\n\t\t\tparsed_input.branch_form_name = (the_raw_input[\"@branch_form\"] === undefined) ? \"\" : the_raw_input[\"@branch_form\"];\n\n\t\t\t//store input\n\t\t\tself.input_list.push(parsed_input);\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Parse));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device, xml2json*/\n/*\n * @module EC\n * @submodulemodule Parser\n */\nvar EC = EC || {};\nEC.Parse = ( function(module) {\"use strict\";\n\n\t\tmodule.parseXML = function(the_data) {\n\n\t\t\tvar self = this;\n\t\t\tvar data = the_data;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar malformed_json = \"\";\n\t\t\tvar json = \"\";\n\t\t\tvar obj;\n\t\t\tvar form_has_media;\n\t\t\tvar form_has_branches;\n\t\t\tvar raw_forms = [];\n\n\t\t\tself.form_key = \"\";\n\t\t\tself.parsed_forms = [];\n\t\t\tself.form_inputs_positions = [];\n\n\t\t\t/* Map each form inputs against its position in the form:\n\t\t\t * we do this because converting from xml to json it will group the same tags together therefore we would lose the inputs real order */\n\t\t\tself.form_inputs_positions = self.mapPositionToInput(data);\n\n\t\t\tconsole.log(self.form_inputs_positions, true);\n\n\t\t\t//remove \"undefined\" from json string (workaround to deal with ECML custom data format)\n\t\t\tmalformed_json = xml2json(data);\n\n\t\t\tjson = malformed_json.replace(\"undefined\", \"\");\n\n\t\t\tconsole.log('json');\n\t\t\tconsole.log(json);\n\n\t\t\t//json string to object\n\t\t\ttry {\n\t\t\t\tobj = JSON.parse(json);\n\t\t\t} catch (error) {\n\t\t\t\t//escape backslashes (found in regex, for example) -> double check cos it is working better without\n\t\t\t\tjson = json.replace(/\\\\/g, \"\\\\\\\\\");\n\t\t\t\tobj = JSON.parse(json);\n\n\t\t\t}\n\n\t\t\t//get project details (access properties with @ as array keys)\n\t\t\tself.project = {\n\t\t\t\tname : obj.ecml.model.submission[\"@projectName\"], //\n\t\t\t\tallowDownloadEdits : obj.ecml.model.submission[\"@allowDownloadEdits\"], //\n\t\t\t\tversion : obj.ecml.model.submission[\"@versionNumber\"],\n\t\t\t\tdownloadFromServer : obj.ecml.model.downloadFromServer,\n\t\t\t\tuploadToServer : obj.ecml.model.uploadToServer\n\t\t\t};\n\n\t\t\t//get the forms in raw format (with @ etc...)\n\t\t\traw_forms = obj.ecml.form;\n\n\t\t\t//if no forms for this project, exit and warn user project xml is wrong\n\t\t\tif (raw_forms === undefined) {\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t//cache lenght (with a single form project length defaults to 1 as the length property will be undefined)\n\t\t\tiLength = raw_forms.length || 1;\n\n\t\t\t//convert object to array (when it is a single form)\n\t\t\tif (iLength === 1) {\n\t\t\t\traw_forms = [raw_forms];\n\t\t\t}\n\n\t\t\tconsole.log(self.project);\n\n\t\t\t//kepp track of number of form per type\n\t\t\tself.project.total_hierarchy_forms = 0;\n\t\t\tself.project.total_branch_forms = 0;\n\n\t\t\t//parse all the raw forms to have objects in proper format\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tvar form_obj = raw_forms[i];\n\t\t\t\tvar type = \"\";\n\t\t\t\t//cache form number to be passed later to parseInput functions\n\t\t\t\tvar form_num = form_obj[\"@num\"];\n\t\t\t\tvar form_type = (form_obj[\"@main\"] === \"false\") ? \"branch\" : \"main\";\n\t\t\t\tvar form_name = form_obj[\"@name\"];\n\n\t\t\t\t//clear input_list\n\t\t\t\tself.input_list.length = 0;\n\n\t\t\t\t//clear genkey hidden flag\n\t\t\t\tself.is_form_genkey_hidden = 0;\n\n\t\t\t\t//store a flag to indicate the current form has at least 1 media input\n\t\t\t\tform_has_media = 0;\n\n\t\t\t\t//store a flag to indicate the current form has at least 1 branch\n\t\t\t\tform_has_branches = 0;\n\n\t\t\t\t//store the current form key for later use\n\t\t\t\tself.form_key = form_obj[\"@key\"];\n\n\t\t\t\t//get form attribute\n\t\t\t\tself.parsed_forms.push({\n\n\t\t\t\t\tnum : form_num,\n\t\t\t\t\tname : form_name,\n\t\t\t\t\tkey : self.form_key\n\n\t\t\t\t});\n\n\t\t\t\t/*if @main is defined this is a form of type main, else it is a branch\n\t\t\t\t *\n\t\t\t\t */\n\t\t\t\tself.parsed_forms[i].type = form_type;\n\n\t\t\t\t/*\tParse single value form inputs/custom tags\n\t\t\t\t*   if a tag is not undefined, it can be either an Object (single occurrence) or Array of Objects (multiple occurrences)\n\t\t\t\t*\talso add the form 'num' attribute to each input to reference the right form when storing the inputs to db\n\t\t\t\t*/\n\n\t\t\t\t//parse all the input tags (set as type text)\n\t\t\t\tif (form_obj.input !== undefined) {\n\n\t\t\t\t\ttype = \"text\";\n\n\t\t\t\t\tif (Array.isArray(form_obj.input)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.input, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.input, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//parse barcode tags (set as type barcode)\n\t\t\t\tif (form_obj.barcode !== undefined) {\n\n\t\t\t\t\ttype = \"barcode\";\n\n\t\t\t\t\tif (Array.isArray(form_obj.barcode)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.barcode, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.barcode, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//parse location tags (set as type location)\n\t\t\t\tif (form_obj.location !== undefined) {\n\n\t\t\t\t\ttype = \"location\";\n\n\t\t\t\t\tif (Array.isArray(form_obj.location)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.location, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.location, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//parse audio tags (set as type audio)\n\t\t\t\tif (form_obj.audio !== undefined) {\n\n\t\t\t\t\ttype = \"audio\";\n\t\t\t\t\tform_has_media = 1;\n\n\t\t\t\t\tif (Array.isArray(form_obj.audio)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.audio, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.audio, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//parse video tags (set as type video)\n\t\t\t\tif (form_obj.video !== undefined) {\n\n\t\t\t\t\ttype = \"video\";\n\t\t\t\t\tform_has_media = 1;\n\n\t\t\t\t\tif (Array.isArray(form_obj.video)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.video, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.video, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//parse photo tags (set as type photo)\n\t\t\t\tif (form_obj.photo !== undefined) {\n\n\t\t\t\t\ttype = \"photo\";\n\t\t\t\t\tform_has_media = 1;\n\n\t\t\t\t\tif (Array.isArray(form_obj.photo)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.photo, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.photo, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//parse textarea tags (set as type textarea)\n\t\t\t\tif (form_obj.textarea !== undefined) {\n\n\t\t\t\t\ttype = \"textarea\";\n\n\t\t\t\t\tif (Array.isArray(form_obj.textarea)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.textarea, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.textarea, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t* Parse tags which allows selection from multiple values (drodpdown, checkbox, radio )\n\t\t\t\t*\n\t\t\t\t*  ! select -> checkbox\n\t\t\t\t*  ! select1 -> select (dropdown)\n\t\t\t\t*  ! radio -> radio button\n\t\t\t\t*\n\t\t\t\t*  Each sets of possible values is within the itme array\n\t\t\t\t*/\n\n\t\t\t\t//parse radio tags (set as type radio)\n\t\t\t\tif (form_obj.radio !== undefined) {\n\n\t\t\t\t\ttype = \"radio\";\n\n\t\t\t\t\tif (Array.isArray(form_obj.radio)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.radio, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.radio, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//parse select1 tags (set as type select)\n\t\t\t\tif (form_obj.select1 !== undefined) {\n\n\t\t\t\t\ttype = \"select\";\n\n\t\t\t\t\tif (Array.isArray(form_obj.select1)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.select1, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.select1, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//parse select tags (set as type checkbox)\n\t\t\t\tif (form_obj.select !== undefined) {\n\n\t\t\t\t\ttype = \"checkbox\";\n\n\t\t\t\t\tif (Array.isArray(form_obj.select)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.select, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.select, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//parse <branch> tag (set as type bracnh)\n\t\t\t\tif (form_obj.branch !== undefined) {\n\n\t\t\t\t\ttype = \"branch\";\n\t\t\t\t\tform_has_branches = 1;\n\n\t\t\t\t\tif (Array.isArray(form_obj.branch)) {\n\t\t\t\t\t\tself.parseInputArray(form_obj.branch, type, form_num, form_type, form_name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.parseInputObject(form_obj.branch, type, form_num, form_type, form_name);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t* After all the field tags have been parsed, store input list for the current form and clear it for next form\n\t\t\t\t*/\n\n\t\t\t\t//store list of inputs for current form (hierarchy-> main=true, branch->main=false)\n\t\t\t\tif (form_obj[\"@main\"] === \"true\") {\n\t\t\t\t\tself.inputs.push({\n\t\t\t\t\t\tnum : form_obj[\"@num\"],\n\t\t\t\t\t\tinput_list : self.input_list.slice(0)\n\t\t\t\t\t});\n\n\t\t\t\t\t//count current form as hierarchy\n\t\t\t\t\tself.project.total_hierarchy_forms++;\n\n\t\t\t\t} else {\n\t\t\t\t\tself.branch_inputs.push({\n\t\t\t\t\t\tnum : form_obj[\"@num\"],\n\t\t\t\t\t\tinput_list : self.input_list.slice(0)\n\t\t\t\t\t});\n\n\t\t\t\t\t//count current form as branch\n\t\t\t\t\tself.project.total_branch_forms++;\n\t\t\t\t}\n\n\t\t\t\t//add total number of inputs to current parsed form object\n\t\t\t\tself.parsed_forms[i].total_inputs = self.input_list.length;\n\n\t\t\t\t//add is_form_genkey_hidden flag, meaning the input field with the auto generated key will not be shown\n\t\t\t\tself.parsed_forms[i].is_form_genkey_hidden = self.is_form_genkey_hidden;\n\n\t\t\t\t//add flag to see if a form contains media input\n\t\t\t\tself.parsed_forms[i].has_media = form_has_media;\n\n\t\t\t\t//add flag to see if a form contains branches\n\t\t\t\tself.parsed_forms[i].has_branches = form_has_branches;\n\n\t\t\t}//for each raw_forms\n\n\t\t\tconsole.log(\"Parsed forms\");\n\t\t\tconsole.log(self.parsed_forms, true);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Parse));\n","/*jslint vars: true , nomen: true, devel: true, plusplus: true*/\n/*global $, jQuery*/\n\n/**\n * @module EC\n * @submodule Routing\n */\n\nvar EC = EC || {};\nEC.Routing = EC.Routing || {};\nEC.Routing.branchInputsPageEvents = function () {\n    'use strict';\n\n    $(document).on('pageinit', '#branch-feedback', function () {\n        console.log('feedback init called');\n    });\n\n    /********BRANCH INPUT TEXT*********/\n    $(document).on('pagebeforeshow', '#branch-text', function (e) {\n        //get the branch-text.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-text', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /**********************************/\n\n    /********BRANCH INPUT INTEGER*********/\n    $(document).on('pagebeforeshow', '#branch-integer', function (e) {\n        //get the branch-integer.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-integer', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /********BRANCH INPUT DECIMAL*********/\n    $(document).on('pagebeforeshow', '#branch-decimal', function (e) {\n        //get the branch-decimal.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-decimal', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /********BRANCH INPUT DATE*********/\n    $(document).on('pagebeforeshow', '#branch-date', function (e) {\n        //get the #branch-date.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-date', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /********BRANCH INPUT TIME*********/\n    $(document).on('pagebeforeshow', '#branch-time', function (e) {\n        //get the branch-time.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-time', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    //#select is rendered as dropdown\n    /********BRANCH INPUT DROPDOWN*********/\n    $(document).on('pagebeforeshow', '#branch-select', function (e) {\n        //get the branch-select.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-select', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /********BRANCH INPUT RADIO*********/\n    $(document).on('pagebeforeshow', '#branch-radio', function (e) {\n\n        //get the branch-radio.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n\n        //@bug in JQM maybe...I do not know any other way to make it work\n        $('div#input-radio input:radio').each(function (i) {\n\n            //if a value is cached, pre-select that radio button option manually triggering a 'vclick' event\n            if ($(this).attr('checked')) {\n                $(this).next().trigger('vclick');\n            }\n        });\n    });\n    // $(document).on('pagecreate', '#branch-radio', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /* BRANCH INPUT CHECKBOX ************/\n    $(document).on('pagebeforeshow', '#branch-checkbox', function (e) {\n        //get the branch-checkbox,html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-checkbox', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /* BRANCH INPUT TEXTAREA ************/\n    $(document).on('pagebeforeshow', '#branch-textarea', function (e) {\n        //get the #textarea page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-textarea', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /** BRANCH INPUT LOCATION **********/\n    $(document).on('pagebeforeshow', '#branch-location', function (e) {\n        //get the branch-location.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-location', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /** BRANCH INPUT PHOTO *************/\n    $(document).on('pagebeforeshow', '#branch-photo', function (e) {\n        //get the branch-photo.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-photo', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /** BRANCH INPUT VIDEO *************/\n    $(document).on('pagebeforeshow', '#branch-video', function (e) {\n        //get the branch-video.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-video', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /************************************/\n\n    /** BRANCH INPUT AUDIO *************/\n    $(document).on('pagebeforeshow', '#branch-audio', function (e) {\n        //get the branch-audio page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-audio', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /*************************************/\n\n    /** BRANCH INPUT BARCODE *************/\n    $(document).on('pagebeforeshow', '#branch-barcode', function (e) {\n        //get the  branch-barcode.html page and inject the input data\n        EC.BranchInputs.renderInput(EC.BranchInputs.getInputAt(window.localStorage.branch_current_position));\n    });\n    // $(document).on('pagecreate', '#branch-audio', function(e) {\n    // EC.Utils.updateFormCompletion(true);\n    // });\n    /*************************************/\n\n    $(document).on('pagebeforeshow', '#branch-save-confirm', function (e) {\n        //Ask save confirmation to use\n        EC.BranchInputs.renderSaveConfirmView();\n    });\n\n    $(document).on('pagebeforeshow', '#branch-feedback', function (e) {\n        //Show feedback to user\n        EC.BranchInputs.renderFeedbackView();\n    });\n};\n","var EC = EC || {};\nEC.Routing = EC.Routing || {};\nEC.Routing.changePage = function (the_view, the_path) {\n    'use strict';\n\n    var view = the_view;\n    var page_uri;\n    //TODO: make the function reusable when we want or not want to add a new entry in the browser history\n    var page;\n\n    page_uri = EC.Utils.getPageBaseURI();\n    page = (view === EC.Const.INDEX_VIEW) ? page_uri + view : page_uri + EC.Const.VIEWS_DIR + view;\n\n    console.log('Routing to ---------------------------------> ' + page);\n    $.mobile.changePage(page, {\n        transition: 'fade',\n        reverse: false,\n        changeHash: true,\n        allowSamePageTransition: true\n    });\n};\n","/* jslint vars: true , nomen: true devel: true, plusplus: true*/\n/* global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.Routing = EC.Routing || {};\nEC.Routing.goBack = function (the_page_id) {\n    'use strict';\n\n    var page_id = the_page_id;\n    var back_btn = null;\n    var inactive_tab = null;\n\n    var input_views_ids = [//\n        'audio', //\n        'barcode', //\n        'branch', //\n        'checkbox', //\n        'date', //\n        'decimal', //\n        'integer', //\n        'location', //\n        'photo', //\n        'radio', //\n        'save-confirm', //\n        'save-feedback', //\n        'select', //\n        'text', //\n        'textarea', //\n        'time', //\n        'video'//\n    ];\n\n    var branch_input_views_ids = [//\n        'branch-audio', //\n        'branch-barcode', //\n        'branch-branch', //\n        'branch-checkbox', //\n        'branch-date', //\n        'branch-decimal', //\n        'branch-integer', //\n        'branch-location', //\n        'branch-photo', //\n        'branch-radio', //\n        'branch-save-confirm', //\n        'branch-save-feedback', //\n        'branch-select', //\n        'branch-text', //\n        'branch-textarea', //\n        'branch-time', //\n        'branch-video'//\n    ];\n\n    var hierarchy_views_ids = [//\n        'forms', //\n        'entries', //\n        'entry-values' //\n    ];\n\n    var branch_views_ids = [//\n        'branch-entries', //\n        'branch-entry-values' //\n    ];\n\n    var action_views_ids = [//\n        'settings', //\n        'add-project', //\n        'email-backup', //\n        'upload', //\n        'download' //\n    ];\n\n\n\n    //if the page is an input view, back button will perform the same action as the\n    // top left back button on screen\n    if (EC.Utils.inArray(input_views_ids, page_id)) {\n\n        //force a click to on screen back button\n        back_btn = $('div#' + page_id + ' div[data-role=\"header\"] div[data-href=\"back-btn\"]');\n        back_btn.trigger('vclick');\n\n    }\n\n    //if the page if a branch input view, back button will perform the same action as\n    // the top left back button on screen\n    if (EC.Utils.inArray(branch_input_views_ids, page_id)) {\n\n        //force a click to on screen back button\n        back_btn = $('div#' + page_id + ' div[data-role=\"header\"] div[data-href=\"back-btn\"]');\n        back_btn.trigger('vclick');\n\n    }\n\n    //if the page is one of the hierarchy dynamic navigation pages, the back button\n    // will perform the same action as the left tab button on screen\n    if (EC.Utils.inArray(hierarchy_views_ids, page_id)) {\n\n        //force a click to on screen back button\n        inactive_tab = $('div#' + page_id + ' div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n        inactive_tab.trigger('vclick');\n\n    }\n\n    /* if the page is one of the branch dynamic navigation pages, the back button\n     * will perform the same action as the left tab button on screen i.e back 1 step\n     *\n     */\n    if (EC.Utils.inArray(branch_views_ids, page_id)) {\n        //force a click to on screen back button\n        inactive_tab = $('div#' + page_id + ' div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n        inactive_tab.trigger('vclick');\n    }\n\n    //if the page if a action view, back button will perform the same action as the\n    // top left back button on screen\n    if (EC.Utils.inArray(action_views_ids, page_id)) {\n\n        //force a click to on screen back button\n        back_btn = $('div#' + page_id + ' div[data-role=\"header\"] div[data-href=\"back-btn\"]');\n        back_btn.trigger('vclick');\n\n    }\n\n};\n","/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Routing = EC.Routing || {};\nEC.Routing.indexPageEvents = function () {\n    'use strict';\n\n    $(document).on('pagebeforeshow', '#index', function (e) {\n\n        var back_nav_hash = window.localStorage.back_nav_url;\n\n        //if we are coming to the #index page after a project deletion, force a getProjectList() to update the list of project\n        if (window.localStorage.is_project_deleted === '1') {\n\n            EC.Project.getList();\n\n            window.localStorage.removeItem('is_project_deleted');\n            return;\n\n        }\n\n        if (back_nav_hash === '#refresh') {\n            EC.Project.getList();\n            window.localStorage.removeItem('back_nav_hash');\n        }\n\n    });\n\n    $(document).on('pagebeforeshow', '#forms', function (e) {\n\n        var $query_param = e.delegateTarget.baseURI;\n\n        EC.Notification.showProgressDialog();\n\n        console.log('#forms pagebeforeshow');\n\n        //reset breadcrumbs trail\n        window.localStorage.removeItem('breadcrumbs');\n        window.localStorage.removeItem('entries_totals');\n        //reset 'editing mode' flag\n        window.localStorage.removeItem('edit_mode');\n\n        //get all form by project_id\n        EC.Forms.getList(decodeURI($query_param));\n\n    });\n\n    $(document).on('pagebeforeshow', '#entries', function (e) {\n\n        var $query_param = e.delegateTarget.baseURI;\n\n        EC.Notification.showProgressDialog();\n\n        //reset 'editing mode' flag\n        window.localStorage.removeItem('edit_mode');\n\n        //get all entries\n        EC.Entries.getList(decodeURI($query_param));\n\n    });\n\n    $(document).on('pagebeforeshow', '#entry-values', function (e) {\n\n        var $query_param = e.delegateTarget.baseURI;\n\n        EC.Notification.showProgressDialog();\n\n        EC.Entries.getEntryValues(decodeURI($query_param));\n\n    });\n\n    //settings page\n    $(document).on('pagebeforeshow', '#settings', function (e) {\n        EC.Settings.renderView();\n    });\n\n    //add project page\n    $(document).on('pagebeforeshow', '#add-project', function (e) {\n        EC.Project.renderAddProjectView();\n    });\n\n    //email backup page\n    $(document).on('pagebeforeshow', '#email-backup', function (e) {\n        EC.EmailBackup.renderSendEmailView();\n    });\n\n    //upload page\n    $(document).on('pagebeforeshow', '#upload', function (e) {\n        EC.Upload.renderUploadView(false);\n    });\n\n    //download page\n    $(document).on('pagebeforeshow', '#download', function (e) {\n        EC.Download.renderDownloadView();\n    });\n\n    /********************************************************/\n    //force close the activity spinner loader\n    $(document).on('pageshow', '#index', function (e) {\n        EC.Notification.hideProgressDialog();\n        /*@bug on iOS: hack to force a scroll to the top of the page,\n         otherwise page will scroll down 18px (due to iOS7 status bar quirk, see MainViewController.m in xCode)*/\n        if (window.device) {\n            if (window.device.platform === EC.Const.IOS) {\n                $.mobile.silentScroll(0);\n            }\n        }\n\n    });\n\n    $(document).on('pageshow', '#forms', function (e) {\n\n        /*@bug on iOS: hack to force a scroll to the top of the page,\n         otherwise page will scroll down 18px (due to iOS7 status bar quirk, see MainViewController.m in xCode)*/\n        if (window.device) {\n            if (window.device.platform === EC.Const.IOS) {\n                $.mobile.silentScroll(0);\n            }\n        }\n        //$('div#forms').scrollTop(18);\n        EC.Notification.hideProgressDialog();\n\n    });\n\n    $(document).on('pageshow', '#entries', function (e) {\n\n        if (window.localStorage.previous_tapped_entry_Y) {\n            $.mobile.silentScroll(parseInt(window.localStorage.previous_tapped_entry_Y, 10));\n        }\n        else {\n            /*@bug on iOS: hack to force a scroll to the top of the page,\n             otherwise page will scroll down 18px (due to iOS7 status bar quirk, see MainViewController.m in xCode)*/\n            if (window.device) {\n                if (window.device.platform === EC.Const.IOS) {\n                    $.mobile.silentScroll(0);\n                }\n            }\n\n        }\n\n        EC.Notification.hideProgressDialog();\n    });\n\n    $(document).on('pageshow', '#entry-values', function (e) {\n        /*@bug on iOS: hack to force a scroll to the top of the page,\n         otherwise page will scroll down 18px (due to iOS7 status bar quirk, see MainViewController.m in xCode)*/\n        if (window.device) {\n            if (window.device.platform === EC.Const.IOS) {\n                $.mobile.silentScroll(0);\n            }\n        }\n\n        EC.Notification.hideProgressDialog();\n    });\n    /********************************************************/\n\n    /*Localise placeholders: it needs to be done here, after the markup has been enhanced by JQM\n     *placing it in pagebeforeshow was not working\n     */\n    $(document).on('pageshow', '#add-project', function (e) {\n\n        /*@bug on iOS: hack to force a scroll to the top of the page,\n         otherwise page will scroll down 18px (due to iOS7 status bar quirk, see MainViewController.m in xCode)*/\n        if (window.device) {\n            if (window.device.platform === EC.Const.IOS) {\n                $.mobile.silentScroll(0);\n            }\n        }\n\n        //Localise placeholder if device language is not set to English and the language is supported\n        //if the device language is not localised or it is English, do not translate placeholder\n        if (Object.keys(EC.Dictionary).indexOf(window.localStorage.DEVICE_LANGUAGE) !== -1) {\n            EC.Localise.applyToPlaceholders(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n    });\n};\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\n/**\n * @module EC\n * @submodule Routing\n */\n\nvar EC = window.EC || {};\nEC.Routing = EC.Routing || {};\nEC.Routing.inputsPageEvents = function () {\n    'use strict';\n\n    $(document).on('pageinit', '#feedback', function () {\n\n        console.log('feedback init called');\n\n    });\n\n    $(document).on('pagebeforeshow', '#text', function () {\n\n        //get the #text page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#integer', function () {\n\n        //get the #number page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#decimal', function () {\n\n        //get the #number page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#date', function () {\n\n        //get the #date page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#time', function () {\n\n        //get the #time page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n\n    //#select is dropdown\n    $(document).on('pagebeforeshow', '#select', function () {\n\n        //get the #dropdown page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#radio', function () {\n\n        //get the #radio page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n        //@bug in JQM maybe...I do not know any other way to make it work\n        $('div#input-radio input:radio').each(function () {\n\n            //if a value is cached, pre-select that radio button option manually triggering a 'vclick' event\n            if ($(this).attr('checked')) {\n                $(this).next().trigger('vclick');\n            }\n        });\n        //@bug\n\n    });\n\n    $(document).on('pagebeforeshow', '#checkbox', function () {\n\n        //get the #checkbox page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#textarea', function () {\n\n        //get the #textarea page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagecreate', '#textarea', function () {\n        //EC.Utils.updateFormCompletion(false);\n    });\n\n    $(document).on('pagebeforeshow', '#location', function () {\n\n        //get the #location page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#photo', function () {\n\n        //get the #photo page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#video', function () {\n\n        //get the #video page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#audio', function () {\n\n        //get the #audio page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n    $(document).on('pagebeforeshow', '#barcode', function () {\n\n        //get the #barcode page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n\n    $(document).on('pagebeforeshow', '#branch', function () {\n\n        //reset cached branch objects in localStorage\n        window.localStorage.removeItem('branch_current_position');\n        window.localStorage.removeItem('branch_entries');\n        window.localStorage.removeItem('branch_form_has_jumps');\n        window.localStorage.removeItem('branch_form_id');\n        window.localStorage.removeItem('branch_form_name');\n        window.localStorage.removeItem('branch_inputs_total');\n        window.localStorage.removeItem('branch_inputs_trail');\n        window.localStorage.removeItem('branch_inputs_values');\n\n        //get the #branch page and inject the input data\n        EC.Inputs.renderInput(EC.Inputs.getInputAt(window.localStorage.current_position));\n\n    });\n\n    $(document).on('pagebeforeshow', '#branch-entries', function () {\n\n        //get the #branch-entries page and inject the input data\n        EC.Entries.getBranchEntriesList();\n\n    });\n\n    $(document).on('pagebeforeshow', '#branch-entry-values', function (e) {\n\n        //get full url with query string\n        var $query_param = e.delegateTarget.baseURI;\n\n        //get the #branch page and inject the input data\n        EC.Entries.getBranchEntryValues(decodeURI($query_param));\n\n    });\n\n    $(document).on('pageshow', '#branch-entry-values', function () {\n        EC.Notification.hideProgressDialog();\n    });\n\n    $(document).on('pagebeforeshow', '#save-confirm', function () {\n        //Ask save confirmation to use\n        EC.Inputs.renderSaveConfirmView();\n    });\n\n    $(document).on('pagebeforeshow', '#feedback', function () {\n\n        //Show feedback to user\n        EC.Inputs.renderFeedbackView();\n\n    });\n\n    /********************************************************/\n    //force close the activity spinner loader\n    $(document).on('pageshow', '#branch-entries', function () {\n        EC.Notification.hideProgressDialog();\n    });\n    $(document).on('pageshow', '#branch-entry-values', function () {\n        EC.Notification.hideProgressDialog();\n    });\n    /********************************************************/\n\n};\n","var EC = EC || {};\nEC.Dictionary = EC.Dictionary || {};\nEC.Dictionary = {\n\n    en: {\n        home: 'Home',\n        settings: 'Settings',\n        help: 'Help',\n        rate_us: 'Rate Us',\n        add_project: 'Add project',\n        loading_project: 'Loading project',\n        search_project: 'Search a project using the box above',\n        projects: 'Projects',\n        filter_project: 'Filter projects...',\n        no_projects_found: 'No projects found!',\n        project_list: 'Project List',\n        type_project_name_here: 'Type a project name here...',\n        tap_the: 'Tap the ',\n        button: 'button ',\n        add: 'Add ',\n        to: ' to ',\n        to_add: 'to add ',\n        to_add_one: 'to add one.',\n        upload_to: 'Upload to ',\n        upload_data: 'Upload Data',\n        upload_images: 'Upload Images',\n        upload_audios: 'Upload Audios',\n        upload_videos: 'Upload Videos',\n        remote_server_url: 'Remote Server URL',\n        pagination: 'Pagination: entries listed per page',\n        app_version: 'App Version: ',\n        forms: 'Forms',\n        backup_data: 'Backup Project Data',\n        restore_data: 'Restore Data from Backup',\n        email_backup: 'Email Backup',\n        download_remote_data: 'Download remote data',\n        unsync_entries: 'Unsync All Entries Data',\n        delete_entries: 'Delete All Entries',\n        export_all_entries_to_csv: 'Export Data to CSV',\n        export_all_entries_to_csv_confirm: 'Are you sure you want to export data to CSV?',\n        delete_synced: 'Delete Synced Entries',\n        delete_media: 'Delete Media Files',\n        delete_project: 'Delete Project',\n        show_more: 'Show more',\n        no_entries_found: 'No entries found!',\n        enter_email: 'Enter email address',\n        email_backup_to: 'Email Backup for',\n        select_form_download: 'Select form to download data from',\n        delete_entry: 'Delete Entry',\n        unsync_entry: 'Unsync Entry',\n        prev: 'Previous',\n        next: 'Next',\n        record: 'Record',\n        stop: 'Stop',\n        play: 'Play',\n        recording: 'Recording',\n        no_audio_available: 'No audio available yet',\n        scan: 'Scan',\n        type_confirm: 'Type again to confirm',\n        pk_not_editable: 'This value is the primary key for this entry, it cannot be edited. ',\n        add_branch_form: 'Add branch form',\n        list_branch_entries: 'List branch entries',\n        set_location: 'Set Location',\n        take_photo: 'Take Photo',\n        tap_to_store: 'Tap button to store values',\n        store: 'Store',\n        store_edit: 'Store Edit',\n        data_saved_success: 'Data saved successfully',\n        branch_data_saved_success: 'Branch data saved successfully',\n        add_another: 'Add another ',\n        list: 'List ',\n        entries: ' entries ',\n        add_video: 'Add video',\n        play_video: 'Play video',\n        back_to: 'Back to ',\n        error: 'Error',\n        project_already_loaded: 'Project already loaded on device!',\n        exit: 'Exit',\n        exit_confirm: 'Are you sure? \\nData will NOT be saved',\n        value_exist: 'Value already exists!',\n        invalid_integer: 'The number entered is not an integer value!',\n        invalid_decimal: 'The value entered is not a decimal value! Only numbers and the dot \".\" are allowed',\n        pk_reserved_char: 'This field is a primary key: it cannot cointain the reserved char: ',\n        invalid_regex: 'This field does not match the regex: ',\n        values_unmatched: 'This fields do not match each other',\n        out_of_range: 'Value entered is out of range',\n        reserved_keyword: 'Value entered is an Epicollect+ reserved keyword',\n        field_required: 'This field is required',\n        invalid_xml: 'Project XML is no valid, maybe no forms yet?',\n        connection_timeout: 'Server connection time out',\n        connection_lost: 'Connection lost, please retry',\n        project_not_found_on_server: 'Project not found on server ',\n        project_not_found: 'Project not found!',\n        unknow_error: 'Unknown Error!',\n        leaving_current_form: 'Leaving current form',\n        save_before_leave: 'Save data before leaving?',\n        edit_saved: 'Edit saved!',\n        missing_pk: 'Primary key value for this form is missing.You probably jumped a required field, please go back and try again',\n        gps_disabled: 'Please enable GPS',\n        locating: 'Locating',\n        wait: 'Wait...',\n        location_acquired: 'Location acquired',\n        location_fail: ', not able to locate!',\n        location_service_fail: 'Something went wrong...are Location Services enabled for Epicollect5?',\n        failed_because: 'Failed because: ',\n        download_success: 'All data downloaded',\n        parent_key_for_1: 'Parent keys for ',\n        parent_key_for_2: ' are missing on device database, please download ',\n        parent_key_for_3: ' entries first',\n        no_internet: 'No Internet Connection!!',\n        invalid_email: 'Not a valid email address!!',\n        invalid_email_client: 'Please set up a mail client app first',\n        generic_error: 'An error occurred, please retry',\n        entry_unsynced: 'Entry unsynced',\n        entry_deleted: 'Entry deleted',\n        all_data_synced: 'All data unsynced',\n        all_entries_deleted: 'All entries deleted',\n        data_exported_to_csv: 'Data exported to csv',\n        all_media_deleted: 'All media deleted',\n        all_synced_deleted: 'All synced entries deleted',\n        branch_entry_deleted: 'Branch entry deleted',\n        delete_branch_entry: 'Delete Branch Entry',\n        delete_entry_confirm: 'Are you sure you want to delete this entry?',\n        unsync_entry_confirm: 'Are you sure you want to unsync this entry?',\n        delete_entry_with_children_confirm: 'Are you sure you want to delete this entry?  \\n This entry and all its children will be deleted!',\n        unsync_all_data: 'Unsync all data',\n        unsync_all_data_confirm: 'Are you sure you want to unsync all the data?',\n        delete_project_confirm: 'Are you sure you want to delete this project?',\n        delete_all_entries: 'Delete all entries',\n        delete_all_entries_confirm: 'Are you sure you want to delete all entries?',\n        delete_all_media: 'Delete all media files',\n        delete_all_media_confirm: 'Are you sure you want to delete all media files?',\n        delete_all_synced: 'Delete all synced entries',\n        delete_all_synced_confirm: 'Are you sure you want to delete all synced entries?',\n        backup_data_confirm: 'Are you sure you want to backup all project entries?',\n        restore_data_confirm: 'Are you sure you want to restore from a backup? Existing data will be overriden!',\n        warning: 'Warning',\n        edited_jump: 'You modified a value linked to a jump so it is not possible to save the edit yet \\nTap NEXT to proceed or revert your changes before saving',\n        success: 'Success',\n        project_backup_success: 'Project backed up!',\n        project_deleted: 'Project deleted',\n        project_no_spaces_allowed: 'Project name cannot have empty spaces',\n        project_empty_not_allowed: 'Project name cannot be empty',\n        project_restored: 'Project restored!',\n        upload_error: ' An error occurred while uploading, please retry. ',\n        no_backup_saved: 'No backup file found!!',\n        all_images_uploaded: 'All image files uploaded! ',\n        all_audios_uploaded: 'All audio files uploaded! ',\n        all_videos_uploaded: 'All video files uploaded! ',\n        uploading: 'Uploading...',\n        data_upload_success: ' Data uploaded! ',\n        check_your_internet: ', check you internet connection.',\n        settings_saved_success: 'Settings saved',\n        questions: ' Questions',\n        hierarchy_forms: ' Hierarchy form(s)',\n        branch_forms: ' Branch(es)',\n        sending_message: 'Sending message...',\n        backup_for: 'Backup for ',\n        backup_for_project: 'Backup for project ',\n        is_attached: ' is attached',\n        select_one_option: 'Select one option',\n        photo_available: 'Photo available',\n        no_photo: 'No photo saved',\n        audio_available: 'Audio available',\n        no_audio: 'No audio saved',\n        video_available: 'Video available',\n        no_video: 'No video saved',\n        no: 'No',\n        save: 'Save',\n        dismiss: 'Dismiss',\n        confirm: 'Confirm'\n    },\n    it: {\n        home: 'Home',\n        settings: 'Impostazioni',\n        help: 'Aiuto',\n        rate_us: 'Votaci',\n        add_project: 'Aggiungi progetto',\n        loading_project: 'Caricando progetto',\n        search_project: 'Cerca progetto usando l\\'input di testo sopra',\n        projects: 'Progetti',\n        filter_project: 'Filtra progetti',\n        no_projects_found: 'Nessun progetto trovato!',\n        project_list: 'Lista progetti',\n        type_project_name_here: 'Digita il nome del progetto...',\n        tap_the: 'Premi il ',\n        button: '',\n        add: 'Add ',\n        to: ' a ',\n        to_add: 'per aggiungere ',\n        to_add_one: 'per aggiungerne uno ',\n        upload_to: 'Carica dati a ',\n        upload_data: 'Carica dati',\n        upload_images: 'Carica foto',\n        upload_audios: 'Carica tracce audio',\n        upload_videos: 'Carica video',\n        remote_server_url: 'URL del server remoto',\n        pagination: 'Paginazione: quanti elementi per pagina',\n        app_version: 'Versione della app: ',\n        forms: 'Schede',\n        backup_data: 'Backup dati',\n        restore_data: 'Ripristina da Backup',\n        email_backup: 'Posta Backup',\n        download_remote_data: 'Scarica dati remoti',\n        unsync_entries: 'De-sincronizza dati',\n        delete_entries: 'Cancella dati',\n        delete_synced: 'Cancella elementi sincronizzati',\n        delete_media: 'Cancella files multimedia',\n        delete_project: 'Cancella progetto',\n        show_more: 'Mostra altri elementi',\n        no_entries_found: 'Nessun elemento trovato!',\n        enter_email: 'Inserisci indirizzo email',\n        email_backup_to: 'Manda backup tramite email per ',\n        select_form_download: 'Seleziona la scheda da cui scaricare dati',\n        delete_entry: 'Cancella elemento',\n        unsync_entry: 'De-sincronizza elemento',\n        prev: 'Prec',\n        next: 'Succ',\n        record: 'Record',\n        stop: 'Stop',\n        play: 'Play',\n        recording: 'Registrazione',\n        no_audio_available: 'Nessuna registrazione trovata',\n        scan: 'Scan',\n        type_confirm: 'Digita di nuovo pre confermare',\n        pk_not_editable: 'Questo dato &egrave; una chiave primaria, non si &ograve; modificare',\n        add_branch_form: 'Aggiungi scheda diramazione',\n        list_branch_entries: 'Lista schede diramate',\n        set_location: 'Imposta posizione',\n        take_photo: 'Scatta foto',\n        data_saved_success: 'Dati salvati con successo',\n        branch_data_saved_success: 'Dati ramificazione salvati con successo',\n        add_another: 'Aggiungi un altro ',\n        list: 'Lista ',\n        entries: ' elementi ',\n        add_video: 'Aggiungi video',\n        play_video: 'Play video',\n        back_to: 'Torna a ',\n        error: 'Error',\n        project_already_loaded: 'Questo progetto esiste gi&agrave;',\n        exit: 'Exit',\n        exit_confirm: 'Sei sicuro? \\nDati NON verranno salvati',\n        value_exist: 'Questo valore esiste gi&agrave;',\n        invalid_integer: 'Valore inserito non &egrave; un numero intero',\n        invalid_decimal: 'Valore inserito non &egrave; un  numero decimale, solo numeri e punto (.) sono permessi',\n        pk_reserved_char: 'Questo campo &egrave; una chiave primaria, non pu&ograve; contenere il carattere riservato: ',\n        invalid_regex: 'Valore non soddisfa la epressione regolare: ',\n        values_unmatched: 'I valori non corrispondono',\n        out_of_range: 'Valore inserito &egrave; fuori dai limiti',\n        reserved_keyword: 'Valore inserito &egrave; un valore riservato a Epicollect+',\n        field_required: 'Un valore &egrave; richiesto',\n        invalid_xml: 'Progetto XML non valiso, forse non ha schede ancora?',\n        connection_timeout: 'Connessione al server scaduta',\n        connection_lost: 'Connessione persa, riprova',\n        project_not_found_on_server: 'Progetto non trovato nel server ',\n        project_not_found: 'Progetto non trovato!',\n        unknow_error: 'Errore sconosciuto!',\n        leaving_current_form: 'Uscire da scheda corrente',\n        save_before_leave: 'Salvare dati prima di uscire?',\n        edit_saved: 'Modifiche salvate',\n        missing_pk: 'Manca chive primaria.Probabilmente un campo obbligatorio &egrave; stato saltato, torna indietro e riprova',\n        gps_disabled: 'Per favore, attivare GPS',\n        locating: 'Localizzazione',\n        wait: 'Aspetta...',\n        location_acquired: 'Posizione acquisita',\n        location_fail: ', incapace di trovare posizione',\n        location_service_fail: 'Qualcosa &egrave; andato storto...sono i Servizi Locazione abilitati per Epicollect5 app?',\n        failed_because: 'Fallito perch&egrave;: ',\n        download_success: 'Tutti i dati scaricati',\n        parent_key_for_1: 'Chiavi padre per ',\n        parent_key_for_2: ' mancano nel database del dispositivo, scarica ',\n        parent_key_for_3: ' elementi prima',\n        no_internet: 'Nessuna connessione internet!!',\n        invalid_email: 'Indirizzo Email non valido!!',\n        invalid_email_client: 'Una app per mandare emails non &egrave; stata ancora impostata',\n        generic_error: 'Errore, riprova',\n        entry_unsynced: 'Elemento de-sincronizzato',\n        entry_deleted: 'Elemento cancellato',\n        all_data_synced: 'Tutti i dati sincronizzati',\n        all_entries_deleted: 'Tutti gli elementi cancellati',\n        all_media_deleted: 'Tutti i media cancellati',\n        all_synced_deleted: 'Tutti gli elementi sincronizzati cancellati',\n        branch_entry_deleted: 'Elemento ramificato cancellato',\n        delete_branch_entry: 'Cancella elemento ramificato',\n        delete_entry_confirm: 'Sei sicuro che vuoi cancellare questo elemento?',\n        unsync_entry_confirm: 'Sei sicuro che vuoi de-sincronizzare questo elemento?',\n        delete_entry_with_children_confirm: 'Sei sicuro che vuoi cancellare questo elemento?  \\n Questo elemento e tutti i \"figli\" verranno cancellati',\n        unsync_all_data: 'Unsync all data',\n        unsync_all_data_confirm: 'Sei sicuro che vuoi de-sincronizzare tutti i dati?',\n        delete_project_confirm: 'Sei sicuro che vuoi cancellare questo progetto?',\n        delete_all_entries: 'Cancella tutti gli elementi',\n        data_exported_to_csv: 'Dati esportati in formato csv',\n        delete_all_entries_confirm: 'Sei sicuro che vuoi cancellare tutti gli elementi',\n        export_all_entries_to_csv: 'Esportare dati formato csv',\n        export_all_entries_to_csv_confirm: 'Sicuro di esportare tutti dati in formato csv?',\n        delete_all_media: 'Cancellare tutti i file media',\n        delete_all_media_confirm: 'Sei sicuro che vuoi cancellare tutti i file media?',\n        delete_all_synced: 'Cancella tutti elementi sincronizzati',\n        delete_all_synced_confirm: 'Sei sicuro che vuoi cancellare tutti gli elementi sincronizzati?',\n        backup_data_confirm: 'Sicuro che vuoi fare un backup',\n        restore_data_confirm: 'Sicuro che vuoi ripristinare da backup? Dati esistenti verranno persi!',\n        warning: 'Attenzione',\n        edited_jump: 'Hai modificato un valore collegato a un salto quindi non &egrave; possibile salvare le modifiche \\nPremi \"Successivo\" per procedere o annulla le modifiche per salvare',\n        success: 'Successo',\n        project_backup_success: 'Backup del progetto eseguito!',\n        project_deleted: 'Progetto cancellato',\n        project_no_spaces_allowed: 'Il nome del progetto non pu&ograve; aver spazi',\n        project_empty_not_allowed: 'Il nome del progetto non pu&ograve; essere vuoto',\n        project_restored_: 'Progetto ripristinato!',\n        upload_error: ' Errore durante caricamento dati, riprovare. ',\n        no_backup_saved: 'Nessun file di backup trovato!!',\n        all_images_uploaded: 'Tutte i file immagini caricati! ',\n        all_audios_uploaded: 'Tutti i file audio caricati! ',\n        all_videos_uploaded: 'Tutti i file video caricati! ',\n        uploading: 'Caricando...',\n        data_upload_success: ' Dati caricati! ',\n        check_your_internet: ', controlla la tua connessione internet.',\n        settings_saved_success: 'Impostazioni salvate',\n        questions: ' Domande',\n        hierarchy_forms: ' Schede gerarchia',\n        branch_forms: ' Schede ramificate',\n        sending_message: 'Mandando email...',\n        backup_for: 'Backup per ',\n        backup_for_project: 'Il backup per il progetto ',\n        is_attached: ' &egrave; attaccato',\n        select_one_option: 'Scegli opzione',\n        photo_available: 'Foto presente',\n        no_photo: 'Nessuna foto salvata',\n        audio_available: 'Traccia audio presente',\n        no_audio: 'Nessuna traccia audio presente',\n        video_available: 'Video presente',\n        no_video: 'Nessun video presente',\n        no: 'No',\n        save: 'Salva',\n        dismiss: 'Annulla',\n        confirm: 'Conferma'\n    }\n};\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Localise\n */\n\nvar EC = EC || {};\nEC.Localise = EC.Localise || {};\nEC.Localise = ( function () {\n    \"use strict\";\n\n    //TODO: get device language from localStorage (set in app.js)\n    var language;\n    var self;\n\n    function setLanguage() {\n        language = window.localStorage.DEVICE_LANGUAGE;\n    }\n\n    //TODO: return translation based on key and device language\n    function getTranslation(the_key) {\n\n        var key_to_lookup = the_key;\n        var translated_string = \"\";\n\n        try {\n            translated_string = EC.Dictionary[language][key_to_lookup];\n        } catch (error) {\n            translated_string = \"Translation not found\";\n        }\n\n        return translated_string;\n\n    }\n\n    function applyToHTML(the_language) {\n\n        //TODO for each data-i10n, replace text with translated one\n        var page_id = $.mobile.activePage.attr(\"id\");\n        var strings = $('div#' + page_id + ' [data-i10n]');\n        var translated_string;\n        var self = this;\n\n        console.log(strings);\n\n        strings.each(function (index) {\n\n            console.log($(this).data(\"i10n\"));\n            translated_string = self.getTranslation($(this).data(\"i10n\"));\n            $(this).text(translated_string);\n\n        });\n\n    }\n\n    function applyToPlaceholders(the_language) {\n\n        var page_id = $.mobile.activePage.attr(\"id\");\n        var placeholders = $('div#' + page_id + ' [placeholder]');\n        var translated_string;\n        var self = this;\n\n        placeholders.each(function (index) {\n\n            console.log($(this).attr(\"placeholder\"));\n            translated_string = self.getTranslation($(this).attr(\"placeholder\"));\n            $(this).attr(\"placeholder\", translated_string);\n\n        });\n\n    }\n\n    return {\n        setLanguage: setLanguage,\n        getTranslation: getTranslation,\n        applyToHTML: applyToHTML,\n        applyToPlaceholders: applyToPlaceholders\n    };\n\n}());\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *   @module Branch\n *\n */\nvar EC = EC || {};\nEC.Branch = EC.Branch || {};\nEC.Branch = ( function(module) {\"use strict\";\n\n        var self;\n        var deferred;\n        //keep track of foreign keys\n        var project_insertId;\n        var branch_forms_IDs = [];\n        //store forms\n        var branch_forms;\n        //we need to keep track of the form @num to be linked with whatever ID it gets upon being entered to the the db\n        var branch_form_num_index = 0;\n\n        var _errorCB = function(the_tx, the_result) {\n            console.log(the_result);\n        };\n\n        //Transaction to save all the forms to the db. Each form will get its own executeSql and relative callback\n        var _commitBranchFormsTX = function(tx) {\n\n            var i;\n            var iLenght = branch_forms.length;\n            var query;\n            for ( i = 0; i < iLenght; i++) {\n\n                query = \"\";\n                query += 'INSERT INTO ec_branch_forms (project_id, num, name, key, has_media, is_genkey_hidden, total_inputs) ';\n                query += 'VALUES (\"';\n                query += project_insertId + '\", \"';\n                query += branch_forms[i].num + '\", \"';\n                query += branch_forms[i].name + '\", \"';\n                query += branch_forms[i].key + '\", \"';\n                query += branch_forms[i].has_media + '\", \"';\n                query += branch_forms[i].is_form_genkey_hidden + '\", \"';\n                query += branch_forms[i].total_inputs + '\");';\n\n                //keep track of current form @num and database row ID. Defaults to 0, it will be set after the INSERT\n                branch_forms_IDs.push({\n                    num : branch_forms[i].num,\n                    id : 0\n                });\n\n                tx.executeSql(query, [], _commitBranchFormsSQLSuccess, _errorCB);\n            }\n\n        };\n\n        /*\n         *  @method _commitBranchFormsSQLSuccess\n         *\n         *\tit links the form @num with the actual ID on the database to be used as foreign key on the ec_inputs table\n         *\tit is called as a callback for each form executeSql()\n         */\n        var _commitBranchFormsSQLSuccess = function(the_tx, the_result) {\n\n            //link each row ID to its form\n            branch_forms_IDs[branch_form_num_index].id = the_result.insertId;\n            branch_form_num_index++;\n\n        };\n\n        //resets forms array\n        var _commitBranchFormsSuccessCB = function() {\n\n            //reset forms arrays\n            branch_forms.length = 0;\n            \n            //return branch forms IDs\n            deferred.resolve(branch_forms_IDs);\n\n        };\n\n        /**\n         * @method insertForms\n         */\n        module.commitBranchForms = function(the_branch_forms, the_project_insertId) {\n\n            self = this;\n            deferred = new $.Deferred();\n            branch_forms = the_branch_forms;\n            project_insertId = the_project_insertId;\n            branch_forms_IDs.length = 0;\n            branch_form_num_index = 0;\n\n            EC.db.transaction(_commitBranchFormsTX, _errorCB, _commitBranchFormsSuccessCB);\n\n            return deferred.promise();\n        };\n\n        return module;\n\n    }(EC.Branch));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *   @module Branch\n *\n */\nvar EC = EC || {};\nEC.Branch = EC.Branch || {};\nEC.Branch = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar branch_max_form_ID;\n\t\t//keep track of foreign keys\n\t\tvar project_insertId;\n\t\tvar branch_forms_IDs = [];\n\t\t//store forms\n\t\tvar branch_forms;\n\t\t//we need to keep track of the form @num to be linked with whatever ID it gets upon being entered to the the db\n\t\tvar branch_form_num_index = 0;\n\t\t\n\t\tvar _errorCB = function(the_tx, the_result){\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\t//Transaction to save all the forms to the db. Each form will get its own executeSql and relative callback\n\t\tvar _commitBranchFormsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = branch_forms.length;\n\t\t\tvar query;\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tquery = \"\";\n\t\t\t\tquery += 'INSERT INTO ec_branch_forms (project_id, num, name, key, has_media, is_genkey_hidden, total_inputs) ';\n\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\tquery += project_insertId + '\", \"';\n\t\t\t\tquery += branch_forms[i].num + '\", \"';\n\t\t\t\tquery += branch_forms[i].name + '\", \"';\n\t\t\t\tquery += branch_forms[i].key + '\", \"';\n\t\t\t\tquery += branch_forms[i].has_media + '\", \"';\n\t\t\t\tquery += branch_forms[i].is_form_genkey_hidden + '\", \"';\n\t\t\t\tquery += branch_forms[i].total_inputs + '\");';\n\n\t\t\t\t//keep track of current form @num and database row ID. Defaults to 0, it will be set after the INSERT\n\t\t\t\tbranch_forms_IDs.push({\n\t\t\t\t\tnum : branch_forms[i].num,\n\t\t\t\t\tid : 0\n\t\t\t\t});\n\n\t\t\t\ttx.executeSql(query, [], _commitBranchFormsSQLSuccess, _errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\t/*\n\t\t *  @method _commitBranchFormsSQLSuccess\n\t\t *\n\t\t *\tit links the form @num with the actual ID on the database to be used as foreign key on the ec_inputs table\n\t\t *\tit is called as a callback for each form executeSql()\n\t\t */\n\t\tvar _commitBranchFormsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t// _id of last entered row will be max_form_ID + 1\n\t\t\tbranch_forms_IDs[branch_form_num_index].id = ++branch_max_form_ID;\n\t\t\tbranch_form_num_index++;\n\n\t\t};\n\n\t\t//resets forms array\n\t\tvar _commitBranchFormsSuccessCB = function() {\n\n\t\t\t//reset forms arrays\n\t\t\tbranch_forms.length = 0;\n\t\t\t\n\t\t\tdeferred.resolve(branch_forms_IDs);\n\n\t\t};\n\t\t\n\t\tvar _getHighestIdTX = function(tx) {\n\n\t\t\tvar query = \"SELECT MAX(_id) AS _id from ec_branch_forms\";\n\t\t\t\n\t\t\t//reset auto increment for ec_forms table\n\t\t\tvar reset_seq_query = 'UPDATE sqlite_sequence SET seq = (SELECT MAX(_id) FROM ec_branch_forms) WHERE name=\"ec_branch_forms\"';\n\n\t\t\ttx.executeSql(query, [], _getHighestIdSQLSuccess, self.errorCB);\n\t\t\ttx.executeSql(reset_seq_query, [], _resetSequenceSQLSuccess, null);\n\n\t\t};\n\n\t\tvar _getHighestIdSQLSuccess = function(the_tx, the_result) {\n\t\t\tbranch_max_form_ID = the_result.rows.item(0)._id;\n\t\t};\n\n\t\tvar _getHighestIdSuccessCB = function() {\n\t\t\t\n\t\t\t//we got the max _id, perform all the INSERT transactions\n\t\t\tEC.db.transaction(_commitBranchFormsTX, self.errorCB, _commitBranchFormsSuccessCB);\n\n\t\t};\n\t\t\n\t\tvar _resetSequenceSQLSuccess = function(the_tx, the_result){\n\t\t};\n\n\t\t/**\n\t\t * @method commitBranchForms. Due to a bug on iOS (insertId undefined after INSERT)\n\t\t * we need to get the MAX(_id) of the table ec_branch_forms, reset the sqlite_sequence table to that value for the ec_branch_forms column \n\t\t * to basically know in advance what the insertId will be in the database \n\t\t * \n\t\t */\n\t\tmodule.commitBranchForms = function(the_branch_forms, the_project_insertId) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tbranch_forms = the_branch_forms;\n\t\t\tproject_insertId = the_project_insertId;\n\t\t\tbranch_forms_IDs.length = 0;\n\t\t\tbranch_form_num_index = 0;\n\t\t\tbranch_max_form_ID = 0;\n\t\t\t\n\t\t\t//select max _id from ec_branch_forms\n\t\t\tEC.db.transaction(_getHighestIdTX, self.errorCB, _getHighestIdSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Branch));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *   @module Branch\n *\n */\n\nvar EC = EC || {};\nEC.Branch = EC.Branch || {};\nEC.Branch = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\t//store input values object\n\t\tvar branch_input_options;\n\n\t\tvar branch_inputs_IDs = [];\n\n\t\t//Transaction to save each options to the db (form multiple option branch_inputs like radio, checkbox, select)\n\t\tvar _commitBranchInputOptionsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar k;\n\t\t\tvar iLength;\n\t\t\tvar jLength;\n\t\t\tvar kLength;\n\t\t\tvar ref;\n\t\t\tvar branch_input_id;\n\t\t\tvar label;\n\t\t\tvar value;\n\t\t\tvar num;\n\t\t\tvar query;\n\n\t\t\t//loop the branch_input_options array\n\t\t\tfor ( i = 0, iLength = branch_input_options.length; i < iLength; i++) {\n\n\t\t\t\t//get the branch_input ID based on (branch_input ref AND form num)\n\t\t\t\tref = branch_input_options[i].ref;\n\t\t\t\tnum = branch_input_options[i].num;\n\n\t\t\t\t//loop all the branch_input IDs to find a match\n\t\t\t\tfor ( j = 0, jLength = branch_inputs_IDs.length; j < jLength; j++) {\n\n\t\t\t\t\tif (branch_inputs_IDs[j].ref === ref && branch_inputs_IDs[j].form_num === num) {\n\n\t\t\t\t\t\tbranch_input_id = branch_inputs_IDs[j].id;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\t\t\t\t}//loop branch_input_IDs\n\n\t\t\t\t//commit each option (IF ANY: we allow radio, checkbox and dropdown not to have any option)\n\t\t\t\tif (branch_input_options[i].options === undefined) {\n\t\t\t\t\tkLength = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkLength = branch_input_options[i].options.length;\n\t\t\t\t}\n\n\t\t\t\tfor ( k = 0; k < kLength; k++) {\n\n\t\t\t\t\tlabel = branch_input_options[i].options[k].label;\n\t\t\t\t\tvalue = branch_input_options[i].options[k].value;\n\n\t\t\t\t\tquery = 'INSERT INTO ec_branch_input_options (';\n\t\t\t\t\tquery += 'input_id, ';\n\t\t\t\t\tquery += 'ref, ';\n\t\t\t\t\tquery += 'label, ';\n\t\t\t\t\tquery += 'value)';\n\t\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\t\tquery += branch_input_id + '\", \"';\n\t\t\t\t\tquery += ref + '\", \"';\n\t\t\t\t\tquery += label + '\", \"';\n\t\t\t\t\tquery += value + '\");';\n\n\t\t\t\t\ttx.executeSql(query, [], _commitBranchInputOptionsSQLSuccess, self.errorCB);\n\n\t\t\t\t}//loop branch_input_options.options\n\n\t\t\t}//loop branch_input_options\n\n\t\t};\n\n\t\tvar _commitBranchInputOptionsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//console.log(the_result);\n\t\t\tconsole.log(\"executeSql SUCCESS BRANCH INPUT OPTIONS\");\n\n\t\t};\n\n\t\tvar _commitBranchInputOptionsSuccessCB = function() {\n\n\t\t\t//reset options length\n\t\t\tbranch_input_options.length = 0;\n\n\t\t\t//Branch structure saved to database correctly, trigger custom event\n\t\t\t$(document).trigger('BranchModelReady');\n\t\t\tconsole.log(\"BranchModelReady\");\n\n\t\t};\n\n\t\tmodule.commitBranchInputOptions = function(the_brach_input_options, the_branch_inputs_ids) {\n\n\t\t\tself = this;\n\t\t\tbranch_input_options = the_brach_input_options;\n\t\t\tbranch_inputs_IDs = the_branch_inputs_ids;\n\n\t\t\tEC.db.transaction(_commitBranchInputOptionsTX, self.errorCB, _commitBranchInputOptionsSuccessCB);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Branch));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *   @module Branch\n *\n */\n\nvar EC = EC || {};\nEC.Branch = ( function(module) {\"use strict\";\n\n        var self;\n        var deferred;\n\n        //track inputs IDs\n        var branch_inputs_IDs = [];\n\n        //we need to keep track of the input option @ref to be linked with whatever ID it gets upon being entered to the the db\n        var branch_input_option_index = 0;\n\n        //store inputs object\n        var branch_inputs;\n\n        var branch_forms_with_media = [];\n        var branch_forms_IDs = [];\n\n        //Transaction to save all the inputs for each form to database\n        var _commitBranchInputsTX = function(tx) {\n\n            var i;\n            var j;\n            var k;\n            var iLength;\n            var jLength;\n            var kLength;\n            var current_form_num;\n            var current_form_id;\n            var input_list;\n            var input_type;\n            var input_ref;\n            var query;\n\n            //loop input array, one element per form . Each element contains an input list and the @num attribute\n            for ( i = 0, iLength = branch_inputs.length; i < iLength; i++) {\n\n                //get the database ID for the current form\n                current_form_num = branch_inputs[i].num;\n                for ( j = 0, jLength = branch_forms_IDs.length; j < jLength; j++) {\n\n                    if (branch_forms_IDs[j].num === current_form_num) {\n\n                        //exit loop as soon as we get a match\n                        current_form_id = branch_forms_IDs[j].id;\n                        break;\n                    }\n                }//j for\n\n                //loop each input for the current element(form) and commit it\n                for ( k = 0, kLength = branch_inputs[i].input_list.length; k < kLength; k++) {\n\n                    input_type = branch_inputs[i].input_list[k].type;\n                    input_ref = branch_inputs[i].input_list[k].ref;\n\n                    query = \"\";\n                    query += 'INSERT INTO ec_branch_inputs (';\n                    query += 'form_id, ';\n                    query += 'label, ';\n                    query += 'default_value, ';\n                    query += 'type, ';\n                    query += 'ref, ';\n                    query += 'position, ';\n                    query += 'is_primary_key, ';\n                    query += 'is_genkey, ';\n                    query += 'regex, ';\n                    query += 'max_range, ';\n                    query += 'min_range, ';\n                    query += 'is_required, ';\n                    query += 'is_title, ';\n                    query += 'has_jump, ';\n                    query += 'jumps, ';\n                    query += 'has_advanced_jump, ';\n                    query += 'datetime_format, ';\n                    query += 'has_double_check) ';\n                    query += 'VALUES (\"';\n                    query += current_form_id + '\", \"';\n                    query += branch_inputs[i].input_list[k].label + '\", \"';\n                    query += branch_inputs[i].input_list[k].default_value + '\", \"';\n                    query += input_type + '\", \"';\n                    query += input_ref + '\", \"';\n                    query += branch_inputs[i].input_list[k].position + '\", \"';\n                    query += branch_inputs[i].input_list[k].is_primary_key + '\", \"';\n                    query += branch_inputs[i].input_list[k].is_genkey + '\", \"';\n                    query += branch_inputs[i].input_list[k].regex + '\", \"';\n                    query += branch_inputs[i].input_list[k].max_range + '\", \"';\n                    query += branch_inputs[i].input_list[k].min_range + '\", \"';\n                    query += branch_inputs[i].input_list[k].is_required + '\", \"';\n                    query += branch_inputs[i].input_list[k].is_title + '\", \"';\n                    query += branch_inputs[i].input_list[k].has_jump + '\", \"';\n                    query += branch_inputs[i].input_list[k].jumps + '\", \"';\n                    query += branch_inputs[i].input_list[k].has_advanced_jump + '\", \"';\n                    query += branch_inputs[i].input_list[k].datetime_format + '\", \"';\n\n                    query += branch_inputs[i].input_list[k].has_double_check + '\");';\n\n                    //keep track of current input @ref\n                    branch_inputs_IDs.push({\n                        ref : input_ref,\n                        form_id : current_form_id,\n                        form_num : current_form_num\n                    });\n\n                    tx.executeSql(query, [], _commitBranchInputsSQLSuccess, self.errorCB);\n\n                }//for each input\n\n            }// for each form\n\n        };\n\n        /* Callback called each time an input executeSql is successful\n         *\n         * here the input ID (geerated from the query when entering the input) is linked to its input @ref\n         */\n        var _commitBranchInputsSQLSuccess = function(the_tx, the_result) {\n\n            //link each row ID to its input\n            branch_inputs_IDs[branch_input_option_index].id = the_result.insertId;\n            branch_input_option_index++;\n\n            console.log(\"executeSql SUCCESS INPUTS\");\n\n        };\n\n        var _commitBranchInputsSuccessCB = function() {\n\n            branch_forms_IDs.length = 0;\n            branch_inputs.length = 0;\n            branch_forms_with_media.length = 0;\n\n            deferred.resolve(branch_inputs_IDs);\n            \n        };\n\n        module.commitBranchInputs = function(the_branch_inputs, the_branch_forms_ids) {\n\n            self = this;\n            deferred = new $.Deferred();\n            branch_inputs = the_branch_inputs;\n            branch_forms_IDs = the_branch_forms_ids;\n\n            EC.db.transaction(_commitBranchInputsTX, self.errorCB, _commitBranchInputsSuccessCB);\n\n            return deferred.promise();\n        };\n\n        return module;\n\n    }(EC.Branch));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *   @module Branch\n *\n *  It will save the project branches data structure (branch_forms, branch_inputs, branch_input_values)\n to the database\n *\n */\nvar EC = EC || {};\nEC.Branch = EC.Branch || {};\nEC.Branch = (function (module) {\n    'use strict';\n\n    //callback for a transaction error\n    module.errorCB = function (the_error) {\n        console.log('Error INSERT STRUCTURE BRANCH');\n        console.log(the_error);\n        console.log(EC.Utils.TRANSACTION_ERROR);\n    };\n    return module;\n}(EC.Branch));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\r\n/*global $, jQuery, cordova, device*/\r\n/*\r\n * @module DBAdapter\r\n *\r\n *   Initialise the database using Phonegap 2.9\r\n *   Phonegap uses Web SQL specifications on the Chrome browser (Android)\r\n *\r\n */\r\nvar EC = EC || {};\r\nEC.DBAdapter = EC.DBAdapter || {};\r\nEC.DBAdapter = ( function() {\r\n\t\t\"use strict\";\r\n\r\n\t\t//Initialise private database object if it is not already\r\n\t\t//var EC.db =  window.openDatabase(\"epicollect\", \"1.0\", \"Epicollect\", 2000000);\r\n\r\n\t\t//native\r\n\t\t//var EC.db =  db || window.sqlitePlugin.openDatabase(\"epicollect\", \"1.0\",\r\n\t\t// \"Epicollect\", 2000000);\r\n\r\n\t\t/*\r\n\t\t *  Query to create the database tables\r\n\t\t *  foreign keys apparently do not work on Web SQL, so it is better to use\r\n\t\t * triggers or manually do all the delete/update on cascade\r\n\t\t *\r\n\t\t */\r\n\r\n\t\tvar deferred;\r\n\r\n\t\t//Query to create ec_projects table\r\n\t\tvar cq_ec_projects = ['', //\r\n\t\t'CREATE TABLE IF NOT EXISTS \"ec_projects\" (', //\r\n\t\t' \"_id\" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,', //\r\n\t\t'\"name\" TEXT, ', //\r\n\t\t'\"total_hierarchy_forms\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"total_branch_forms\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"is_active\" INTEGER DEFAULT 0,', //\r\n\t\t'\"uploadToServer\" TEXT,', //\r\n\t\t'\"downloadFromServer\" TEXT,', //\r\n\t\t'\"allowDownloadEdits\" INTEGER DEFAULT 0,', //\r\n\t\t'\"version\" TEXT,', '\"description\" TEXT,', //\r\n\t\t'\"radiobutton_image_url\" TEXT,', //\r\n\t\t'\"reg_mail\" TEXT);'//\r\n\t\t].join('');\r\n\t\t//\r\n\r\n\t\t//Query to create ec_forms table\r\n\t\tvar cq_ec_forms = ['', 'CREATE TABLE IF NOT EXISTS \"ec_forms\" (', //\r\n\t\t' \"_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE,', //\r\n\t\t'\"project_id\" INTEGER NOT NULL, ', //\r\n\t\t'\"name\" TEXT, ', //\r\n\t\t'\"num\" INTEGER, ', //\r\n\t\t'\"key\" TEXT, ', //\r\n\t\t'\"total_inputs\" INTEGER, ', //\r\n\t\t'\"has_media\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"has_branches\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"is_genkey_hidden\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"entries\" INTEGER DEFAULT 0, ', //\r\n\t\t'FOREIGN KEY (\"project_id\") REFERENCES ec_projects (\"_id\") ON DELETE CASCADE ON ',\r\n\t\t// //\r\n\t\t'UPDATE CASCADE);'].join('');\r\n\t\t//\r\n\r\n\t\t//Query to create ec_branch_forms table\r\n\t\tvar cq_ec_branch_forms = ['', 'CREATE TABLE IF NOT EXISTS \"ec_branch_forms\" (',\r\n\t\t// //\r\n\t\t' \"_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE,', //\r\n\t\t'\"project_id\" INTEGER NOT NULL, ', //\r\n\t\t'\"name\" TEXT, ', //\r\n\t\t'\"num\" INTEGER, ', //\r\n\t\t'\"key\" TEXT, ', //\r\n\t\t'\"total_inputs\" INTEGER, ', //\r\n\t\t'\"has_media\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"is_genkey_hidden\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"entries\" INTEGER DEFAULT 0, ', //\r\n\t\t'FOREIGN KEY (\"project_id\") REFERENCES ec_projects (\"_id\") ON DELETE CASCADE ON ',\r\n\t\t// //\r\n\t\t'UPDATE CASCADE);'].join('');\r\n\t\t//\r\n\r\n\t\t//Query to create ec_inputs table\r\n\t\tvar cq_ec_inputs = ['', //\r\n\t\t'CREATE  TABLE IF NOT EXISTS \"ec_inputs\" (', //\r\n\t\t'\"_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , ', //\r\n\t\t'\"form_id\" INTEGER NOT NULL , ', //\r\n\t\t'\"ref\" TEXT,', //\r\n\t\t'\"position\" INTEGER,', //\r\n\t\t'\"label\" TEXT,', //\r\n\t\t'\"default_value\" TEXT,', //\r\n\t\t'\"type\" TEXT, ', //\r\n\t\t'\"is_primary_key\" INTEGER,', //\r\n\t\t'\"is_genkey\" INTEGER,', //\r\n\t\t'\"has_double_check\" INTEGER,', //\r\n\t\t'\"max_range\" TEXT,', //\r\n\t\t'\"min_range\" TEXT , ', //\r\n\t\t'\"is_required\" INTEGER, ', //\r\n\t\t'\"is_title\" INTEGER,', //\r\n\t\t'\"is_server_local\" INTEGER,', //\r\n\t\t'\"is_searchable\" TEXT, ', //\r\n\t\t'\"regex\" TEXT, ', //\r\n\t\t'\"has_jump\" INTEGER,', //\r\n\t\t'\"jumps\" TEXT,', //\r\n\t\t'\"has_advanced_jump\" INTEGER, ', //\r\n\t\t'\"datetime_format\" TEXT,', //\r\n\t\t'\"branch_form_name\" TEXT,', //\r\n\t\t'FOREIGN KEY (\"form_id\") REFERENCES ec_forms(_id) ON DELETE CASCADE ON ', //\r\n\t\t'UPDATE CASCADE', //\r\n\t\t');'//\r\n\t\t].join('');\r\n\t\t//\r\n\r\n\t\t//Query to create ec_branch_inputs table\r\n\t\tvar cq_ec_branch_inputs = ['', //\r\n\t\t'CREATE  TABLE IF NOT EXISTS \"ec_branch_inputs\" (', //\r\n\t\t'\"_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , ', //\r\n\t\t'\"form_id\" INTEGER NOT NULL , ', //\r\n\t\t'\"ref\" TEXT,', //\r\n\t\t'\"position\" INTEGER,', //\r\n\t\t'\"label\" TEXT,', //\r\n\t\t'\"default_value\" TEXT,', //\r\n\t\t'\"type\" TEXT, ', //\r\n\t\t'\"is_primary_key\" INTEGER,', //\r\n\t\t'\"is_genkey\" INTEGER,', //\r\n\t\t'\"has_double_check\" INTEGER,', //\r\n\t\t'\"max_range\" TEXT,', //\r\n\t\t'\"min_range\" TEXT , ', //\r\n\t\t'\"is_required\" INTEGER, ', //\r\n\t\t'\"is_title\" INTEGER,', //\r\n\t\t'\"is_server_local\" INTEGER,', //\r\n\t\t'\"is_searchable\" TEXT, ', //\r\n\t\t'\"regex\" TEXT, ', //\r\n\t\t'\"has_jump\" INTEGER,', //\r\n\t\t'\"jumps\" TEXT,', //\r\n\t\t'\"has_advanced_jump\" INTEGER, ', //\r\n\t\t'\"datetime_format\" TEXT,', //\r\n\t\t'FOREIGN KEY (\"form_id\") REFERENCES ec_branch_forms(_id) ON DELETE CASCADE ON ',\r\n\t\t// //\r\n\t\t'UPDATE CASCADE', //\r\n\t\t');'//\r\n\t\t].join('');\r\n\t\t//\r\n\r\n\t\t//Query to create ec_input_options table\r\n\t\tvar cq_ec_input_options = ['', //\r\n\t\t'CREATE TABLE IF NOT EXISTS \"ec_input_options\" (', //\r\n\t\t'\"_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE ,', //\r\n\t\t'\"input_id\" INTEGER NOT NULL , ', //\r\n\t\t'\"ref\" TEXT NOT NULL ,', //\r\n\t\t'\"label\" TEXT NOT NULL ,', //\r\n\t\t'\"value\" TEXT NOT NULL , ', //\r\n\t\t'FOREIGN KEY (\"input_id\") REFERENCES ec_inputs(\"_id\") ON DELETE CASCADE ON ', //\r\n\t\t'UPDATE CASCADE', //\r\n\t\t');'//\r\n\t\t].join('');\r\n\r\n\t\t//Query to create ec_branch_input_options table\r\n\t\tvar cq_ec_branch_input_options = ['', //\r\n\t\t'CREATE TABLE IF NOT EXISTS \"ec_branch_input_options\" (', //\r\n\t\t'\"_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE ,', //\r\n\t\t'\"input_id\" INTEGER NOT NULL , ', //\r\n\t\t'\"ref\" TEXT NOT NULL ,', //\r\n\t\t'\"label\" TEXT NOT NULL ,', //\r\n\t\t'\"value\" TEXT NOT NULL , ', //\r\n\t\t'FOREIGN KEY (\"input_id\") REFERENCES ec_branch_inputs(\"_id\") ON DELETE CASCADE ON ',\r\n\t\t// //\r\n\t\t'UPDATE CASCADE', //\r\n\t\t');'//\r\n\t\t].join('');\r\n\r\n\t\t//Query to create ec_data table\r\n\t\tvar cq_ec_data = ['', //\r\n\t\t'CREATE TABLE IF NOT EXISTS \"ec_data\" (', //\r\n\t\t'\"_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE ,', //\r\n\t\t'\"input_id\" INTEGER NOT NULL, ', //\r\n\t\t'\"form_id\" INTEGER NOT NULL, ', //\r\n\t\t'\"position\" INTEGER NOT NULL, ', //\r\n\t\t'\"parent\" TEXT NOT NULL DEFAULT \"\", ', //\r\n\t\t'\"label\" TEXT NOT NULL DEFAULT \"\", ', //\r\n\t\t'\"value\" TEXT, ', //\r\n\t\t'\"ref\" TEXT, ', //\r\n\t\t'\"is_title\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"entry_key\" TEXT NOT NULL,', //\r\n\t\t'\"type\" TEXT, ', //\r\n\t\t'\"is_data_synced\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"is_media_synced\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"is_remote\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"created_on\" INTEGER, ', //\r\n\t\t'FOREIGN KEY (\"input_id\") REFERENCES ec_inputs(\"_id\") ON DELETE CASCADE ON ', //\r\n\t\t'UPDATE CASCADE', //\r\n\t\t');'//\r\n\t\t].join('');\r\n\r\n\t\t//Query to create ec_data table\r\n\t\tvar cq_ec_branch_data = ['', //\r\n\t\t'CREATE TABLE IF NOT EXISTS \"ec_branch_data\" (', //\r\n\t\t'\"_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE ,', //\r\n\t\t'\"input_id\" INTEGER NOT NULL, ', //\r\n\t\t'\"form_id\" INTEGER NOT NULL, ', //\r\n\t\t'\"hierarchy_entry_key_value\" TEXT, ', //main form entry key value\r\n\t\t'\"hierarchy_entry_key_ref\" TEXT, ', //main form entry key value\r\n\t\t'\"position\" INTEGER NOT NULL, ', //\r\n\t\t'\"label\" TEXT NOT NULL DEFAULT \"\", ', //\r\n\t\t'\"value\" TEXT, ', //\r\n\t\t'\"ref\" TEXT, ', //\r\n\t\t'\"is_title\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"entry_key\" TEXT NOT NULL,', //\r\n\t\t'\"type\" TEXT, ', //\r\n\t\t'\"is_data_synced\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"is_media_synced\" INTEGER DEFAULT 0, ', //\r\n\t\t'\"is_remote\" INTEGER DEFAULT 0, ', //if the entry has been downloaded remotely or\r\n\t\t// created\r\n\t\t'\"is_cached\" INTEGER DEFAULT 0, ', // if the etry is cached (branch form saved\r\n\t\t// but not its main form)\r\n\t\t'\"is_stored\" INTEGER DEFAULT 0, ', // if the entry and its main form is saved\r\n\t\t'\"created_on\" INTEGER, ', //\r\n\t\t'FOREIGN KEY (\"input_id\") REFERENCES ec_branch_inputs(\"_id\") ON DELETE CASCADE ON ',\r\n\t\t// //\r\n\t\t'UPDATE CASCADE', //\r\n\t\t');'//\r\n\t\t].join('');\r\n\r\n\t\t/**\r\n\t\t * *********************** TRIGGERS\r\n\t\t * *******************************************************\r\n\t\t */\r\n\r\n\t\tvar tq_delete_forms = [//\r\n\t\t'CREATE TRIGGER delete_forms ', //\r\n\t\t'BEFORE DELETE ', //\r\n\t\t'ON ec_projects ', //\r\n\t\t'FOR EACH ROW ', //\r\n\t\t'BEGIN ', //\r\n\t\t'DELETE FROM ec_forms WHERE ec_forms.project_id = old._id; ', //\r\n\t\t'END'//\r\n\t\t].join('');\r\n\r\n\t\tvar tq_delete_branch_forms = [//\r\n\t\t'CREATE TRIGGER delete_branch_forms ', //\r\n\t\t'BEFORE DELETE ', //\r\n\t\t'ON ec_projects ', //\r\n\t\t'FOR EACH ROW ', //\r\n\t\t'BEGIN ', //\r\n\t\t'DELETE FROM ec_branch_forms WHERE ec_branch_forms.project_id = old._id; ', //\r\n\t\t'END'//\r\n\t\t].join('');\r\n\r\n\t\tvar tq_delete_inputs = [//\r\n\t\t'CREATE TRIGGER delete_inputs ', //\r\n\t\t'BEFORE DELETE ', //\r\n\t\t'ON ec_forms ', //\r\n\t\t'FOR EACH ROW ', //\r\n\t\t'BEGIN ', //\r\n\t\t'DELETE FROM ec_inputs WHERE ec_inputs.form_id = old._id; ', //\r\n\t\t'END'//\r\n\t\t].join('');\r\n\r\n\t\tvar tq_delete_branch_inputs = [//\r\n\t\t'CREATE TRIGGER delete_branch_inputs ', //\r\n\t\t'BEFORE DELETE ', //\r\n\t\t'ON ec_branch_forms ', //\r\n\t\t'FOR EACH ROW ', //\r\n\t\t'BEGIN ', //\r\n\t\t'DELETE FROM ec_branch_inputs WHERE ec_branch_inputs.form_id = old._id; ', //\r\n\t\t'END'//\r\n\t\t].join('');\r\n\r\n\t\tvar tq_delete_input_options = [//\r\n\t\t'CREATE TRIGGER delete_input_options ', //\r\n\t\t'BEFORE DELETE ', //\r\n\t\t'ON ec_inputs ', //\r\n\t\t'FOR EACH ROW ', //\r\n\t\t'BEGIN ', //\r\n\t\t'DELETE FROM ec_input_options WHERE ec_input_options.input_id = old._id; ', //\r\n\t\t'END'//\r\n\t\t].join('');\r\n\r\n\t\tvar tq_delete_branch_input_options = [//\r\n\t\t'CREATE TRIGGER delete_branch_input_options ', //\r\n\t\t'BEFORE DELETE ', //\r\n\t\t'ON ec_branch_inputs ', //\r\n\t\t'FOR EACH ROW ', //\r\n\t\t'BEGIN ', //\r\n\t\t'DELETE FROM ec_branch_input_options WHERE ec_branch_input_options.input_id = old._id; ',\r\n\t\t// //\r\n\t\t'END'//\r\n\t\t].join('');\r\n\r\n\t\tvar tq_delete_ec_data = [//\r\n\t\t'CREATE TRIGGER delete_ec_data ', //\r\n\t\t'BEFORE DELETE ', //\r\n\t\t'ON ec_inputs ', //\r\n\t\t'FOR EACH ROW ', //\r\n\t\t'BEGIN ', //\r\n\t\t'DELETE FROM ec_data WHERE ec_data.input_id = old._id; ', //\r\n\t\t'END'//\r\n\t\t].join('');\r\n\r\n\t\tvar tq_delete_ec_branch_data = [//\r\n\t\t'CREATE TRIGGER delete_ec_branch_data ', //\r\n\t\t'BEFORE DELETE ', //\r\n\t\t'ON ec_branch_inputs ', //\r\n\t\t'FOR EACH ROW ', //\r\n\t\t'BEGIN ', //\r\n\t\t'DELETE FROM ec_branch_data WHERE ec_branch_data.input_id = old._id; ', //\r\n\t\t'END'//\r\n\t\t].join('');\r\n\r\n\t\t/**\r\n\t\t *********************** DROP TRIGGERS\r\n\t\t */\r\n\t\tvar dtq_delete_forms = 'DROP TRIGGER IF EXISTS delete_forms ';\r\n\t\tvar dtq_delete_branch_forms = 'DROP TRIGGER IF EXISTS delete_branch_forms ';\r\n\t\tvar dtq_delete_inputs = 'DROP TRIGGER IF EXISTS delete_inputs ';\r\n\t\tvar dtq_delete_branch_inputs = 'DROP TRIGGER IF EXISTS delete_branch_inputs ';\r\n\t\tvar dtq_delete_input_options = 'DROP TRIGGER IF EXISTS delete_input_options ';\r\n\t\tvar dtq_delete_branch_input_options = 'DROP TRIGGER IF EXISTS delete_branch_input_options ';\r\n\t\tvar dtq_delete_ec_data = 'DROP TRIGGER IF EXISTS delete_ec_data ';\r\n\t\tvar dtq_delete_ec_branch_data = 'DROP TRIGGER IF EXISTS delete_ec_branch_data ';\r\n\r\n\t\t//Create database if not exist\r\n\t\tvar _initDB = function(tx) {\r\n\r\n\t\t\t//tx.executeSql(\"PRAGMA foreign_keys = ON;\"); //apparently PRAGMA is disabled is\r\n\t\t\t// some browsers\r\n\r\n\t\t\t//create tables\r\n\t\t\ttx.executeSql(cq_ec_projects);\r\n\t\t\ttx.executeSql(cq_ec_forms);\r\n\t\t\ttx.executeSql(cq_ec_branch_forms);\r\n\t\t\ttx.executeSql(cq_ec_inputs);\r\n\t\t\ttx.executeSql(cq_ec_branch_inputs);\r\n\t\t\ttx.executeSql(cq_ec_input_options);\r\n\t\t\ttx.executeSql(cq_ec_branch_input_options);\r\n\t\t\ttx.executeSql(cq_ec_data);\r\n\t\t\ttx.executeSql(cq_ec_branch_data);\r\n\r\n\t\t\t//drop existing triggers\r\n\t\t\ttx.executeSql(dtq_delete_forms);\r\n\t\t\ttx.executeSql(dtq_delete_branch_forms);\r\n\t\t\ttx.executeSql(dtq_delete_inputs);\r\n\t\t\ttx.executeSql(dtq_delete_branch_inputs);\r\n\t\t\ttx.executeSql(dtq_delete_input_options);\r\n\t\t\ttx.executeSql(dtq_delete_branch_input_options);\r\n\t\t\ttx.executeSql(dtq_delete_ec_data);\r\n\t\t\ttx.executeSql(dtq_delete_ec_branch_data);\r\n\r\n\t\t\t//add triggers\r\n\t\t\ttx.executeSql(tq_delete_forms);\r\n\t\t\ttx.executeSql(tq_delete_branch_forms);\r\n\t\t\ttx.executeSql(tq_delete_inputs);\r\n\t\t\ttx.executeSql(tq_delete_branch_inputs);\r\n\t\t\ttx.executeSql(tq_delete_input_options);\r\n\t\t\ttx.executeSql(tq_delete_branch_input_options);\r\n\t\t\ttx.executeSql(tq_delete_ec_data);\r\n\t\t\ttx.executeSql(tq_delete_ec_branch_data);\r\n\r\n\t\t};\r\n\r\n\t\t//Global callback for a transaction error\r\n\t\tvar errorCB = function(the_error) {\r\n\t\t\tconsole.log(EC.Const.TRANSACTION_ERROR);\r\n\t\t\tconsole.log(\"%c\" + the_error.message, \"color: red\");\r\n\t\t};\r\n\r\n\t\t//success callback when database transaction successful\r\n\t\tvar _initSuccessCB = function() {\r\n\t\t\tconsole.log(\"TRANSACTION INIT SUCCESS\");\r\n\t\t\tdeferred.resolve();\r\n\t\t};\r\n\r\n\t\t/* initialise database object */\r\n\t\tvar init = function() {\r\n\r\n\t\t\tdeferred = new $.Deferred();\r\n\t\t\t//open or create a webSQL database (on webkit)\r\n\t\t\tEC.db.transaction(_initDB, errorCB, _initSuccessCB);\r\n\r\n\t\t\treturn deferred.promise();\r\n\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tinit : init,\r\n\t\t\terrorCB : errorCB\r\n\t\t};\r\n\r\n\t}());\r\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *   @module Hierarchy\n *\n */\n\nvar EC = EC || {};\nEC.Hierarchy = EC.Hierarchy || {};\nEC.Hierarchy = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\t//keep track of foreign keys\n\t\tvar project_insertId;\n\t\tvar forms_IDs = [];\n\t\t//store forms\n\t\tvar forms =[];\n\n\t\t//we need to keep track of the form @num to be linked with whatever ID it gets upon being entered to the the db\n\t\tvar form_num_index = 0;\n\n\t\t/*  @method _formsTXSuccess\n\t\t *\n\t\t *\tit links the form @num with the actual ID on the database to be used as foreign key on the ec_inputs table\n\t\t *\tit is called as a callback for each form executeSql()\n\t\t */\n\t\tvar _commitFormsSQLSuccess = function(the_tx, the_result) {\n\t\t\n\n\t\t\t//link each row ID to its form.\n\t\t\tif (the_result.insertId) {\n\t\t\t\tforms_IDs[form_num_index].id = the_result.insertId;\n\t\t\t} else {\n\t\t\t\t//Weird bug on iOS: insertId is undefined sometimes!\n\t\t\t\t//If that happem, drop parsing, delete tables and ask the user to start over\n\t\t\t\t//TODO: maybe adding forms recursively instead of looping?\n\n\t\t\t\tvar project_id = parseInt(window.localStorage.project_id, 10);\n\t\t\t\tvar project_name = window.localStorage.project_name;\n\n\t\t\t\t$.when(EC.Delete.deleteProject(project_id, project_name)).then(function() {\n\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"unknown_error\"));\n\t\t\t\t\twindow.localStorage.is_project_deleted = 1;\n\t\t\t\t\twindow.localStorage.back_nav_url = \"#refresh\";\n\t\t\t\t\tEC.Routing.changePage(EC.Const.INDEX_VIEW);\n\n\t\t\t\t}, function() {\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"unknown_error\"));\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tform_num_index++;\n\n\t\t\tconsole.log(\"executeSql SUCCESS FORMS\");\n\n\t\t};\n\n\t\t//resets forms array\n\t\tvar _commitFormsSuccessCB = function(the_tx, the_result) {\n\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(the_result);\n\n\t\t\t//reset forms arrays\n\t\t\tforms.length = 0;\n\n\t\t\t//trigger function to save all the inputs for this form\n\t\t\t//self.commitInputs(EC.Parse.inputs, forms_IDs);\n\t\t\t\n\t\t\tdeferred.resolve(forms_IDs);\n\n\t\t};\n\n\t\t//Transaction to save all the forms to the db. Each form will get its own executeSql and relative callback\n\t\tvar _commitFormsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = forms.length;\n\t\t\tvar query;\n\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tquery = 'INSERT INTO ec_forms (project_id, num, name, key, has_media, has_branches, is_genkey_hidden, total_inputs) ';\n\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\tquery += project_insertId + '\", \"';\n\t\t\t\tquery += forms[i].num + '\", \"';\n\t\t\t\tquery += forms[i].name + '\", \"';\n\t\t\t\tquery += forms[i].key + '\", \"';\n\t\t\t\tquery += forms[i].has_media + '\", \"';\n\t\t\t\tquery += forms[i].has_branches + '\", \"';\n\t\t\t\tquery += forms[i].is_form_genkey_hidden + '\", \"';\n\t\t\t\tquery += forms[i].total_inputs + '\");';\n\n\t\t\t\t//keep track of current form @num and database row ID. Defaults to 0, it will be set after the INSERT\n\t\t\t\tforms_IDs.push({\n\t\t\t\t\tnum : forms[i].num,\n\t\t\t\t\tid : 0\n\t\t\t\t});\n\t\t\t\ttx.executeSql(query, [], _commitFormsSQLSuccess, self.errorCB);\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method insertForms\n\t\t */\n\t\tmodule.commitForms = function(the_forms_object, the_project_insertId) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tforms = the_forms_object;\n\t\t\tproject_insertId = the_project_insertId;\n\t\t\tforms_IDs.length = 0;\n\t\t\tform_num_index = 0;\n\n\t\t\tEC.db.transaction(_commitFormsTX, self.errorCB, _commitFormsSuccessCB);\n\t\t\t\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Hierarchy));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *   @module Hierarchy\n *\t \t\n */\n\nvar EC = EC || {};\nEC.Hierarchy = EC.Hierarchy || {};\nEC.Hierarchy = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar max_form_ID;\n\n\t\t//keep track of foreign keys\n\t\tvar project_insertId;\n\t\tvar forms_IDs = [];\n\n\t\t//store forms\n\t\tvar forms;\n\n\t\t//we need to keep track of the form @num to be linked with whatever ID it gets upon being entered to the the db\n\t\tvar form_num_index = 0;\n\n\t\t/*  @method _formsTXSuccess\n\t\t *\n\t\t *\tit links the form @num with the actual ID on the database to be used as foreign key on the ec_inputs table\n\t\t *\tit is called as a callback for each form executeSql()\n\t\t */\n\t\tvar _insertFormsSQLSuccess = function(the_tx, the_result) {\n\t\t\t\n\t\t\t// _id of last entered row will be max_form_ID + 1\n\t\t\tforms_IDs[form_num_index].id = ++max_form_ID;\n\n\t\t\tform_num_index++;\n\n\t\t\tconsole.log(\"executeSql SUCCESS FORMS\");\n\n\t\t};\n\n\t\tvar _insertFormsSuccessCB = function(the_tx, the_result) {\n\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(the_result);\n\n\t\t\t//reset forms arrays\n\t\t\tforms.length = 0;\n\t\t\t\n\t\t\tdeferred.resolve(forms_IDs);\n\n\t\t};\n\n\t\t//Transaction to save all the forms to the db. Each form will get its own executeSql and relative callback\n\t\tvar _insertFormsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = forms.length;\n\t\t\tvar query;\n\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tquery = 'INSERT INTO ec_forms (project_id, num, name, key, has_media, has_branches, is_genkey_hidden, total_inputs) ';\n\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\tquery += project_insertId + '\", \"';\n\t\t\t\tquery += forms[i].num + '\", \"';\n\t\t\t\tquery += forms[i].name + '\", \"';\n\t\t\t\tquery += forms[i].key + '\", \"';\n\t\t\t\tquery += forms[i].has_media + '\", \"';\n\t\t\t\tquery += forms[i].has_branches + '\", \"';\n\t\t\t\tquery += forms[i].is_form_genkey_hidden + '\", \"';\n\t\t\t\tquery += forms[i].total_inputs + '\");';\n\n\t\t\t\t//keep track of current form @num and database row ID. Defaults to 0, it will be set after the INSERT\n\t\t\t\tforms_IDs.push({\n\t\t\t\t\tnum : forms[i].num,\n\t\t\t\t\tid : 0\n\t\t\t\t});\n\t\t\t\ttx.executeSql(query, [], _insertFormsSQLSuccess, self.errorCB);\n\n\t\t\t}\n\t\t};\n\n\t\tvar _getHighestIdTX = function(tx) {\n\n\t\t\tvar query = \"SELECT MAX(_id) AS _id from ec_forms\";\n\t\t\t\n\t\t\t//reset auto increment for ec_forms table\n\t\t\tvar reset_seq_query = 'UPDATE sqlite_sequence SET seq = (SELECT MAX(_id) FROM ec_forms) WHERE name=\"ec_forms\"';\n\n\t\t\ttx.executeSql(query, [], _getHighestIdSQLSuccess, self.errorCB);\n\t\t\ttx.executeSql(reset_seq_query, [], _resetSequenceSQLSuccess, null);\n\n\t\t};\n\n\t\tvar _getHighestIdSQLSuccess = function(the_tx, the_result) {\n\t\t\tmax_form_ID = the_result.rows.item(0)._id;\n\t\t};\n\n\t\tvar _getHighestIdSuccessCB = function() {\n\t\t\t\n\t\t\t//we got the max _id, perform all the INSERT transactions\n\t\t\tEC.db.transaction(_insertFormsTX, self.errorCB, _insertFormsSuccessCB);\n\t\t};\n\t\t\n\t\tvar _resetSequenceSQLSuccess = function(the_tx, the_result){\n\t\t};\n\n\t\t/**\n\t\t * @method commitForms. Due to a bug on iOS (insertId undefined after INSERT)\n\t\t * we need to get the MAX(_id) of the table ec_forms, reset the sqlite_sequence table to that value for the ec_forms column \n\t\t * to basically know in advance what the insertId will be in the database \n\t\t * \n\t\t */\n\t\tmodule.commitForms = function(the_forms_object, the_project_insertId) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tforms = the_forms_object;\n\t\t\tproject_insertId = the_project_insertId;\n\t\t\tforms_IDs.length = 0;\n\t\t\tform_num_index = 0;\n\t\t\tmax_form_ID = 0;\n\n\t\t\t//select max _id from ec_forms\n\t\t\tEC.db.transaction(_getHighestIdTX, self.errorCB, _getHighestIdSuccessCB);\n\t\t\t\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Hierarchy));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *   @module Hierarchy\n *\n */\n\nvar EC = EC || {};\nEC.Hierarchy = EC.Hierarchy || {};\nEC.Hierarchy = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar input_options;\n\t\tvar inputs_IDs = [];\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\n\t\t\tconsole.log(EC.Utils.TRANSACTION_ERROR);\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tvar _commitOneOption = function(the_input_id, the_ref, the_label, the_value, the_tx) {\n\n\t\t\tvar query = \"\";\n\t\t\tvar input_id = the_input_id;\n\t\t\tvar ref = the_ref;\n\t\t\tvar label = the_label;\n\t\t\tvar value = the_value;\n\t\t\tvar tx = the_tx;\n\n\t\t\tquery = 'INSERT INTO ec_input_options (';\n\t\t\tquery += 'input_id, ';\n\t\t\tquery += 'ref, ';\n\t\t\tquery += 'label, ';\n\t\t\tquery += 'value)';\n\t\t\tquery += 'VALUES (\"';\n\t\t\tquery += input_id + '\", \"';\n\t\t\tquery += ref + '\", \"';\n\t\t\tquery += label + '\", \"';\n\t\t\tquery += value + '\");';\n\n\t\t\ttx.executeSql(query, [], _commitInputOptionsSQLSuccess, _errorCB);\n\t\t};\n\n\t\t//Transaction to save each options to the db (form multiple option inputs like radio, checkbox, select)\n\t\tvar _commitInputOptionsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar k;\n\t\t\tvar iLength;\n\t\t\tvar jLength;\n\t\t\tvar kLength;\n\t\t\tvar ref;\n\t\t\tvar input_id;\n\t\t\tvar label;\n\t\t\tvar value;\n\t\t\tvar num;\n\t\t\tvar query = \"\";\n\n\t\t\t//loop the input_options array\n\t\t\tfor ( i = 0, iLength = input_options.length; i < iLength; i++) {\n\n\t\t\t\t//get the input ID based on (input ref AND form num)\n\t\t\t\tref = input_options[i].ref;\n\t\t\t\tnum = input_options[i].num;\n\n\t\t\t\t//loop all the input IDs to find a match\n\t\t\t\tfor ( j = 0, jLength = inputs_IDs.length; j < jLength; j++) {\n\n\t\t\t\t\tif (inputs_IDs[j].ref === ref && inputs_IDs[j].form_num === num) {\n\n\t\t\t\t\t\tinput_id = inputs_IDs[j].id;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\t\t\t\t}//loop input_IDs\n\n\t\t\t\t//commit each option (IF ANY: we allow radio, checkbox and dropdown not to have any option)\n\t\t\t\tif (input_options[i].options === undefined) {\n\t\t\t\t\tkLength = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//if we have only 1 option the \"input_options[i].options: will be an object, not an array, so set one option manually\n\t\t\t\t\tif (Object.prototype.toString.call(input_options[i].options) === '[object Array]') {\n\t\t\t\t\t\tkLength = input_options[i].options.length;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//set length to 0 to skip the following loop\n\t\t\t\t\t\tkLength = 0;\n\n\t\t\t\t\t\t//set option properties as first element of input_options[i].options array\n\t\t\t\t\t\tlabel = input_options[i].options.label;\n\t\t\t\t\t\tvalue = input_options[i].options.value;\n\n\t\t\t\t\t\t_commitOneOption(input_id, ref, label, value, tx);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//commit all options (one at a time)\n\t\t\t\tfor ( k = 0; k < kLength; k++) {\n\n\t\t\t\t\tlabel = input_options[i].options[k].label;\n\t\t\t\t\tvalue = input_options[i].options[k].value;\n\n\t\t\t\t\t_commitOneOption(input_id, ref, label, value, tx);\n\n\t\t\t\t}//loop input_options.options\n\n\t\t\t}//loop input_options\n\n\t\t};\n\n\t\tvar _commitInputOptionsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//console.log(the_result);\n\t\t\tconsole.log(\"executeSql SUCCESS INPUT OPTIONS\");\n\n\t\t};\n\n\t\tvar _commitInputOptionsSuccessCB = function() {\n\n\t\t\t//reset options length\n\t\t\tinput_options.length = 0;\n\n\t\t\t//Hierarchy structure saved to database correctly\n\t\t\tdeferred.resolve();\n\n\t\t};\n\n\t\tmodule.commitInputOptions = function(the_input_options, the_inputs_ids) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tinput_options = the_input_options;\n\t\t\tinputs_IDs = the_inputs_ids;\n\n\t\t\tEC.db.transaction(_commitInputOptionsTX, _errorCB, _commitInputOptionsSuccessCB);\n\t\t\t\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Hierarchy));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *   @module Hierarchy\n *\n */\n\nvar EC = EC || {};\nEC.Hierarchy = EC.Hierarchy || {};\nEC.Hierarchy = ( function(module) {\n        \"use strict\";\n\n        var self;\n        var deferred;\n\n        //track inputs IDs\n        var inputs_IDs = [];\n\n        //we need to keep track of the input option @ref to be linked with\n        // whatever ID it gets after being entered to the the db\n        var input_option_index;\n\n        //store inputs object\n        var inputs;\n\n        var forms_with_media = [];\n        var forms_IDs = [];\n\n        //Transaction to save all the inputs for each form to database\n        var _commitInputsTX = function(tx) {\n\n            var i;\n            var j;\n            var k;\n            var iLength;\n            var jLength;\n            var kLength;\n            var current_form_num;\n            var current_form_id;\n            var input_list;\n            var input_type;\n            var input_ref;\n            var query;\n\n            //loop input array, one element per form . Each element contains an\n            // input list and the @num attribute\n            for ( i = 0, iLength = inputs.length; i < iLength; i++) {\n\n                //get the database ID for the current form\n                current_form_num = inputs[i].num;\n                for ( j = 0, jLength = forms_IDs.length; j < jLength; j++) {\n\n                    if (forms_IDs[j].num === current_form_num) {\n\n                        //exit loop as soon as we get a match\n                        current_form_id = forms_IDs[j].id;\n                        break;\n                    }\n                }\n\n                //loop each input for the current element(form) and commit it\n                kLength = inputs[i].input_list.length;\n                for ( k = 0; k < kLength; k++) {\n\n                    input_type = inputs[i].input_list[k].type;\n                    input_ref = inputs[i].input_list[k].ref;\n\n                    query = 'INSERT INTO ec_inputs (';\n                    query += 'form_id, ';\n                    query += 'label, ';\n                    query += 'default_value, ';\n                    query += 'type, ';\n                    query += 'ref, ';\n                    query += 'position, ';\n                    query += 'is_primary_key, ';\n                    query += 'is_genkey, ';\n                    query += 'regex, ';\n                    query += 'max_range, ';\n                    query += 'min_range, ';\n                    query += 'is_required, ';\n                    query += 'is_title, ';\n                    query += 'has_jump, ';\n                    query += 'jumps, ';\n                    query += 'has_advanced_jump, ';\n                    query += 'datetime_format, ';\n                    query += 'branch_form_name, ';\n                    query += 'has_double_check) ';\n                    query += 'VALUES (';\n                    //parameterized query (webSQL only allows '?' http://www.w3.org/TR/webdatabase/)\n                    //\n                    query += '?,';\n                    //current_form_id\n                    //\n                    query += '?,';\n                    //label\n                    //\n                    query += '?,';\n                    //default_value\n                    //\n                    query += '?,';\n                    //type\n                    //\n                    query += '?,';\n                    //ref\n                    //\n                    query += '?,';\n                    //position\n                    //\n                    query += '?,';\n                    //is_primary_key\n                    //\n                    query += '?,';\n                    //is_gen_key\n                    //\n                    query += '?,';\n                    //regex\n                    //\n                    query += '?,';\n                    //max_range\n                    //\n                    query += '?,';\n                    //min_range\n                    //\n                    query += '?,';\n                    //is_required\n                    //\n                    query += '?,';\n                    //is_title\n                    //\n                    query += '?,';\n                    //has_jump\n                    //\n                    query += '?,';\n                    //jumps\n                    //\n                    query += '?,';\n                    //has_advanced_jump\n                    //\n                    query += '?,';\n                    //datetime_format\n                    //\n                    query += '?,';\n                    //branch_form_name\n                    //\n                    query += '?);';\n                    //has_double_check\n\n                    //keep track of current input @ref\n                    inputs_IDs.push({\n                        ref : input_ref,\n                        form_id : current_form_id,\n                        form_num : current_form_num,\n                        id : \"\"//fill this after INSERT\n                    });\n\n                    tx.executeSql(query, [//\n                    current_form_id, //\n                    inputs[i].input_list[k].label, //\n                    inputs[i].input_list[k].default_value, //\n                    input_type, //\n                    input_ref, //\n                    inputs[i].input_list[k].position, //\n                    inputs[i].input_list[k].is_primary_key, //\n                    inputs[i].input_list[k].is_genkey, //\n                    inputs[i].input_list[k].regex, //\n                    inputs[i].input_list[k].max_range, //\n                    inputs[i].input_list[k].min_range, //\n                    inputs[i].input_list[k].is_required, //\n                    inputs[i].input_list[k].is_title, //\n                    inputs[i].input_list[k].has_jump, //\n                    inputs[i].input_list[k].jumps, //\n                    inputs[i].input_list[k].has_advanced_jump, //\n                    inputs[i].input_list[k].datetime_format, //\n                    inputs[i].input_list[k].branch_form_name, //\n                    inputs[i].input_list[k].has_double_check//\n\n                    ], _commitInputsSQLSuccess, _errorCB);\n\n                }//for each input\n            }// for each form\n\n        };\n\n        /* Callback called each time an input executeSql is successful\n         *\n         * here the input ID (geerated from the query when entering the input) is\n         * linked to its input @ref\n         */\n        var _commitInputsSQLSuccess = function(the_tx, the_result) {\n\n            //link each row ID to its input\n            inputs_IDs[input_option_index].id = the_result.insertId;\n            input_option_index++;\n\n            console.log(\"executeSql SUCCESS HIERARCHY INPUTS\");\n\n        };\n\n        var _commitInputsSuccessCB = function() {\n\n            deferred.resolve(inputs_IDs);\n\n            forms_with_media.length = 0;\n            inputs.length = 0;\n\n        };\n\n        var _errorCB = function(the_tx, the_result) {\n\n            console.log(EC.Utils.TRANSACTION_ERROR);\n            console.log(the_tx);\n            console.log(the_result);\n        };\n\n        module.commitInputs = function(the_inputs_object, the_forms_ids) {\n\n            self = this;\n            deferred = new $.Deferred();\n            inputs = the_inputs_object;\n            forms_IDs = the_forms_ids;\n\n            inputs_IDs = [];\n            forms_with_media = [];\n            input_option_index = 0;\n\n            EC.db.transaction(_commitInputsTX, _errorCB, _commitInputsSuccessCB);\n\n            return deferred.promise();\n\n        };\n\n        return module;\n\n    }(EC.Hierarchy));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *   @module Hierarchy\n *\n */\nvar EC = EC || {};\nEC.Hierarchy = EC.Hierarchy || {};\nEC.Hierarchy = ( function(module) {\"use strict\";\n\n        var self;\n        var project;\n        var deferred;\n\n        //Transaction to save the project object\n        var _commitProjectTX = function(tx) {\n\n            var query = \"\";\n            query += 'INSERT INTO ec_projects ( ';\n            query += 'name, ';\n            query += 'allowDownloadEdits, ';\n            query += 'version, ';\n            query += 'total_hierarchy_forms, ';\n            query += 'total_branch_forms, ';\n            query += 'downloadFromServer, ';\n            query += 'uploadToServer) ';\n            query += 'VALUES (\"';\n            query += project.name + '\", \"';\n            query += project.allowDownloadEdits + '\", \"';\n            query += project.version + '\", \"';\n            query += project.total_hierarchy_forms + '\", \"';\n            query += project.total_branch_forms + '\", \"';\n            query += project.downloadFromServer + '\", \"';\n            query += project.uploadToServer + '\");';\n\n            tx.executeSql(query, [], _commitProjectSQLSuccess, self.errorCB);\n\n        };\n\n        //Callback executed if the project is saved correctly to the db\n        var _commitProjectSQLSuccess = function(the_tx, the_result) {\n\n            //keep track of the last project ID we entered to the database\n            project.insertId = the_result.insertId;\n        };\n\n        var _commitProjectSuccessCB = function() {\n\n            var branch_forms;\n            //commit all the hierarchy forms (main)\n\n            //@bug on iOS: insertID can be undefined, so get the id of the last INSERT project manually\n            if (project.insertId) {\n\n                deferred.resolve(project);\n\n            } else {\n                \n                alert(\"ios\");\n                //oh my..IOS...let's get the ID of the last entered project before doing anything else\n                $.when(EC.Select.getProjectRowId(project.name)).then(function(the_project_id) {\n\n                    project.insertId = the_project_id;\n\n                    deferred.resolve(project);\n\n                });\n            }\n        };\n\n        module.commitProject = function(the_project_object) {\n\n            self = this;\n            project = the_project_object;\n            deferred = new $.Deferred();\n\n            EC.db.transaction(_commitProjectTX, self.errorCB, _commitProjectSuccessCB);\n\n            return deferred.promise();\n\n        };\n\n        return module;\n\n    }(EC.Hierarchy));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\r\n/*global $, jQuery*/\r\n/*\r\n *   @module Hierarchy\r\n *\r\n *  It will create a project hierarchy structure (project, forms, inputs, input_values) to the database\r\n *\r\n each method will accept a single object (that can be a single or an array of objects) to be saved\r\n *\r\n */\r\n\r\nvar EC = EC || {};\r\nEC.Hierarchy = (function (module) {\r\n    'use strict';\r\n\r\n    //callback for a transaction error\r\n    module.errorCB = function (the_tx, the_result) {\r\n        console.log(EC.Utils.TRANSACTION_ERROR);\r\n        console.log(the_tx);\r\n        console.log(the_result);\r\n    };\r\n\r\n    return module;\r\n}(EC.Hierarchy));\r\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *   @module Structure\n *\n */\nvar EC = EC || {};\nEC.Structure = EC.Structure || {};\nEC.Structure = ( function(module) {\"use strict\";\n\n        var deferred;\n        var project;\n\n        module.commitAll = function() {\n\n            deferred = new $.Deferred();\n\n            $.when(EC.Hierarchy.commitProject(EC.Parse.project)).then(function(the_project) {\n\n                project = the_project;\n\n                //if we have branches, save both hierarchy and branch structure to db\n\n                //commit all branch forms (if any)\n                var branch_forms = EC.Parse.getBranchForms();\n                var hierarchy_forms = EC.Parse.getHierarchyForms();\n                if (branch_forms.length > 0) {\n\n                    //commit both hierarchy and branch forms\n                    $.when(EC.Hierarchy.commitForms(hierarchy_forms, project.insertId), EC.Branch.commitBranchForms(branch_forms, project.insertId)).then(function(hierarchy_forms_IDs, branch_forms_IDs) {\n\n                        var hierarchy_inputs = EC.Parse.inputs;\n                        var branch_inputs = EC.Parse.branch_inputs;\n\n                        $.when(EC.Hierarchy.commitInputs(hierarchy_inputs, hierarchy_forms_IDs), EC.Branch.commitBranchInputs(branch_inputs, branch_forms_IDs)).then(function(hierarchy_inputs_IDs, branch_inputs_IDs) {\n\n                            var branch_options = EC.Parse.branch_options;\n                            var hierarchy_options = EC.Parse.options;\n\n                            //commit hierarchy input options if any\n                            if (hierarchy_options.length > 0) {\n                                $.when(EC.Hierarchy.commitInputOptions(hierarchy_options, hierarchy_inputs_IDs)).then(function() {\n\n                                    //hierarchy option saved, save branch input options if any\n                                    if (branch_options.length > 0) {\n                                        $.when(EC.Branch.commitBranchInputOptions(branch_options, branch_inputs_IDs)).then(function() {\n\n                                            //options saved , redirect to projects list\n                                            console.log(\"models ready\");\n                                            deferred.resolve();\n                                        });\n\n                                    } else {\n\n                                        //no branch options, redirect\n                                        console.log(\"models ready\");\n                                        deferred.resolve();\n                                    }\n\n                                });\n                            } else {\n                                //commit branch input options if any\n                                if (branch_options.length > 0) {\n                                    $.when(EC.Branch.commitBranchInputOptions(branch_options, branch_inputs_IDs)).then(function() {\n\n                                        //options saved\n                                        console.log(\"models ready\");\n                                        deferred.resolve();\n                                    });\n                                } else {\n                                    //no branch options, done\n                                    console.log(\"models ready\");\n                                    deferred.resolve();\n                                }\n                            }\n                        });\n\n                    });\n\n                } else {\n\n                    //commit only hierarchy forms\n                    $.when(EC.Hierarchy.commitForms(hierarchy_forms, project.insertId)).then(function(forms_IDs) {\n                        //commit hierarchy inputs\n                        var inputs = EC.Parse.inputs;\n\n                        $.when(EC.Hierarchy.commitInputs(inputs, forms_IDs)).then(function(inputs_IDs) {\n\n                            var options = EC.Parse.options;\n\n                            //commit input options if any\n                            if (options.length > 0) {\n                                $.when(EC.Hierarchy.commitInputOptions(options, inputs_IDs)).then(function() {\n\n                                    //options saved , done\n                                    console.log(\"models ready\");\n                                    deferred.resolve();\n\n                                });\n                            } else {\n                                //no options, done\n                                console.log(\"models ready\");\n                                deferred.resolve();\n                            }\n\n                        });\n\n                    });\n\n                }\n\n            });\n\n            return deferred.promise();\n\n        };\n\n        return module;\n\n    }(EC.Structure));\n","var EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = (function (module) {\n    'use strict';\n\n    var forms;\n    var project_id;\n    var entries;\n    var branch_data_rows;\n    var branch_form_names;\n    var form_counter;\n    var branch_form_counter;\n    var has_branches;\n    var deferred;\n\n    //get all ec_data rows for this project\t (per each form)\n    var _getAllProjectEntriesTX = function (tx) {\n\n        var i;\n        var iLength = forms.length;\n        var select_query = 'SELECT * FROM ec_data WHERE form_id=?';\n        var branch_select_query;\n        form_counter = 0;\n        branch_form_counter = 0;\n\n        for (i = 0; i < iLength; i++) {\n            tx.executeSql(select_query, [forms[i]._id], _getAllProjectEntriesSQLSuccessCB, EC.Select.errorCB);\n        }\n\n        if (has_branches) {\n            branch_data_rows = [];\n            branch_form_names = [];\n            branch_select_query = 'SELECT * FROM ec_branch_data JOIN ec_branch_forms ON ec_branch_data.form_id=ec_branch_forms._id WHERE ec_branch_forms.project_id=?';\n            tx.executeSql(branch_select_query, [project_id], _getAllProjectBranchEntriesSQLSuccessCB, EC.Select.errorCB);\n        }\n\n    };\n\n    var _getAllProjectEntriesSuccessCB = function () {\n\n        //if we have any branch data, append them to the end of entries array\n        if (branch_data_rows.length > 0) {\n            entries.push({\n                has_branches: true,\n                branch_data_rows: branch_data_rows,\n                branch_form_names: branch_form_names\n            });\n        }\n\n        //return entries to backup controller\n        deferred.resolve(entries.slice(0));\n\n        entries.length = 0;\n        branch_data_rows.length = 0;\n        forms.length = 0;\n    };\n\n    var _getAllProjectEntriesSQLSuccessCB = function (the_tx, the_result) {\n\n        var i;\n        var iLength = the_result.rows.length;\n        var current_data_rows;\n\n        //per each form, save form details and an array with all the entries for that form\n        entries[form_counter] = {\n            form_id: forms[form_counter]._id,\n            form_name: forms[form_counter].name,\n            total_entries: forms[form_counter].entries,\n            total_inputs: forms[form_counter].total_inputs,\n            data_rows: []\n        };\n\n        for (i = 0; i < iLength; i++) {\n\n            current_data_rows = entries[form_counter].data_rows;\n            current_data_rows.push(the_result.rows.item(i));\n\n            //if the entry row just added is a media field, set value to empty string (as media files are not backed up)\n            if (current_data_rows[current_data_rows.length - 1].type === EC.Const.PHOTO || current_data_rows[current_data_rows.length - 1].type === EC.Const.AUDIO || current_data_rows[current_data_rows.length - 1].type === EC.Const.VIDEO) {\n                current_data_rows[current_data_rows.length - 1].value = '';\n            }\n\n        }\n\n        form_counter++;\n\n    };\n\n    var _getAllProjectBranchEntriesSQLSuccessCB = function (the_tx, the_result) {\n\n        var i;\n        var iLength = the_result.rows.length;\n        var current_branch_form_name;\n\n        for (i = 0; i < iLength; i++) {\n\n            branch_data_rows.push(the_result.rows.item(i));\n\n            //cache branch form names: when restoring we will neeed the branch form name and project id to map the rows against the actual branch form id\n            //which will be different from the one we save\n            current_branch_form_name = the_result.rows.item(i).name;\n            //store only unique values\n            if (!EC.Utils.inArray(branch_form_names, current_branch_form_name)) {\n                branch_form_names.push(current_branch_form_name);\n            }\n        }\n\n    };\n\n    /**\n     *\n     * @param {Object} the_forms Fetch all project entries rows\n     */\n    module.getAllProjectEntries = function (the_forms, the_project_id) {\n\n        forms = the_forms;\n        project_id = the_project_id;\n        has_branches = EC.Utils.projectHasBranches();\n        entries = [];\n        branch_data_rows = [];\n        deferred = new $.Deferred();\n\n        EC.db.transaction(_getAllProjectEntriesTX, EC.Select.errorCB, _getAllProjectEntriesSuccessCB);\n\n        return deferred.promise();\n\n    };\n\n    return module;\n\n}(EC.Select));\n","/*jslint vars: true, nomen: true, plusplus: true*/\n/**\n * @module EC\n * @submodule GetData\n */\n\nvar EC = EC || {};\n\nEC.Select = ( function(module) {\n\n\t\tvar project_id;\n\t\tvar allow_download_edits;\n\t\tvar deferred;\n\n\t\tvar _getADEFlagTX = function(tx) {\n\n\t\t\tvar query = 'SELECT allowDownloadEdits FROM ec_projects WHERE _id=?';\n\n\t\t\ttx.executeSql(query, [project_id], _getADEFlagSQLSuccess, EC.Select.errorCB);\n\t\t};\n\n\t\tvar _getADEFlagSQLSuccess = function(the_tx, the_result) {\n\t\t\tallow_download_edits = the_result.rows.item(0).allowDownloadEdits;\n\t\t};\n\n\t\tvar _getADEFlagTXSuccessCB = function() {\n\n\t\t\tif (allow_download_edits === \"false\") {\n\t\t\t\tdeferred.reject();\n\t\t\t} else {\n\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @method getAllowDownloadEdits Fetch the AllowDownloadEdits flag for the selected project and set it in localStorage\n\t\t * @param {int} the_project_id  The project id\n\t\t */\n\t\tmodule.getAllowDownloadEdits = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getADEFlagTX, EC.Select.errorCB, _getADEFlagTXSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n * @method getBranchChildrenFiles \n * \n * get all the media files for all the branch\n * entries attached to a child entry and return the array with the file details\n * \n * {value: <the_filename>, tyope: <the_media_type>}\n */\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar entries;\n\t\tvar files;\n\n\t\tvar _getBranchChildrenFilesSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tfiles.push(the_result.rows.item(i));\n\t\t\t}\n\t\t};\n\n\t\tvar _getBranchChildrenFilesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = entries.length;\n\t\t\tvar query = 'SELECT value, type from ec_branch_data WHERE hierarchy_entry_key_value=? AND (type=? OR type=? OR type=?) AND value <>?';\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t//get all file names and types\n\t\t\t\ttx.executeSql(query, [entries[i].entry_key, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO, \"\"], _getBranchChildrenFilesSQLSuccessCB, self.errorCB);\n\t\t\t}\n\t\t};\n\n\t\tvar _getBranchChildrenFilesSuccessCB = function() {\n\t\t\tdeferred.resolve(files);\n\t\t};\n\n\t\tmodule.getBranchChildrenFiles = function() {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tentries = EC.Delete.deletion_entries;\n\t\t\tfiles = [];\n\n\t\t\tEC.db.transaction(_getBranchChildrenFilesTX, self.errorCB, _getBranchChildrenFilesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar entries = [];\n\t\tvar form_id;\n\t\tvar project_id;\n\t\tvar branch_form_name;\n\t\tvar hierarchy_key_value;\n\t\tvar titles = [];\n\t\tvar full_titles = [];\n\t\tvar branch_primary_keys = [];\n\t\tvar child_counter = 0;\n\t\tvar entry_key;\n\t\tvar offset;\n\t\tvar deferred;\n\n\t\tvar _getBranchEntriesSuccessCB = function() {\n\n\t\t\t/*\n\t\t\t * store primary key values for current branch form\n\t\t\t * it is not possible to have duplicates for the primary key input field within the same form level\n\t\t\t * (using circular data structure)\n\t\t\t */\n\t\t\tvar i;\n\t\t\tvar iLength = entries.length;\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tbranch_primary_keys.push(entries[i].entry_key);\n\t\t\t}\n\n\t\t\tEC.BranchInputs.setCachedBranchEntryKeys(branch_form_name, branch_primary_keys);\n\n\t\t\tbranch_primary_keys.length = 0;\n\n\t\t\t/*\n\t\t\t * Using each entry, select all the fields for that entry with 'is_title' = true\n\t\t\t * This will build the full title to be displayed per each itme in the listview\n\t\t\t * if no inputs are set as title, default to the value of the primary key\n\t\t\t */\n\n\t\t\tEC.db.transaction(_getEntriesTitlesTX, EC.Select.errorCB, _getEntriesTitlesSuccessCB);\n\n\t\t\t/*\n\t\t\t * Using each entry, count how many child entry there are per each entry\n\t\t\t * The counts will be displayed on the list of entries\n\t\t\t */\n\n\t\t\tconsole.log(EC.Const.TRANSACTION_SUCCESS);\n\n\t\t};\n\n\t\tvar _getEntriesTitlesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = entries.length;\n\t\t\tvar query;\n\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tquery = 'SELECT _id, value, entry_key FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE name=? AND project_id=?) AND is_title=? AND entry_key=? AND hierarchy_entry_key_value=?';\n\t\t\t\ttx.executeSql(query, [branch_form_name, project_id, 1, entries[i].entry_key, entries[i].hierarchy_entry_key_value], _getEntriesTitlesSQLSuccess, EC.Select.errorCB);\n\n\t\t\t}//for\n\n\t\t};\n\n\t\tvar _getEntriesTitlesSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with project data\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\ttitles.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getEntriesTitlesSuccessCB = function() {\n\n\t\t\t//Build the titles concatenating all the title fields found per each entry\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar iLength = entries.length;\n\t\t\tvar jLength = titles.length;\n\t\t\tvar full_title;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tfull_title = \"\";\n\n\t\t\t\tfor ( j = 0; j < jLength; j++) {\n\n\t\t\t\t\tif (entries[i].entry_key === titles[j].entry_key) {\n\n\t\t\t\t\t\tfull_title += (full_title === \"\") ? titles[j].value : \", \" + titles[j].value;\n\n\t\t\t\t\t}\n\n\t\t\t\t}//for titles\n\n\t\t\t\tfull_titles.push({\n\t\t\t\t\tfull_title : full_title,\n\t\t\t\t\tentry_key : entries[i].entry_key\n\t\t\t\t});\n\n\t\t\t}//for entries\n\n\t\t\tconsole.log(\"branch entries full_titles\");\n\t\t\tconsole.log(full_titles);\n\n\t\t\t//resolve deferred returning full titles\n\t\t\tdeferred.resolve(full_titles.slice(0));\n\n\t\t\t//clear all arrays\n\t\t\tfull_titles.length = 0;\n\t\t\ttitles.length = 0;\n\t\t\tentries.length = 0;\n\n\t\t};\n\n\t\t/*\n\t\t * Get all entries for a form and group them by entry_key:\n\t\t * a form have multiple entries, one per each input, and they all have the same entry_key value)\n\t\t */\n\t\tvar _getBranchEntriesTX = function(tx) {\n\n\t\t\tvar query = \"\";\n\n\t\t\tquery = 'SELECT _id, entry_key, hierarchy_entry_key_value FROM ec_branch_data ';\n\t\t\tquery += 'WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE name=? AND project_id=?) ';\n\t\t\tquery += 'AND hierarchy_entry_key_value=? ';\n\t\t\tquery += 'GROUP BY entry_key ';\n\t\t\tquery += 'ORDER BY entry_key ';\n\t\t\tquery += 'LIMIT ' + window.localStorage.QUERY_LIMIT + \" OFFSET \" + offset;\n\n\t\t\ttx.executeSql(query, [branch_form_name, project_id, hierarchy_key_value], _getBranchEntriesSQLSuccess, EC.Select.errorCB);\n\t\t\tself.query_error_message = \"EC.Select.getBranchEntries _getBranchEntriesTX\";\n\n\t\t};\n\n\t\tvar _getBranchEntriesSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with entries\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tentries.push(the_result.rows.item(i));\n\n\t\t\t}\n\n\t\t\tconsole.log(entries, true);\n\n\t\t};\n\n\t\tvar _getBranchEntriesTitlesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = entries.length;\n\t\t\tvar query;\n\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tquery = 'SELECT _id, value, entry_key FROM ec_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE name=? AND project_id=?) AND is_title=? AND entry_key=? AND hierarchy_entry_key_value=?';\n\t\t\t\ttx.executeSql(query, [branch_form_name, project_id, 1, entries[i].entry_key, entries[i].hierarchy_entry_key_value], _getBranchEntriesTitlesSQLSuccess, EC.Select.errorCB);\n\n\t\t\t}//for\n\n\t\t};\n\n\t\tvar _getBranchEntriesTitlesSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with titles\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\ttitles.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t};\n\n\t\tmodule.getBranchEntries = function(the_project_id, the_branch_form_name, the_hierarchy_entry_key_value, the_offset) {\n\n\t\t\tself = this;\n\t\t\tbranch_form_name = the_branch_form_name;\n\t\t\thierarchy_key_value = the_hierarchy_entry_key_value;\n\t\t\tproject_id = the_project_id;\n\t\t\toffset = the_offset;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getBranchEntriesTX, EC.Select.errorCB, _getBranchEntriesSuccessCB);\n\n\t\t\t// return promise\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar branch_form_name;\n\t\tvar project_id;\n\t\tvar entry_key;\n\t\tvar entry_keys = [];\n\t\tvar deferred;\n\n\t\tvar _getEntryKeys = function(tx) {\n\n\t\t\t//get all entry key for the specified form\n\t\t\tvar query = 'SELECT DISTINCT entry_key FROM ec_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE name=? AND project_id=?)';\n\n\t\t\ttx.executeSql(query, [branch_form_name, project_id], _getEntryKeysSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar _getEntryKeysSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\t//build object with entry keys\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tentry_keys.push(the_result.rows.item(i).entry_key);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getEntryKeysSuccessCB = function() {\n\t\t\tdeferred.resolve(entry_keys);\n\t\t};\n\n\t\t//get all entr+key value for the specified form\n\t\tmodule.getBranchEntryKeys = function(the_branch_form_name, the_project_id) {\n\n\t\t\tdeferred = new $.Deferred();\n\t\t\tbranch_form_name = the_branch_form_name;\n\t\t\tproject_id = the_project_id;\n\t\t\tentry_keys.length = 0;\n\n\t\t\tEC.db.transaction(_getEntryKeys, EC.Select.errorCB, _getEntryKeysSuccessCB);\n\t\t\t\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar branch_form_name;\n\t\tvar hierarchy_entry_key_value;\n\t\tvar entry_key;\n\t\tvar project_id;\n\t\tvar values = [];\n\t\tvar deferred;\n\n\t\tvar _getBranchEntryValuesTX = function(tx) {\n\n\t\t\t//get all entry values\n\t\t\tvar query = 'SELECT * FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE name=? AND project_id=?) AND entry_key=? AND hierarchy_entry_key_value =? ORDER BY position';\n\n\t\t\ttx.executeSql(query, [branch_form_name, project_id, entry_key, hierarchy_entry_key_value], _getBranchEntryValuesSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\t\t//_getEntryValues\n\n\t\tvar _getBranchEntryValuesSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar index;\n\t\t\tvar iLenght = the_result.rows.length;\n\t\t\tvar input_id = \"\";\n\t\t\tvar current_input_id;\n\t\t\tvar prev_value = [];\n\t\t\tvar prev_obj;\n\t\t\tvar new_obj;\n\t\t\tvar new_object = {};\n\t\t\tvar string;\n\n\t\t\t//build object with entry values\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tcurrent_input_id = the_result.rows.item(i).input_id;\n\n\t\t\t\tvalues.push(the_result.rows.item(i));\n\n\t\t\t}\n\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(\"TRANSACTION SELECT BRANCH ENTRY VALUES SUCCESS\");\n\n\t\t};\n\n\t\tvar _getBranchEntryValuesSuccessCB = function(the_tx) {\n\n\t\t\t//Render entry values list\n\t\t\tdeferred.resolve(values.slice(0));\n\t\t\tvalues.length = 0;\n\n\t\t};\n\n\t\tmodule.getBranchEntryValues = function(the_project_id, the_branch_form_name, the_entry_key, the_hierarchy_entry_key_value) {\n\n\t\t\tbranch_form_name = the_branch_form_name;\n\t\t\tentry_key = the_entry_key;\n\t\t\tproject_id = the_project_id;\n\t\t\thierarchy_entry_key_value = the_hierarchy_entry_key_value;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\t//clear values array before requesting new values\n\t\t\tvalues.length = 0;\n\n\t\t\tEC.db.transaction(_getBranchEntryValuesTX, EC.Select.errorCB, _getBranchEntryValuesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar hierarchy_entry_key;\n\t\tvar deferred;\n\t\tvar files;\n\n\t\tvar _errorCB = function(the_tx, the_error) {\n\t\t\tconsole.log(EC.Const.TRANSACTION_ERROR);\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(the_error);\n\t\t};\n\n\t\tvar _selectBranchFilesSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tfiles.push(the_result.rows.item(i));\n\t\t\t}\n\t\t};\n\n\t\tvar _getBranchFilesTX = function(tx) {\n\n\t\t\tvar select_branch_files_query = 'SELECT value, type from ec_branch_data WHERE hierarchy_entry_key_value=? AND (type=? OR type=? OR type=?) AND value <>?';\n\t\t\t//get all file names and types\n\t\t\ttx.executeSql(select_branch_files_query, [hierarchy_entry_key, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO, \"\"], _selectBranchFilesSQLSuccessCB, _errorCB);\n\t\t};\n\n\t\tvar _getBranchFilesSuccessCB = function() {\n\n\t\t\tconsole.log(\"Branch files: ****************************************\");\n\t\t\tconsole.log(\"Branch files:\" + JSON.stringify(files));\n\n\t\t\tdeferred.resolve(files);\n\t\t};\n\n\t\t//get all the media files for all the branch entries attached to a hierarchy entry\n\t\tmodule.getBranchFiles = function(the_hierarchy_entry_key) {\n\n\t\t\tdeferred = new $.Deferred();\n\t\t\thierarchy_entry_key = the_hierarchy_entry_key;\n\t\t\tfiles = [];\n\n\t\t\tEC.db.transaction(_getBranchFilesTX, _errorCB, _getBranchFilesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar branch_form_name;\n\t\tvar value;\n\t\tvar input;\n\t\tvar project_id;\n\t\tvar entry_key;\n\t\tvar entry_keys = [];\n\t\tvar branch_form;\n\t\tvar deferred;\n\n\t\tvar _getBranchFormDetailsTX = function(tx) {\n\n\t\t\tvar query = \"SELECT _id, project_id, name,num, key, total_inputs, has_media, is_genkey_hidden, entries FROM ec_branch_forms WHERE name=? AND project_id=?\";\n\n\t\t\ttx.executeSql(query, [branch_form_name, project_id], _getBranchFormDetailsSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar _getBranchFormDetailsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tbranch_form = the_result.rows.item(0);\n\n\t\t};\n\n\t\tvar _getBranchFormDetailsSuccessCB = function() {\n\n\t\t\t//return branch form details\n\t\t\tdeferred.resolve(branch_form);\n\n\t\t};\n\n\t\tmodule.getBranchFormDetails = function(the_input, the_value, the_project_id) {\n\n\t\t\tinput = the_input;\n\t\t\tvalue = the_value;\n\t\t\tbranch_form_name = input.branch_form_name;\n\t\t\tproject_id = the_project_id;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getBranchFormDetailsTX, EC.Select.errorCB, _getBranchFormDetailsSuccessCB);\n\n\t\t\t// return promise\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar branch_form_names;\n\t\tvar mapped_branch_forms;\n\t\tvar deferred;\n\n\t\tvar _getBranchFormLocalIDsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = branch_form_names.length;\n\t\t\tvar query = \"SELECT _id, name FROM ec_branch_forms WHERE name=? AND project_id=?\";\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(query, [branch_form_names[i], project_id], _getBranchFormLocalIDsSQLSuccess, EC.Select.errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getBranchFormLocalIDsSQLSuccess = function(the_tx, the_result) {\n\t\t\t\n\t\t\t//map form names against _id\n\t\t\t//TODO: is this right? why are we getting the first row only??\n\t\t\tmapped_branch_forms.push({\n\t\t\t\t_id : the_result.rows.item(0)._id,\n\t\t\t\tname : the_result.rows.item(0).name\n\t\t\t});\n\n\t\t};\n\n\t\tvar _getBranchFormLocalIDsSuccessCB = function() {\n\n\t\t\t//return mappped branch forms\n\t\t\tdeferred.resolve(mapped_branch_forms);\n\n\t\t};\n\n\t\tmodule.getBranchFormLocalIDs = function(the_project_id, the_branch_form_names) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tbranch_form_names = the_branch_form_names;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tmapped_branch_forms = [];\n\n\t\t\tEC.db.transaction(_getBranchFormLocalIDsTX, EC.Select.errorCB, _getBranchFormLocalIDsSuccessCB);\n\n\t\t\t// return promise\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar branch_forms;\n\t\tvar project_id;\n\t\tvar deferred;\n\n\t\tvar _getBranchFormsSuccessCB = function() {\n\t\t\tdeferred.resolve(branch_forms);\n\t\t};\n\n\t\tvar _getBranchFormsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with project data\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\t\t\t\tbranch_forms.push(the_result.rows.item(i));\n\t\t\t}\n\t\t};\n\n\t\tvar _getBranchFormsTX = function(tx) {\n\t\t\tvar query = 'SELECT _id, name, key, num, has_media, is_genkey_hidden, total_inputs, entries FROM ec_branch_forms WHERE project_id=?';\n\t\t\ttx.executeSql(query, [project_id], _getBranchFormsSQLSuccess, EC.Select.errorCB);\n\t\t};\n\n\t\tmodule.getBranchForms = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tbranch_forms =[];\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getBranchFormsTX, EC.Select.errorCB, _getBranchFormsSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\t\t\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar branch_inputs = [];\n\t\tvar branch_input_options_ids = [];\n\t\tvar branch_input_options = [];\n\t\tvar has_jumps;\n\t\tvar branch_form_name;\n\t\tvar project_id;\n\t\tvar form_id;\n\t\tvar deferred;\n\n\t\t//callback triggered when all the branch_inputs for a form are fetched correctly. 'branch_inputs' contains all the branch_inputs\n\t\tvar _getBranchInputsSuccessCB = function(tx) {\n\n\t\t\tconsole.log(\"TRANSACTION SELECT INPUTS SUCCESS\");\n\t\t\thas_jumps = false;\n\t\t\tbranch_input_options_ids.length = 0;\n\n\t\t\t//We have all the inputs, need to check if any radio, select(dropdown), checkbox input has input options\n\t\t\tvar i;\n\t\t\tvar iLenght = branch_inputs.length;\n\n\t\t\t//loop inputs looking for type radio, checkbox or dropdown and also to check if the form has some jumps\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tif (branch_inputs[i].type === \"radio\" || branch_inputs[i].type === \"select\" || branch_inputs[i].type === \"checkbox\") {\n\t\t\t\t\t//list which inputs have input options (the ids)\n\t\t\t\t\tbranch_input_options_ids.push({\n\t\t\t\t\t\t\"id\" : branch_inputs[i]._id\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (branch_inputs[i].has_jump === 1 && !has_jumps) {\n\t\t\t\t\thas_jumps = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//map any option (if any) to the inputs\n\t\t\tif (branch_input_options_ids.length > 0) {\n\t\t\t\t//get input options\n\t\t\t\tEC.db.transaction(_getBranchInputOptionsTX, EC.Select.errorCB, _getBranchInputOptionsSuccessCB);\n\t\t\t}\n\n\t\t\t//no options to map then just render form\n\t\t\telse {\n\t\t\t\tdeferred.resolve(branch_inputs, has_jumps);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getBranchInputsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with inputs data\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\t\t\t\tbranch_inputs.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t\tconsole.log(branch_inputs, true);\n\n\t\t};\n\n\t\tvar _getBranchInputOptionsSuccessCB = function(the_tx) {\n\n\t\t\t//map input options to input\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar iLength = branch_inputs.length;\n\t\t\tvar jLength = branch_input_options.length;\n\n\t\t\t//console.log(JSON.stringify(input_options));\n\n\t\t\t//build object with inputs data\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tbranch_inputs[i].options = [];\n\n\t\t\t\tfor ( j = 0; j < jLength; j++) {\n\n\t\t\t\t\tif (branch_inputs[i]._id === branch_input_options[j].input_id) {\n\n\t\t\t\t\t\tbranch_inputs[i].options.push({\n\t\t\t\t\t\t\tjump_to : branch_input_options[j].jump_to,\n\t\t\t\t\t\t\tjump_when : branch_input_options[j].jump_when,\n\t\t\t\t\t\t\tlabel : branch_input_options[j].label,\n\t\t\t\t\t\t\tref : branch_input_options[j].ref,\n\t\t\t\t\t\t\tvalue : branch_input_options[j].value\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}//if\n\n\t\t\t\t}//for\n\n\t\t\t}//for\n\n\t\t\tdeferred.resolve(branch_inputs, has_jumps);\n\n\t\t};\n\t\t//_getInputOptionsSuccessCB\n\n\t\tvar _getBranchInputOptionsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = branch_input_options_ids.length;\n\t\t\tvar query;\n\n\t\t\t//get all input options per each input\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\t\t\t\tquery = 'SELECT * FROM ec_branch_input_options WHERE input_id=?';\n\t\t\t\ttx.executeSql(query, [branch_input_options_ids[i].id], _getBranchInputOptionsSQLSuccess, EC.Select.errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getBranchInputOptionsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with inputs data\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\t\t\t\tbranch_input_options.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getBranchInputsTX = function(tx) {\n\n\t\t\t//get all branch inputs (using a nested query to get form id in the database)\n\t\t\tvar query = 'SELECT * FROM ec_branch_inputs WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE name=? AND project_id=?) ORDER BY position';\n\n\t\t\ttx.executeSql(query, [branch_form_name, project_id], _getBranchInputsSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tmodule.getBranchInputs = function(the_branch_form_name, the_project_id) {\n\n\t\t\tdeferred = new $.Deferred();\n\t\t\tproject_id = the_project_id;\n\t\t\tbranch_form_name = the_branch_form_name;\n\n\t\t\t//reset branch arrays\n\t\t\tbranch_inputs.length = 0;\n\t\t\tbranch_input_options_ids.length = 0;\n\t\t\tbranch_input_options.length = 0;\n\n\t\t\t//if the project is using a circular network, get all other keys for the specified form. It can be done async (or use a deferred object: todo)\n\t\t\t$.when(EC.Select.getBranchEntryKeys(branch_form_name, project_id)).then(function(branch_entry_keys) {\n\n\t\t\t\tvar cached_keys;\n\t\t\t\tvar form_level_keys;\n\n\t\t\t\t//merge keys with those already in localStorage (if we are using circular network and form level key uniqueness) avoiding duplicates\n\t\t\t\ttry {\n\t\t\t\t\tcached_keys = JSON.parse(window.localStorage.branch_primary_keys);\n\t\t\t\t} catch(error) {\n\t\t\t\t\tcached_keys = [];\n\t\t\t\t}\n\t\t\t\tform_level_keys = cached_keys.concat(branch_entry_keys).unique();\n\t\t\t\twindow.localStorage.branch_primary_keys = JSON.stringify(form_level_keys);\n\n\t\t\t\tEC.db.transaction(_getBranchInputsTX, EC.Select.errorCB, _getBranchInputsSuccessCB);\n\n\t\t\t});\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar mapped_branch_inputs;\n\t\tvar deferred;\n\n\t\tvar _getBranchInputsLocalIDsTX = function(tx) {\n\n\t\t\tvar query = \"SELECT ec_branch_inputs._id, ec_branch_inputs.ref FROM ec_branch_inputs JOIN ec_branch_forms ON ec_branch_forms._id=ec_branch_inputs.form_id WHERE ec_branch_forms.project_id=?\";\n\n\t\t\ttx.executeSql(query, [project_id], _getBranchInputsLocalIDsSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar _getBranchInputsLocalIDsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//map form names against _id\n\t\t\t\tmapped_branch_inputs.push({\n\t\t\t\t\t_id : the_result.rows.item(i)._id,\n\t\t\t\t\tref : the_result.rows.item(i).ref\n\t\t\t\t});\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getBranchInputsLocalIDsSuccessCB = function() {\n\n\t\t\t//return mappped branch forms\n\t\t\tdeferred.resolve(mapped_branch_inputs);\n\n\t\t};\n\n\t\tmodule.getBranchInputsLocalIDs = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\n\t\t\tdeferred = new $.Deferred();\n\t\t\tmapped_branch_inputs = [];\n\n\t\t\tEC.db.transaction(_getBranchInputsLocalIDsTX, EC.Select.errorCB, _getBranchInputsLocalIDsSuccessCB);\n\n\t\t\t// return promise\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid: true*/\n/*global $, jQuery*/\n\n/* @module getBranchSyncedFiles\n * Get all the synced branch files linked to all the synced entries for a form\n *\n * @param {Array} the_hierarchy_entry_keys contains all the entry keys for synced\n * entries of a form\n */\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar hierarchy_entry_keys;\n\t\tvar deferred;\n\t\tvar files;\n\n\t\tvar _getBranchSyncedFilesSuccessCB = function() {\n\t\t\tdeferred.resolve(files);\n\t\t};\n\n\t\tvar _getBranchSyncedFilesSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tfiles.push(the_result.rows.item(i));\n\t\t\t}\n\t\t};\n\n\t\tvar _getBranchSyncedFilesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = hierarchy_entry_keys.length;\n\t\t\tvar query = 'SELECT value, type from ec_branch_data WHERE hierarchy_entry_key_value=? AND is_data_synced=? AND is_media_synced=? AND (type=? OR type=? OR type=?) AND value <>?';\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t//get file names and types\n\t\t\t\ttx.executeSql(query, [hierarchy_entry_keys[i], 1, 1, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO, \"\"], _getBranchSyncedFilesSQLSuccessCB, self.errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tmodule.getBranchSyncedFiles = function(the_hierarchy_entry_keys) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\thierarchy_entry_keys = the_hierarchy_entry_keys;\n\t\t\tfiles = [];\n\n\t\t\tEC.db.transaction(_getBranchSyncedFilesTX, self.errorCB, _getBranchSyncedFilesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar form_id;\n\t\tvar parents = [];\n\t\tvar parent_counter = 0;\n\t\tvar children_counter = 0;\n\t\tvar children_offset;\n\t\tvar nested_children_counter = 0;\n\t\tvar offset = 0;\n\t\tvar prev_parent_children;\n\t\tvar parent_offset;\n\t\tvar form_total_inputs;\n\t\tvar parent_form_total_entries;\n\t\tvar form_total_entries;\n\t\tvar is_loading_more;\n\t\tvar query_limit;\n\t\tvar self;\n\t\tvar new_request;\n\n\t\tvar _getChildEntriesParentsTX = function(tx) {\n\n\t\t\t//get all the parents one at a time\n\t\t\tvar query = \"\";\n\t\t\tquery += 'SELECT DISTINCT parent FROM ec_data WHERE form_id=? ORDER BY parent ';\n\t\t\tquery += 'LIMIT ' + 1 + ' ';\n\t\t\tquery += 'OFFSET ' + (parent_offset);\n\n\t\t\ttx.executeSql(query, [form_id], _getChildEntriesParentsSQLSuccess, EC.Select.errorCB);\n\t\t};\n\n\t\tvar _getChildEntriesParentsSuccessCB = function(the_tx) {\n\n\t\t};\n\n\t\tvar _getChildEntriesParentsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\t\t\tvar parent;\n\n\t\t\t//if we have a parent to get children for\n\t\t\tif (iLength > 0) {\n\t\t\t\tparent = the_result.rows.item(0).parent;\n\t\t\t\tparents.push(the_result.rows.item(0));\n\n\t\t\t\t//get children per each parent\n\t\t\t\tEC.db.transaction(_getAllChildrenTX, EC.Select.errorCB, _getAllChildrenSuccessCB);\n\t\t\t} else {\n\n\t\t\t\t//no more parents found, display entries\n\t\t\t\tif (new_request) {\n\n\t\t\t\t\tEC.Entries.appendMoreChildEntries(parents);\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//are we loading more children? (user tapped \"show more\")\n\t\t\t\t\tif (is_loading_more) {\n\t\t\t\t\t\tEC.Entries.appendMoreChildEntries(parents);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//render children on screen\n\t\t\t\t\t\tEC.Entries.renderChildEntriesList(parents);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getAllChildrenTX = function(tx) {\n\n\t\t\t//select all entries aside from the one skipped (by jumps)\n\t\t\tvar parent = parents[parent_counter].parent;\n\t\t\tvar query = 'SELECT form_id, parent, label, value,  entry_key, is_title, type FROM ec_data WHERE parent=? AND value<>?';\n\n\t\t\t//if new_request is true, we need to request the maximum number of children according to the pagination settings\n\t\t\tif (new_request) {\n\t\t\t\tquery += 'LIMIT ' + ((window.localStorage.QUERY_LIMIT) * form_total_inputs) + ' ';\n\t\t\t\tnew_request = false;\n\n\t\t\t} else {\n\n\t\t\t\t//new_request is false, so is it not a user request but recursion. Since we have got children from a previous parent, we need to request less entries\n\t\t\t\tquery += 'LIMIT ' + ((window.localStorage.QUERY_LIMIT - prev_parent_children) * form_total_inputs) + ' ';\n\n\t\t\t}\n\n\t\t\t//if children offset is 0, request children starting from first row\n\t\t\tif (children_offset === 0) {\n\t\t\t\tquery += 'OFFSET 0';\n\t\t\t} else {\n\n\t\t\t\t//we have an offset, so load all the children AFTER the offset.\n\t\t\t\t//If we have any previous children already loaded, the offset needs to be exactly that, usually less then the pagination.\n\t\t\t\t//That happen when we loaded children for more parents, so we loaded less then the pagination limit for the last parent children\n\t\t\t\tif (prev_parent_children === 0) {\n\t\t\t\t\tquery += 'OFFSET ' + children_offset * form_total_inputs;\n\t\t\t\t} else {\n\t\t\t\t\tquery += 'OFFSET ' + prev_parent_children * form_total_inputs;\n\t\t\t\t\tprev_parent_children = 0;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttx.executeSql(query, [parent, EC.Const.SKIPPED], _getAllChildrenSQLSuccessCB, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar _getAllChildrenSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\t\t\tvar child_full_title = \"\";\n\n\t\t\t//check if we have any entries\n\t\t\tif (iLength > 0) {\n\n\t\t\t\t//get first row and entry key\n\t\t\t\tvar row = the_result.rows.item(0);\n\t\t\t\tvar entry_key = row.entry_key;\n\n\t\t\t\t//build title (avoiding empty fields so we do not end up with \"my_title, , , , ,\")\n\t\t\t\tif (row.is_title === 1 && row.value !== \"\") {\n\t\t\t\t\tchild_full_title += (child_full_title === \"\") ? row.value : ', ' + row.value;\n\t\t\t\t}\n\n\t\t\t\tparents[parent_counter].children = [];\n\t\t\t\tchildren_counter = 0;\n\n\t\t\t\t//loop all the other rows past the first one\n\t\t\t\tfor ( i = 1; i < iLength; i++) {\n\n\t\t\t\t\trow = the_result.rows.item(i);\n\n\t\t\t\t\t//if entry key is matching, build title only\n\t\t\t\t\tif (row.entry_key === entry_key) {\n\n\t\t\t\t\t\t//build title (avoiding empty fields so we do not end up with \"my_title, , , , ,\")\n\t\t\t\t\t\tif (row.is_title === 1 && row.value !== \"\") {\n\t\t\t\t\t\t\tchild_full_title += (child_full_title === \"\") ? row.value : ', ' + row.value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//different entry key i.e another entry\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//if no title yet, default to value of primary key\n\t\t\t\t\t\tif (child_full_title === \"\") {\n\t\t\t\t\t\t\tchild_full_title = entry_key;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add child\n\t\t\t\t\t\tparents[parent_counter].children[children_counter] = {\n\t\t\t\t\t\t\tfull_title : child_full_title,\n\t\t\t\t\t\t\tentry_key : entry_key\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tentry_key = row.entry_key;\n\t\t\t\t\t\tchildren_counter++;\n\t\t\t\t\t\tchild_full_title = \"\";\n\n\t\t\t\t\t\t//reset title\n\t\t\t\t\t\tif (row.is_title === 1 && row.value !== \"\") {\n\t\t\t\t\t\t\tchild_full_title += (child_full_title === \"\") ? row.value : ', ' + row.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//if after looping all the rows title is still empty, default to value of the primary key\n\t\t\t\tif (child_full_title === \"\") {\n\t\t\t\t\tchild_full_title = entry_key;\n\t\t\t\t}\n\n\t\t\t\t//add child\n\t\t\t\tparents[parent_counter].children[children_counter] = {\n\t\t\t\t\tfull_title : child_full_title,\n\t\t\t\t\tentry_key : entry_key\n\t\t\t\t};\n\n\t\t\t\tchild_full_title = \"\";\n\n\t\t\t}\n\t\t};\n\n\t\t/*\n\t\t * All children fetched correctly, get nested children count\n\t\t */\n\t\tvar _getAllChildrenSuccessCB = function() {\n\n\t\t\tvar i;\n\t\t\tvar iLength = parents.length;\n\n\t\t\tEC.db.transaction(_getNestedChildrenCountTX, EC.Select.errorCB, _getNestedChildrenCountSuccessCB);\n\t\t};\n\n\t\tvar _getNestedChildrenCountSuccessCB = function() {\n\n\t\t\tvar query_limit = window.localStorage.QUERY_LIMIT;\n\n\t\t\tnested_children_counter = 0;\n\t\t\tchildren_counter = 0;\n\n\t\t\t//are we loading more for the same parent? (user tapped \"Show More\" button)\n\t\t\tif (is_loading_more) {\n\n\t\t\t\t//if the total of children for the current parent is less then the items per page settings, get the next parent and its children\n\t\t\t\tif (parents[parent_counter].children.length < (query_limit - prev_parent_children)) {\n\n\t\t\t\t\t//update counters before getting new parent\n\t\t\t\t\tprev_parent_children = parents[parent_counter].children.length;\n\t\t\t\t\tparent_counter++;\n\t\t\t\t\tparent_offset++;\n\t\t\t\t\tchildren_offset = 0;\n\n\t\t\t\t\t//get next parent first\n\t\t\t\t\tEC.db.transaction(_getChildEntriesParentsTX, EC.Select.errorCB, _getChildEntriesParentsSuccessCB);\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//cache the last parent children total\n\t\t\t\t\tprev_parent_children = parents[parent_counter].children.length;\n\n\t\t\t\t\t//append children to list\n\t\t\t\t\tEC.Entries.appendMoreChildEntries(parents);\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar j;\n\t\t\t\tvar jLength = parents.length;\n\t\t\t\tvar total_children_loaded = 0;\n\n\t\t\t\t//calculate total of children loaded recursively for each parent\n\t\t\t\tfor ( j = 0; j < jLength; j++) {\n\t\t\t\t\ttotal_children_loaded += parents[j].children.length;\n\t\t\t\t}\n\n\t\t\t\t//it the total of children is less then the pagination limit, get next parent and its children\n\t\t\t\tif (total_children_loaded < query_limit) {\n\n\t\t\t\t\t//get next parent and its children\n\t\t\t\t\tself.getNextParentChildEntries(total_children_loaded);\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//cache last parent total of children\n\t\t\t\t\tprev_parent_children = parents[parent_counter].children.length;\n\n\t\t\t\t\t//render list of children\n\t\t\t\t\tEC.Entries.renderChildEntriesList(parents);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar _getNestedChildrenCountTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = parents[parent_counter].children.length;\n\t\t\tvar query;\n\t\t\tvar parent_path;\n\t\t\tvar form_tree = EC.Utils.getParentAndChildForms(form_id);\n\t\t\tvar child_form_id = form_tree.child;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//build root path (parent|entry_key)\n\t\t\t\tparent_path = parents[parent_counter].parent + EC.Const.ENTRY_ROOT_PATH_SEPARATOR + parents[parent_counter].children[i].entry_key;\n\n\t\t\t\tquery = 'SELECT entry_key FROM ec_data WHERE parent=? AND form_id=? GROUP BY entry_key';\n\n\t\t\t\ttx.executeSql(query, [parent_path, child_form_id], _getNestedChildrenCountSQLSuccessCB, EC.Select.errorCB);\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getNestedChildrenCountSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\t//store total of nested children\n\t\t\tparents[parent_counter].children[nested_children_counter].nested_children_count = the_result.rows.length;\n\t\t\tnested_children_counter++;\n\n\t\t};\n\n\t\tmodule.getChildEntries = function(the_child_form_id, the_parent_offset, the_children_offset) {\n\n\t\t\tform_id = the_child_form_id;\n\t\t\tparent_offset = the_parent_offset;\n\t\t\tchildren_offset = the_children_offset;\n\t\t\tform_total_entries = EC.Utils.getFormByID(form_id).entries;\n\t\t\tform_total_inputs = EC.Utils.getFormByID(form_id).total_inputs;\n\t\t\tparent_form_total_entries = 0;\n\t\t\tis_loading_more = false;\n\t\t\tprev_parent_children = 0;\n\t\t\tparents.length = 0;\n\t\t\tparent_counter = 0;\n\t\t\tself = this;\n\n\t\t\t//get all parents first\n\t\t\tEC.db.transaction(_getChildEntriesParentsTX, EC.Select.errorCB, _getChildEntriesParentsSuccessCB);\n\n\t\t};\n\n\t\tmodule.getNextParentChildEntries = function(the_total_of_children_loaded) {\n\n\t\t\t//get total of children already loaded\n\t\t\tprev_parent_children = the_total_of_children_loaded;\n\n\t\t\t//increase parent counter\n\t\t\tparent_offset++;\n\t\t\tparent_counter++;\n\n\t\t\t//get all parents first\n\t\t\tEC.db.transaction(_getChildEntriesParentsTX, EC.Select.errorCB, _getChildEntriesParentsSuccessCB);\n\n\t\t};\n\n\t\tmodule.getMoreChildEntries = function(the_child_form_id, the_children_offset) {\n\n\t\t\tform_id = the_child_form_id;\n\t\t\tchildren_offset = the_children_offset;\n\t\t\tis_loading_more = true;\n\t\t\tquery_limit = window.localStorage.QUERY_LIMIT;\n\n\t\t\t//set a flag so we know we are dealing with a new user request aaction (tapping \"show more\" on the entries list)\n\t\t\tnew_request = true;\n\n\t\t\t//save last parent and set it as first elements of parents aray.\n\t\t\t//When tapping for more entries, we need to fetch for the last parent first\n\t\t\tvar last_parent = parents[parents.length - 1];\n\t\t\tparents.length = 0;\n\t\t\tparents.push(last_parent);\n\n\t\t\t//reset children count to 0, as we need to remove previous children already listed in the DOM\n\t\t\tparents[0].children.length = 0;\n\n\t\t\tparent_counter = 0;\n\n\t\t\tconsole.log(parents);\n\n\t\t\t//get more entries for the same parent\n\t\t\tEC.db.transaction(_getAllChildrenTX, EC.Select.errorCB, _getAllChildrenSuccessCB);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\n/*\n * Select  all the entries we are going to delete and cache them\n *\n * We need the total amount of entries deleted to update the entries counter per\n * each form, also we need to delete any children based on the entry key of the\n * selected entry\n */\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar parent_key;\n\t\tvar child_entries;\n\t\tvar child_counters;\n\t\tvar parent_entries;\n\n\t\tvar _getChildEntriesForDeletionSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\t\t\t\n\t\t\t//get all child entries\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tchild_entries.push(the_result.rows.item(i));\n\t\t\t}\n\t\t\t\n\t\t\t//get totalt of entries deleted from a specific form\n\t\t\tif (iLength > 0) {\n\t\t\t\tchild_counters = {\n\t\t\t\t\tform_id : child_entries[0].form_id,\n\t\t\t\t\tamount : child_entries.length\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tvar _getChildEntriesForDeletionTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = parent_entries.length;\n\t\t\tvar query = \"SELECT form_id, parent, entry_key, COUNT(*) as count FROM ec_data WHERE parent=? GROUP BY entry_key\";\n\n\t\t\t//We will loop using all the 'parent' values as we might have more than one child\n\t\t\t// to delete\n\n\t\t\t/* per each entry, get parent key building up full path to the root\n\t\t\t * like <parent_key>|<child_key> etc.\n\t\t\t * parent key is \"\" when the entry is a top level entry (top level form), because\n\t\t\t * it cannot have any parent\n\t\t\t */\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tif (parent_entries[i].parent === \"\") {\n\t\t\t\t\tparent_key = parent_entries[i].entry_key;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tparent_key = parent_entries[i].parent + EC.Const.ENTRY_ROOT_PATH_SEPARATOR + parent_entries[i].entry_key;\n\t\t\t\t}\n\n\t\t\t\ttx.executeSql(query, [parent_key], _getChildEntriesForDeletionSQLSuccessCB, self.errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getChildEntriesForDeletionSuccessCB = function() {\n\t\t\tdeferred.resolve(child_entries, child_counters);\n\t\t};\n\n\t\tmodule.getChildEntriesForDeletion = function() {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tparent_entries = EC.Delete.deletion_entries;\n\t\t\tchild_entries = [];\n\t\t\tchild_counters = {};\n\n\t\t\tEC.db.transaction(_getChildEntriesForDeletionTX, self.errorCB, _getChildEntriesForDeletionSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar entries = [];\n\t\tvar input;\n\t\tvar form_id;\n\t\tvar branch_form_name;\n\t\tvar entry_key;\n\t\tvar count;\n\t\tvar deferred;\n\t\tvar hierarchy_key_value;\n\t\tvar project_id;\n\n\t\t/*\n\t\t * Get all entries for a form and group them by entry_key:\n\t\t * a form have multiple entries, one per each input, and they all have the same entry_key value)\n\t\t */\n\t\tvar _getCountBranchEntriesTX = function(tx) {\n\n\t\t\tvar query;\n\n\t\t\tquery = 'SELECT COUNT(DISTINCT entry_key) as count FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE name=? AND project_id=?) AND hierarchy_entry_key_value=?';\n\n\t\t\ttx.executeSql(query, [branch_form_name, project_id, hierarchy_key_value], _getBranchEntriesSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar _getBranchEntriesSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tif (the_result.rows.length > 0) {\n\t\t\t\tcount = (the_result.rows.item(0).count);\n\t\t\t} else {\n\t\t\t\tcount = 0;\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getCountBranchEntriesSuccessCB = function() {\n\n\t\t\t//resolve deferred returning total of entries\n\t\t\tdeferred.resolve(count, input);\n\n\t\t};\n\n\t\tmodule.getCountBranchEntries = function(the_input, the_hierarchy_key_value, the_project_id) {\n\n\t\t\tinput = the_input;\n\t\t\tbranch_form_name = the_input.branch_form_name;\n\t\t\thierarchy_key_value = the_hierarchy_key_value;\n\t\t\tproject_id = the_project_id;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getCountBranchEntriesTX, EC.Select.errorCB, _getCountBranchEntriesSuccessCB);\n\n\t\t\t// return promise\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar entries = [];\n\t\tvar form_id;\n\t\tvar parent;\n\t\tvar titles = [];\n\t\tvar full_titles = [];\n\t\tvar primary_keys = [];\n\t\tvar child_counter = 0;\n\t\tvar entry_key;\n\t\tvar offset;\n\t\tvar deferred;\n\n\t\tvar _getEntriesSuccessCB = function() {\n\n\t\t\t/*\n\t\t\t * store primary key values for current form\n\t\t\t * it is not possible to have duplicates for the primary key input field within the same form level\n\t\t\t * (using circular data structure)\n\t\t\t */\n\t\t\tvar i;\n\t\t\tvar iLength = entries.length;\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tprimary_keys.push(entries[i].entry_key);\n\t\t\t}\n\n\t\t\twindow.localStorage.primary_keys = JSON.stringify(primary_keys);\n\t\t\tprimary_keys.length = 0;\n\n\t\t\t/*\n\t\t\t * Using each entry, select all the fields for that entry with 'is_title' = true\n\t\t\t * This will build the full title to be displayed per each itme in the listview\n\t\t\t * if no inputs are set as title, default to the value of the primary key\n\t\t\t */\n\n\t\t\tEC.db.transaction(_getEntriesTitlesTX, EC.Select.errorCB, _getEntriesTitlesSuccessCB);\n\n\t\t\t/*\n\t\t\t * Using each entry, count how many child entry there are per each entry\n\t\t\t * The counts will be displayed on the list of entries\n\t\t\t */\n\n\t\t\tconsole.log(EC.Const.TRANSACTION_SUCCESS);\n\n\t\t};\n\n\t\tvar _getEntriesTitlesSuccessCB = function() {\n\n\t\t\t//Build the titles concatenating all the title fields found per each entry\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar iLength = entries.length;\n\t\t\tvar jLength = titles.length;\n\t\t\tvar full_title;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tfull_title = \"\";\n\n\t\t\t\tfor ( j = 0; j < jLength; j++) {\n\n\t\t\t\t\tif (entries[i].entry_key === titles[j].entry_key) {\n\t\t\t\t\t\tfull_title += (full_title === \"\") ? titles[j].value : \", \" + titles[j].value;\n\t\t\t\t\t}\n\n\t\t\t\t}//for titles\n\n\t\t\t\tfull_titles.push({\n\t\t\t\t\tfull_title : full_title,\n\t\t\t\t\tentry_key : entries[i].entry_key\n\t\t\t\t});\n\n\t\t\t}//for entries\n\n\t\t\t// console.log(\"full_titles\");\n\t\t\t// console.log(full_titles);\n\n\t\t\t//get the count of child entries (if any)\n\t\t\t_getChildrenCount();\n\n\t\t};\n\n\t\t/*\n\t\t * Get all entries for a form and group them by entry_key:\n\t\t *\n\t\t * a form have multiple entries, one per each input, and they all have the same entry_key value)\n\t\t */\n\t\tvar _getEntriesTX = function(tx) {\n\t\t\t\n\t\t\t\n\t\t\t//TODO: fix ordering of entries\n\t\t\tvar query = 'SELECT _id, entry_key, parent FROM ec_data WHERE form_id=? AND parent=? GROUP BY entry_key ORDER BY _id LIMIT ' + window.localStorage.QUERY_LIMIT + \" OFFSET \" + offset;\n\n\t\t\ttx.executeSql(query, [form_id, parent], _getEntriesSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar _getEntriesSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with entries\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tentries.push(the_result.rows.item(i));\n\n\t\t\t}\n\n\t\t\tconsole.log(entries, true);\n\n\t\t};\n\n\t\tvar _getEntriesTitlesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = entries.length;\n\t\t\tvar query;\n\n\t\t\t//select all the rows to build the title (aside from skipped values as in the case of jumps)\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\t\t\t\tquery = 'SELECT _id, value, entry_key FROM ec_data WHERE form_id=? AND is_title=? AND entry_key=? AND parent=? AND value<>?';\n\t\t\t\ttx.executeSql(query, [form_id, 1, entries[i].entry_key, entries[i].parent, EC.Const.SKIPPED], _getEntriesTitlesSQLSuccess, EC.Select.errorCB);\n\t\t\t}//for\n\n\t\t};\n\n\t\tvar _getEntriesTitlesSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with project data\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\ttitles.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t};\n\n\t\tfunction _getChildrenCountTX(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = entries.length;\n\t\t\tvar parent;\n\t\t\tvar parent_path;\n\t\t\tvar breadcrumb_trail;\n\t\t\tvar query;\n\n\t\t\t//get breadcrumbs to convert to parent path\n\t\t\tbreadcrumb_trail = JSON.parse(window.localStorage.breadcrumbs);\n\t\t\tparent_path = (breadcrumb_trail[0] === \"\") ? breadcrumb_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR).substring(1) : breadcrumb_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tparent = (parent_path === \"\") ? entries[i].entry_key : parent_path + EC.Const.ENTRY_ROOT_PATH_SEPARATOR + entries[i].entry_key;\n\n\t\t\t\tquery = 'SELECT parent FROM ec_data WHERE parent=? GROUP BY entry_key';\n\n\t\t\t\t// console.log(query);\n\n\t\t\t\ttx.executeSql(query, [parent], _getChildrenCountSQLSuccessCB, EC.Select.errorCB);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction _getChildrenCountSuccessCB() {\n\n\t\t\t//offset is 0 resolve to entries list\n\t\t\tif (offset === 0) {\n\t\t\t\tdeferred.resolve(full_titles.slice(0));\n\t\t\t} else {\n\t\t\t\t//if offset is not 0, we are loading more entries to be appended to the entries list\n\t\t\t\tEC.Entries.appendMoreEntries(full_titles.slice(0));\n\t\t\t}\n\n\t\t\t//clear all arrays\n\t\t\tfull_titles.length = 0;\n\t\t\ttitles.length = 0;\n\t\t\tentries.length = 0;\n\t\t\tchild_counter = 0;\n\n\t\t\tconsole.log(EC.Const.TRANSACTION_SUCCESS);\n\n\t\t}\n\n\t\tfunction _getChildrenCountSQLSuccessCB(the_tx, the_result) {\n\n\t\t\t//Add total of children to its parent\n\t\t\tfull_titles[child_counter].children = the_result.rows.length;\n\n\t\t\tchild_counter++;\n\n\t\t}\n\n\t\t// Get the children for a parent form\n\t\tvar _getChildrenCount = function() {\n\n\t\t\tif (entries.length > 0) {\n\n\t\t\t\t//get the count of children per each parent\n\t\t\t\tEC.db.transaction(_getChildrenCountTX, EC.Select.errorCB, _getChildrenCountSuccessCB);\n\n\t\t\t} else {\n\n\t\t\t\t//no child entries to fetch yet, render list of entries directly\n\t\t\t\t//Call Entries controller to render entries list (if offset is 0)\n\t\t\t\tif (offset === 0) {\n\t\t\t\t\tEC.Entries.renderList(full_titles.slice(0));\n\t\t\t\t} else {\n\t\t\t\t\t//if offset is not 0, we are loading more entries to be appended to the entries list\n\t\t\t\t\tEC.Entries.appendMoreEntries(full_titles.slice(0));\n\t\t\t\t}\n\n\t\t\t\t//clear all arrays\n\t\t\t\tfull_titles.length = 0;\n\t\t\t\ttitles.length = 0;\n\t\t\t\tentries.length = 0;\n\t\t\t\tchild_counter = 0;\n\n\t\t\t\tconsole.log(EC.Const.TRANSACTION_SUCCESS);\n\n\t\t\t}\n\n\t\t};\n\n\t\tmodule.getEntries = function(the_form_id, the_parent_key, the_offset) {\n\n\t\t\tform_id = the_form_id;\n\t\t\tparent = the_parent_key;\n\t\t\toffset = the_offset;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getEntriesTX, EC.Select.errorCB, _getEntriesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\n/*\n * Get all the entry keys for a single form, using form ID\n *\n * We use DISTICT to have a single occurrence of the netry key, as all the rows\n * belonging to a form entry can have the same\n */\n\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form_id;\n\t\tvar entry_key;\n\t\tvar entry_keys;\n\t\tvar deferred;\n\n\t\tvar _getEntryKeys = function(tx) {\n\n\t\t\t//get all entry key for the specified form\n\t\t\tvar query = 'SELECT DISTINCT entry_key FROM ec_data WHERE form_id=?';\n\n\t\t\ttx.executeSql(query, [form_id], _getEntryKeysSQLSuccess, self.errorCB);\n\t\t};\n\n\t\tvar _getEntryKeysSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\t//build object with entry keys\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tentry_keys.push(the_result.rows.item(i).entry_key);\n\t\t\t}\n\t\t};\n\n\t\tvar _getEntryKeysSuccessCB = function() {\n\t\t\tdeferred.resolve(entry_keys);\n\t\t};\n\n\t\t//get all entry keys for the specified form\n\t\tmodule.getEntryKeys = function(the_form_id) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tform_id = the_form_id;\n\t\t\tentry_keys = [];\n\t\t\tEC.db.transaction(_getEntryKeys, self.errorCB, _getEntryKeysSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar form_id;\n\t\tvar entry_key;\n\t\tvar parent_path;\n\t\tvar values = [];\n\t\tvar branches = [];\n\t\tvar deferred;\n\n\t\tvar _getEntryValues = function(tx) {\n\n\t\t\t//get all entry values\n\t\t\tvar query = 'SELECT * FROM ec_data WHERE form_id=? AND entry_key=? AND parent=? ORDER BY position';\n\n\t\t\ttx.executeSql(query, [form_id, entry_key, parent_path], _getEntryValuesSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\t\t//_getEntryValues\n\n\t\tvar _getEntryValuesSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar index;\n\t\t\tvar iLenght = the_result.rows.length;\n\t\t\tvar input_id = \"\";\n\t\t\tvar current_input_id;\n\t\t\tvar prev_value = [];\n\t\t\tvar prev_obj;\n\t\t\tvar new_obj;\n\t\t\tvar new_object = {};\n\t\t\tvar string;\n\n\t\t\t//build object with entry values\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\n\t\t\t\tcurrent_input_id = the_result.rows.item(i).input_id;\n\n\t\t\t\tvalues.push(the_result.rows.item(i));\n\n\t\t\t\t//keep track of branches, if any\n\t\t\t\tif (the_result.rows.item(i).type === EC.Const.BRANCH) {\n\t\t\t\t\tbranches.push(the_result.rows.item(i));\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(\"TRANSACTION SELECT ENTRY VALUES SUCCESS\");\n\n\t\t};\n\t\t//_getEntryValuesSQLSuccess\n\n\t\tvar _getEntryValuesSuccessCB = function(the_tx) {\n\n\t\t\t\n\t\t\t\n\t\t\tdeferred.resolve(values.slice(0));\n\n\t\t\t//clear values array\n\t\t\tvalues.length = 0;\n\t\t\tconsole.log(EC.Const.TRANSACTION_SUCCESS);\n\t\t};\n\n\t\tmodule.getEntryValues = function(the_form_id, the_entry_key, the_parent_path) {\n\n\t\t\tform_id = the_form_id;\n\t\t\tentry_key = the_entry_key;\n\t\t\tparent_path = the_parent_path;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getEntryValues, EC.Select.errorCB, _getEntryValuesSuccessCB);\n\t\t\t\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar forms;\n\t\tvar project_id;\n\t\tvar has_branches;\n\t\tvar total_synced_rows;\n\t\tvar total_entries_rows;\n\t\tvar total_media_files;\n\t\tvar total_branch_media_files;\n\t\tvar total_all_synced_rows;\n\t\tvar button_states = {};\n\t\tvar deferred;\n\n\t\t//callback for a forms select transaction success\n\t\tvar _getFormsSuccessCB = function() {\n\n\t\t\t//get info about this project data to enable/ disable context menu buttons\n\t\t\ttotal_synced_rows = 0;\n\t\t\ttotal_entries_rows = 0;\n\t\t\ttotal_media_files = 0;\n\t\t\ttotal_all_synced_rows = 0;\n\t\t\ttotal_branch_media_files = 0;\n\t\t\thas_branches = EC.Utils.projectHasBranches();\n\t\t\tEC.db.transaction(_getDataInfoTX, EC.Select.errorCB, _getDataInfoSuccessCB);\n\n\t\t};\n\n\t\tvar _getDataInfoTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar has_data_synced_query = 'SELECT COUNT(*) AS total_synced_rows FROM ec_data WHERE form_id=? AND is_data_synced=?';\n\t\t\tvar has_entries_query = 'SELECT COUNT(*) AS total_entries_rows FROM ec_data WHERE form_id=?';\n\t\t\tvar has_media_query = 'SELECT COUNT(*) AS total_media_files FROM ec_data WHERE form_id=? AND (type=? OR type=? OR type=?) AND value<>?';\n\n\t\t\t/* all synced: is_data_synced must be 1, there are some edge case where\n\t\t\t * is_media_synced must be 1 before deleting, or the entry is of type media but\n\t\t\t * no file has been saved\n\t\t\t * \n\t\t\t * To simplify things, we enable the button when at least one row has is_data_synced=1 and we handle edge cases upon deletion (see EC.Select.getSyncedEntryKeys())\n\t\t\t */\n\t\t\tvar has_all_synced_query = 'SELECT COUNT(*) AS total_all_synced_rows FROM ec_data WHERE form_id=? AND is_data_synced=?';\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\ttx.executeSql(has_data_synced_query, [forms[i]._id, 1], _onDataSyncedSQLSuccess, EC.Select.errorCB);\n\t\t\t\ttx.executeSql(has_entries_query, [forms[i]._id], _onHasEntriesSQLSuccess, EC.Select.errorCB);\n\t\t\t\ttx.executeSql(has_media_query, [forms[i]._id, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO, \"\"], _onHasMediaSQLSuccess, EC.Select.errorCB);\n\t\t\t\ttx.executeSql(has_all_synced_query, [forms[i]._id, 1], _onHasAllSyncedSQLSuccess, EC.Select.errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _onDataSyncedSQLSuccess = function(the_tx, the_result) {\n\t\t\ttotal_synced_rows += parseInt(the_result.rows.item(0).total_synced_rows, 10);\n\t\t};\n\n\t\tvar _onHasEntriesSQLSuccess = function(the_tx, the_result) {\n\t\t\ttotal_entries_rows += parseInt(the_result.rows.item(0).total_entries_rows, 10);\n\t\t};\n\n\t\tvar _onHasMediaSQLSuccess = function(the_tx, the_result) {\n\t\t\ttotal_media_files += parseInt(the_result.rows.item(0).total_media_files, 10);\n\t\t};\n\n\t\tvar _onHasAllSyncedSQLSuccess = function(the_tx, the_result) {\n\t\t\ttotal_all_synced_rows += parseInt(the_result.rows.item(0).total_all_synced_rows, 10);\n\t\t};\n\n\t\tvar _getDataInfoSuccessCB = function() {\n\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar branch_form_with_media_ids = [];\n\n\t\t\tconsole.log(\"Data info collected\");\n\n\t\t\tbutton_states.unsync_all_data = (total_synced_rows > 0) ? 1 : 0;\n\t\t\tbutton_states.delete_all_entries = (total_entries_rows > 0) ? 1 : 0;\n\t\t\tbutton_states.delete_media_files = (total_media_files > 0) ? 1 : 0;\n\t\t\tbutton_states.delete_synced_entries = (total_all_synced_rows > 0) ? 1 : 0;\n\n\t\t\t//any branches? check for media files then\n\t\t\tif (has_branches) {\n\n\t\t\t\t//get all branch forms\n\t\t\t\t$.when(EC.Select.getBranchForms(project_id)).then(function(the_branch_forms) {\n\n\t\t\t\t\t//look up for branch forms with media\n\t\t\t\t\tiLength = the_branch_forms.length;\n\t\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\t\tif (parseInt(the_branch_forms[i].has_media, 10) === 1) {\n\t\t\t\t\t\t\tbranch_form_with_media_ids.push(the_branch_forms[i]._id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//look up if there is at least 1 branch media file\n\t\t\t\t\tif (branch_form_with_media_ids.length > 0) {\n\n\t\t\t\t\t\t$.when(EC.Select.hasBranchMediaFiles(branch_form_with_media_ids)).then(function(is_media_found) {\n\t\t\t\t\t\t\tbutton_states.delete_media_files = (is_media_found) ? 1 : 0;\n\t\t\t\t\t\t\tdeferred.resolve(forms.slice(0), button_states);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdeferred.resolve(forms.slice(0), button_states);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdeferred.resolve(forms.slice(0), button_states);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getFormsTX = function(tx) {\n\n\t\t\tvar query = 'SELECT _id, name, key, num, has_media, has_branches, is_genkey_hidden, total_inputs, entries FROM ec_forms WHERE project_id=?';\n\t\t\ttx.executeSql(query, [project_id], _getFormsSQLSuccess, EC.Select.errorCB);\n\t\t};\n\n\t\tvar _getFormsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with project data\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\t\t\t\tforms.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(\"TRANSACTION SELECT FORMS SUCCESS\");\n\n\t\t};\n\n\t\tmodule.getForms = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tforms = [];\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getFormsTX, EC.Select.errorCB, _getFormsSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\t\t//getForms\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar parent_form_name;\n\t\tvar immediate_parent_key_value;\n\t\tvar full_parent_path;\n\t\tvar form_id;\n\t\tvar deferred;\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tvar _getFullParentPathSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//result will be null if no parent is found\n\t\t\tif (the_result.rows.item(0)) {\n\t\t\t\tfull_parent_path = (the_result.rows.item(0).parent);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getFullParentPathSuccessCB = function() {\n\n\t\t\t//if we have the parent entry for the current entry resolve otherwise reject the promise\n\t\t\tif (full_parent_path !== null) {\n\t\t\t\tdeferred.resolve(full_parent_path);\n\t\t\t} else {\n\t\t\t\tdeferred.reject();\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getFullParentPathTX = function(tx) {\n\n\t\t\t//a parent entry consists of multiple\n\t\t\tvar query = 'SELECT parent FROM ec_data WHERE form_id=? AND entry_key=? LIMIT 1';\n\t\t\ttx.executeSql(query, [form_id, immediate_parent_key_value], _getFullParentPathSQLSuccess, _errorCB);\n\n\t\t};\n\n\t\t/* The new hierarchy foreign key constraint feature a parent key like key|key|key...\n\t\t * therefore when downloading remote entries, we need to get the full parent path looking up the parent table on the device.\n\t\t * If no parent entry is found, the user will be prompted to download from the immediate parent table to keep the referential integrity in the database\n\t\t */\n\t\tmodule.getFullParentPath = function(the_form_id, the_immediate_parent_key_value) {\n\n\t\t\tform_id = the_form_id;\n\t\t\timmediate_parent_key_value = the_immediate_parent_key_value;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tfull_parent_path = null;\n\n\t\t\tEC.db.transaction(_getFullParentPathTX, _errorCB, _getFullParentPathSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n * Get all the media files for a single hierarchy entry passing form ID and entry\n * key\n */\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form;\n\t\tvar deferred;\n\t\tvar files;\n\t\tvar entries;\n\n\t\tvar _getHierarchyChildrenFilesSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tfiles.push(the_result.rows.item(i));\n\t\t\t}\n\t\t};\n\n\t\tvar _getHierarchyChildrenFilesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = entries.length;\n\t\t\tvar query = 'SELECT value, type from ec_data WHERE form_id=? AND entry_key=? AND (type=? OR type=? OR type=?) AND value <>?';\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t//get all file names and types\n\t\t\t\ttx.executeSql(query, [form._id, entries[i].entry_key, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO, \"\"], _getHierarchyChildrenFilesSQLSuccessCB, self.errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getHierarchyChildrenFilesSuccessCB = function() {\n\n\t\t\tconsole.log(\"Hierarchy files: ****************************************\");\n\t\t\tconsole.log(\"files:\" + JSON.stringify(files));\n\n\t\t\tdeferred.resolve(files);\n\t\t};\n\n\t\tmodule.getHierarchyChildrenFiles = function(the_form) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tform = the_form;\n\t\t\tfiles = [];\n\t\t\tentries = EC.Delete.deletion_entries;\n\n\t\t\tEC.db.transaction(_getHierarchyChildrenFilesTX, self.errorCB, _getHierarchyChildrenFilesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\n/*\n * @method getHierarchyEntriesForDeletion\n *\n * Select and count the rows we are going to delete to be able to update the\n * entries counters later, the ones we use to show the entries total per each form\n * on the form list page\n * This is mainly done for performance reason, as querying COUNT per each form\n * each time the form list view is called was a bit heavy\n * Doing this way we have a column \"entries_total\" per each form and we keep that\n * value updated accordingly\n *\n * This method also caches details about the entries we are going to delete later,\n * this is mainly to have a reference for any branches or media files  attached\n * to these entries which need to be deleted as well\n * \n * on resolve(), entries and counters objects are returned\n */\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar entry_key;\n\t\tvar entries;\n\t\tvar counters;\n\n\t\tvar _getHierarchyEntriesForDeletionSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\t//cache entries\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tentries.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t\t//update counters\n\t\t\tcounters.push({\n\t\t\t\tform_id : entries[0].form_id,\n\t\t\t\tamount : entries.length\n\t\t\t});\n\t\t};\n\n\t\tvar _getHierarchyEntriesForDeletionTX = function(tx) {\n\n\t\t\tvar query = \"SELECT form_id, parent, entry_key, COUNT(*) as count FROM ec_data WHERE entry_key=? GROUP BY form_id\";\n\n\t\t\ttx.executeSql(query, [entry_key], _getHierarchyEntriesForDeletionSQLSuccessCB, EC.Delete.errorCB);\n\t\t};\n\n\t\tvar _getHierarchyEntriesForDeletionSuccessCB = function() {\n\t\t\t\n\t\t\t//return entries details and counters\n\t\t\tdeferred.resolve(entries, counters);\n\t\t};\n\n\t\tmodule.getHierarchyEntriesForDeletion = function(the_entry_key) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tentry_key = the_entry_key;\n\t\t\tentries = [];\n\t\t\tcounters = [];\n\n\t\t\tEC.db.transaction(_getHierarchyEntriesForDeletionTX, EC.Delete.errorCB, _getHierarchyEntriesForDeletionSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n * Get all the media files for a single hierarchy entry passing form ID and entry key\n */\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form;\n\t\tvar deferred;\n\t\tvar files;\n\t\tvar entry_key;\n\t\t\n\t\tvar _selectHierarchyFilesSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tfiles.push(the_result.rows.item(i));\n\t\t\t}\n\t\t};\n\n\t\tvar _getHierarchyFilesTX = function(tx) {\n\n\t\t\tvar query = 'SELECT value, type from ec_data WHERE form_id=? AND entry_key=? AND (type=? OR type=? OR type=?) AND value <>?';\n\n\t\t\t//get all file names and types\n\t\t\ttx.executeSql(query, [form._id, entry_key, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO, \"\"], _selectHierarchyFilesSQLSuccessCB, self.errorCB);\n\t\t};\n\t\t\n\t\tvar _getHierarchyFilesSuccessCB = function(){\n\t\t\tdeferred.resolve(files);\n\t\t};\n\t\t\n\t\tmodule.getHierarchyFiles = function(the_form, the_entry_key) {\n\t\t\t\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tform = the_form;\n\t\t\tentry_key = the_entry_key;\n\t\t\tfiles =[];\n\n\t\t\tEC.db.transaction(_getHierarchyFilesTX, self.errorCB, _getHierarchyFilesSuccessCB);\n\t\t\t\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid: true*/\n/*global $, jQuery*/\n/*\n * Get all the synced media files for a hierarchy form\n * \n * files are synced when is_data_synced=? AND is_media_synced=? are both 1\n * \n */\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form_id;\n\t\tvar deferred;\n\t\tvar files;\n\n\t\tvar _getHierarchySyncedFilesSuccessCB = function() {\n\t\t\tdeferred.resolve(files);\n\t\t};\n\n\t\tvar _getHierarchySyncedFilesSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tfiles.push(the_result.rows.item(i));\n\t\t\t}\n\t\t};\n\n\t\tvar _getHierarchySyncedFilesTX = function(tx) {\n\n\t\t\tvar query = \"SELECT value, type from ec_data WHERE form_id=? AND is_data_synced=? AND is_media_synced=? AND (type=? OR type=? OR type=?) AND value<>?\";\n\n\t\t\ttx.executeSql(query, [form_id, 1, 1, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO, \"\"], _getHierarchySyncedFilesSQLSuccessCB, self.errorCB);\n\t\t};\n\n\t\tmodule.getHierarchySyncedFiles = function(the_form_id) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tform_id = the_form_id;\n\t\t\tfiles = [];\n\n\t\t\tEC.db.transaction(_getHierarchySyncedFilesTX, self.errorCB, _getHierarchySyncedFilesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = (function (module) {\n    'use strict';\n\n    var form_id;\n    var inputs = [];\n    var input_options_ids = [];\n    var input_options = [];\n    var has_jumps;\n    var has_location;\n    var deferred;\n\n    //callback triggered when all the inputs for a form are fetched correctly. 'inputs' contains all the inputs\n    var _getInputsSuccessCB = function (tx) {\n\n        console.log('TRANSACTION SELECT INPUTS SUCCESS');\n        has_jumps = has_location = false;\n\n        input_options_ids.length = 0;\n\n        //We have all the inputs, need to check if any radio, select(dropdown), checkbox input has input options\n        var i;\n        var iLenght = inputs.length;\n\n        //loop inputs looking for type radio, checkbox or dropdown and also to check if the form has some jumps\n        for (i = 0; i < iLenght; i++) {\n\n            if (inputs[i].type === EC.Const.RADIO || inputs[i].type === EC.Const.DROPDOWN || inputs[i].type === EC.Const.CHECKBOX) {\n\n                //list which inputs have input options (the ids)\n                input_options_ids.push({\n                    id: inputs[i]._id\n                });\n\n            }\n            //do we have a location input?\n            if (inputs[i].type === EC.Const.LOCATION) {\n                //this flag will be used to start watchPosition geolocation when adding an entry\n                has_location = true;\n            }\n\n\n            if (inputs[i].has_jump === 1 && !has_jumps) {\n                has_jumps = true;\n            }\n        }\n\n        //map any option (if any) to the inputs\n        if (input_options_ids.length > 0) {\n\n            //console.log(JSON.stringify(input_options_ids));\n\n            //get input options\n            EC.db.transaction(_getInputOptionsTX, EC.Select.errorCB, _getInputOptionsSuccessCB);\n\n        }\n        //no options to map then just render form\n        else {\n            //resolve query\n            deferred.resolve(inputs, has_jumps, has_location);\n        }\n    };\n\n    var _getInputsSQLSuccess = function (the_tx, the_result) {\n\n        var i;\n        var iLenght = the_result.rows.length;\n\n        //build object with inputs data\n        for (i = 0; i < iLenght; i++) {\n            inputs.push(the_result.rows.item(i));\n        }\n    };\n\n    var _getInputOptionsSuccessCB = function (the_tx) {\n\n        //map input options to input\n        var i;\n        var j;\n        var iLength = inputs.length;\n        var jLength = input_options.length;\n\n        //build object with inputs data\n        for (i = 0; i < iLength; i++) {\n\n            inputs[i].options = [];\n\n            for (j = 0; j < jLength; j++) {\n\n                if (inputs[i]._id === input_options[j].input_id) {\n\n                    inputs[i].options.push({\n                        label: input_options[j].label,\n                        ref: input_options[j].ref,\n                        value: input_options[j].value\n                    });\n\n                }//if\n\n            }//for\n\n        }//for\n\n        //resolve query\n        deferred.resolve(inputs, has_jumps, has_location);\n    };\n    //_getInputOptionsSuccessCB\n\n    var _getInputOptionsTX = function (tx) {\n\n        var i;\n        var iLenght = input_options_ids.length;\n        var query;\n\n        //get all input options per each input\n        for (i = 0; i < iLenght; i++) {\n            query = 'SELECT * FROM ec_input_options WHERE input_id=?';\n            tx.executeSql(query, [input_options_ids[i].id], _getInputOptionsSQLSuccess, EC.Select.errorCB);\n        }\n\n    };\n\n    var _getInputOptionsSQLSuccess = function (the_tx, the_result) {\n\n        var i;\n        var iLenght = the_result.rows.length;\n\n        //build object with inputs data\n        for (i = 0; i < iLenght; i++) {\n            input_options.push(the_result.rows.item(i));\n        }\n\n    };\n\n    var _getInputsTX = function (tx) {\n\n        var query = 'SELECT * FROM ec_inputs WHERE form_id=? ORDER BY position';\n        tx.executeSql(query, [form_id], _getInputsSQLSuccess, EC.Select.errorCB);\n    };\n\n    module.getInputs = function (the_form_id) {\n\n        deferred = new $.Deferred();\n        form_id = the_form_id;\n\n        inputs.length = 0;\n        input_options_ids.length = 0;\n        input_options.length = 0;\n\n        //if the project is using a circular network, get all other keys for the specified form to avoid entering the same primary key value for a form of the same hierarchy level\n        $.when(EC.Select.getEntryKeys(form_id)).then(function (entry_keys) {\n\n            var cached_keys;\n            var form_level_keys;\n\n            //merge keys with those already in localStorage (if we are using circular network and form level key uniqueness) avoiding duplicates\n            try {\n                cached_keys = JSON.parse(window.localStorage.primary_keys);\n            } catch (error) {\n                cached_keys = [];\n            }\n            form_level_keys = cached_keys.concat(entry_keys).unique();\n            window.localStorage.primary_keys = JSON.stringify(form_level_keys);\n\n            EC.db.transaction(_getInputsTX, EC.Select.errorCB, _getInputsSuccessCB);\n\n        });\n\n        return deferred.promise();\n\n    };\n\n    return module;\n\n}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar forms;\n\t\tvar input_ids = [];\n\t\tvar deferred;\n\n\t\tmodule.getLocalInputIDs = function(the_forms) {\n\n\t\t\tforms = the_forms;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getInputsIDsTX, EC.Select.errorCB, _getInputsIDsSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\tvar _getInputsIDsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar query = 'SELECT _id, ref FROM ec_inputs WHERE form_id=?';\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(query, [forms[i]._id], _getInputsIDsSQLSuccess, EC.Select.errorCB);\n\t\t\t}\n\n\t\t};\n\t\tvar _getInputsIDsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tinput_ids.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getInputsIDsSuccessCB = function() {\n\t\t\tdeferred.resolve(input_ids);\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_name;\n\t\tvar project_id;\n\t\tvar deferred;\n\n\t\tvar _getProjectRowIdSuccessCB = function() {\n\t\t\tdeferred.resolve(project_id);\n\t\t};\n\n\t\tvar _getProjectRowIdSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tproject_id = the_result.rows.item(0)._id;\n\n\t\t};\n\n\t\tvar _getProjectRowIdTX = function(tx) {\n\n\t\t\tvar query = 'SELECT _id FROM ec_projects WHERE name=?';\n\t\t\ttx.executeSql(query, [project_name], _getProjectRowIdSQLSuccess, EC.Select.errorCB);\n\t\t};\n\n\t\tmodule.getProjectRowId = function(the_project_name) {\n\n\t\t\tdeferred = new $.Deferred();\n\t\t\tproject_name = the_project_name;\n\n\t\t\tEC.db.transaction(_getProjectRowIdTX, EC.Select.errorCB, _getProjectRowIdSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar projects = [];\n\t\tvar deferred;\n\n\t\tvar _getProjectsSuccessCB = function() {\n\t\t\tconsole.log(EC.Const.TRANSACTION_SUCCESS);\n\t\t};\n\n\t\tvar _getProjectsTX = function(tx) {\n\n\t\t\tvar query = 'SELECT _id, name, total_hierarchy_forms, total_branch_forms FROM ec_projects ORDER BY name';\n\t\t\ttx.executeSql(query, [], _getProjectsSQLSuccess, EC.Select.errorCB);\n\t\t};\n\n\t\tvar _getProjectsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLenght = the_result.rows.length;\n\n\t\t\t//build object with project data\n\t\t\tfor ( i = 0; i < iLenght; i++) {\n\t\t\t\tprojects.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t\tdeferred.resolve(projects);\n\t\t};\n\n\t\tmodule.getProjects = function() {\n\n\t\t\tdeferred = new $.Deferred();\n\t\t\t//clear projects array\n\t\t\tprojects.length = 0;\n\n\t\t\tEC.db.transaction(_getProjectsTX, EC.Select.errorCB, _getProjectsSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid : true*/\n/*global $, jQuery*/\n\n/*\n * Get all the synced entry keys for a single form, using form ID\n *\n * We use DISTICT to have a single occurrence of the entry key, as many rows can\n * have the same entry key.\n *\n * A row is fully synced when:\n *\n * is_data_synced= 1 but the row is not a media type (audio, photo, video),\n * is_data_synced is set to 1 after successfully uploading to the server\n *\n * is_data_synced = 1 and is_media_synced= 1 and the row is of type media (audio,\n * photo, video), this means the file was uploaded successfully\n *\n * is_data_synced = 1, is_media_synced is still 0, the type is media (audio,\n * photo, video) but the value is empty: this means the entry is data synced but\n * there is not any file to upload, therefore the entry can be safely deleted, as\n * the user decided not to enter any media when requested\n * TODO: check this better\n */\n\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form_id;\n\t\tvar entry_key;\n\t\tvar entry_keys;\n\t\tvar deferred;\n\t\t\n\t\tvar _errorCB = function(the_result, the_error){\n\t\t\tconsole.log(the_result);\n\t\t\tconsole.log(the_error);\n\t\t};\n\n\t\tvar _getSyncedEntryKeysTX = function(tx) {\n\n\t\t\tvar query = 'SELECT DISTINCT entry_key FROM ec_data WHERE form_id=?';\n\t\t\tquery += ' AND ((is_data_synced=? AND type NOT IN (\"audio\", \"photo\", \"video\"))';\n\t\t\tquery += ' OR (is_data_synced=? AND is_media_synced=? AND type IN (\"audio\", \"photo\", \"video\"))';\n\t\t\tquery += ' OR (is_data_synced=? AND is_media_synced=? AND type IN (\"audio\", \"photo\", \"video\") AND value=?))';\n\n\t\t\ttx.executeSql(query, [form_id, 1, 1, 1, 1, 0, \"\"], _getSyncedEntryKeysSQLSuccess, _errorCB);\n\t\t};\n\n\t\tvar _getSyncedEntryKeysSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\t//build object with entry keys\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tentry_keys.push(the_result.rows.item(i).entry_key);\n\t\t\t}\n\t\t};\n\n\t\tvar _getSyncedEntryKeysSuccessCB = function() {\n\t\t\tdeferred.resolve(entry_keys);\n\t\t};\n\n\t\t//get all entry keys for the specified form\n\t\tmodule.getSyncedEntryKeys = function(the_form_id) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tform_id = the_form_id;\n\t\t\tentry_keys = [];\n\t\t\tEC.db.transaction(_getSyncedEntryKeysTX, self.errorCB, _getSyncedEntryKeysSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar branch_forms_ids;\n\t\tvar total_branch_media_files;\n\t\tvar project_id;\n\t\tvar deferred;\n\n\t\tvar _getBranchMediaFileSuccessCB = function() {\n\t\t\tdeferred.resolve(total_branch_media_files > 0 ? true : false);\t\n\t\t};\n\n\t\tvar _getBranchMediaFileSQLSuccess = function(the_tx, the_result) {\n\t\t\ttotal_branch_media_files += parseInt(the_result.rows.item(0).total_branch_media_files, 10);\n\t\t};\n\n\t\tvar _getBranchMediaFileTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = branch_forms_ids.length;\n\t\t\tvar query = 'SELECT COUNT(*) AS total_branch_media_files FROM ec_branch_data WHERE form_id=? AND (type=? OR type=? OR type=?) AND value<>?';\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(query, [branch_forms_ids[i], EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO, \"\"], _getBranchMediaFileSQLSuccess, EC.Select.errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tmodule.hasBranchMediaFiles = function(the_branch_forms_ids) {\n\n\t\t\tbranch_forms_ids = the_branch_forms_ids;\n\t\t\ttotal_branch_media_files = 0;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getBranchMediaFileTX, EC.Select.errorCB, _getBranchMediaFileSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = (function (module) {\n    'use strict';\n\n    //callback for a transaction error\n    module.errorCB = function (the_result, the_error) {\n        console.log(EC.Const.TRANSACTION_ERROR);\n        console.log('%c' + the_error.message, 'color: red');\n        console.log('%c' + the_result, 'color: red');\n    };\n\n    return module;\n\n}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar branch_forms;\n\t\tvar deferred;\n\n\t\tvar _getBranchFormsTX = function(tx) {\n\n\t\t\tvar query = \"SELECT _id, name, num, key, total_inputs, has_media, is_genkey_hidden, entries FROM ec_branch_forms WHERE project_id=?\";\n\n\t\t\ttx.executeSql(query, [project_id], _getBranchFormsSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar _getBranchFormsSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tbranch_forms.push(the_result.rows.item(i));\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getBranchFormsSuccessCB = function() {\n\n\t\t\tdeferred.resolve(branch_forms);\n\n\t\t};\n\n\t\tmodule.getBranchForms = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tbranch_forms = [];\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getBranchFormsTX, EC.Select.errorCB, _getBranchFormsSuccessCB);\n\n\t\t\t// return promise (with the branch_forms)\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar deferred;\n\t\tvar media_type;\n\t\tvar audio;\n\n\t\tvar _getOneBranchAudioFileTX = function(tx) {\n\n\t\t\tvar query = \"SELECT _id, value, type FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE project_id=? AND has_media=?) AND type=? AND is_data_synced=? AND is_media_synced=? AND value<>? LIMIT 1\";\n\n\t\t\ttx.executeSql(query, [project_id, 1, EC.Const.AUDIO, 1, 0, \"\"], getOneBranchAudioFileSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar getOneBranchAudioFileSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tif (the_result.rows.length > 0) {\n\t\t\t\taudio = the_result.rows.item(0);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getOneBranchAudioFileSuccessCB = function() {\n\n\t\t\tif (audio) {\n\t\t\t\tdeferred.resolve(audio);\n\t\t\t} else {\n\t\t\t\tdeferred.reject();\n\t\t\t}\n\n\t\t};\n\t\t\n\t\t/* Get an audio file to upload, data needs to be synced and media unsynced\n\t\t */\n\t\tmodule.getOneBranchAudioFile = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tdeferred = new $.Deferred();\n\t\t\taudio =null;\n\n\t\t\tEC.db.transaction(_getOneBranchAudioFileTX, EC.Select.errorCB, _getOneBranchAudioFileSuccessCB);\n\n\t\t\t// return promise to update ui when entry has/has not been found\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = (function (module) {\n    'use strict';\n\n    var branch_form_name;\n    var branch_form;\n    var upload_branch_forms;\n    var project_id;\n    var hierarchy_entry_key_value;\n    var branch_entry_values;\n    var branch_entry_key;\n    var branch_entry;\n    var deferred;\n    var self;\n\n    /**\n     *  @method _getOneEntryKeyTX Execute a query to get a single branch entry_key based on hierarchy_entry_key_value and NOT synced\n     */\n    var _getOneEntryKeyTX = function (tx) {\n\n        var query = '';\n\n        //select a single entry key\n        query += 'SELECT DISTINCT entry_key FROM ec_branch_data WHERE hierarchy_entry_key_value=? AND is_data_synced=? AND form_id IN (SELECT _id from ec_branch_forms WHERE name=? AND project_id=?) LIMIT 1';\n\n        tx.executeSql(query, [hierarchy_entry_key_value, 0, branch_form_name, project_id], _getOneEntryKeySQLSuccess, EC.Select.errorCB);\n\n    };\n\n    /**\n     *  _getOneEntryKeySQLSuccess : SQL success callback, the result will be always 1 single element containing 1 branch entry_key (or none)\n     */\n    var _getOneEntryKeySQLSuccess = function (the_tx, the_result) {\n\n        var iLength = the_result.rows.length;\n\n        //if a entry_key is found\n        if (iLength > 0) {\n\n            branch_entry_key = the_result.rows.item(0).entry_key;\n            branch_entry_values = [];\n\n            //get all the values for the branche entry key found\n            EC.db.transaction(_getOneBranchEntryTX, EC.Select.errorCB, _getOneBranchEntrySuccessCB);\n        } else {\n\n            //no unsynced branch entries for the current branch form, try next one (if any)\n            if (EC.Upload.branch_forms.length > 0) {\n\n                EC.Upload.current_branch_form = EC.Upload.branch_forms.shift();\n\n                self.getOneBranchEntry(project_id, EC.Upload.current_branch_form.name, false);\n\n            } else {\n\n                /* NO more unsynced branch entries: show feedback\n                 * check which action we were perfomorming, as the notification feedback has to be displayed only after an upload\n                 */\n\n                EC.Upload.action = (EC.Upload.action === EC.Const.BRANCH_RECURSION) ? EC.Upload.action = EC.Const.STOP_BRANCH_UPLOAD : EC.Const.START_BRANCH_UPLOAD;\n                EC.Upload.renderUploadViewFeedback(true);\n\n            }\n\n        }\n\n    };\n\n    /**\n     * _getOneBranchEntryTX : Select all the rows for a single branch entry key, not synced and belonging to the main entry_key specified\n     * to enforce uniqueness, we are also adding the form_id as we might have clashes across project, so let's avoid them\n     */\n    var _getOneBranchEntryTX = function (tx) {\n\n        var query = '';\n        query += 'SELECT _id, hierarchy_entry_key_ref, hierarchy_entry_key_value, ref, value, entry_key, type, created_on FROM ec_branch_data WHERE form_id IN ';\n        query += '(SELECT _id from ec_branch_forms WHERE name=? AND project_id=?) ';\n        query += 'AND is_data_synced=? AND hierarchy_entry_key_value=? AND entry_key=?';\n\n        tx.executeSql(query, [branch_form_name, project_id, 0, hierarchy_entry_key_value, branch_entry_key], _getOneBranchEntrySQLSuccess, EC.Select.errorCB);\n    };\n\n    /**\n     *  _getOneBranchEntrySQLSuccess SQL success callback, collecting all the values for a single branch entry to an array\n     */\n    var _getOneBranchEntrySQLSuccess = function (the_tx, the_result) {\n\n        var i;\n        var result = the_result;\n        var iLength = result.rows.length;\n        var ref;\n        var new_ref = '';\n        var location_ref = '';\n        var location_obj = {};\n        var location_string;\n        var parent_ref;\n        var path;\n        var values_counter = 0;\n\n        //build first branch entry\n        branch_entry = {\n            created_on: result.rows.item(0).created_on,\n            entry_key: result.rows.item(0).entry_key,\n            hierarchy_entry_key_ref: result.rows.item(0).hierarchy_entry_key_ref,\n            hierarchy_entry_key_value: result.rows.item(0).hierarchy_entry_key_value,\n            values: [{}]\n        };\n\n        console.log(result.rows.item(0));\n\n        //add all values for this entry\n        i = 0;\n        values_counter = 0;\n        //using a separate index for the entry values as each location value will be splitted into 4 components\n        while (i < iLength) {\n\n            //set empty object\n            branch_entry.values[values_counter] = {};\n\n            switch (result.rows.item(i).type) {\n\n                //TODO: add branc type;\n\n                case EC.Const.LOCATION:\n\n                    //split the location values to different parts (as expected on server)\n                    location_string = result.rows.item(i).value.replace('\\n', '').replace('\\r', '');\n\n                    //no location saved, so fill in with empty values\n                    if (location_string === '') {\n\n                        branch_entry.values[values_counter].ref = result.rows.item(i).ref + '_lat';\n                        branch_entry.values[values_counter].value = '';\n                        branch_entry.values[values_counter]._id = result.rows.item(i)._id;\n                        branch_entry.values[values_counter].type = result.rows.item(i).type;\n\n                        branch_entry.values[values_counter + 1] = {};\n                        branch_entry.values[values_counter + 1].ref = result.rows.item(i).ref + '_lon';\n                        branch_entry.values[values_counter + 1].value = '';\n                        branch_entry.values[values_counter + 1]._id = '';\n                        branch_entry.values[values_counter + 1].type = result.rows.item(i).type;\n\n                        branch_entry.values[values_counter + 2] = {};\n                        branch_entry.values[values_counter + 2].ref = result.rows.item(i).ref + '_acc';\n                        branch_entry.values[values_counter + 2].value = '';\n                        branch_entry.values[values_counter + 2]._id = '';\n                        branch_entry.values[values_counter + 2].type = result.rows.item(i).type;\n\n                        branch_entry.values[values_counter + 3] = {};\n                        branch_entry.values[values_counter + 3].ref = result.rows.item(i).ref + '_alt';\n                        branch_entry.values[values_counter + 3].value = '';\n                        branch_entry.values[values_counter + 3]._id = '';\n                        branch_entry.values[values_counter + 3].type = result.rows.item(i).type;\n\n                        branch_entry.values[values_counter + 4] = {};\n                        branch_entry.values[values_counter + 4].ref = result.rows.item(i).ref + '_bearing';\n                        branch_entry.values[values_counter + 4].value = '';\n                        branch_entry.values[values_counter + 4]._id = '';\n                        branch_entry.values[values_counter + 4].type = result.rows.item(i).type;\n                    } else {\n\n                        //get location object\n                        location_obj = EC.Utils.parseLocationString(location_string);\n\n                        branch_entry.values[values_counter].ref = result.rows.item(i).ref + '_lat';\n                        branch_entry.values[values_counter].value = location_obj.latitude;\n                        branch_entry.values[values_counter]._id = result.rows.item(i)._id;\n                        branch_entry.values[values_counter].type = result.rows.item(i).type;\n\n                        branch_entry.values[values_counter + 1] = {};\n                        branch_entry.values[values_counter + 1].ref = result.rows.item(i).ref + '_lon';\n                        branch_entry.values[values_counter + 1].value = location_obj.longitude;\n                        branch_entry.values[values_counter + 1]._id = '';\n                        branch_entry.values[values_counter + 1].type = result.rows.item(i).type;\n\n                        branch_entry.values[values_counter + 2] = {};\n                        branch_entry.values[values_counter + 2].ref = result.rows.item(i).ref + '_acc';\n                        branch_entry.values[values_counter + 2].value = location_obj.accuracy;\n                        branch_entry.values[values_counter + 2]._id = '';\n                        branch_entry.values[values_counter + 2].type = result.rows.item(i).type;\n\n                        branch_entry.values[values_counter + 3] = {};\n                        branch_entry.values[values_counter + 3].ref = result.rows.item(i).ref + '_alt';\n                        branch_entry.values[values_counter + 3].value = location_obj.altitude;\n                        branch_entry.values[values_counter + 3]._id = '';\n                        branch_entry.values[values_counter + 3].type = result.rows.item(i).type;\n\n                        branch_entry.values[values_counter + 4] = {};\n\n                        //heading on the server is called bearing\n                        branch_entry.values[values_counter + 4].ref = result.rows.item(i).ref + '_bearing';\n                        branch_entry.values[values_counter + 4].value = location_obj.heading;\n                        branch_entry.values[values_counter + 4]._id = '';\n                        branch_entry.values[values_counter + 4].type = result.rows.item(i).type;\n\n                    }\n\n                    //increase values_counter as we split the location value into 4 components\n                    values_counter += 4;\n\n                    break;\n\n                default:\n\n                    branch_entry.values[values_counter].ref = result.rows.item(i).ref;\n                    branch_entry.values[values_counter].value = result.rows.item(i).value;\n                    branch_entry.values[values_counter]._id = result.rows.item(i)._id;\n                    branch_entry.values[values_counter].type = result.rows.item(i).type;\n\n            }//switch\n\n            //increase counter for next value\n            values_counter++;\n            i++;\n\n        }//for\n\n    };\n\n    /**\n     * _getOneBranchEntrySuccessCB All values for a single branch entry collected, upload them\n     */\n    var _getOneBranchEntrySuccessCB = function () {\n\n        var branch_forms;\n\n        console.log('One branch entry');\n        console.log(branch_entry);\n\n        switch (EC.Upload.action) {\n\n            case EC.Const.START_BRANCH_UPLOAD:\n                if (branch_entry) {\n                    deferred.resolve(branch_entry);\n                } else {\n                    deferred.reject();\n                }\n                break;\n\n            case EC.Const.BRANCH_RECURSION:\n\n                //Upload entry\n                if (branch_entry) {\n\n                    EC.Upload.current_branch_entry = branch_entry;\n\n                    //if ($.isEmptyObject(EC.Upload.current_branch_form)) {\n                    //\n                    //}\n\n                    EC.Upload.prepareOneBranchEntry(EC.Upload.current_branch_form.name, EC.Upload.current_branch_entry);\n\n                } else {\n\n                    //TODO: no entry to upload, show upload success??\n                    EC.Upload.action = (EC.Upload.action === EC.Const.BRANCH_RECURSION) ? EC.Upload.action = EC.Const.STOP_BRANCH_UPLOAD : EC.Const.START_BRANCH_UPLOAD;\n                    EC.Upload.renderUploadViewFeedback(true);\n\n                }\n                break;\n\n        }\n\n    };\n\n    /**\n     * _getOneEntryKeySuccessCB\n     */\n    var _getOneEntryKeySuccessCB = function () {\n\n        console.log(JSON.stringify(branch_entry_key));\n\n    };\n\n    var _getOneHierarchyEntryKeyValueTX = function (tx) {\n\n        var query = 'SELECT DISTINCT hierarchy_entry_key_value FROM ec_branch_data WHERE is_data_synced=? AND form_id IN (SELECT _id from ec_branch_forms WHERE name=? AND project_id=?) LIMIT 1';\n\n        tx.executeSql(query, [0, branch_form_name, project_id], _getOneHierarchyEntryKeyValueSQLSuccess, EC.Select.errorCB);\n\n    };\n\n    var _getOneHierarchyEntryKeyValueSQLSuccess = function (the_tx, the_result) {\n\n        if (the_result.rows.length > 0) {\n            hierarchy_entry_key_value = the_result.rows.item(0).hierarchy_entry_key_value;\n        }\n\n    };\n\n    var _getOneHierarchyEntryKeyValueSuccessCB = function () {\n\n        if (hierarchy_entry_key_value) {\n\n            //TODO: get entry key\n\n            //get a single branch entry key\n            EC.db.transaction(_getOneEntryKeyTX, EC.Select.errorCB, _getOneEntryKeySuccessCB);\n\n        } else {\n\n            //no branch entries for this form, try with next one if any\n            if (EC.Upload.branch_forms.length > 0) {\n\n                EC.Upload.current_branch_form = EC.Upload.branch_forms.shift();\n                self.getOneBranchEntry(project_id, EC.Upload.current_branch_form.name);\n\n            } else {\n\n                /* NO more branch entries:\n                 */\n\n                if (EC.Upload.action === EC.Const.BRANCH_RECURSION) {\n                    EC.Upload.action = EC.Const.STOP_BRANCH_UPLOAD;\n                    EC.Upload.renderUploadViewFeedback(true);\n                }\n\n                if (EC.Upload.action === EC.Const.START_BRANCH_UPLOAD) {\n\n                    //deferred rejected?\n                    deferred.reject();\n\n                }\n\n            }\n\n        }\n\n    };\n\n    /**\n     * @method getOneBranchEntry Trigger a transaction to get 1 single branch entry key\n     * @param {Object} the_branch_form_name\n     * @param {Object} the_project_id\n     * @param {Object} the_hierarchy_entry_key_value\n     */\n    module.getOneBranchEntry = function (the_project_id, the_branch_form_name, is_called_from_view) {\n\n        self = this;\n        project_id = the_project_id;\n        branch_form_name = the_branch_form_name;\n        branch_entry = {};\n\n        /*\n         * if we are calling this method from  the upload view, bind a deferred object to resolve to that call\n         * This happens when the user loads the upload view and the first forms in the db do not have any entry to sync:\n         * the getOneBranchEntry is then called recursively until an entry is found but WITHOUT overriding the deferred object\n         */\n        if (is_called_from_view) {\n            deferred = new $.Deferred();\n        }\n\n        //get a single hierarchy_entry_key_value\n        EC.db.transaction(_getOneHierarchyEntryKeyValueTX, EC.Select.errorCB, _getOneHierarchyEntryKeyValueSuccessCB);\n\n        // return promise to update ui when entry has/has not been found\n        if (is_called_from_view) {\n            return deferred.promise();\n        }\n\n    };\n\n    return module;\n\n}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar deferred;\n\t\tvar media_type;\n\t\tvar file;\n\n\t\tvar _getOneBranchMediaFileTX = function(tx) {\n\n\t\t\tvar query = \"SELECT _id, value, type FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE project_id=? AND has_media=?) AND type=? AND is_data_synced=? AND is_media_synced=? AND value<>? LIMIT 1\";\n\n\t\t\ttx.executeSql(query, [project_id, 1, media_type, 1, 0, \"\"], getOneBranchMediaFileSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar getOneBranchMediaFileSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tfile = the_result.rows.item(0);\n\n\t\t};\n\n\t\tvar _getOneBranchMediaFileSuccessCB = function() {\n\n\t\t\tif (file) {\n\t\t\t\tdeferred.resolve(file);\n\t\t\t} else {\n\t\t\t\tdeferred.reject();\n\t\t\t}\n\n\t\t};\n\n\t\tmodule.getOneBranchMediaFile = function(the_project_id, the_type) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tmedia_type = the_type;\n\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getOneBranchMediaFileTX, EC.Select.errorCB, _getOneBranchMediaFileSuccessCB);\n\n\t\t\t// return promise to update ui when entry has/has not been found\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar forms = [];\n\t\tvar hierarchy_image;\n\t\tvar hierarchy_audio;\n\t\tvar hierarchy_video;\n\t\tvar branch_images = [];\n\t\tvar branch_audios = [];\n\t\tvar branch_videos = [];\n\t\tvar image;\n\t\tvar audio;\n\t\tvar video;\n\t\tvar deferred;\n\n\t\tvar _getOneHierarchyMediaPerTypeTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar photo = EC.Const.PHOTO;\n\t\t\tvar audio = EC.Const.AUDIO;\n\t\t\tvar video = EC.Const.VIDEO;\n\n\t\t\t// branch_images.length = 0;\n\t\t\t// branch_audios.length = 0;\n\t\t\t// branch_videos.length = 0;\n\n\t\t\tvar hierarchy_query = 'SELECT _id, value, type FROM ec_data WHERE form_id IN (SELECT _id FROM ec_forms WHERE project_id=? AND has_media=?) AND type=? AND is_data_synced=? AND is_media_synced=? AND value<>? LIMIT 1';\n\n\t\t\t//var branch_query = 'SELECT _id, value, type FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE project_id=? AND has_media=?) AND (type=? OR type=? OR type=?) AND is_data_synced=? AND is_media_synced=? AND value<>? LIMIT 1';\n\n\t\t\ttx.executeSql(hierarchy_query, [project_id, 1, photo, 1, 0, \"\"], _getOneImageSQLSuccess, EC.Select.errorCB);\n\t\t\ttx.executeSql(hierarchy_query, [project_id, 1, audio, 1, 0, \"\"], _getOneAudioSQLSuccess, EC.Select.errorCB);\n\t\t\ttx.executeSql(hierarchy_query, [project_id, 1, video, 1, 0, \"\"], _getOneVideoSQLSuccess, EC.Select.errorCB);\n\n\t\t\t//tx.executeSql(branch_query, [project_id, 1, photo, video, audio, 1, 0, \"\"], _getBranchMediaSQLSuccess, EC.Select.errorCB);\n\n\t\t\tEC.Select.query_error_message = \"EC.SelectgetOneHierarchyMediaPerType() _getOneHierarchyMediaPerTypeTX\";\n\t\t};\n\n\t\tvar _getOneImageSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//check if have a row\n\t\t\tif (the_result.rows.length > 0) {\n\n\t\t\t\timage = the_result.rows.item(0);\n\n\t\t\t} else {\n\n\t\t\t\t//TODO: no hierarchy images found, try branches??\n\t\t\t}\n\n\t\t};\n\t\tvar _getOneAudioSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//check if have a row\n\t\t\tif (the_result.rows.length > 0) {\n\n\t\t\t\taudio = the_result.rows.item(0);\n\n\t\t\t} else {\n\n\t\t\t\t//TODO: no hierarchy audio found, try branches??\n\t\t\t}\n\n\t\t};\n\t\tvar _getOneVideoSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//check if have a row\n\t\t\tif (the_result.rows.length > 0) {\n\n\t\t\t\tvideo = the_result.rows.item(0);\n\n\t\t\t} else {\n\n\t\t\t\t//TODO: no hierarchy video found, try branches??\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getOneHierarchyMediaPerTypeSuccessCB = function() {\n\n\t\t\t//resolve object with only files from hierarchy entries (if any)\n\t\t\tdeferred.resolve(image, audio, video);\n\n\t\t};\n\n\t\tmodule.getOneHierarchyMediaPerType = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getOneHierarchyMediaPerTypeTX, EC.Select.errorCB, _getOneHierarchyMediaPerTypeSuccessCB);\n\n\t\t\t// return promise to update ui when entry has/has not been found\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar deferred;\n\t\tvar image;\n\n\t\tvar _getOneBranchPhotoFileTX = function(tx) {\n\n\t\t\tvar query = \"SELECT * FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE project_id=? AND has_media=?) AND type=? AND is_data_synced=? AND is_media_synced=? AND value<>? LIMIT 1\";\n\n\t\t\ttx.executeSql(query, [project_id, 1, EC.Const.PHOTO, 1, 0, \"\"], getOneBranchPhotoFileSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar getOneBranchPhotoFileSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tif (the_result.rows.length > 0) {\n\t\t\t\timage = the_result.rows.item(0);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getOneBranchPhotoFileSuccessCB = function() {\n\n\t\t\tif (image) {\n\t\t\t\tconsole.log(image);\n\t\t\t\tdeferred.resolve(image);\n\t\t\t} else {\n\t\t\t\tdeferred.reject();\n\t\t\t}\n\n\t\t};\n\n\t\tmodule.getOneBranchPhotoFile = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\timage = null;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getOneBranchPhotoFileTX, EC.Select.errorCB, _getOneBranchPhotoFileSuccessCB);\n\n\t\t\t// return promise to update ui when entry has/has not been found\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar project_id;\n\t\tvar deferred;\n\t\tvar media_type;\n\t\tvar video;\n\n\t\tvar _getOneBranchVideoFileTX = function(tx) {\n\n\t\t\tvar query = \"SELECT _id, value, type FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE project_id=? AND has_media=?) AND type=? AND is_data_synced=? AND is_media_synced=? AND value<>? LIMIT 1\";\n\n\t\t\ttx.executeSql(query, [project_id, 1, EC.Const.VIDEO, 1, 0, \"\"], getOneBranchVideoFileSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar getOneBranchVideoFileSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tif (the_result.rows.length > 0) {\n\t\t\t\tvideo = the_result.rows.item(0);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getOneBranchVideoFileSuccessCB = function() {\n\n\t\t\tif (video) {\n\t\t\t\tdeferred.resolve(video);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdeferred.reject();\n\t\t\t}\n\n\t\t};\n\t\t\n\t\t/* Get a video file to upload, data needs to be synced and media unsynced\n\t\t */\n\t\tmodule.getOneBranchVideoFile = function(the_project_id, the_type) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tvideo = null;\n\n\t\t\tEC.db.transaction(_getOneBranchVideoFileTX, EC.Select.errorCB, _getOneBranchVideoFileSuccessCB);\n\n\t\t\t// return promise to update ui when entry has/has not been found\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = (function (module) {\n    'use strict';\n\n    var self;\n    var project_id;\n    var form;\n    var entry;\n    var entry_key;\n    var deferred;\n    var hierarchy_entry_values;\n    var all_data_synced_on_start = false;\n\n    /**\n     * @method _getParentRef\n     * @param {String} the_child_form_name\n     *\n     * Passing a form name, get the parent ref and its value. It will be used to link the child to its parent on the server\n     *\n     * When passing the top form, false is returned which means no parent for the current form\n     */\n    var _getParentRef = function (the_form_name) {\n\n        var i;\n        var name = the_form_name;\n        var forms = JSON.parse(window.localStorage.forms);\n        var iLength = forms.length;\n\n        //check children only (skip first element, the top form)\n        for (i = 1; i < iLength; i++) {\n\n            if (forms[i].name === name) {\n\n                return forms[i - 1].key;\n            }\n\n        }\n\n        return false;\n\n    };\n\n    /**\n     *  @method _getOneEntryKeyTX Execute a query to get a single entry_key  NOT synced\n     */\n    var _getOneEntryKeyTX = function (tx) {\n\n        //select a single entry key\n        var query = 'SELECT DISTINCT entry_key FROM ec_data WHERE form_id=? AND is_data_synced=? LIMIT 1';\n\n        tx.executeSql(query, [form._id, 0], _getOneEntryKeySQLSuccess, EC.Select.errorCB);\n\n    };\n\n    var _getOneEntryKeySQLSuccess = function (the_tx, the_result) {\n\n        var iLength = the_result.rows.length;\n        var project_id = parseInt(window.localStorage.project_id, 10);\n\n        //if a entry_key is found\n        if (iLength > 0) {\n\n            //get all rows for this entry key\n            entry_key = the_result.rows.item(0).entry_key;\n            hierarchy_entry_values = [];\n\n            //get all the values for the hierarchy entry key found\n            EC.db.transaction(_getOneHierarchyEntryTX, EC.Select.errorCB, _getOneHierarchyEntrySuccessCB);\n\n        } else {\n\n            //no entries for this form  to upload, try next form (child) if any\n            if (EC.Upload.hierarchy_forms.length > 0) {\n\n                EC.Upload.current_form = EC.Upload.hierarchy_forms.shift();\n                self.getOneHierarchyEntry(EC.Upload.current_form);\n\n            } else {\n\n                /*No entries for any form: Hierarchy upload completed\n                 */\n\n                //if the project has NOT branches, all done, shoe feedback to user\n                if (!EC.Upload.has_branches) {\n\n                    if (EC.Upload.action === EC.Const.HIERARCHY_RECURSION) {\n                        EC.Upload.action = EC.Const.STOP_HIERARCHY_UPLOAD;\n                        EC.Upload.renderUploadViewFeedback(true);\n                    }\n\n                }\n\n                /* If triggered by the upload view, reject the deferred object triggered on the upload view by EC.Select.getOneHierarchyEntry();\n                 * as no hierarchy entries found. The fail callback will be handled by looking for branches (if any)\n                 * */\n                if (EC.Upload.action === EC.Const.START_HIERARCHY_UPLOAD) {\n                    deferred.reject();\n                }\n\n                //if it is a recursive call, it means we uploaded all the hierarchy entries and we have to upload all the branch entries\n                if (EC.Upload.action === EC.Const.HIERARCHY_RECURSION) {\n\n                    //switch to branch recursion to upload branch entries\n                    EC.Upload.action = EC.Const.BRANCH_RECURSION;\n\n                    //get branch forms for this project BEFORE tryng to look for a branch entry\n                    $.when(EC.Select.getBranchForms(project_id)).then(function (the_branch_forms) {\n\n                        EC.Upload.branch_forms = the_branch_forms;\n                        EC.Upload.current_branch_form = EC.Upload.branch_forms.shift();\n                        //get branch entry WITHOUT creating a deferred object, as we are uploading branch entries automatically, without binding to upload view buttons\n                        EC.Select.getOneBranchEntry(project_id, EC.Upload.current_branch_form.name, false);\n                    });\n                }\n\n            }\n        }\n\n    };\n\n    var _getOneHierarchyEntryTX = function (tx) {\n\n        var query = 'SELECT _id, entry_key, parent, value, type, ref, created_on FROM ec_data WHERE entry_key=? AND form_id=? AND is_data_synced=?';\n\n        tx.executeSql(query, [entry_key, form._id, 0], _getOneHierarchyEntrySQLSuccess, EC.Select.errorCB);\n\n        EC.Select.query_error_message = 'EC.Select.getOneHierarchyEntry _getOneHierarchyEntryTX';\n\n    };\n\n    var _getOneHierarchyEntrySQLSuccess = function (the_tx, the_result) {\n\n        var i;\n        var result = the_result;\n        var iLength = result.rows.length;\n        var ref;\n        var new_ref = '';\n        var location_ref = '';\n        var location_obj = {};\n        var location_string;\n        var parent_ref;\n        var path;\n        var values_counter = 0;\n\n        //build first entry\n        entry = {\n            created_on: result.rows.item(0).created_on,\n            entry_key: result.rows.item(0).entry_key,\n            values: [{}]\n        };\n\n        //if it is a child form, add parent @ref and its value as a parent obj\n        parent_ref = _getParentRef(form.name);\n\n        //if it is a child form, store parent ref\n        if (parent_ref) {\n\n            //get immediate parent value\n            entry.parent_ref = parent_ref;\n            path = (result.rows.item(0).parent).split(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n            entry.parent_key_value = path[path.length - 1];\n        }\n\n        //add all values for this entry\n        i = 0;\n        values_counter = 0;\n        //using a separate index for the entry values as each location value will be splitted into 4 components\n        while (i < iLength) {\n\n            //set empty object\n            entry.values[values_counter] = {};\n\n            switch (result.rows.item(i).type) {\n\n                //TODO: add branc type;\n\n                case EC.Const.LOCATION:\n\n                    //split the location values to different parts (as expected on server)\n                    location_string = result.rows.item(i).value.replace('\\n', '').replace('\\r', '');\n\n                    //no location saved, so fill in with empty values\n                    if (location_string === '') {\n\n                        entry.values[values_counter].ref = result.rows.item(i).ref + '_lat';\n                        entry.values[values_counter].value = '';\n                        entry.values[values_counter]._id = result.rows.item(i)._id;\n                        entry.values[values_counter].type = result.rows.item(i).type;\n\n                        entry.values[values_counter + 1] = {};\n                        entry.values[values_counter + 1].ref = result.rows.item(i).ref + '_lon';\n                        entry.values[values_counter + 1].value = '';\n                        entry.values[values_counter + 1]._id = '';\n                        entry.values[values_counter + 1].type = result.rows.item(i).type;\n\n                        entry.values[values_counter + 2] = {};\n                        entry.values[values_counter + 2].ref = result.rows.item(i).ref + '_acc';\n                        entry.values[values_counter + 2].value = '';\n                        entry.values[values_counter + 2]._id = '';\n                        entry.values[values_counter + 2].type = result.rows.item(i).type;\n\n                        entry.values[values_counter + 3] = {};\n                        entry.values[values_counter + 3].ref = result.rows.item(i).ref + '_alt';\n                        entry.values[values_counter + 3].value = '';\n                        entry.values[values_counter + 3]._id = '';\n                        entry.values[values_counter + 3].type = result.rows.item(i).type;\n\n                        entry.values[values_counter + 4] = {};\n                        entry.values[values_counter + 4].ref = result.rows.item(i).ref + '_bearing';\n                        entry.values[values_counter + 4].value = '';\n                        entry.values[values_counter + 4]._id = '';\n                        entry.values[values_counter + 4].type = result.rows.item(i).type;\n                    } else {\n\n                        //get location object\n                        location_obj = EC.Utils.parseLocationString(location_string);\n\n                        entry.values[values_counter].ref = result.rows.item(i).ref + '_lat';\n                        entry.values[values_counter].value = location_obj.latitude;\n                        entry.values[values_counter]._id = result.rows.item(i)._id;\n                        entry.values[values_counter].type = result.rows.item(i).type;\n\n                        entry.values[values_counter + 1] = {};\n                        entry.values[values_counter + 1].ref = result.rows.item(i).ref + '_lon';\n                        entry.values[values_counter + 1].value = location_obj.longitude;\n                        entry.values[values_counter + 1]._id = '';\n                        entry.values[values_counter + 1].type = result.rows.item(i).type;\n\n                        entry.values[values_counter + 2] = {};\n                        entry.values[values_counter + 2].ref = result.rows.item(i).ref + '_acc';\n                        entry.values[values_counter + 2].value = location_obj.accuracy;\n                        entry.values[values_counter + 2]._id = '';\n                        entry.values[values_counter + 2].type = result.rows.item(i).type;\n\n                        entry.values[values_counter + 3] = {};\n                        entry.values[values_counter + 3].ref = result.rows.item(i).ref + '_alt';\n                        entry.values[values_counter + 3].value = location_obj.altitude;\n                        entry.values[values_counter + 3]._id = '';\n                        entry.values[values_counter + 3].type = result.rows.item(i).type;\n\n                        //heading on the server is called bearing\n                        entry.values[values_counter + 4] = {};\n                        entry.values[values_counter + 4].ref = result.rows.item(i).ref + '_bearing';\n                        entry.values[values_counter + 4].value = location_obj.heading;\n                        entry.values[values_counter + 4]._id = '';\n                        entry.values[values_counter + 4].type = result.rows.item(i).type;\n\n                    }\n\n                    //increase values_counter as we split the location value into 4 components\n                    values_counter += 4;\n\n                    break;\n\n                default:\n\n                    entry.values[values_counter].ref = result.rows.item(i).ref;\n\n                    //set skipped values as empty strings\n                    if (result.rows.item(i).value === EC.Const.SKIPPED) {\n                        entry.values[values_counter].value = '';\n                    } else {\n                        entry.values[values_counter].value = result.rows.item(i).value;\n                    }\n\n                    entry.values[values_counter]._id = result.rows.item(i)._id;\n                    entry.values[values_counter].type = result.rows.item(i).type;\n\n            }//switch\n\n            //increase counter for next value\n            values_counter++;\n            i++;\n\n        }//for\n\n    };\n\n    var _getOneHierarchyEntrySuccessCB = function () {\n\n        console.log('One entry');\n        console.log(entry);\n\n        switch (EC.Upload.action) {\n\n            case EC.Const.START_HIERARCHY_UPLOAD:\n                if (entry) {\n                    deferred.resolve(entry);\n                } else {\n                    deferred.reject();\n                }\n                break;\n\n            case EC.Const.HIERARCHY_RECURSION:\n\n                //Upload entry\n                if (entry) {\n                    EC.Upload.current_entry = entry;\n                    EC.Upload.prepareOneHierarchyEntry(EC.Upload.current_form.name, EC.Upload.current_entry);\n                } else {\n                    //TODO: no entry to upload, show upload success??\n                    console.log('no entry to upload');\n                }\n                break;\n        }\n    };\n\n    var _getOneEntryKeySuccessCB = function () {\n\n    };\n\n    module.getOneHierarchyEntry = function (the_form, is_called_from_view) {\n\n        self = this;\n        form = the_form;\n        entry = {};\n\n        if (is_called_from_view) {\n            deferred = new $.Deferred();\n        }\n\n        EC.db.transaction(_getOneEntryKeyTX, EC.Select.errorCB, _getOneEntryKeySuccessCB);\n\n        if (is_called_from_view) {\n            // return promise to update ui when entry has/has not been found\n            return deferred.promise();\n        }\n\n    };\n\n    return module;\n\n}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar deferred;\n\t\tvar media_type;\n\t\tvar file;\n\n\t\tvar _getOneHierarchyMediaFileTX = function(tx) {\n\n\t\t\tvar query = \"SELECT _id, value, type FROM ec_data WHERE form_id IN (SELECT _id FROM ec_forms WHERE project_id=? AND has_media=?) AND type=? AND is_data_synced=? AND is_media_synced=? AND value<>? LIMIT 1\";\n\n\t\t\ttx.executeSql(query, [project_id, 1, media_type, 1, 0, \"\"], getOneHierarchyMediaFileSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar getOneHierarchyMediaFileSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tfile = the_result.rows.item(0);\n\n\t\t};\n\n\t\tvar _getOneHierarchyMediaFileSuccessCB = function() {\n\n\t\t\tif (file) {\n\t\t\t\tdeferred.resolve(file);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"reject video upload\");\n\t\t\t\tdeferred.reject();\n\t\t\t}\n\n\t\t};\n\n\t\tmodule.getOneHierarchyMediaFile = function(the_project_id, the_type) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tmedia_type = the_type;\n\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getOneHierarchyMediaFileTX, EC.Select.errorCB, _getOneHierarchyMediaFileSuccessCB);\n\n\t\t\t// return promise to update ui when entry has/has not been found\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar forms = [];\n\t\tvar hierarchy_image;\n\t\tvar hierarchy_audio;\n\t\tvar hierarchy_video;\n\t\tvar branch_images = [];\n\t\tvar branch_audios = [];\n\t\tvar branch_videos = [];\n\t\tvar image;\n\t\tvar audio;\n\t\tvar video;\n\t\tvar deferred;\n\n\t\tvar _getOneHierarchyMediaPerTypeTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar hierarchy_query = 'SELECT _id, value, type FROM ec_data WHERE form_id IN (SELECT _id FROM ec_forms WHERE project_id=? AND has_media=?) AND type=? AND is_data_synced=? AND is_media_synced=? AND value<>? LIMIT 1';\n\n\t\t\ttx.executeSql(hierarchy_query, [project_id, 1, EC.Const.PHOTO, 1, 0, \"\"], _getOneImageSQLSuccess, EC.Select.errorCB);\n\t\t\ttx.executeSql(hierarchy_query, [project_id, 1, EC.Const.AUDIO, 1, 0, \"\"], _getOneAudioSQLSuccess, EC.Select.errorCB);\n\t\t\ttx.executeSql(hierarchy_query, [project_id, 1, EC.Const.VIDEO, 1, 0, \"\"], _getOneVideoSQLSuccess, EC.Select.errorCB);\n\n\t\t\tEC.Select.query_error_message = \"EC.SelectgetOneHierarchyMediaPerType() _getOneHierarchyMediaPerTypeTX\";\n\t\t};\n\n\t\tvar _getOneImageSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//check if have a row\n\t\t\tif (the_result.rows.length > 0) {\n\t\t\t\thierarchy_image = the_result.rows.item(0);\n\t\t\t} else {\n\t\t\t\t//TODO: no hierarchy images found, try branches??\n\t\t\t}\n\n\t\t};\n\n\t\tvar _getOneAudioSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//check if have a row\n\t\t\tif (the_result.rows.length > 0) {\n\t\t\t\thierarchy_audio = the_result.rows.item(0);\n\t\t\t} else {\n\t\t\t\t//TODO: no hierarchy audio found, try branches??\n\t\t\t}\n\t\t};\n\n\t\tvar _getOneVideoSQLSuccess = function(the_tx, the_result) {\n\n\t\t\t//check if have a row\n\t\t\tif (the_result.rows.length > 0) {\n\t\t\t\thierarchy_video = the_result.rows.item(0);\n\t\t\t} else {\n\t\t\t\t//TODO: no hierarchy video found, try branches??\n\t\t\t}\n\t\t};\n\n\t\tvar _getOneHierarchyMediaPerTypeSuccessCB = function() {\n\t\t\t//resolve object with only files from hierarchy entries (if any)\n\t\t\tdeferred.resolve(hierarchy_image, hierarchy_audio, hierarchy_video);\n\t\t};\n\n\t\tmodule.getOneHierarchyMediaPerType = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\thierarchy_image = null;\n\t\t\thierarchy_audio = null;\n\t\t\thierarchy_video = null;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getOneHierarchyMediaPerTypeTX, EC.Select.errorCB, _getOneHierarchyMediaPerTypeSuccessCB);\n\n\t\t\t// return promise to update ui when entry has/has not been found\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Select = EC.Select || {};\nEC.Select = ( function(module) {\"use strict\";\n\n\t\tvar project_id;\n\t\tvar deferred;\n\t\tvar upload_URL;\n\n\t\tvar _getProjectURLTX = function(tx) {\n\n\t\t\tvar query = \"SELECT uploadToServer FROM ec_projects WHERE _id=?\";\n\n\t\t\ttx.executeSql(query, [project_id], getProjectURLSQLSuccess, EC.Select.errorCB);\n\n\t\t};\n\n\t\tvar getProjectURLSQLSuccess = function(the_tx, the_result) {\n\n\t\t\tvar result = the_result;\n\t\t\tupload_URL = result.rows.item(0).uploadToServer;\n\n\t\t};\n\n\t\tvar _getProjectURLSuccessCB = function() {\n\n\t\t\tEC.Upload.setUploadURL(upload_URL);\n\t\t\tdeferred.resolve(upload_URL);\n\n\t\t};\n\n\t\tmodule.getUploadURL = function(the_project_id) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_getProjectURLTX, EC.Select.errorCB, _getProjectURLSuccessCB);\n\n\t\t\t// return promise when upload url is found\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Select));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar form_values;\n\t\tvar form_id;\n\t\tvar deferred;\n\n\t\tvar _insertFormValuesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar query;\n\t\t\tvar obj;\n\t\t\tvar iLength = form_values.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tquery = \"\";\n\t\t\t\tobj = form_values[i];\n\n\t\t\t\t//convert array to csv value (for checkboxes when multiple values are selected)\n\t\t\t\tif (Object.prototype.toString.call(obj.value) === '[object Array]') {\n\t\t\t\t\tobj.value = obj.value.join(', ');\n\t\t\t\t}\n\n\t\t\t\tquery = 'UPDATE ec_branch_data SET value=? WHERE _id=?';\n\n\t\t\t\ttx.executeSql(query, [obj.value, obj._id], _insertFormValuesSQLSuccessCB, _errorCB);\n\n\t\t\t}\n\t\t};\n\n\t\tvar _insertFormValuesSQLSuccessCB = function(the_tx, the_result) {\n\t\t};\n\n\t\tvar _insertFormValuesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t\tconsole.log(\"Error updating branch data\");\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t * @param {Object} the_form_values: the values to update\n\t\t */\n\t\tmodule.commitBranchForm = function(the_form_values) {\n\n\t\t\tform_values = the_form_values;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_insertFormValuesTX, _errorCB, _insertFormValuesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\"use strict\";\n\n\t\tvar rows_deleted = [];\n\t\tvar deleted_entries = [];\n\t\tvar forms;\n\t\tvar self;\n\t\tvar deferred;\n\n\t\t//return the total of deleted entries (total of rows / number of inputs )\n\t\tvar _getDeletedTotal = function(the_form_id, the_rows_deleted, the_forms) {\n\n\t\t\tvar i;\n\t\t\tvar form_id = the_form_id;\n\t\t\tvar rows_deleted = the_rows_deleted;\n\t\t\tvar forms = the_forms;\n\t\t\tvar iLength = forms.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tif (rows_deleted[i].form_id === form_id) {\n\t\t\t\t\treturn (rows_deleted[i].total_deleted / forms[i].total_inputs);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar _updateEntriesCountSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _updateEntriesCountTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar total_deleted;\n\t\t\tvar query = \"\";\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//get total of entries deleted\n\t\t\t\ttotal_deleted = _getDeletedTotal(forms[i]._id, rows_deleted, forms);\n\t\t\t\tdeleted_entries.push(total_deleted);\n\t\t\t\tquery = 'UPDATE ec_forms SET entries = entries - ' + total_deleted + ' WHERE _id=?';\n\n\t\t\t\ttx.executeSql(query, [forms[i]._id], _onUpdateEntriesCountSQLSuccess, EC.Update.errorCB);\n\t\t\t}\n\n\t\t\t//store how many entries were deleted per each fomr in localStorage\n\t\t\twindow.localStorage.deleted_entries = JSON.stringify(deleted_entries);\n\n\t\t};\n\n\t\tvar _onUpdateEntriesCountSQLSuccess = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tmodule.countSyncedDeleted = function(the_rows_deleted, the_forms) {\n\n\t\t\tself = this;\n\t\t\trows_deleted = the_rows_deleted;\n\t\t\tforms = the_forms;\n\t\t\tdeleted_entries.length = 0;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_updateEntriesCountTX, EC.Update.errorCB, _updateEntriesCountSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\"use strict\";\n\n\t\tvar forms;\n\t\tvar project_id;\n\t\tvar has_branches;\n\t\tvar deferred;\n\n\t\tvar _emptyMediaValuesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar query = \"UPDATE ec_data SET value=? WHERE form_id=? AND (type=? OR type=? OR type=?)\";\n\t\t\tvar branch_query = \"\";\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\ttx.executeSql(query, [\"\", forms[i]._id, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO], _emptyMediaValuesSQLSuccessCB, _emptyMediaValuesErrorCB);\n\n\t\t\t}//for\n\n\t\t\tif (has_branches) {\n\n\t\t\t\t//apparently SQLite does not support JOIN in UPDATE, so JOIN on SELECT\n\t\t\t\tbranch_query = \"UPDATE ec_branch_data SET value=? WHERE form_id IN (SELECT form_id FROM ec_branch_data JOIN ec_branch_forms WHERE ec_branch_data.form_id = ec_branch_forms._id AND ec_branch_forms.project_id=?) AND (type=? OR type=? OR type=?)\";\n\n\t\t\t\ttx.executeSql(branch_query, [\"\", project_id, EC.Const.PHOTO, EC.Const.AUDIO, EC.Const.VIDEO], _emptyBranchMediaValuesSQLSuccessCB, _emptyMediaValuesErrorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _emptyMediaValuesSQLSuccessCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tvar _emptyBranchMediaValuesSQLSuccessCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tvar _emptyMediaValuesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _emptyMediaValuesErrorCB = function(the_tx, the_error) {\n\t\t\tconsole.log(EC.Const.TRANSACTION_ERROR);\n\t\t\tconsole.log(the_tx, the_error);\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\tmodule.emptyMediaValues = function(the_hierarchy_forms, the_project_id) {\n\n\t\t\tforms = the_hierarchy_forms;\n\t\t\tproject_id = the_project_id;\n\t\t\thas_branches = EC.Utils.projectHasBranches();\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_emptyMediaValuesTX, _emptyMediaValuesErrorCB, _emptyMediaValuesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid: true*/\n/*global $, jQuery*/\n\n/*\n * Set a single row is_media_synced value to 1 to indicate file has been synced to the server \n */\n\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar row_id;\n\t\tvar is_branch_file;\n\t\tvar deferred;\n\n\t\tvar _flagOneFileAsSyncedTX = function(tx) {\n\n\t\t\tvar table = (is_branch_file) ? \"ec_branch_data\" : \"ec_data\";\n\t\t\tvar query = 'UPDATE ' + table + ' SET is_media_synced=? WHERE _id=?';\n\n\t\t\ttx.executeSql(query, [1, row_id], null, EC.Update.errorCB);\n\t\t};\n\n\t\tvar _flagOneFileAsSyncedSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\t//flag a single media row as synced on the local DB (for photo, video, audio)\n\t\tmodule.flagOneFileAsSynced = function(the_row_id, the_is_branch_file_flag) {\n\n\t\t\trow_id = the_row_id;\n\t\t\tis_branch_file = the_is_branch_file_flag;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_flagOneFileAsSyncedTX, EC.Update.errorCB, _flagOneFileAsSyncedSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\t}(EC.Update));\n","var EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = (function (module) {\n    'use strict';\n    //callback for a transaction error\n    module.errorCB = function (the_error) {\n        console.log(EC.Const.TRANSACTION_ERROR);\n        console.log('%c' + the_error.message, 'color: red');\n    };\n    return module;\n}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid: true*/\n/*global $, jQuery*/\n\n/* @method setBranchEntryAsSynced\n * Set all the rows of a branch entry to synced, setting is_data_synced to 1\n * \n * @param {Array } the_branch_rows_to_sync\n * all the rows of a branch entry\n */\n\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar branch_rows_to_sync;\n\t\tvar deferred;\n\t\tvar self;\n\n\t\tvar _updateDataSyncedFlagTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = branch_rows_to_sync.length;\n\t\t\tvar query;\n\t\t\tvar branch_form_name;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tquery = 'UPDATE ec_branch_data SET is_data_synced=? WHERE _id=?';\n\t\t\t\ttx.executeSql(query, [1, branch_rows_to_sync[i]._id], null, self.errorCB);\n\t\t\t}\n\t\t};\n\n\t\tvar _updateDataSyncedFlagSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tmodule.setBranchEntryAsSynced = function(the_branch_rows_to_sync) {\n\n\t\t\tself = this;\n\t\t\tbranch_rows_to_sync = the_branch_rows_to_sync;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_updateDataSyncedFlagTX, self.errorCB, _updateDataSyncedFlagSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true, nomen: true, plusplus: true*/\nvar EC = EC || {};\nEC.Update = EC.Update || {};\n\nEC.Update = ( function(module) {\n\n\t\tvar cached_branch_entry_keys = [];\n\t\tvar main_form_key_value;\n\t\tvar project_id;\n\t\tvar deferred;\n\n\t\tvar _updateStoredFlagTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar iLength;\n\t\t\tvar jLength;\n\t\t\tvar query;\n\t\t\tvar branch_form_name;\n\n\t\t\tiLength = cached_branch_entry_keys.length;\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tbranch_form_name = cached_branch_entry_keys[i].branch_form_name;\n\t\t\t\tjLength = cached_branch_entry_keys[i].primary_keys.length;\n\n\t\t\t\tfor ( j = 0; j < jLength; j++) {\n\t\t\t\t\tquery = 'UPDATE ec_branch_data SET is_stored=? WHERE form_id IN (SELECT _id from ec_branch_forms WHERE name=? AND project_id=?) AND hierarchy_entry_key_value=? AND entry_key=?';\n\t\t\t\t\ttx.executeSql(query, [1, branch_form_name, project_id, main_form_key_value, cached_branch_entry_keys[i].primary_keys[j]], _updateStoredFlagSQLSuccess, _errorCB);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar _updateStoredFlagSuccessCB = function() {\n\t\t\tconsole.log(\"UPDATE BRANCH STORED FLAG  SUCCESS\");\n\t\t\t\n\t\t\t//All good, show positive feedback to user after insertion of new antry\n\t\t\tdeferred.resolve(main_form_key_value);\n\n\t\t};\n\n\t\tvar _updateStoredFlagSQLSuccess = function() {\n\t\t\tconsole.log(\"UPDATE BRANCH STORED FLAG SQL SUCCESS\");\n\t\t};\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\t/*\n\t\t */\n\t\tmodule.setCachedBranchesAsStored = function(the_cached_branch_entry_keys, the_main_form_key_value, the_project_id) {\n\n\t\t\tcached_branch_entry_keys = the_cached_branch_entry_keys;\n\t\t\tmain_form_key_value = the_main_form_key_value;\n\t\t\tproject_id = the_project_id;\n\t\t\tdeferred = $.Deferred();\n\n\t\t\tEC.db.transaction(_updateStoredFlagTX, _errorCB, _updateStoredFlagSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar rows_to_sync;\n\t\tvar deferred;\n\t\tvar self;\n\n\t\tvar _updateDataSyncedFlagTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = rows_to_sync.length;\n\t\t\tvar query;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t/* If the row is NOT a media entry, set both is_data_synced AND is_media_synced\n\t\t\t\t * to 1\n\t\t\t\t *\n\t\t\t\t * If the row is a media entry, i.e. of type audio, photo or video, AND its value\n\t\t\t\t * is NOT an empty string, it means there is a file to upload so set\n\t\t\t\t * _is_data_synced to 1 but keep is_media_sync to 0, as we need to upload and\n\t\t\t\t * sync files separately.\n\t\t\t\t */\n\n\t\t\t\tquery = 'UPDATE ec_data SET is_data_synced=? WHERE _id=?';\n\t\t\t\ttx.executeSql(query, [1, rows_to_sync[i]._id], null, self.errorCB);\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar _updateDataSyncedFlagSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tmodule.setHierarchyEntryAsSynced = function(the_hierarchy_rows_to_sync) {\n\n\t\t\tself = this;\n\t\t\trows_to_sync = the_hierarchy_rows_to_sync;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_updateDataSyncedFlagTX, self.errorCB, _updateDataSyncedFlagSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\"use strict\";\n\n\t\tvar forms = [];\n\t\tvar deferred;\n\t\tvar has_branches;\n\t\tvar project_id;\n\n\t\tvar _unsyncAllEntriesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar branch_query;\n\n\t\t\tvar query = 'UPDATE ec_data SET is_data_synced=? WHERE form_id=?';\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(query, [0, forms[i]._id], _unsyncAllEntriesSQLSuccess, _unsyncAllEntriesErrorCB);\n\t\t\t}\n\n\t\t\tif (has_branches) {\n\t\t\t\tvar branch_query = 'UPDATE ec_branch_data SET is_data_synced=? WHERE form_id IN (SELECT form_id FROM ec_branch_data JOIN ec_branch_forms WHERE ec_branch_data.form_id = ec_branch_forms._id AND ec_branch_forms.project_id=?)';\n\t\t\t\ttx.executeSql(branch_query, [0, project_id], _unsyncAllBranchEntriesSQLSuccess, _unsyncAllEntriesErrorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _unsyncAllEntriesSQLSuccess = function(the_tx, the_result) {\n\t\t\tconsole.log(\"Hierarchy entries \");\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tvar _unsyncAllBranchEntriesSQLSuccess = function(the_tx, the_result) {\n\t\t\tconsole.log(\"Branch entries \");\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tvar _unsyncAllEntriesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _unsyncAllBrachEntriesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _unsyncAllEntriesErrorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\tmodule.unsyncAllEntries = function(the_forms, the_project_id) {\n\n\t\t\tforms = the_forms;\n\t\t\tproject_id = the_project_id;\n\t\t\thas_branches = EC.Utils.projectHasBranches();\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_unsyncAllEntriesTX, _unsyncAllEntriesErrorCB, _unsyncAllEntriesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\"use strict\";\n\n\t\tvar rows_to_unsync;\n\t\tvar self;\n\t\tvar has_branches;\n\t\tvar branch_form_names;\n\t\tvar project_id;\n\t\tvar entry_key;\n\t\tvar deferred;\n\n\t\tvar _unsyncOneHierarchyEntryTX = function(tx) {\n\n\t\t\tvar update_query = 'UPDATE ec_data SET is_data_synced=? WHERE _id=?';\n\t\t\tvar i;\n\t\t\tvar iLength = rows_to_unsync.length;\n\n\t\t\t//unsync all rows\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//if we have branches, cache branch form names (if any, as the has_braches flag is at project level and we might not have branches for this hierarchy form)\n\t\t\t\tif (has_branches) {\n\n\t\t\t\t\tif (rows_to_unsync[i].type === EC.Const.BRANCH) {\n\n\t\t\t\t\t\tbranch_form_names.push(rows_to_unsync[i].value.branch_form_name);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttx.executeSql(update_query, [0, rows_to_unsync[i]._id], _unsyncOneHierarchyEntrySQLSuccess, _unsyncOneHierarchyEntryErrorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _unsyncOneHierarchyEntrySQLSuccess = function(the_tx, the_result) {\n\n\t\t\tconsole.log(the_result, false);\n\n\t\t};\n\n\t\tvar _unsyncOneHierarchyEntrySuccessCB = function() {\n\n\t\t\trows_to_unsync.length = 0;\n\n\t\t\t//TODO:unsync any branches for this hierarchy entry\n\t\t\tif (has_branches && branch_form_names.length > 0) {\n\t\t\t\tEC.db.transaction(_unsyncBranchEntriesTX, _unsyncOneHierarchyEntryErrorCB, _unsyncBranchEntriesSuccessCB);\n\t\t\t} else {\n\n\t\t\t\tdeferred.resolve();\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar _unsyncBranchEntriesTX = function(tx) {\n\n\t\t\tvar update_query = 'UPDATE ec_branch_data SET is_data_synced=? WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE name=? AND project_id=?) AND hierarchy_entry_key_value=?';\n\t\t\tvar i;\n\t\t\tvar iLength = branch_form_names.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(update_query, [0, branch_form_names[i], project_id, entry_key], _unsyncBranchEntriesSQLSuccess, _unsyncOneHierarchyEntryErrorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _unsyncBranchEntriesSQLSuccess = function(the_tx, the_result) {\n\t\t};\n\n\t\tvar _unsyncBranchEntriesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _unsyncOneHierarchyEntryErrorCB = function() {\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\tmodule.unsyncOneHierarchyEntry = function(the_rows, the_entry_key, the_project_id) {\n\n\t\t\tself = this;\n\t\t\thas_branches = EC.Utils.projectHasBranches();\n\t\t\trows_to_unsync = the_rows;\n\t\t\tentry_key = the_entry_key;\n\t\t\tproject_id = the_project_id;\n\t\t\tbranch_form_names = [];\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_unsyncOneHierarchyEntryTX, _unsyncOneHierarchyEntryErrorCB, _unsyncOneHierarchyEntrySuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\t\t\n\t\tvar self;\n\t\tvar form_id;\n\t\tvar deferred;\n\n\t\tmodule.updateCountersOnEntriesDownload = function(the_form_id) {\n\t\t\t\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tform_id = the_form_id;\n\t\t\n\t\t\tEC.db.transaction(_updateCountersOnEntriesDownloadTX, self.errorCB, _updateCountersOnEntriesDownloadCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\tvar _updateCountersOnEntriesDownloadTX = function(tx) {\n\n\t\t\tvar query = 'UPDATE ec_forms SET entries = entries + ' + 1 + ' WHERE _id=?';\n\n\t\t\ttx.executeSql(query, [form_id], null, self.errorCB);\n\t\t};\n\n\t\tvar _updateCountersOnEntriesDownloadCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form_id;\n\t\tvar amount;\n\t\tvar forms_data_left;\n\t\tvar forms_data_restored = [];\n\t\tvar deferred;\n\t\tvar old_forms;\n\t\tvar current_form;\n\n\t\tmodule.updateCountersOnEntriesRestore = function(the_form_id, the_amount, the_forms_data_left) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tform_id = the_form_id;\n\t\t\tamount = the_amount;\n\t\t\tforms_data_left = the_forms_data_left;\n\t\t\told_forms = JSON.parse(window.localStorage.forms);\n\t\t\tcurrent_form = old_forms.shift();\n\n\t\t\tforms_data_restored.push({\n\t\t\t\t_id : form_id,\n\t\t\t\tentries : amount,\n\t\t\t\thas_media : current_form.has_media,\n\t\t\t\tnum : current_form.num,\n\t\t\t\ttotal_inputs : current_form.total_inputs,\n\t\t\t\tname : current_form.name,\n\t\t\t\tis_active : current_form.is_active,\n\t\t\t\tkey : current_form.key\n\n\t\t\t});\n\n\t\t\twindow.localStorage.forms = JSON.stringify(old_forms);\n\n\t\t\tEC.db.transaction(_updateCountersOnEntriesRestoreTX, EC.Update.errorCB, _updateCountersOnEntriesRestoreSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\tvar _updateCountersOnEntriesRestoreTX = function(tx) {\n\n\t\t\tvar query = 'UPDATE ec_forms SET entries = entries + ' + amount + ' WHERE _id=?';\n\n\t\t\ttx.executeSql(query, [form_id], null, EC.Update.errorCB);\n\t\t};\n\n\t\tvar _updateCountersOnEntriesRestoreSuccessCB = function() {\n\n\t\t\t//if we have nested forms, enter the next form data recursively\n\t\t\tif (forms_data_left.length > 0) {\n\t\t\t\tdeferred.reject(forms_data_left);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//restore successful, update forms in localStorage\n\t\t\t\twindow.localStorage.forms = JSON.stringify(forms_data_restored);\n\n\t\t\t\tforms_data_restored.length = 0;\n\t\t\t\t//reset total of entries\n\t\t\t\tamount = 0;\n\n\t\t\t\tdeferred.resolve();\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form_id;\n\t\tvar entry_key;\n\n\t\tvar deferred;\n\n\t\tvar _updateCountersOnSingleBranchEntryInsertionTX = function(tx) {\n\n\t\t\tvar query = 'UPDATE ec_branch_forms SET entries = entries + ' + 1 + ' WHERE _id=?';\n\t\t\ttx.executeSql(query, [form_id], null, self.errorCB);\n\t\t};\n\n\t\tvar _updateCountersOnSingleBranchEntryInsertionSuccessCB = function() {\n\t\t\tdeferred.resolve(true, entry_key);\n\t\t};\n\n\t\tmodule.updateCountersOnSingleBranchEntryInsertion = function(the_entry_key, the_form_id) {\n\n\t\t\tself = this;\n\t\t\tentry_key = the_entry_key;\n\t\t\tform_id = the_form_id;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_updateCountersOnSingleBranchEntryInsertionTX, self.errorCB, _updateCountersOnSingleBranchEntryInsertionSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\n/* @method updateCountersOnSingleEntryDeletion\n *\n * This method recursively updates the entries counters per each form after a\n * single entry deletion (ec_form table)\n *\n * @param {the_counters} array of objects like:\n *\n * { amount: 3,\n *   form_id : 39\n * }\n *\n * where amount is the total of entries deleted for the form, identified by\n * form_id\n *\n */\n\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form;\n\t\tvar counters;\n\t\tvar row_id;\n\t\tvar amount;\n\t\tvar forms_data_left;\n\t\tvar deferred;\n\n\t\tvar _updateCountersOnSingleEntryDeletionSuccessCB = function() {\n\t\t\t\n\t\t\t//any more forms to update?\n\t\t\tif (counters.length > 0) {\n\n\t\t\t\tform = counters.shift();\n\n\t\t\t\t_doUpdate();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdeferred.resolve();\n\t\t\t}\n\n\t\t};\n\n\t\tvar _updateCountersOnSingleEntryDeletionTX = function(tx) {\n\n\t\t\tvar query = 'UPDATE ec_forms SET entries = entries + ' + amount + ' WHERE _id=?';\n\n\t\t\ttx.executeSql(query, [form.form_id], null, self.errorCB);\n\t\t};\n\n\t\tfunction _doUpdate() {\n\t\t\t\n\t\t\t//amount will be removed\n\t\t\tamount = -form.amount;\n\n\t\t\t//update forms in localStorage with the new total entries values\n\t\t\t//TODO, maybe not needed\n\t\t\tconsole.log(\"localstorage forms maybe need to be updated here\");\n\n\t\t\tEC.db.transaction(_updateCountersOnSingleEntryDeletionTX, self.errorCB, _updateCountersOnSingleEntryDeletionSuccessCB);\n\t\t}\n\n\n\t\tmodule.updateCountersOnSingleEntryDeletion = function(the_counters) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tcounters = the_counters;\n\t\t\tform = counters.shift();\n\t\t\tamount = 0;\n\n\t\t\t_doUpdate();\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\n/*\n * @method updateCountersOnSingleEntryInsertion\n * Update the total of entries for a\n * hierarchy form, after entering entries.\n * It also updates the total of branch\n * entries linked to a hierarchy entry if any\n *\n * @param {the_entry_key} the value of the primary key for the form (entry) just\n * entered\n * @param {the_form_id} the _id of the form in the database\n */\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form_id;\n\t\tvar entry_key;\n\t\tvar amount;\n\t\tvar deferred;\n\n\t\tmodule.updateCountersOnSingleEntryInsertion = function(the_entry_key, the_form_id) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tentry_key = the_entry_key;\n\t\t\tform_id = the_form_id;\n\n\t\t\t//update entries counter for the appropriate form\n\t\t\tEC.Utils.updateFormsObj(form_id);\n\n\t\t\tEC.db.transaction(_updateCountersOnSingleEntryInsertionTX, self.errorCB, _updateCountersOnSingleEntryInsertionSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\tvar _updateCountersOnSingleEntryInsertionTX = function(tx) {\n\n\t\t\tvar query = 'UPDATE ec_forms SET entries = entries + ' + 1 + ' WHERE _id=?';\n\n\t\t\ttx.executeSql(query, [form_id], null, self.errorCB);\n\t\t};\n\n\t\tvar _updateCountersOnSingleEntryInsertionSuccessCB = function() {\n\n\t\t\tvar project_id;\n\t\t\tvar cached_branch_entry_keys;\n\t\t\tvar branch_to_store;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\n\t\t\t/* Hierarchy entry counter updated.\n\t\t\t *\n\t\t\t * If there are any branches set their rows \"is_stored\" flag to 1\n\t\t\t */\n\t\t\ttry {\n\t\t\t\tcached_branch_entry_keys = JSON.parse(window.localStorage.cached_branch_entry_keys);\n\n\t\t\t\tiLength = cached_branch_entry_keys.length;\n\t\t\t\tbranch_to_store = false;\n\n\t\t\t\t//do we have any branch form cached?\n\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\tif (cached_branch_entry_keys[i].primary_keys.length > 0) {\n\n\t\t\t\t\t\tbranch_to_store = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (branch_to_store) {\n\n\t\t\t\t\tproject_id = window.localStorage.project_id;\n\t\t\t\t\t$.when(EC.Update.setCachedBranchesAsStored(cached_branch_entry_keys, entry_key, project_id)).then(function(entry_key) {\n\t\t\t\t\t\tdeferred.resolve(entry_key);\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//no branches\n\t\t\t\t\tdeferred.resolve(entry_key);\n\t\t\t\t}\n\t\t\t} catch(error) {\n\n\t\t\t\t//no branches to save, show positive feedback to user after insertion of new\n\t\t\t\t// entry\n\t\t\t\tdeferred.resolve(entry_key);\n\t\t\t}\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid: true*/\n/*global $, jQuery*/\n\n/* @method updateCountersOnSyncedEntriesDeletion\n * Update the total of entries locally stored for each form after deleteing all the synced entries for a project\n * \n * @param {Array} the_counters\n * \n * array of objects containing the amount of entries deleted per each form:\n * {form_id: <the_form_id>, amount: <the_amount>}\n */\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar counters;\n\t\tvar deleted_entries;\n\n\t\tvar _updateCountersOnSyncedEntriesDeletionSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _updateCountersOnSyncedEntriesDeletionTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = counters.length;\n\t\t\tvar query;\n\t\t\t\n\t\t\t//loop and do a transaction per each form\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tquery = 'UPDATE ec_forms SET entries = entries - ' + counters[i].amount + ' WHERE _id=?';\n\t\t\t\t\n\t\t\t\tdeleted_entries.push(counters[i].amount);\n\n\t\t\t\ttx.executeSql(query, [counters[i].form_id], null, self.errorCB);\n\t\t\t}\n\n\t\t\t//store how many entries were deleted per each form (to update counters in the dom after deletion)\n\t\t\twindow.localStorage.deleted_entries = JSON.stringify(deleted_entries);\n\n\t\t};\n\n\t\tmodule.updateCountersOnSyncedEntriesDeletion = function(the_counters) {\n\n\t\t\tself = this;\n\t\t\tcounters = the_counters;\n\t\t\tdeleted_entries =[];\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_updateCountersOnSyncedEntriesDeletionTX, self.errorCB, _updateCountersOnSyncedEntriesDeletionSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\n/**\n * Update a hierarchy entry in database; each value is a row in the table ec_data like:\n *\n * \"input_id\": 15,\n \"form_id\": 1,\n \"position\": 4,\n \"parent\": \"Imperial College\",\n \"value\": \"Mirko is great\",\n \"is_title\": 0,\n \"entry_key\": \"Biology\",\n \"type\": \"textarea\",\n \"is_synced\": 0\n *\n */\n\nvar EC = EC || {};\nEC.Update = EC.Update || {};\nEC.Update = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar form_values;\n\t\tvar form_id;\n\t\tvar deferred;\n\n\t\tvar _updateHierarchyEntryValuesSQLSuccessCB = function() {\n\t\t\tconsole.log(\"FORM VALUE EDITED SQL QUERY SUCCESS\");\n\t\t};\n\n\t\tvar _updateHierarchyEntryValuesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = form_values.length;\n\t\t\tvar query = 'UPDATE ec_data SET value=? WHERE _id=?';\n\t\t\tvar obj;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tobj = form_values[i];\n\t\t\t\t//convert array to csv value (for checkboxes when multiple values are selected)\n\t\t\t\tif (Object.prototype.toString.call(obj.value) === '[object Array]') {\n\t\t\t\t\tobj.value = obj.value.join(', ');\n\t\t\t\t}\n\t\t\t\ttx.executeSql(query, [obj.value, obj._id], _updateHierarchyEntryValuesSQLSuccessCB, _errorCB);\n\t\t\t}\n\t\t};\n\n\t\tvar _updateHierarchyEntryValuesSuccessCB = function() {\n\t\t\tconsole.log(\"FORM VALUES UPDATED SUCCESSFULLY\");\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\tmodule.updateHierarchyEntryValues = function(the_form_values) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tform_values = the_form_values;\n\t\t\tform_id = form_values[0].form_id;\n\n\t\t\tEC.db.transaction(_updateHierarchyEntryValuesTX, _errorCB, _updateHierarchyEntryValuesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Update));\n","/*jslint vars: true, nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule SetData\n */\n\nvar EC = EC || {};\nEC.Create = EC.Create || {};\nEC.Create = ( function(module) {\"use strict\";\n\n\t\tvar remote_entry;\n\t\tvar updated_entries_counter;\n\t\tvar local_entries_keys = [];\n\t\tvar inputs = [];\n\t\tvar project_id;\n\t\tvar form_id;\n\t\tvar entry_key_ref;\n\t\tvar full_parent_path;\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar immediate_parent_key_value;\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_tx);\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\t/**\n\t\t * parseLocation() Convert a location json object to a single string concatenating the location components values\n\t\t */\n\t\tfunction _parseLocationObjToString(the_location_obj) {\n\n\t\t\tvar location_obj = the_location_obj;\n\t\t\tvar latitude = (location_obj.latitude === \"N/A\") ? \"\" : location_obj.latitude;\n\t\t\tvar longitude = (location_obj.longitude === \"N/A\") ? \"\" : location_obj.longitude;\n\t\t\tvar altitude = (location_obj.altitude === \"N/A\") ? \"\" : location_obj.altitude;\n\t\t\tvar accuracy = (location_obj.accuracy === \"N/A\") ? \"\" : location_obj.accuracy;\n\t\t\tvar bearing = (location_obj.bearing === \"N/A\") ? \"\" : location_obj.bearing;\n\n\t\t\treturn (//\n\t\t\t\t'Latitude: ' + latitude + ',\\n' + //\n\t\t\t\t'Longitude: ' + longitude + ',\\n' + //\n\t\t\t\t'Altitude: ' + altitude + ',\\n' + //\n\t\t\t\t'Accuracy: ' + accuracy + ',\\n' + //\n\t\t\t\t'Altitude Accuracy: ' + \" \" + ',\\n' + //\n\t\t\t\t'Heading: ' + bearing + '\\n');\n\t\t\t//\n\t\t}\n\n\t\t//get all primary key for local entries and all the inputs for the project\n\t\tvar _getFormLocalDataTX = function(tx) {\n\n\t\t\tvar query_entry_key = \"SELECT DISTINCT entry_key FROM ec_data WHERE form_id=?\";\n\t\t\tvar query_inputs = 'SELECT * FROM ec_inputs WHERE form_id=? ORDER BY position';\n\n\t\t\ttx.executeSql(query_entry_key, [form_id], _getFormPrimaryKeysSQLSuccessCB, self.errorCB);\n\t\t\ttx.executeSql(query_inputs, [form_id], _getFormInputsSQLSuccessCB, self.errorCB);\n\n\t\t};\n\n\t\t//fill in array with all the inputs for this form\n\t\tvar _getFormInputsSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tinputs.push(the_result.rows.item(i));\n\t\t\t}\n\n\t\t\twindow.localStorage.dre_inputs = JSON.stringify(inputs);\n\n\t\t};\n\n\t\t//fill in array with all the local entry keys\n\t\tvar _getFormPrimaryKeysSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_result.rows.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tlocal_entries_keys.push(the_result.rows.item(i).entry_key);\n\t\t\t}\n\n\t\t\twindow.localStorage.dre_local_entries_keys = JSON.stringify(local_entries_keys);\n\n\t\t};\n\n\t\t//insert all the values for a single entry\n\t\tfunction _insertEntryValues(the_inputs, the_tx, the_immediate_parent_key_value, the_current_remote_entry, the_current_remote_entry_key, the_current_remote_timestamp) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = the_inputs.length;\n\t\t\tvar query;\n\t\t\tvar ref;\n\t\t\tvar obj;\n\t\t\tvar location_obj;\n\t\t\tvar latitude;\n\t\t\tvar longitude;\n\t\t\tvar altitude;\n\t\t\tvar accuracy;\n\t\t\tvar bearing;\n\t\t\tvar tx = the_tx;\n\t\t\tvar immediate_parent_key_value = the_immediate_parent_key_value;\n\t\t\tvar current_remote_entry = the_current_remote_entry;\n\t\t\tvar current_remote_entry_key = the_current_remote_entry_key;\n\t\t\tvar current_remote_timestamp = the_current_remote_timestamp;\n\t\t\tvar remote_ref_value;\n\t\t\tvar remote_ref_value_location;\n\n\t\t\t//loop all the input fields\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tref = inputs[i].ref;\n\n\t\t\t\t//per each ref, check if the remote entry has a value\n\t\t\t\tif (current_remote_entry.hasOwnProperty(ref)) {\n\n\t\t\t\t\t//location object needs to be converted to string\n\t\t\t\t\tif ( typeof (current_remote_entry[ref]) === \"string\") {\n\t\t\t\t\t\tremote_ref_value = current_remote_entry[ref];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//location is a json object listing the components, so convert it to string\n\t\t\t\t\t\tlocation_obj = current_remote_entry[ref];\n\t\t\t\t\t\tremote_ref_value_location = _parseLocationObjToString(location_obj);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t//the current input ref is not part of the downloaded data set therefore set it to an empty string\n\t\t\t\t\tremote_ref_value = \"\";\n\t\t\t\t}\n\n\t\t\t\t//build query to insert values\n\n\t\t\t\tquery = \"\";\n\t\t\t\tobj = inputs[i];\n\n\t\t\t\tquery += 'INSERT INTO ec_data (';\n\t\t\t\tquery += 'input_id, ';\n\t\t\t\tquery += 'form_id, ';\n\t\t\t\tquery += 'position, ';\n\t\t\t\tquery += 'parent, ';\n\t\t\t\tquery += 'label, ';\n\t\t\t\tquery += 'ref, ';\n\t\t\t\tquery += 'value, ';\n\t\t\t\tquery += 'is_title, ';\n\t\t\t\tquery += 'entry_key, ';\n\t\t\t\tquery += 'type, ';\n\t\t\t\tquery += 'created_on, ';\n\t\t\t\tquery += 'is_remote, ';\n\t\t\t\tquery += 'is_data_synced, ';\n\t\t\t\tquery += 'is_media_synced) ';\n\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\tquery += obj._id + '\", \"';\n\t\t\t\tquery += form_id + '\", \"';\n\t\t\t\tquery += obj.position + '\", \"';\n\t\t\t\tquery += immediate_parent_key_value + '\", \"';\n\t\t\t\tquery += obj.label + '\", \"';\n\t\t\t\tquery += ref + '\", \"';\n\t\t\t\tquery += remote_ref_value + '\", \"';\n\t\t\t\tquery += obj.is_title + '\", \"';\n\t\t\t\tquery += current_remote_entry_key + '\", \"';\n\t\t\t\tquery += obj.type + '\", \"';\n\t\t\t\tquery += current_remote_timestamp + '\", \"';\n\t\t\t\tquery += 1 + '\", \"';\n\t\t\t\tquery += 1 + '\", \"';\n\t\t\t\tquery += 1 + '\");';\n\t\t\t\ttx.executeSql(query, [], _insertNewRowSQLSuccessCB, _errorCB);\n\n\t\t\t}//for all input fields\n\n\t\t}\n\n\t\t//insert values for top parent form\n\t\tvar _insertTopFormValuesTX = function(tx) {\n\n\t\t\tvar current_remote_entry = remote_entry;\n\t\t\tvar current_remote_entry_key = current_remote_entry[entry_key_ref];\n\t\t\tvar current_remote_timestamp = current_remote_entry.created;\n\n\t\t\t//insert entry values\n\t\t\t_insertEntryValues(inputs, tx, immediate_parent_key_value, current_remote_entry, current_remote_entry_key, current_remote_timestamp);\n\n\t\t};\n\n\t\t//insert values for one of the child forms\n\t\tvar _insertChildFormValuesTX = function(tx) {\n\n\t\t\tvar current_remote_entry = remote_entry;\n\t\t\tvar current_remote_entry_key = current_remote_entry[entry_key_ref];\n\t\t\tvar current_remote_timestamp = current_remote_entry.created;\n\n\t\t\t//insert entry values\n\t\t\t_insertEntryValues(inputs, tx, immediate_parent_key_value, current_remote_entry, current_remote_entry_key, current_remote_timestamp);\n\t\t};\n\n\t\t//A local entry with the same key is stored on the local database, so we have to update its values with the remote ones\n\t\tvar _updateLocalRowWithRemoteTX = function(tx) {\n\n\t\t\tvar current_remote_entry = remote_entry;\n\t\t\tvar current_remote_entry_key = current_remote_entry[entry_key_ref];\n\t\t\tvar current_remote_timestamp = current_remote_entry.created;\n\t\t\tvar ref;\n\t\t\tvar input_id;\n\t\t\tvar i;\n\t\t\tvar iLength = inputs.length;\n\t\t\tvar location_obj;\n\t\t\tvar remote_ref_value;\n\t\t\tvar remote_ref_value_location;\n\t\t\tvar query;\n\n\t\t\t//loop all the input fields\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//get local input _id and ref\n\t\t\t\tref = inputs[i].ref;\n\t\t\t\tinput_id = inputs[i]._id;\n\n\t\t\t\t//per each ref, check if the remote entry has a value\n\t\t\t\tif (current_remote_entry.hasOwnProperty(ref)) {\n\n\t\t\t\t\t//check if the current remote entry is a location object or not\n\t\t\t\t\tif ( typeof (current_remote_entry[ref]) === \"string\") {\n\t\t\t\t\t\tremote_ref_value = current_remote_entry[ref];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//location is a json object listing the components, so convert it to string\n\t\t\t\t\t\tlocation_obj = current_remote_entry[ref];\n\t\t\t\t\t\tremote_ref_value_location = _parseLocationObjToString(location_obj);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//the current input ref is not part of the downloaded data set therefore set it to an empty string\n\t\t\t\t\tremote_ref_value = \"\";\n\t\t\t\t}\n\n\t\t\t\tquery = 'UPDATE ec_data SET value=?, is_remote=? WHERE form_id=? AND input_id=? AND entry_key=?';\n\t\t\t\ttx.executeSql(query, [remote_ref_value, 1, form_id, input_id, current_remote_entry_key], _updateLocalRowWithRemoteSQLSuccessCB, self.errorCB);\n\n\t\t\t}//for each input field\n\n\t\t};\n\n\t\tvar _updateLocalRowWithRemoteSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t};\n\n\t\t//update entries counter for the current form (adding new entry, + 1)\n\t\tvar _updateLocalRowWithRemoteSuccessCB = function(tx) {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\n\t\tvar _getFormLocalDataSuccessCB = function() {\n\n\t\t\tvar current_remote_entry = remote_entry;\n\t\t\tvar current_remote_entry_key = current_remote_entry[entry_key_ref];\n\t\t\tvar current_remote_timestamp = current_remote_entry.created;\n\t\t\tvar form_tree = JSON.parse(window.localStorage.form_tree);\n\t\t\tvar parent_form_name = form_tree.pname;\n\t\t\tvar immediate_parent_form;\n\t\t\tvar hierarchy_entry_key_value_ref;\n\n\t\t\t//check if the currenty entry match a primary key of a local entry\n\t\t\tif (EC.Utils.inArray(local_entries_keys, current_remote_entry_key)) {\n\n\t\t\t\t//update existing row\n\t\t\t\tconsole.log(\"***********************************************************  update \" + current_remote_entry_key);\n\n\t\t\t\t//TODO: we have a match: update existing row\n\t\t\t\tEC.db.transaction(_updateLocalRowWithRemoteTX, _errorCB, _updateLocalRowWithRemoteSuccessCB);\n\t\t\t} else {\n\n\t\t\t\t//check parent first, then trigger different transaction based on parenting\n\t\t\t\t//insert new row\n\t\t\t\tconsole.log(\"***********************************************************  insert \" + current_remote_entry_key);\n\n\t\t\t\t//manage parenting and form tree: if parent_name is \"\" we are entering data for top form so immediate_parent_key_value is set to \"\"\n\t\t\t\tif (parent_form_name === \"\") {\n\n\t\t\t\t\timmediate_parent_key_value = \"\";\n\n\t\t\t\t\t//TODO: insert top parent form values\n\t\t\t\t\tEC.db.transaction(_insertTopFormValuesTX, _errorCB, _insertTopFormValuesSuccessCB);\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//child form therefore use parent entry key value from downloaded data\n\t\t\t\t\thierarchy_entry_key_value_ref = EC.Utils.getFormParentPrimaryKeyRef(form_id);\n\t\t\t\t\timmediate_parent_key_value = current_remote_entry[hierarchy_entry_key_value_ref];\n\t\t\t\t\timmediate_parent_form = EC.Utils.getParentFormByChildID(form_id);\n\n\t\t\t\t\t//TODO: can we cache the full parent path (or part of it) to improve performance?\n\t\t\t\t\t$.when(EC.Select.getFullParentPath(immediate_parent_form._id, immediate_parent_key_value)).then(function(the_full_parent_path) {\n\n\t\t\t\t\t\t//build full parent path in the form key|key|key....\n\t\t\t\t\t\tif (the_full_parent_path !== \"\") {\n\t\t\t\t\t\t\timmediate_parent_key_value = the_full_parent_path + \"|\" + immediate_parent_key_value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tEC.db.transaction(_insertChildFormValuesTX, _errorCB, _insertChildFormValuesSuccessCB);\n\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\t//no parent key found on the device, warn user\n\t\t\t\t\t\tdeferred.reject();\n\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar _insertNewRowSQLSuccessCB = function(the_tx, the_result) {\n\t\t\tconsole.log(\"INSERT REMOTE ENTRY SUCCESS\");\n\t\t\tconsole.log(JSON.stringify(the_result));\n\t\t};\n\n\t\tvar _insertTopFormValuesSuccessCB = function(the_tx, the_result) {\n\n\t\t\t//update entries counter for the current form (adding new entry, + 1)\n\t\t\t$.when(EC.Update.updateCountersOnEntriesDownload(form_id)).then(function() {\n\t\t\t\tdeferred.resolve();\n\t\t\t});\n\n\t\t};\n\n\t\tvar _insertChildFormValuesSuccessCB = function(the_tx, the_result) {\n\n\t\t\t//update entries counter for the current form (adding new entry, + 1)\n\t\t\t$.when(EC.Update.updateCountersOnEntriesDownload(form_id)).then(function() {\n\t\t\t\tdeferred.resolve();\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t * @param {Object} the_project_id\n\t\t * @param {Object} the_form_id\n\t\t * @param {Object} the_remote_entry\n\t\t *\n\t\t * @method commitRemoteEntry Commit a remote entry, insert it if a new one, otherwise update existing one on device as entries on the server overrides local entries\n\t\t */\n\t\tmodule.commitRemoteEntry = function(the_project_id, the_form_id, the_remote_entry) {\n\n\t\t\tproject_id = the_project_id;\n\t\t\tform_id = the_form_id;\n\t\t\tremote_entry = the_remote_entry;\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tentry_key_ref = EC.Utils.getFormPrimaryKeyRef(form_id);\n\n\t\t\t//reset array (we might have keys from a previous download)\n\t\t\tlocal_entries_keys.length = 0;\n\t\t\t//reset counter\n\t\t\tupdated_entries_counter = 0;\n\t\t\t//reset inputs array\n\t\t\tinputs.length = 0;\n\n\t\t\tif (!window.localStorage.dre_local_entries_keys && !window.localStorage.dre_inputs) {\n\n\t\t\t\t//get all local primary keys and inputs for the current form before saving the new entries\n\t\t\t\tEC.db.transaction(_getFormLocalDataTX, _errorCB, _getFormLocalDataSuccessCB);\n\t\t\t} else {\n\n\t\t\t\t//local primary keys and inputs are cached, no need to query db\n\t\t\t\t//TODO\n\t\t\t\tlocal_entries_keys = JSON.parse(window.localStorage.dre_local_entries_keys);\n\t\t\t\tinputs = JSON.parse(window.localStorage.dre_inputs);\n\n\t\t\t\t_getFormLocalDataSuccessCB();\n\t\t\t}\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Create));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Create\n *\n */\n\nvar EC = EC || {};\nEC.Create = EC.Create || {};\nEC.Create = ( function(module) {\"use strict\";\n\n\t\tvar branch_rows;\n\t\tvar deferred;\n\t\tvar mapped_branch_forms;\n\t\tvar mapped_input_ids;\n\n\t\tvar _getLocalBranchFormID = function(the_name) {\n\n\t\t\tvar i;\n\t\t\tvar _id;\n\n\t\t\tfor ( i = 0; i < mapped_branch_forms.length; i++) {\n\n\t\t\t\tif (mapped_branch_forms[i].name === the_name) {\n\n\t\t\t\t\t_id = mapped_branch_forms[i]._id;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn _id;\n\n\t\t};\n\n\t\tvar _getLocalBranchInputID = function(the_ref) {\n\n\t\t\tvar i;\n\t\t\tvar _id;\n\n\t\t\tfor ( i = 0; i < mapped_input_ids.length; i++) {\n\n\t\t\t\tif (mapped_input_ids[i].ref === the_ref) {\n\n\t\t\t\t\t_id = mapped_input_ids[i]._id;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn _id;\n\n\t\t};\n\n\t\tvar _insertBranchDataRowsTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = branch_rows.length;\n\t\t\tvar query = \"\";\n\t\t\tvar obj = {};\n\t\t\tvar local_branch_form_id;\n\t\t\tvar local_branch_input_id;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tquery = \"\";\n\t\t\t\tobj = branch_rows[i];\n\n\t\t\t\t//use current local ids for forms and inputs to match the foreign key constraint\n\t\t\t\tlocal_branch_form_id = _getLocalBranchFormID(obj.name);\n\t\t\t\tlocal_branch_input_id = _getLocalBranchInputID(obj.ref);\n\n\t\t\t\tquery += 'INSERT INTO ec_branch_data (';\n\t\t\t\tquery += 'input_id, ';\n\t\t\t\tquery += 'form_id, ';\n\t\t\t\tquery += 'hierarchy_entry_key_ref, ';\n\t\t\t\tquery += 'hierarchy_entry_key_value, ';\n\t\t\t\tquery += 'position, ';\n\t\t\t\tquery += 'label, ';\n\t\t\t\tquery += 'ref, ';\n\t\t\t\tquery += 'value, ';\n\t\t\t\tquery += 'is_title, ';\n\t\t\t\tquery += 'entry_key, ';\n\t\t\t\tquery += 'type, ';\n\t\t\t\tquery += 'is_data_synced, ';\n\t\t\t\tquery += 'is_media_synced, ';\n\t\t\t\tquery += 'is_cached, ';\n\t\t\t\tquery += 'is_stored, ';\n\t\t\t\tquery += 'created_on, ';\n\t\t\t\tquery += 'is_remote) ';\n\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\tquery += local_branch_input_id + '\", \"';\n\t\t\t\tquery += local_branch_form_id + '\", \"';\n\t\t\t\tquery += obj.hierarchy_entry_key_ref + '\", \"';\n\t\t\t\tquery += obj.hierarchy_entry_key_value + '\", \"';\n\t\t\t\tquery += obj.position + '\", \"';\n\t\t\t\tquery += obj.label + '\", \"';\n\t\t\t\tquery += obj.ref + '\", \"';\n\t\t\t\tquery += obj.value + '\", \"';\n\t\t\t\tquery += obj.is_title + '\", \"';\n\t\t\t\tquery += obj.entry_key + '\", \"';\n\t\t\t\tquery += obj.type + '\", \"';\n\t\t\t\tquery += obj.is_data_synced + '\", \"';\n\t\t\t\tquery += obj.is_media_synced + '\", \"';\n\t\t\t\tquery += obj.is_cached + '\", \"';\n\t\t\t\tquery += obj.is_stored + '\", \"';\n\t\t\t\tquery += obj.created_on + '\", \"';\n\t\t\t\tquery += obj.remote_flag + '\");';\n\n\t\t\t\ttx.executeSql(query, [], _insertBranchFormValuesSQLSuccessCB, _errorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _insertBranchFormValuesSQLSuccessCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tvar _insertBranchDataRowsSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tmodule.insertBranchDataRows = function(the_branch_forms_data, the_mapped_branch_forms, the_mapped_input_ids) {\n\n\t\t\tbranch_rows = the_branch_forms_data.branch_data_rows;\n\t\t\tmapped_branch_forms = the_mapped_branch_forms;\n\t\t\tmapped_input_ids = the_mapped_input_ids;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_insertBranchDataRowsTX, _errorCB, _insertBranchDataRowsSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Create));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Create\n *\n */\n\nvar EC = EC || {};\nEC.Create = EC.Create || {};\nEC.Create = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar branch_form_values = [];\n\t\tvar branch_forms_data = [];\n\t\tvar entries = [];\n\t\tvar entry_key;\n\t\tvar local_branch_form_id;\n\t\tvar branch_form_total_entries;\n\t\tvar deferred;\n\n\t\t//callback for a transaction error\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(EC.Utils.TRANSACTION_ERROR);\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tvar _insertBranchFormValuesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = branch_form_values.length;\n\t\t\tvar remote_flag = 0;\n\t\t\tvar is_cached = 1;\n\t\t\tvar is_stored = 0;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tvar query = \"\";\n\t\t\t\tvar obj = branch_form_values[i];\n\n\t\t\t\tquery += 'INSERT INTO ec_branch_data (';\n\t\t\t\tquery += 'input_id, ';\n\t\t\t\tquery += 'form_id, ';\n\t\t\t\tquery += 'hierarchy_entry_key_ref, ';\n\t\t\t\tquery += 'hierarchy_entry_key_value, ';\n\t\t\t\tquery += 'position, ';\n\t\t\t\tquery += 'label, ';\n\t\t\t\tquery += 'ref, ';\n\t\t\t\tquery += 'value, ';\n\t\t\t\tquery += 'is_title, ';\n\t\t\t\tquery += 'entry_key, ';\n\t\t\t\tquery += 'type, ';\n\t\t\t\tquery += 'is_data_synced, ';\n\t\t\t\tquery += 'is_media_synced, ';\n\t\t\t\tquery += 'is_cached, ';\n\t\t\t\tquery += 'is_stored, ';\n\t\t\t\tquery += 'created_on, ';\n\t\t\t\tquery += 'is_remote) ';\n\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\tquery += obj.input_id + '\", \"';\n\t\t\t\tquery += obj.form_id + '\", \"';\n\t\t\t\tquery += obj.hierarchy_entry_key_ref + '\", \"';\n\t\t\t\tquery += obj.hierarchy_entry_key_value + '\", \"';\n\t\t\t\tquery += obj.position + '\", \"';\n\t\t\t\tquery += obj.label + '\", \"';\n\t\t\t\tquery += obj.ref + '\", \"';\n\t\t\t\tquery += obj.value + '\", \"';\n\t\t\t\tquery += obj.is_title + '\", \"';\n\t\t\t\tquery += obj.entry_key + '\", \"';\n\t\t\t\tquery += obj.type + '\", \"';\n\t\t\t\tquery += obj.is_data_synced + '\", \"';\n\t\t\t\tquery += obj.is_media_synced + '\", \"';\n\t\t\t\tquery += is_cached + '\", \"';\n\t\t\t\tquery += is_stored + '\", \"';\n\t\t\t\tquery += obj.created_on + '\", \"';\n\t\t\t\tquery += remote_flag + '\");';\n\n\t\t\t\ttx.executeSql(query, [], _insertBranchFormValuesSQLSuccessCB, _errorCB);\n\n\t\t\t}//for\n\n\t\t};\n\n\t\tvar _insertBranchFormValuesSuccessCB = function() {\n\n\t\t\tvar branch_form_id = branch_form_values[0].form_id;\n\n\t\t\t//update branch entries counter, + 1\n\t\t\t$.when(EC.Update.updateCountersOnSingleBranchEntryInsertion(entry_key, branch_form_id)).then(function() {\n\t\t\t\tdeferred.resolve(entry_key);\n\t\t\t}, function() {\n\t\t\t\tdeferred.reject();\n\t\t\t});\n\n\t\t};\n\n\t\tvar _insertBranchFormValueserrorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\tvar _insertBranchFormValuesSQLSuccessCB = function() {\n\t\t};\n\n\t\t/*\n\t\t * Commit a branch form to database; each value is a row in the table ec_data:\n\t\t * when committed, the branch form is set as is_cached = 1, is_stored = 0\n\t\t * the is_stored flag is set to one when the main form is saved.\n\t\t * If the user leaves the main form without saving, the branch entries only cached (is_stored = 0) will be deleted\n\t\t */\n\t\tmodule.insertBranchFormValues = function(the_branch_form_values, the_key_value) {\n\n\t\t\tbranch_form_values = the_branch_form_values;\n\t\t\tentry_key = the_key_value;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_insertBranchFormValuesTX, _errorCB, _insertBranchFormValuesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Create));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\n/**\n * @module EC\n * @submodule Create\n *\n */\n\nvar EC = EC || {};\nEC.Create = EC.Create || {};\nEC.Create = ( function(module) {\"use strict\";\n\n\t\tvar form_values;\n\t\tvar entry_key;\n\t\tvar deferred;\n\n\t\tvar _insertFormValuesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = form_values.length;\n\t\t\tvar remote_flag = 0;\n\t\t\tvar query;\n\t\t\tvar obj;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tquery = \"\";\n\t\t\t\tobj = form_values[i];\n\n\t\t\t\tquery += 'INSERT INTO ec_data (';\n\t\t\t\tquery += 'input_id, ';\n\t\t\t\tquery += 'form_id, ';\n\t\t\t\tquery += 'position, ';\n\t\t\t\tquery += 'parent, ';\n\t\t\t\tquery += 'label, ';\n\t\t\t\tquery += 'ref, ';\n\t\t\t\tquery += 'value, ';\n\t\t\t\tquery += 'is_title, ';\n\t\t\t\tquery += 'entry_key, ';\n\t\t\t\tquery += 'type, ';\n\t\t\t\tquery += 'created_on, ';\n\t\t\t\tquery += 'is_data_synced, ';\n\t\t\t\tquery += 'is_remote, ';\n\t\t\t\tquery += 'is_media_synced) ';\n\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\tquery += obj.input_id + '\", \"';\n\t\t\t\tquery += obj.form_id + '\", \"';\n\t\t\t\tquery += obj.position + '\", \"';\n\t\t\t\tquery += obj.parent + '\", \"';\n\t\t\t\tquery += obj.label + '\", \"';\n\t\t\t\tquery += obj.ref + '\", \"';\n\t\t\t\tquery += obj.value + '\", \"';\n\t\t\t\tquery += obj.is_title + '\", \"';\n\t\t\t\tquery += obj.entry_key + '\", \"';\n\t\t\t\tquery += obj.type + '\", \"';\n\t\t\t\tquery += obj.created_on + '\", \"';\n\t\t\t\tquery += obj.is_data_synced + '\", \"';\n\t\t\t\tquery += remote_flag + '\", \"';\n\t\t\t\tquery += obj.is_media_synced + '\");';\n\n\t\t\t\ttx.executeSql(query, [], _insertFormValuesSQLSuccessCB, _errorCB);\n\n\t\t\t}//for\n\n\t\t};\n\n\t\tvar _insertFormValuesSuccessCB = function() {\n\n\t\t\tvar form_id = form_values[0].form_id;\n\t\t\tconsole.log(\"FORM VALUES SAVED SUCCESSFULLY\");\n\n\t\t\t//update entries counter, + 1\n\t\t\t$.when(EC.Update.updateCountersOnSingleEntryInsertion(entry_key, form_id)).then(function(main_form_entry_key) {\n\t\t\t\tdeferred.resolve(main_form_entry_key);\n\t\t\t}, function() {\n\t\t\t\tdeferred.reject();\n\t\t\t});\n\n\t\t};\n\n\t\tvar _insertFormValuesSQLSuccessCB = function() {\n\t\t\tconsole.log(\"FORM VALUE SQL QUERY SUCCESS\");\n\t\t};\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\t/*\n\t\t * Commit a form to database; each value is a row in the table ec_data\n\t\t * a single entry get multiple rows\n\t\t */\n\t\tmodule.insertFormValues = function(the_form_values, the_key_value) {\n\n\t\t\tform_values = the_form_values;\n\t\t\tentry_key = the_key_value;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_insertFormValuesTX, _errorCB, _insertFormValuesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Create));\n","var EC = EC || {};\nEC.Create = EC.Create || {};\nEC.Create = (function (module) {\n    'use strict';\n\n    var hierarchy_forms_data = [];\n    var entries = [];\n    var entry_key;\n    var single_entry_values;\n    var single_entry_key;\n    var local_form_id;\n    var form_total_entries;\n    var self;\n    var deferred;\n\n    //callback for a transaction error\n    module.errorCB = function (the_tx, the_error) {\n        console.log(EC.Utils.TRANSACTION_ERROR);\n        console.log(the_error);\n        console.log(the_tx);\n    };\n\n    var _insertSingleEntryValues = function (the_entry_values, the_entry_key) {\n\n        single_entry_values = the_entry_values;\n        single_entry_key = the_entry_key;\n\n        EC.db.transaction(_insertSingleEntryValuesTX, EC.Create.errorCB, _insertSingleEntryValuesSuccessCB);\n\n    };\n\n    module.insertAllFormsData = function (the_hierarchy_data) {\n\n        self = this;\n        hierarchy_forms_data = the_hierarchy_data;\n        deferred = new $.Deferred();\n\n        //insert hierarchy entries recursively\n        self.insertEntries(hierarchy_forms_data.shift());\n\n        return deferred.promise();\n\n    };\n\n    module.insertEntries = function (the_single_form_values) {\n\n        var i;\n        var iLength;\n        var current_row;\n        var current_entry_key;\n        var current_entry_values = [];\n\n        //get current form details and data rows the first time the function is called\n        if (the_single_form_values.hasOwnProperty('form_name')) {\n\n            local_form_id = EC.Utils.getLocalFormID(the_single_form_values.form_name);\n            form_total_entries = the_single_form_values.total_entries;\n            entries = the_single_form_values.data_rows;\n        } else {\n            //on subsequent calls only the elements left to insert are passed\n            entries = the_single_form_values;\n        }\n\n        current_entry_key = entries[0].entry_key;\n        iLength = entries.length;\n\n        for (i = 0; i < iLength; i++) {\n            //fill in form_values with only the rows for a single entry, checking entry_key value\n            if (entries[i].entry_key === current_entry_key) {\n                current_entry_values.push(entries[i]);\n            } else {\n                break;\n            }\n        }//for\n\n        //remove current entry values from main entries array and exit\n        entries.splice(0, current_entry_values.length);\n\n        //save the rows currently in form_values to database, as they all belong to the same form\n        _insertSingleEntryValues(current_entry_values, current_entry_key);\n\n    };\n\n    var _insertSingleEntryValuesTX = function (tx) {\n\n        var i;\n        var iLength = single_entry_values.length;\n        var query;\n        var obj;\n        var local_input_id;\n\n        for (i = 0; i < iLength; i++) {\n\n            query = '';\n            obj = single_entry_values[i];\n            local_input_id = EC.Utils.getLocalInputID(obj.ref);\n\n            query += 'INSERT INTO ec_data (';\n            query += 'input_id, ';\n            query += 'form_id, ';\n            query += 'position, ';\n            query += 'parent, ';\n            query += 'label, ';\n            query += 'ref, ';\n            query += 'value, ';\n            query += 'is_title, ';\n            query += 'entry_key, ';\n            query += 'type, ';\n            query += 'created_on, ';\n            query += 'is_data_synced, ';\n            query += 'is_media_synced) ';\n            query += 'VALUES (\"';\n            query += local_input_id + '\", \"';\n            query += local_form_id + '\", \"';\n            query += obj.position + '\", \"';\n            query += obj.parent + '\", \"';\n            query += obj.label + '\", \"';\n            query += obj.ref + '\", \"';\n            query += obj.value + '\", \"';\n            query += obj.is_title + '\", \"';\n            query += obj.entry_key + '\", \"';\n            query += obj.type + '\", \"';\n            query += obj.created_on + '\", \"';\n            query += obj.is_data_synced + '\", \"';\n            query += obj.is_media_synced + '\");';\n\n            tx.executeSql(query, [], _insertSingleEntryValuesSQLSuccessCB, EC.Create.errorCB);\n\n        }//for\n    };\n\n    var _insertSingleEntryValuesSQLSuccessCB = function () {\n\n        console.log('SINGLE ENTRY VALUE SQL INSERT SUCCESS');\n    };\n\n    var _insertSingleEntryValuesSuccessCB = function () {\n\n        console.log('SINGLE ENTRY VALUES SAVED SUCCESSFULLY');\n\n        //insert next entries if any\n        if (entries.length > 0) {\n            self.insertEntries(entries);\n        } else {\n            //update entries counter for the current form. Resolved: all hierarchy data saved; Rejected: still data to save\n            $.when(EC.Update.updateCountersOnEntriesRestore(local_form_id, form_total_entries, hierarchy_forms_data)).then(function () {\n                //all forms updated\n                deferred.resolve();\n            }, function (the_forms_data_left) {\n                //insert entries for next form\n                self.insertEntries(the_forms_data_left.shift());\n            });\n        }\n\n    };\n\n    return module;\n\n}(EC.Create));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\"use strict\";\n\n\t\tvar forms = [];\n\t\tvar action = \"\";\n\t\tvar project_name;\n\t\tvar has_branches;\n\t\tvar deferred;\n\t\tvar project_id;\n\n\t\tvar _deleteAllEntriesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar delete_branches_query;\n\t\t\tvar delete_query = \"DELETE FROM ec_data WHERE form_id=?\";\n\t\t\tvar update_count_query = \"UPDATE ec_forms SET entries=? WHERE _id=?\";\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(delete_query, [forms[i]._id], _deleteAllEntriesSQLSuccessCB, _deleteAllEntriesErrorCB);\n\t\t\t\ttx.executeSql(update_count_query, [0, forms[i]._id]);\n\t\t\t}\n\n\t\t\tif (has_branches) {\n\t\t\t\tdelete_branches_query = \"DELETE FROM ec_branch_data WHERE form_id IN (SELECT _id FROM ec_branch_forms WHERE project_id=?)\";\n\t\t\t\ttx.executeSql(delete_branches_query, [project_id], _deleteAllEntriesSQLSuccessCB, _deleteAllEntriesErrorCB);\n\t\t\t}\n\n\t\t};\n\n\t\tvar _deleteAllEntriesSuccessCB = function() {\n\n\t\t\tvar forms = JSON.parse(window.localStorage.forms);\n\t\t\tvar i;\n\t\t\tvar iLength;\n\n\t\t\tswitch(action) {\n\n\t\t\t\tcase EC.Const.RESTORE:\n\t\t\t\t//delete media files (if any) \n\t\t\t\t\t$.when(EC.File.deleteAllMedia(project_name, false, [EC.Const.PHOTO_DIR, EC.Const.AUDIO_DIR, EC.Const.VIDEO_DIR])).then(function() {\n\t\t\t\t\t\tdeferred.resolve(forms);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.DELETE:\n\n\t\t\t\t\t//update entries count in forms array in localStorage\n\t\t\t\t\tiLength = forms.length;\n\t\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\t\tforms[i].entries = 0;\n\t\t\t\t\t}\n\t\t\t\t\twindow.localStorage.forms = JSON.stringify(forms);\n\n\t\t\t\t\t//delete media files (if any) \n\t\t\t\t\t$.when(EC.File.deleteAllMedia(project_name, false, [EC.Const.PHOTO_DIR, EC.Const.AUDIO_DIR, EC.Const.VIDEO_DIR])).then(function() {\n\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t};\n\n\t\tvar _deleteAllEntriesErrorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\tvar _deleteAllEntriesSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tmodule.deleteAllEntries = function(the_action, the_project_name) {\n\n\t\t\tforms = JSON.parse(window.localStorage.forms);\n\t\t\tproject_id = parseInt(window.localStorage.project_id, 10);\n\t\t\taction = the_action;\n\t\t\tproject_name = the_project_name;\n\t\t\thas_branches = EC.Utils.projectHasBranches();\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_deleteAllEntriesTX, _deleteAllEntriesErrorCB, _deleteAllEntriesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid: true*/\n/*global $, jQuery*/\n/*\n *\n * @method deleteAllSynced\n * deletes all the synced entries for a project. It also deletes any linked branches and any media files linked to the synced entries\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar project_name;\n\t\tvar project_id;\n\t\tvar forms;\n\t\tvar current_form;\n\t\tvar counter;\n\t\tvar deferred;\n\n\t\tfunction _doDeletion() {\n\n\t\t\t//delete synced hierarchy entries for the current form\n\t\t\t$.when(EC.Delete.removeSyncedHierarchyEntries(current_form._id)).then(function() {\n\n\t\t\t\tif (forms.length > 0) {\n\t\t\t\t\t//delete synced entries for next form\n\t\t\t\t\t_deleteSynced(forms.shift());\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t//update total of synced hierachy entries deletes in ec_forms table for each form\n\t\t\t\t\t// of this project\n\t\t\t\t\t$.when(EC.Update.updateCountersOnSyncedEntriesDeletion(self.deletion_counters)).then(function() {\n\n\t\t\t\t\t\t//remove files (if any)\n\t\t\t\t\t\tif (self.deletion_files.length > 0) {\n\t\t\t\t\t\t\t$.when(EC.File.remove(project_name, self.deletion_files)).then(function() {\n\t\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\n\t\tfunction _handleBranches(the_entry_keys) {\n\n\t\t\tvar deferred = new $.Deferred();\n\t\t\tvar entry_keys = the_entry_keys;\n\n\t\t\t//get all the branch files linked to synced entries (if any)\n\t\t\t$.when(EC.Select.getBranchSyncedFiles(entry_keys)).then(function(the_files) {\n\n\t\t\t\tself.deletion_files = self.deletion_files.concat(the_files);\n\n\t\t\t\t//delete all branch entries which are both data and media synced\n\t\t\t\t$.when(EC.Delete.removeSyncedBranchEntries(entry_keys)).then(function() {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn deferred.promise();\n\t\t}\n\n\n\t\tmodule.deleteAllSynced = function(the_project_id, the_project_name, the_forms) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tproject_name = the_project_name;\n\t\t\tproject_id = the_project_id;\n\t\t\tforms = the_forms;\n\t\t\tself.deletion_synced_entry_keys = [];\n\t\t\tself.deletion_files = [];\n\t\t\tself.deletion_counters = [];\n\n\t\t\t//delete synced entries per each for recursively\n\t\t\t_deleteSynced(forms.shift());\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\tfunction _deleteSynced(the_current_form) {\n\n\t\t\tcurrent_form = the_current_form;\n\n\t\t\t/*\n\t\t\t * Select all the synced entries, we need the hierarchy\n\t\t\t * entry keys to delete any branches\n\t\t\t *\n\t\t\t */\n\t\t\t$.when(EC.Select.getSyncedEntryKeys(current_form._id)).then(function(the_entry_keys) {\n\n\t\t\t\tself.deletion_synced_entry_keys = the_entry_keys;\n\t\t\t\tself.deletion_counters.push({form_id: current_form._id, amount: the_entry_keys.length});\n\n\t\t\t\tif (current_form.has_media === 1) {\n\n\t\t\t\t\t//get hierarchy files to delete (synced only)\n\t\t\t\t\t$.when(EC.Select.getHierarchySyncedFiles(current_form._id)).then(function(the_files) {\n\n\t\t\t\t\t\tself.deletion_files = self.deletion_files.concat(the_files);\n\n\t\t\t\t\t\t//any branches?\n\t\t\t\t\t\tif (current_form.has_branches === 1) {\n\n\t\t\t\t\t\t\t//get branch files and delete branch entries\n\t\t\t\t\t\t\t$.when(_handleBranches(self.deletion_synced_entry_keys)).then(function() {\n\t\t\t\t\t\t\t\t_doDeletion();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t_doDeletion();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t//no media for this form, any branches?\n\t\t\t\t\tif (current_form.has_branches === 1) {\n\n\t\t\t\t\t\t//get branch files and delete branch entries\n\t\t\t\t\t\t$.when(_handleBranches(self.deletion_synced_entry_keys)).then(function() {\n\t\t\t\t\t\t\t_doDeletion();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t_doDeletion();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn module;\n\n\t}(EC.Delete));\n\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar rows_to_delete;\n\t\tvar deferred;\n\t\tvar media_types;\n\n\t\t//select and count the rows we are going to delete to be able to update the\n\t\t// counter later\n\t\tvar _deleteBranchEntryTX = function(tx) {\n\n\t\t\tvar query = \"DELETE FROM ec_branch_data WHERE _id=?\";\n\t\t\tvar i;\n\t\t\tvar iLength = rows_to_delete.length;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t/* Get file names to delete(if any) for media types when the value stored is not\n\t\t\t\t * empty\n\t\t\t\t * n.b: media files cached are not deleted by Epicollect5, the system can delete\n\t\t\t\t * them if it needs resources anyway\n\t\t\t\t *\n\t\t\t\t * It be good to have Epicollect5 purge orphan cached files in the future\n\t\t\t\t * TODO\n\t\t\t\t */\n\t\t\t\tif (media_types.indexOf(rows_to_delete[i].type) !== -1 && rows_to_delete[i].value.stored !== \"\") {\n\t\t\t\t\tself.deletion_files.push({\n\t\t\t\t\t\tvalue : rows_to_delete[i].value.stored,\n\t\t\t\t\t\ttype : rows_to_delete[i].type\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\ttx.executeSql(query, [rows_to_delete[i]._id], null, _deleteBranchEntryErrorCB);\n\t\t\t}\n\t\t};\n\n\t\tvar _deleteBranchEntrySuccessCB = function() {\n\n\t\t\t//any file to delete?\n\t\t\tif (self.deletion_files.length > 0) {\n\t\t\t\t$.when(EC.File.remove(window.localStorage.project_name, self.deletion_files)).then(function() {\n\t\t\t\t\tdeferred.resolve(true);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t};\n\n\t\tvar _deleteBranchEntryErrorCB = function() {\n\t\t\tdeferred.reject();\n\t\t};\n\t\t/**\n\t\t * @method deleteBranchEntry Deletes all the rows belonging to a single branch\n\t\t * entry.\n\t\t * @param {Object} the_rows Rows for a single entry to be deleted, as an array of\n\t\t * objects containing the row _id\n\t\t * @param {Object} the_entry_key The entry key value for the selected branch\n\t\t * entry\n\t\t */\n\t\tmodule.deleteBranchEntry = function(the_rows) {\n\n\t\t\tself = this;\n\t\t\trows_to_delete = the_rows;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tmedia_types = [EC.Const.AUDIO, EC.Const.PHOTO, EC.Const.VIDEO];\n\t\t\tself.deletion_files = [];\n\n\t\t\tEC.db.transaction(_deleteBranchEntryTX, _deleteBranchEntryErrorCB, _deleteBranchEntrySuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\"use strict\";\n\n\t\tvar _deleteCachedBranchEntriesTX = function(tx) {\n\n\t\t\tvar delete_query = \"DELETE FROM ec_branch_data WHERE is_cached=? AND is_stored=?\";\n\n\t\t\ttx.executeSql(delete_query, [1, 0], _deleteCachedBranchEntriesSQLSuccessCB, EC.Delete.errorCB);\n\n\t\t};\n\n\t\tvar _deleteCachedBranchEntriesSuccessCB = function() {\n\n\t\t\tconsole.log(\"Cached branch entries deleted\");\n\n\t\t\tEC.Routing.changePage(EC.Const.INDEX_VIEW);\n\n\t\t};\n\n\t\tvar _deleteCachedBranchEntriesSQLSuccessCB = function(the_tx, the_result) {\n\n\t\t\tconsole.log(the_result);\n\t\t};\n\n\t\tmodule.deleteCachedBranchEntries = function() {\n\n\t\t\tEC.db.transaction(_deleteCachedBranchEntriesTX, EC.Delete.errorCB, _deleteCachedBranchEntriesSuccessCB);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * @method deleteChildEntries deletes all the child entries linked to a hierarchy entry\n * \n * It also deletes all the branches and get all the files linked to the braches (to be deleted later)\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar child_hierarchy_files;\n\t\tvar child_branch_files;\n\t\tvar current_child_form;\n\n\t\tmodule.deleteChildEntries = function() {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tcurrent_child_form = EC.Delete.children_forms.shift();\n\t\t\tchild_hierarchy_files = [];\n\t\t\tchild_branch_files = [];\n\n\t\t\t_removeChildren();\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\t\t\n\t\t//recursively delete the children entries\n\t\tfunction _doChildrenDeletion() {\n\t\t\t//delete all the hierarchy children data\n\t\t\t$.when(EC.Delete.removeHierarchyChildrenEntries()).then(function() {\n\n\t\t\t\t//another child form to delete entries from?\n\t\t\t\tif (EC.Delete.children_forms.length > 0) {\n\n\t\t\t\t\tcurrent_child_form = EC.Delete.children_forms.shift();\n\n\t\t\t\t\t//delete children a level down recursively\n\t\t\t\t\t_removeChildren();\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t//all children deleted\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction _removeChildren() {\n\n\t\t\t/*\n\t\t\t * Cache child entries total and child entries details we are going to delete: we\n\t\t\t * do this to\n\t\t\t * update the entry counters after deletion (per each form) and to delete any\n\t\t\t * children\n\t\t\t * attached to the selected child entry. We also need the children entry keys to\n\t\t\t * grab all the files attached\n\t\t\t *\n\t\t\t * We get:\n\t\t\t *  - all the children entries like:\n\t\t\t * { count: 3, entry_key: <the_entry_key>, form_id: <the_form_id>, parent :\n\t\t\t * <the_parent_etry_key>}\n\t\t\t *  - the total of children entries and the child form id\n\t\t\t * { amount: <the_amount>, form_id: <the_form_id>}\n\t\t\t */\n\t\t\t$.when(EC.Select.getChildEntriesForDeletion()).then(function(the_entries, the_counters) {\n\t\t\t\t\n\t\t\t\t//cache child entries and files in module object\n\t\t\t\tself.deletion_entries = the_entries;\n\t\t\t\tself.deletion_counters.push(the_counters);\n\n\t\t\t\t//Any media attached to delete?\n\t\t\t\tif (current_child_form.has_media === 1) {\n\n\t\t\t\t\t/* Select all the hierarchy children media files to be deleted\n\t\t\t\t\t * (loop al the keys as we migth have more than one child\n\t\t\t\t\t */\n\t\t\t\t\t$.when(EC.Select.getHierarchyChildrenFiles(current_child_form)).then(function(the_files) {\n\n\t\t\t\t\t\t//cache files to be deleted\n\t\t\t\t\t\tself.deletion_files = self.deletion_files.concat(the_files);\n\n\t\t\t\t\t\t//any branches for the children?\n\t\t\t\t\t\tif (current_child_form.has_branches === 1) {\n\n\t\t\t\t\t\t\t//get branch files and delete branch entries\n\t\t\t\t\t\t\t$.when(_handleChildBranches()).then(function() {\n\t\t\t\t\t\t\t\t_doChildrenDeletion();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t_doChildrenDeletion();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t//no media, any branches for the children then?\n\t\t\t\t\tif (current_child_form.has_branches === 1) {\n\n\t\t\t\t\t\t//get branch files and delete branch entries\n\t\t\t\t\t\t$.when(_handleChildBranches()).then(function() {\n\t\t\t\t\t\t\t_doChildrenDeletion();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t_doChildrenDeletion();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction _handleChildBranches() {\n\n\t\t\tvar deferred = new $.Deferred();\n\n\t\t\t//get all the branch files (if any)\n\t\t\t$.when(EC.Select.getBranchChildrenFiles()).then(function(the_files) {\n\n\t\t\t\tself.deletion_files = self.deletion_files.concat(the_files);\n\n\t\t\t\t//delete all branch entries linked to this hierarchy entry\n\t\t\t\t$.when(EC.Delete.removeLinkedBranchChildEntries()).then(function() {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn deferred.promise();\n\n\t\t}\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\t\t\n\t\tvar self;\n\t\tvar entry_key;\n\t\tvar current_form;\n\t\tvar current_child_form;\n\t\tvar hierarchy_files = [];\n\t\tvar branch_files = [];\n\t\tvar has_branches;\n\t\tvar deferred;\n\t\tvar project_name;\n\n\t\tfunction _handleBranches(the_entry_key) {\n\n\t\t\tvar deferred = new $.Deferred();\n\t\t\tvar entry_key = the_entry_key;\n\n\t\t\t//get all the branch files (if any)\n\t\t\t$.when(EC.Select.getBranchFiles(entry_key)).then(function(the_files) {\n\n\t\t\t\tself.deletion_files = self.deletion_files.concat(the_files);\n\n\t\t\t\t//delete all branch entries linked to this hierarchy entry\n\t\t\t\t$.when(EC.Delete.removeLinkedBranchEntries(entry_key)).then(function() {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn deferred.promise();\n\t\t}\n\n\t\t/**\n\t\t * @method deleteEntry Deletes all the rows belonging to a single entry. It will\n\t\t * also delete all the children entries and branch entries linked, plus all the\n\t\t * files associated with these\n\t\t * entries\n\t\t * @param {Object} the_rows Rows for a single entry to be deleted, as an array of\n\t\t * objects containing the row _id\n\t\t * @param {Object} the_entry_key The entry key value for the selected entry\n\t\t */\n\t\tmodule.deleteEntry = function(the_project_name, the_rows, the_entry_key, the_current_form_id) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tentry_key = the_entry_key;\n\t\t\thas_branches = EC.Utils.projectHasBranches();\n\t\t\tcurrent_form = EC.Utils.getFormByID(the_current_form_id);\n\t\t\tproject_name = the_project_name;\n\t\t\tself.deletion_files = [];\n\t\t\tself.deletion_counters = [];\n\t\t\tself.deletion_entries = [];\n\t\t\tself.children_forms = EC.Utils.getChildrenForms(current_form._id);\n\n\t\t\t/*\n\t\t\t * select COUNT(*) and rows we are going to delete: we do this to update the\n\t\t\t * entry counter after deletion and to delete any children attached to the\n\t\t\t * selected antry\n\t\t\t */\n\t\t\t$.when(EC.Select.getHierarchyEntriesForDeletion(entry_key)).then(function(the_entries, the_counters) {\n\n\t\t\t\tself.deletion_entries = the_entries;\n\t\t\t\tself.deletion_counters = the_counters;\n\n\t\t\t\t//Does this entry has any media attached to delete?\n\t\t\t\tif (current_form.has_media === 1) {\n\n\t\t\t\t\t//select all the hierarchy media files to be deleted\n\t\t\t\t\t$.when(EC.Select.getHierarchyFiles(current_form, entry_key)).then(function(the_files) {\n\n\t\t\t\t\t\t//cache files to be deleted\n\t\t\t\t\t\tself.deletion_files = self.deletion_files.concat(the_files);\n\n\t\t\t\t\t\t//any branches?\n\t\t\t\t\t\tif (current_form.has_branches === 1) {\n\n\t\t\t\t\t\t\t//get branch files and delete branch entries\n\t\t\t\t\t\t\t$.when(_handleBranches(entry_key)).then(function() {\n\t\t\t\t\t\t\t\t_doDeletion();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t_doDeletion();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t//no media, any branches?\n\t\t\t\t\tif (current_form.has_branches === 1) {\n\n\t\t\t\t\t\t//get branch files and delete branch entries\n\t\t\t\t\t\t$.when(_handleBranches(entry_key)).then(function() {\n\t\t\t\t\t\t\t_doDeletion();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t_doDeletion();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\tfunction _doDeletion() {\n\n\t\t\t//delete the hierarchy entry (the one currently selected by the user)\n\t\t\t$.when(EC.Delete.removeHierarchyEntry(entry_key)).then(function() {\n\n\t\t\t\t//TODO delete all the media files -> wait, check for children and children files\n\n\t\t\t\t//TODO delete hierarchy files, branches and branch files if any\n\n\t\t\t\t//delete children recursively if any\n\t\t\t\tif (self.children_forms.length > 0) {\n\n\t\t\t\t\tconsole.log(\"delete children and branches and media attached\");\n\n\t\t\t\t\t$.when(EC.Delete.deleteChildEntries()).then(function() {\n\n\t\t\t\t\t\t//all children deleted, update counters (recursively) for all the forms\n\t\t\t\t\t\tconsole.log(\"all children deleted\");\n\t\t\t\t\t\tconsole.log(self.deletion_counters);\n\n\t\t\t\t\t\t$.when(EC.Update.updateCountersOnSingleEntryDeletion(self.deletion_counters)).then(function() {\n\t\t\t\t\t\t\t//All done\n\n\t\t\t\t\t\t\t//any media files to remove?\n\t\t\t\t\t\t\tif (self.deletion_files.length > 0) {\n\n\t\t\t\t\t\t\t\t$.when(EC.File.remove(project_name, self.deletion_files)).then(function() {\n\n\t\t\t\t\t\t\t\t\tconsole.log(project_name + \" media deleted\");\n\t\t\t\t\t\t\t\t\tdeferred.resolve(true);\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\t\tdeferred.resolve(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//no children, just update counters now (recursively) for all the forms\n\t\t\t\t\t$.when(EC.Update.updateCountersOnSingleEntryDeletion(self.deletion_counters)).then(function() {\n\t\t\t\t\t\t//All done\n\t\t\t\t\t\tdeferred.resolve(true);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = (function (module) {\n    'use strict';\n\n    var project_id;\n    var project_name;\n    var deferred;\n\n    var _deleteProjectTX = function (tx) {\n\n        //enable PRAGMA to use foreign keys constraint: it is OFF by default\n        EC.db.executeSql('PRAGMA foreign_keys=ON;', [], function (res) {\n            console.log('PRAGMA res: ' + JSON.stringify(res));\n\n            //hack to make it work on Android https://github.com/litehelpers/Cordova-sqlite-storage/issues/45\n            if (window.device.platform === EC.Const.ANDROID) {\n                EC.db.executeSql('PRAGMA foreign_keys;', [], function (res) {\n                    console.log('PRAGMA res: ' + JSON.stringify(res));\n                });\n            }\n        });\n\n        var query = 'DELETE FROM ec_projects WHERE _id=?';\n        tx.executeSql(query, [project_id], _deleteProjectSQLSuccessCB, _deleteProjectErrorCB);\n    };\n\n    var _deleteProjectSQLSuccessCB = function (the_tx, the_result) {\n        console.log(the_result);\n    };\n\n    var _deleteProjectSuccessCB = function () {\n\n        //delete media files (if any) for the project just deleted\n        $.when(EC.File.deleteAllMedia(project_name, true, [EC.Const.PHOTO_DIR, EC.Const.AUDIO_DIR, EC.Const.VIDEO_DIR])).then(function () {\n            deferred.resolve();\n        });\n    };\n\n    var _deleteProjectErrorCB = function (the_tx, the_result) {\n        console.log(the_result);\n        deferred.reject();\n    };\n\n    //Delete a project and related tables: database integrity will be kept with\n    // triggers (see EC.DBAdapter)\n    module.deleteProject = function (the_project_id, the_project_name) {\n\n        project_id = the_project_id;\n        project_name = the_project_name;\n        deferred = new $.Deferred();\n\n        EC.db.transaction(_deleteProjectTX, _deleteProjectErrorCB, _deleteProjectSuccessCB);\n\n        return deferred.promise();\n    };\n\n    return module;\n\n}(EC.Delete));\n","var EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = (function (module) {\n    'use strict';\n\n    module.deletion_counters = [];\n    module.deletion_entries = [];\n    module.deletion_files = [];\n    module.children_forms = [];\n\n    //callback for a transaction error\n    module.errorCB = function (the_error) {\n        console.log(EC.Const.TRANSACTION_ERROR);\n        console.log('%c' + the_error.message, 'color: red');\n    };\n\n    return module;\n}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * @method removeHierarchyChildrenEntries\n * \n * Removes all the children entries of a hierarchy entry (direct children)\n * \n * This method is called recursively to delete all the children for immediate parent entries\n * \n * EC.Delete.deletion_entries is an array containign all the parent entry keys used to remove the children\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar parent;\n\t\tvar deferred;\n\t\tvar entries;\n\t\tvar parent_key;\n\n\t\tvar _removeHierarchyChildrenEntriesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = entries.length;\n\t\t\tvar query = \"DELETE FROM ec_data WHERE parent=?\";\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(query, [entries[i].parent], null, self.errorCB);\n\t\t\t}\n\t\t};\n\n\t\tvar _removeHierarchyChildrenEntriesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tmodule.removeHierarchyChildrenEntries = function() {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tentries = self.deletion_entries;\n\n\t\t\tEC.db.transaction(_removeHierarchyChildrenEntriesTX, self.errorCB, _removeHierarchyChildrenEntriesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * @method removeHierarchyEntry\n * remove all the rows belonging to a hierarchy entry\n *\n * @param {String} the_hierarchy_entry_key \n * the entry key of the hierarchy entry\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\t\t\n\t\tvar self;\n\t\tvar hierarchy_entry_key;\n\t\tvar deferred;\n\t\t\n\t\tvar _removeHierarchyEntryTX = function(tx){\n\t\t\t\n\t\t\t//delete all rows belonging to this entry \n\t\t\tvar query = \"DELETE FROM ec_data WHERE entry_key=?\";\n\t\t\ttx.executeSql(query, [hierarchy_entry_key], null, self.errorCB);\n\t\t};\n\t\t\n\t\tvar _removeHierarchyEntrySuccessCB = function(){\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tmodule.removeHierarchyEntry = function(the_hierarchy_entry_key) {\n\t\t\t\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\thierarchy_entry_key = the_hierarchy_entry_key;\n\n\t\t\tEC.db.transaction(_removeHierarchyEntryTX, self.errorCB, _removeHierarchyEntrySuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * @method removeLinkedBranchChildEntries remove all the branch entries linked to\n * a child of a hierarchy entry\n *\n * no parameters are passed, as when this method is called the object\n * self.deletion_entries will contain all the entries entry key.\n * \n * Branches are linked to a hierarchy entry via the hierarchy entry key\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar deferred;\n\t\tvar entries;\n\n\t\tvar _removeLinkedBranchChildEntriesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = entries.length;\n\t\t\tvar query = \"DELETE FROM ec_branch_data WHERE hierarchy_entry_key_value=?\";\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(query, [entries[i].entry_key], null, self.errorCB);\n\t\t\t}\n\t\t};\n\n\t\tvar _removeLinkedBranchChildEntriesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tmodule.removeLinkedBranchChildEntries = function() {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\tentries = self.deletion_entries;\n\n\t\t\tEC.db.transaction(_removeLinkedBranchChildEntriesTX, self.errorCB, _removeLinkedBranchChildEntriesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\t\t\n\t\tvar self;\n\t\tvar hierarchy_entry_key;\n\t\tvar deferred;\n\t\t\n\t\tvar _removeLinkedBranchEntriesSQLSuccessCB = function(the_tx, the_result){\n\t\t};\n\t\t\n\t\tvar _removeLinkedBranchEntriesTX = function(tx){\n\t\t\t\n\t\t\t//delete all branches linked to this entry key (if any)\n\t\t\tvar delete_branches_query = \"DELETE FROM ec_branch_data WHERE hierarchy_entry_key_value=?\";\n\t\t\ttx.executeSql(delete_branches_query, [hierarchy_entry_key], _removeLinkedBranchEntriesSQLSuccessCB, self.errorCB);\n\t\t};\n\t\t\n\t\tvar _removeLinkedBranchEntriesSuccessCB = function(){\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tmodule.removeLinkedBranchEntries = function(the_hierarchy_entry_key) {\n\t\t\t\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\thierarchy_entry_key = the_hierarchy_entry_key;\n\n\t\t\tEC.db.transaction(_removeLinkedBranchEntriesTX, self.errorCB, _removeLinkedBranchEntriesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid:true*/\n/*global $, jQuery*/\n/*\n *\n * Remove all the synced branch entries linked to synced hierarchy entries, lopping all the entry keys of the hierarchy entries\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar hierarchy_entry_keys;\n\t\tvar deferred;\n\n\t\tvar _removeSyncedBranchEntriesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = hierarchy_entry_keys.length;\n\t\t\tvar query = \"DELETE FROM ec_branch_data WHERE hierarchy_entry_key_value=? AND is_data_synced=?\";\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\ttx.executeSql(query, [hierarchy_entry_keys[i], 1], null, self.errorCB);\n\t\t\t}\n\t\t};\n\n\t\tvar _removeSyncedBranchEntriesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n \n\t\tmodule.removeSyncedBranchEntries = function(the_hierarchy_entry_keys) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\t\t\thierarchy_entry_keys = the_hierarchy_entry_keys;\n\n\t\t\tEC.db.transaction(_removeSyncedBranchEntriesTX, self.errorCB, _removeSyncedBranchEntriesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true, stupid: true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Delete = EC.Delete || {};\nEC.Delete = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar self;\n\t\tvar form_id;\n\t\tvar deferred;\n\n\t\tvar _removeSyncedHierarchyEntriesTX = function(tx) {\n\n\t\t\t//delete all rows belonging to this form which are data synced\n\t\t\tvar query = \"DELETE FROM ec_data WHERE form_id=? AND is_data_synced=?\";\n\t\t\ttx.executeSql(query, [form_id, 1], null, self.errorCB);\n\t\t};\n\n\t\tvar _removeSyncedHierarchyEntriesSuccessCB = function() {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tmodule.removeSyncedHierarchyEntries = function(the_form_id) {\n\n\t\t\tself = this;\n\t\t\tform_id = the_form_id;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_removeSyncedHierarchyEntriesTX, self.errorCB, _removeSyncedHierarchyEntriesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Delete));\n","/* global LocalFileSystem */\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = (function (module) {\n    'use strict';\n\n    var forms;\n    var project_name;\n    var project_id;\n    var backup_path;\n\n    /**\n     * @method _writeFile Write the project backup object to a file <project_name>.txt\n     * The file is written to LocalFileSystem.PERSISTENT, whatever that resolves to (it depends on the device and platform)\n     * @param {Object} the_content\n     */\n    function _writeFile(the_content) {\n        function fail(the_error) {\n            console.log(the_error);\n        }\n\n\n        console.log(JSON.stringify(the_content));\n\n        var txt_content = JSON.stringify(the_content);\n        var filename = project_name + '.txt';\n        var deferred = new $.Deferred();\n\n        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);\n\n        function gotFS(the_fileSystem) {\n\n            console.log(JSON.stringify(the_fileSystem));\n            backup_path = the_fileSystem.root.fullPath;\n\n            the_fileSystem.root.getFile(filename, {\n                create: true,\n                exclusive: false\n            }, gotFileEntry, fail);\n        }\n\n        function gotFileEntry(fileEntry) {\n            fileEntry.createWriter(gotFileWriter, fail);\n        }\n\n        function gotFileWriter(writer) {\n\n            writer.onwritestart = function () {\n            };\n\n            writer.onwriteend = function (evt) {\n\n                //file written successfully,\n                deferred.resolve();\n                console.log('Content of file:' + txt_content);\n            };\n            //write content to file\n            writer.write(txt_content);\n        }\n\n        return deferred.promise();\n    }\n\n    /** @method backup Get data to backup for the current project (saving tables ec_data and ec_branch_data)\n     *\n     * @param {Object} the_forms the hierarchy forms\n     * @param {Object} the_project_name current project name\n     */\n    module.backup = function (the_forms, the_project_name, the_project_id) {\n\n        var deferred = new $.Deferred();\n        forms = the_forms;\n        project_name = the_project_name;\n        project_id = the_project_id;\n\n        //get data rows for all the forms for this project\n        $.when(EC.Select.getAllProjectEntries(forms, project_id)).then(function (the_entries) {\n            $.when(_writeFile(the_entries)).then(function () {\n                deferred.resolve();\n            });\n        });\n\n        return deferred.promise();\n\n    };\n\n    return module;\n\n}(EC.File));\n","/*global $, jQuery, LocalFileSystem, cordova*/\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = (function (module) {\n    'use strict';\n\n    /*\n     * Copyvthe video file from app private folder to app cache folder changing the file name to the current timestamp (video extension will be always .mp4)\n     *\n     * We do so to make it playable via a third party application (ANDROID only, and it needs a better implementation on 4.4+)\n     */\n    var video_path;\n    var stored_filename;\n    var cached_filename;\n    var is_branch;\n    var deferred;\n\n    module.copyVideo = function (the_video_path, is_branch_flag) {\n\n        deferred = new $.Deferred();\n        video_path = the_video_path;\n        is_branch = is_branch_flag;\n        cached_filename = EC.Utils.getTimestamp() + '.mp4';\n\n        function fail(error) {\n            console.log(error);\n        }\n\n        function onLFSSuccess(the_video_file_entry) {\n\n            function gotFS(the_file_system) {\n\n                var fs = the_file_system;\n                console.log(fs);\n                //move file to externalCacheDirectory (directory entry pointing to external cache folder)\n                the_video_file_entry.copyTo(fs, cached_filename, function (success) {\n                    deferred.resolve(cached_filename);\n                }, fail);\n            }\n\n            function fail(error) {\n                console.log(error);\n            }\n            //request temporary folder from file system\n            window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, gotFS, fail);\n        }\n\n        //get file entry resolving file full path\n        window.resolveLocalFileSystemURI(video_path, onLFSSuccess, fail);\n\n        return deferred.promise();\n\n    };\n\n    return module;\n\n}(EC.File));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, LocalFileSystem*/\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = (function (module) {\n    'use strict';\n\n    /* The new file system API will throw an error when trying to create a folder if\n     * a parent does not exist\n     * therefore we have to create the folders to contain the media files.\n     *\n     * -images\n     * -audios\n     * -videos\n     *\n     *\n     * Android: folders are created in 'data/data/<package_name>/files/'\n     * iOS: in the Documents folder as the iOS permanent storage\n     *\n     *\n     *\n     */\n\n    var dirs;\n    var entry;\n    var deferred;\n    var platform;\n\n    function onCreateSuccess() {\n        _createMediaDir();\n    }\n\n    function onCreateFail(error) {\n        console.log(error);\n        deferred.reject();\n    }\n\n    function _createMediaDir() {\n\n        var media_dir;\n\n        if (dirs.length > 0) {\n\n            media_dir = dirs.shift();\n\n            //quick hack for Android\n            //todo: fix media folder paths on Android\n            if (platform === EC.Const.ANDROID) {\n                media_dir = media_dir.replace('/files/', '');\n            }\n\n            //create a media folder: images, audios, videos\n            entry.getDirectory(media_dir, {\n                create: true,\n                exclusive: false\n            }, onCreateSuccess, onCreateFail);\n\n        }\n        else {\n            console.log('Media folders created');\n            window.localStorage.are_media_folders_created = 1;\n            deferred.resolve();\n        }\n    }\n\n    function onIOSRFSSuccess(the_fileSystem) {\n\n\n        if (platform === EC.Const.ANDROID) {\n            entry = the_fileSystem;\n        }\n        else {\n            // on iOS we are still using the old invocation...to be updated\n            entry = the_fileSystem.root;\n        }\n\n        //create media folders recursively\n        _createMediaDir();\n\n    }\n\n    function onIOSRFSError(error) {\n        console.log(error);\n        deferred.reject();\n    }\n\n    module.createMediaDirs = function () {\n\n        deferred = new $.Deferred();\n        platform = window.device.platform;\n\n        //if folders are already created, resolve immediately\n        if (window.localStorage.are_media_folders_created) {\n            deferred.resolve();\n        }\n        else {\n\n            dirs = [EC.Const.PHOTO_DIR, EC.Const.AUDIO_DIR, EC.Const.VIDEO_DIR];\n\n            if (platform === EC.Const.ANDROID) {\n                //get hanlde of 'data/data/<package_name>/files/' on Android\n                window.resolveLocalFileSystemURL(cordova.file.dataDirectory, onIOSRFSSuccess, onIOSRFSError);\n            }\n            else {\n                //todo update with new invocation like Android\n                //persistent storage on iOS is the \"Documents\" or 'Library' folder in the app sandbox\n                window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onIOSRFSSuccess, onIOSRFSError);\n            }\n        }\n\n        return deferred.promise();\n    };\n\n    return module;\n\n}(EC.File));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = ( function(module) {\n        \"use strict\";\n\n        /*\n        * Delete media files from app private folder by project_name and in sequence images -> audios -> videos recursively\n        *\n        * Android: file://data/data/{package_name}/files\n        *\n        * -images\n        * -audios\n        * -videos\n        *\n        * /<project_name>\n        *\n        * @param {the_project_name} the project name to delete media from\n        * @param {has_project_been_deleted} whether the project itself was deleted beforehand or not:\n        *  we need to keep track of this as if the project is not deleted, we have to set the values of all the media rows to empty strings\n        *\n        *\n        */\n        //media dirs are declared outside deleteAllMedia because the fucntion is\n        // called recursively\n        var media_dirs;\n\n        var deferred;\n\n        module.deleteAllMedia = function(the_project_name, has_project_been_deleted, the_media_dirs) {\n\n            var self = this;\n            var project_name = the_project_name;\n            var is_project_deleted = has_project_been_deleted;\n            var media_dirs = the_media_dirs;\n            var dir = media_dirs.shift();\n            var app_private_dir_path;\n            var project_id = window.parseInt(window.localStorage.project_id, 10);\n            var hierarchy_forms = JSON.parse(window.localStorage.forms);\n\n            if (!deferred) {\n                deferred = new $.Deferred();\n            }\n\n            console.log(\"dir: \" + EC.Const.ANDROID_APP_PRIVATE_URI + dir + project_name);\n\n            var _onDirSuccess = function(the_dir) {\n\n                var dir_entry = the_dir;\n\n                console.log('dir_entry: ' + JSON.stringify(dir_entry));\n\n                var _onDirDeleted = function() {\n                    console.log(\"dir deleted, skip to next one if any\");\n\n                    if (media_dirs.length > 0) {\n\n                        self.deleteAllMedia(project_name, is_project_deleted, media_dirs);\n\n                    } else {\n                        console.log(\"All media deleted\");\n\n                        //update database, set all media values to empty string\n                        // for this project (if project not deleted)\n                        if (!is_project_deleted) {\n                            $.when(EC.Update.emptyMediaValues(hierarchy_forms, project_id)).then(function() {\n                                //EC.Entries.allMediaDeletedFeedback(true);\n                                deferred.resolve();\n\n                            }, function(error) {\n                                //EC.Entries.allMediaDeletedFeedback(false);\n                                deferred.resolve();\n                                console.log(error);\n                            });\n                        } else {\n                            deferred.resolve();\n                            deferred = null;\n                        }\n\n                    }\n\n                };\n\n                var _onDirDeleteError = function(the_error) {\n                    console.log(JSON.stringify(the_error));\n                };\n\n                dir_entry.removeRecursively(_onDirDeleted, _onDirDeleteError);\n            };\n\n            var _onDirError = function(the_error) {\n\n                //if the directory is not found (error code 1), no files yet so\n                // skip to next media type\n                if (the_error.code === 1) {\n\n                    //skip to next folder if any\n                    console.log(\"no dir \" + dir + \", skip to next\");\n\n                    if (media_dirs.length > 0) {\n                        self.deleteAllMedia(project_name, is_project_deleted, media_dirs);\n                    } else {\n\n                        console.log(\"All media deleted\");\n\n                        //update database, set all media values to empty string\n                        // for this project (if project not deleted)\n                        if (!is_project_deleted) {\n                            $.when(EC.Update.emptyMediaValues(hierarchy_forms, project_id)).then(function() {\n                                //EC.Entries.allMediaDeletedFeedback(true);\n                                deferred.resolve();\n                                deferred = null;\n                            }, function() {\n                                //EC.Entries.allMediaDeletedFeedback(false);\n                                deferred.resolve();\n                                deferred = null;\n                            });\n                        } else {\n                            deferred.resolve();\n                            deferred = null;\n                        }\n\n                    }\n                }\n\n                console.log(JSON.stringify(the_error));\n            };\n\n            //get app private data path based on platform\n            switch(window.device.platform) {\n\n                case EC.Const.ANDROID:\n                    app_private_dir_path = EC.Const.ANDROID_APP_PRIVATE_URI;\n                    break;\n                case EC.Const.IOS:\n                    app_private_dir_path = \"file://\" + EC.Const.IOS_APP_PRIVATE_URI;\n                    break;\n            }\n\n            console.log(app_private_dir_path + dir + project_name);\n\n            //get app private dir (Android) for the media of this project\n            window.resolveLocalFileSystemURL(app_private_dir_path + dir + project_name, _onDirSuccess, _onDirError);\n\n            return deferred.promise();\n\n        };\n\n        return module;\n    }(EC.File));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = (function (module) {\n    'use strict';\n\n    module.hasBackup = function (the_project_name) {\n\n        var filename = the_project_name + '.txt';\n        var backup_path;\n        var forms_data = [];\n        var deferred = new $.Deferred();\n\n        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, gotFSfail);\n\n        function gotFS(the_fileSystem) {\n\n            console.log(JSON.stringify(the_fileSystem));\n\n            backup_path = the_fileSystem.root.fullPath;\n\n            the_fileSystem.root.getFile(filename, {\n                create: false,\n                exclusive: false\n            }, gotBackupSuccess, gotBackupFail);\n\n        }\n\n        function gotBackupSuccess() {\n            deferred.resolve();\n        }\n\n        function gotBackupFail() {\n            deferred.reject();\n        }\n\n        function gotFSfail(the_error) {\n            console.log(the_error);\n        }\n\n        return deferred.promise();\n\n    };\n\n    return module;\n\n}(EC.File));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, LocalFileSystem*/\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = (function (module) {\n    'use strict';\n\n    /*\n     * Move files from temporary (cache) folder to app (private) folder\n     *\n     * Android: file://data/data/{package_name}/files\n     *\n     * /images\n     * /audios\n     * /videos\n     *\n     * /<project_name>\n     *\n     *  @param {array} the_files - array of file objects like:\n     * {\n     *      type: <input type>,\n     *      ref: <input ref>,\n     *      cached: <file path on the filesystem for cached files>,\n     *      stored: <file path on the filesystem for stored files>\n     * }\n     *\n     * @return void, but it triggers a recursive call to itself after each file is\n     * moved successfully.\n     *\n     * When all files are saved, it calls EC.Inputs.buildRows() to save all the input\n     * fields related to this form and media to the db\n     */\n    module.move = function (the_files, is_branch_flag) {\n\n        //Get media directory based on the type of file\n        function _getMediaDir(the_file_type) {\n\n            var type = the_file_type;\n            var dir;\n\n            switch (type) {\n\n                case EC.Const.PHOTO:\n                    dir = EC.Const.PHOTO_DIR;\n                    break;\n\n                case EC.Const.AUDIO:\n                    dir = EC.Const.AUDIO_DIR;\n                    break;\n\n                case EC.Const.VIDEO:\n                    dir = EC.Const.VIDEO_DIR;\n                    break;\n            }\n\n            return dir;\n\n        }\n\n        var files = the_files;\n        var is_branch = is_branch_flag;\n\n        //get details for current file\n        var file = files.shift();\n\n        console.log('files: ' + JSON.stringify(file));\n\n        var cached_filepath = file.cached;\n        var stored_filepath = file.stored;\n        var parts;\n        var filename;\n        var ref = file.ref;\n        var destination = _getMediaDir(file.type);\n\n        if (cached_filepath === '' || cached_filepath === undefined) {\n\n            //we do not have a cached file to move, skip to next file (if any)\n            if (files.length === 0) {\n\n                //all files saved, build and save the rows\n                if (is_branch) {\n                    //save rows for branch form\n                    EC.BranchInputs.buildRows();\n                }\n                else {\n                    //save rows for main form\n                    EC.Inputs.buildRows();\n                }\n\n            }\n            else {\n                EC.File.move(files, is_branch);\n            }\n        }\n        else {\n\n            console.log('cached filepath: ' + JSON.stringify(cached_filepath));\n\n            //we have a cache file to move\n            parts = cached_filepath.split('/');\n            filename = parts[parts.length - 1];\n\n            //request external cache temporary folder from file system\n            window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, gotFS, fail);\n\n            console.log('stored filepath:' + stored_filepath);\n        }\n\n        function gotFS(the_file_system) {\n\n            //create a directory reader to read files inside the temporary folder\n            var fs = the_file_system;\n            var dir = fs.createReader();\n            dir.readEntries(onDirReadSuccess, onDirReadError);\n\n            function onDirReadSuccess(the_dir_entries) {\n\n                var dir_entries = the_dir_entries;\n                var i;\n                var iLength = dir_entries.length;\n\n                //loop all the files in the temporary directory to find the one we want to move\n                for (i = 0; i < iLength; i++) {\n\n                    console.log('dir_entries[i].name  ' + dir_entries[i].name);\n                    console.log('filename  ' + filename);\n\n                    //if the current file name matches the file name we want to save, move the file\n                    if (dir_entries[i].name === filename) {\n\n                        fs.getFile(dir_entries[i].name, {\n                            create: false\n                        }, processEntry, onFileError);\n                    }\n                }\n\n                //process the file\n                function processEntry(the_entry) {\n\n                    var file = the_entry;\n                    var project_name = window.localStorage.project_name;\n                    var form_name = window.localStorage.form_name;\n                    var uuid = EC.Utils.getPhoneUUID();\n                    var stored_filename;\n\n                    //Create a new file or override existing one\n                    if (stored_filepath === '') {\n\n                        //build file name in the format <form_name>_<ref>_<uuid>_filename\n                        stored_filename = form_name + '_' + ref + '_' + uuid + '_' + filename;\n\n                    }\n                    else {\n\n                        parts = stored_filepath.split('/');\n                        stored_filename = parts[parts.length - 1];\n                    }\n\n                    //get app private dir (Android) requested subfolder (destination: images, audios,\n                    // videos)\n                    window.resolveLocalFileSystemURL(EC.Const.ANDROID_APP_PRIVATE_URI + destination, onLFSSuccess, onLFSError);\n\n                    function onLFSSuccess(the_parent_dir) {\n\n                        var project_dir = window.localStorage.project_name;\n                        var parent_dir = the_parent_dir;\n\n                        //create new project directory (if not exits)\n                        parent_dir.getDirectory(project_dir, {\n                            create: true,\n                            exclusive: false\n                        }, onGetDirectorySuccess, onGetDirectoryFail);\n\n                        function onGetDirectorySuccess() {\n\n                            console.log('parent_dir: ' + JSON.stringify(parent_dir));\n                            console.log('destination dir: ' + destination + project_dir + '/' + stored_filename);\n\n                            //move file to project directory\n                            file.moveTo(parent_dir, '/' + project_dir + '/' + stored_filename, onMovedOK, onMovedFail);\n\n                            function onMovedOK(success) {\n\n                                console.log('files length:' + files.length);\n                                console.log(JSON.stringify(files));\n\n                                //save next file or trigger callback to save the row\n                                if (files.length === 0) {\n\n                                    console.log('no more files to save, build rows');\n\n                                    //all files saved, build and save the rows\n                                    if (is_branch) {\n                                        //save rows for branch form\n                                        EC.BranchInputs.buildRows();\n                                    }\n                                    else {\n                                        //save rows for main form\n                                        EC.Inputs.buildRows();\n                                    }\n\n                                }\n                                else {\n                                    //save next file\n                                    console.log('move another file');\n                                    EC.File.move(files, is_branch);\n                                }\n\n                                console.log('file move OK : ' + JSON.stringify(success));\n                            }\n\n                            function onMovedFail(error) {\n\n                                console.log('onMovedFail:' + JSON.stringify(error));\n                            }\n\n                        }\n\n                        function onGetDirectoryFail(error) {\n                            console.log('onGetDirectoryFail: ' + JSON.stringify(error));\n                        }\n\n                    }//onLFSSuccess\n\n                    function onLFSError(error) {\n                        console.log('onLFSError: ' + JSON.stringify(error));\n                    }//onLFSError\n\n                }\n\n            }//onDirReadSuccess\n\n            function onDirReadError(error) {\n                console.log('onDirReadError: ' + JSON.stringify(error));\n            }//onDirReadError\n\n            function onFileError(error) {\n                console.log('onFileError ' + JSON.stringify(error));\n            }//onFileError\n\n        }//gotFS\n\n        function fail(error) {\n            console.log('fail' + JSON.stringify(error));\n        }//fail\n\n    };\n    //moveFile\n\n    return module;\n\n}(EC.File));\n","/*global $, jQuery, LocalFileSystem, cordova*/\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = (function (module) {\n    'use strict';\n\n    /*  Android only, iOS has got its own method to move the file\n     * Move the video file from sd card folder (real or emulated) t\n     * o app cache folder changing the file name to the current timestamp\n     * (video extension will be always .mp4)\n     */\n    var video_path;\n    var cached_filename;\n    var is_branch;\n    var deferred;\n\n    module.moveVideo = function (the_video_path, the_cache_video_uri, is_branch_flag) {\n\n        deferred = new $.Deferred();\n        video_path = the_video_path;\n        is_branch = is_branch_flag;\n        cached_filename = (the_cache_video_uri === '') ? EC.Utils.getTimestamp() + '.mp4' : the_cache_video_uri;\n\n        function onLFSSuccess(the_video_file_entry) {\n\n            function gotFS(the_file_system) {\n\n                var fs = the_file_system;\n\n                //move file to fs.root(directory entry pointing to app cache folder)\n                the_video_file_entry.moveTo(fs, cached_filename, function (success) {\n                    console.log(success);\n                    deferred.resolve(cached_filename);\n                }, function (error) {\n                    console.log(error);\n                });\n            }\n\n            function fail(error) {\n                console.log(error);\n            }\n\n            //request temporary folder from file system\n            window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, gotFS, fail);\n        }\n\n        function onLFSError(error) {\n            console.log(error);\n        }\n\n        //get file entry resolving file full path\n        window.resolveLocalFileSystemURI(video_path, onLFSSuccess, onLFSError);\n\n        return deferred.promise();\n\n    };\n\n    return module;\n\n}(EC.File));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n * @module EC\n */\nvar EC = EC || {};\n\n/* Remove one or more files from a project recursively \n *\n * @submodule File\n * @method remove\n * @param {string} the_project_name - the name of the project\n * @param {array} files - array of file names and media type like:\n *\n * {value: <the_filenemae>, type: <the_media_type>}\n *\n */\nEC.File = EC.File || {};\nEC.File = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar project_name;\n\t\tvar files = [];\n\t\tvar self;\n\t\tvar rows_deleted;\n\t\tvar deferred;\n\n\t\tmodule.remove = function(the_project_name, the_files) {\n\n\t\t\tself = this;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\t//get files details\n\t\t\tproject_name = the_project_name;\n\t\t\tfiles = the_files;\n\n\t\t\t//remove 1 file at a time recursively\n\t\t\t_removeOneFile();\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\tvar _removeOneFile = function() {\n\n\t\t\t//get a single file\n\t\t\tvar file = files.shift();\n\t\t\tvar filename = file.value;\n\t\t\tvar type = file.type;\n\t\t\tvar dir;\n\t\t\tvar full_path;\n\n\t\t\t//get directory the file is saved in based on its type (photo, audio, video)\n\t\t\tswitch(type) {\n\n\t\t\t\tcase EC.Const.PHOTO:\n\t\t\t\t\tdir = EC.Const.PHOTO_DIR;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.AUDIO:\n\t\t\t\t\tdir = EC.Const.AUDIO_DIR;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.VIDEO:\n\t\t\t\t\tdir = EC.Const.VIDEO_DIR;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t//get full path to file based on platform\n\t\t\tswitch(window.device.platform) {\n\n\t\t\t\tcase EC.Const.ANDROID:\n\t\t\t\t\tfull_path = EC.Const.ANDROID_APP_PRIVATE_URI + dir + project_name + \"/\" + filename;\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.IOS:\n\t\t\t\t\t\n\t\t\t\t\t//on iOS we need to prepend \"file://\" to get file object for deletion\n\t\t\t\t\tfull_path = 'file://' + EC.Const.IOS_APP_PRIVATE_URI + dir + project_name + \"/\" + filename;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconsole.log(\"file full path: \" + full_path);\n\n\t\t\t//get file entry\n\t\t\twindow.resolveLocalFileSystemURL(full_path, _onGetFileSuccess, _onGetFileError);\n\t\t};\n\n\t\tvar _onGetFileSuccess = function(the_file_entry) {\n\n\t\t\tvar file_entry = the_file_entry;\n\n\t\t\tfile_entry.remove(_onRemoveSuccess, _onRemoveError);\n\t\t};\n\n\t\tvar _onGetFileError = function(the_error) {\n\t\t\tconsole.log(\"Error getting file: \" + JSON.stringify(the_error));\n\t\t};\n\n\t\tvar _onRemoveSuccess = function(the_entry) {\n\n\t\t\tconsole.log(\"File removed: \" + JSON.stringify(the_entry));\n\n\t\t\t//delete next file (if any)\n\t\t\tif (files.length > 0) {\n\t\t\t\t//recursive call to remove next file\n\t\t\t\t_removeOneFile();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//All files removed\n\t\t\t\tEC.Notification.showToast(EC.Localise.getTranslation(\"all_media_deleted\"), \"short\");\n\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t};\n\n\t\tvar _onRemoveError = function(the_error) {\n\t\t\tconsole.log(\"Error: \" + JSON.stringify(the_error));\n\t\t\tEC.Notification.showToast(EC.Localise.getTranslation(\"generic_error\"), \"short\");\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.File));\n\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, LocalFileSystem, FileReader*/\n\n/**\n * @method restoreFromBackup Read a backup file and insert all the data to the\n * the local database\n *\n * @param {Object} the_project_name project name\n * @param {Object} the_project_id project id on local database\n */\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.restoreFromBackup = function(the_project_name, the_project_id) {\n\n\t\t\tvar filename = the_project_name + \".txt\";\n\t\t\tvar backup_path;\n\t\t\tvar forms_data = [];\n\t\t\tvar branch_data = {};\n\t\t\tvar branch_form_names = [];\n\t\t\tvar project_id = the_project_id;\n\t\t\tvar deferred = new $.Deferred();\n\n\t\t\tfunction fail(the_error) {\n\t\t\t\tconsole.log(the_error);\n\t\t\t\tif (the_error.code === 1) {\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"no_backup_saved\"));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//get hold of backup file (must be in the public storage folder root (Android\n\t\t\t// only, not possible on iOS))\n\t\t\tfunction gotFS(the_fileSystem) {\n\n\t\t\t\tbackup_path = the_fileSystem.root.fullPath;\n\n\t\t\t\tthe_fileSystem.root.getFile(filename, {\n\t\t\t\t\tcreate : false,\n\t\t\t\t\texclusive : false\n\t\t\t\t}, function(fileEntry) {\n\n\t\t\t\t\t//got the file entry\n\t\t\t\t\tfileEntry.file(function(file) {\n\n\t\t\t\t\t\t//read the file as text\n\t\t\t\t\t\treadAsText(file);\n\t\t\t\t\t}, fail);\n\t\t\t\t}, fail);\n\n\t\t\t\t//When we got the file, read content and save data to db\n\t\t\t\tfunction readAsText(file) {\n\n\t\t\t\t\tvar reader = new FileReader();\n\n\t\t\t\t\t//When the file has been read write data to DB\n\t\t\t\t\treader.onloadend = function(evt) {\n\n\t\t\t\t\t\tconsole.log(\"Read as text\");\n\t\t\t\t\t\tconsole.log(evt.target.result);\n\n\t\t\t\t\t\tforms_data = JSON.parse(evt.target.result);\n\t\t\t\t\t\tconsole.log(forms_data);\n\n\t\t\t\t\t\t/* get branch data from last element of data array (if any).Branch entries are\n\t\t\t\t\t\t * not nested within each hierarchy entry but appended at the end. They are\n\t\t\t\t\t\t * mapped to the unique branch form name each branch input gets\n\t\t\t\t\t\t *\n\t\t\t\t\t\t */\n\t\t\t\t\t\tif (forms_data[forms_data.length - 1].has_branches === true) {\n\t\t\t\t\t\t\tbranch_data = forms_data.pop();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//insert hierarchy entries per each form recursively\n\t\t\t\t\t\t$.when(EC.Create.insertAllFormsData(forms_data, branch_data)).then(function() {\n\n\t\t\t\t\t\t\tconsole.log(\"Hierarchy entries restored\");\n\n\t\t\t\t\t\t\t//do we have any branches? - last element of forms_data array contains all the\n\t\t\t\t\t\t\t// branches\n\t\t\t\t\t\t\tif (branch_data.branch_data_rows.length > 0) {\n\n\t\t\t\t\t\t\t\t//get branches details\n\t\t\t\t\t\t\t\tbranch_form_names = branch_data.branch_form_names;\n\n\t\t\t\t\t\t\t\t//get local branch form ids and branch inputs ids to map the backup branch data\n\t\t\t\t\t\t\t\t// against\n\t\t\t\t\t\t\t\t$.when(EC.Select.getBranchFormLocalIDs(project_id, branch_form_names)).then(function(the_mapped_branch_forms) {\n\t\t\t\t\t\t\t\t\t$.when(EC.Select.getBranchInputsLocalIDs(project_id)).then(function(the_mapped_input_ids) {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(the_mapped_branch_forms);\n\t\t\t\t\t\t\t\t\t\tconsole.log(the_mapped_input_ids);\n\n\t\t\t\t\t\t\t\t\t\t//insert all the branch backup data into the ec_branch_data table\n\t\t\t\t\t\t\t\t\t\t$.when(EC.Create.insertBranchDataRows(branch_data, the_mapped_branch_forms, the_mapped_input_ids)).then(function() {\n\n\t\t\t\t\t\t\t\t\t\t\t// console.log(\"Branches rows restored\");\n\t\t\t\t\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t//read file as text\n\t\t\t\t\treader.readAsText(file);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twindow.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);\n\n\t\t\treturn deferred.promise();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.File));\n","/*global $, jQuery, cordova, device, FileTransfer*/\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = (function (module) {\n    'use strict';\n\n    var filename = '';\n    var upload_URL = '';\n    var project_name = '';\n    var media_dir = '';\n    var media_type = '';\n    var _id = '';\n    var self;\n    var is_branch_file;\n\n    module.uploadFile = function (the_file_row, the_media_dir) {\n\n        console.log('the_filename: ' + the_file_row.value);\n\n        var ft = new FileTransfer();\n        var file_URI;\n        var app_private_dir;\n        var options = {};\n        var uuid = EC.Utils.getPhoneUUID();\n        var project_id = parseInt(window.localStorage.project_id, 10);\n\n        var _doUpload = function () {\n\n            project_name = window.localStorage.project_name;\n            filename = the_file_row.value;\n            _id = the_file_row._id;\n            media_dir = the_media_dir;\n\n            //add query parameters based on the type of file. URLs are set by\n            // the server API\n            switch (media_dir) {\n\n                case EC.Const.PHOTO_DIR:\n                    upload_URL += ('?type=thumbnail&phoneID=' + uuid);\n\n                    console.log('Upload URL for thumbnail: ' + upload_URL);\n                    media_type = EC.Const.PHOTO;\n\n                    //branch or hierarchy?\n                    if (EC.Upload.is_branch_image) {\n                        is_branch_file = true;\n                    }\n\n                    break;\n\n                case EC.Const.AUDIO_DIR:\n\n                    upload_URL += ('?type=audio&phoneID=' + uuid);\n                    media_type = EC.Const.AUDIO;\n\n                    console.log('Upload URL for audio: ' + upload_URL);\n                    //branch or hierarchy?\n                    if (EC.Upload.is_branch_audio) {\n                        is_branch_file = true;\n                    }\n                    break;\n\n                case EC.Const.VIDEO_DIR:\n\n                    upload_URL += ('?type=video&phoneID=' + uuid);\n                    media_type = EC.Const.VIDEO;\n\n                    console.log('Upload URL for video: ' + upload_URL);\n                    if (EC.Upload.is_branch_video) {\n                        is_branch_file = true;\n                    }\n                    break;\n            }\n\n            console.log('filename:' + JSON.stringify(filename));\n\n            //get app private dir based on platform\n            switch (window.device.platform) {\n                case EC.Const.ANDROID:\n                    app_private_dir = EC.Const.ANDROID_APP_PRIVATE_URI;\n                    break;\n                case EC.Const.IOS:\n                    app_private_dir = EC.Const.IOS_APP_PRIVATE_URI;\n                    break;\n            }\n\n            //set options for multipart entity file\n            options.mimeType = '';\n            options.fileKey = 'name';\n            options.fileName = filename;\n\n            if (window.device.platform === EC.Const.IOS) {\n                //options.chunkedMode = false;\n            }\n\n            //build file full path\n            file_URI = app_private_dir + media_dir + project_name + '/' + filename;\n\n            console.log('file_URI: ' + JSON.stringify(file_URI));\n\n            /*\n             * in the future we might need this, to show a proper upload\n             * feedback\n             */\n            ft.onprogress = function (progressEvent) {\n                // if (progressEvent.lengthComputable) {\n                // loadingStatus.setPercentage(progressEvent.loaded /\n                // progressEvent.total);\n                // } else {\n                // loadingStatus.increment();\n                // }\n                //console.log(progressEvent);\n                //console.log(loadingStatus);\n            };\n\n            //perform the upload\n            ft.upload(file_URI, upload_URL, _onFileUploadSuccess, _onFileUploadError, options);\n        };\n\n        self = this;\n        upload_URL = EC.Upload.getUploadURL();\n        is_branch_file = false;\n\n        //set upload URL for this project if not in localStorage yet\n        if (!EC.Utils.isChrome() && !upload_URL) {\n            $.when(EC.Select.getUploadURL(project_id)).then(function (the_project_url) {\n                //enable upload data button\n                console.log('Project URL is: ' + the_project_url);\n                upload_URL = the_project_url;\n                EC.Upload.setUploadURL(the_project_url);\n                _doUpload();\n            });\n        }\n        else {\n            _doUpload();\n        }\n\n    };\n\n    var _onFileUploadSuccess = function (response) {\n\n        console.log(JSON.stringify(response));\n\n        //update flag for this file row to indicate it has been synced to the\n        // server\n        $.when(EC.Update.flagOneFileAsSynced(_id, is_branch_file)).then(function () {\n\n            //upload another file (if any) of the same media type\n            EC.Upload.uploadNextFile(media_type);\n\n        });\n\n    };\n\n    var _onFileUploadError = function (error) {\n\n        console.log(JSON.stringify(error));\n\n        EC.Notification.hideProgressDialog();\n        EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('upload_error'));\n\n        EC.Upload.handleMedia();\n    };\n\n    return module;\n\n}(EC.File));\n","/* global cordova, Papa, JSZip */\nvar EC = EC || {};\nEC.File = EC.File || {};\nEC.File = (function (module) {\n    'use strict';\n\n    //currently Android only\n    module.writeProjectDataAsCSV = function (the_project_name, the_data) {\n\n        var deferred = new $.Deferred();\n        var export_dir;\n        var filename;\n        var csv;\n        var zip;\n        var zip_content;\n        var data = the_data;\n        var project_name = the_project_name;\n\n        function fail(error) {\n            console.log(error);\n        }\n\n        function onGotFS(filesystem) {\n            //filesystem is a handler to <sdcard>, emulated or real it does not matter\n\n            //create app directory in externalstorage if it does not exist\n            filesystem.getDirectory(export_dir, {\n                create: true,\n                exclusive: false\n            }, onCreateDirSuccess, fail);\n\n            function onCreateDirSuccess(filesystem) {\n                //inside this function, filesystem is <sdcard>/<app_name>-export with app_name sanitised from special chars\n\n                function gotFileEntry(fileEntry) {\n\n                    function gotFileWriter(writer) {\n\n                        writer.onwritestart = function () {\n                        };\n\n                        writer.onwriteend = function (evt) {\n                            //file written successfully,\n                            console.log('Content of file:' + zip_content);\n                            deferred.resolve({\n                                filename: filename,\n                                folder: export_dir\n                            });\n                        };\n                        //write content to file\n                        writer.write(zip_content);\n                    }\n\n                    fileEntry.createWriter(gotFileWriter, fail);\n                }\n\n                filesystem.getFile(filename, {\n                    create: true,\n                    exclusive: false\n                }, gotFileEntry, fail);\n            }\n        }\n\n        //get export dir name before doing anything\n        $.when(EC.Utils.getExportDirName()).then(function (the_dir) {\n\n            var i;\n            var iLength;\n            console.log(the_dir);\n            export_dir = the_dir;\n\n            //JSZip API https://stuk.github.io/jszip/\n            zip = new JSZip();\n\n            //zip file name is the project name\n            filename = project_name + '.zip';\n\n            //loop each form\n            iLength = data.length;\n\n            //generate a csv file per each form\n            for (i = 0; i < iLength; i++) {\n\n                //parse JSON to CSV\n                csv = Papa.unparse(data[i].entries, {\n                    quotes: true,\n                    delimiter: ',',\n                    newline: '\\r\\n'\n                });\n                console.log(csv);\n\n                //add file (use form name as filename) to master zip file\n                zip.file(data[i].name + '.csv', csv);\n            }\n\n            //generate zip file containing all the forms\n            zip_content = zip.generate({type: 'blob', compression: 'STORE'});\n\n            //start writing zip file to disk\n            window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory, onGotFS, fail);\n        });\n\n        return deferred.promise();\n\n    };\n    return module;\n}(EC.File));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = (function (module) {\n    'use strict';\n\n    var project_id;\n    var branch_form_name;\n    var self;\n\n\n    module.getInputAt = function (the_position) {\n\n        var index = the_position - 1;\n        self = this;\n\n        return self.branch_inputs[index];\n    };\n\n    module.getPrimaryKeyRefPosition = function () {\n\n        var i;\n        var iLenght = self.branch_inputs.length;\n        self = this;\n\n        //look for the position of the primary key\n        for (i = 0; i < iLenght; i++) {\n\n            if (parseInt(self.branch_inputs[i].is_primary_key, 10) === 1) {\n\n                return self.branch_inputs[i].position;\n            }\n        }\n    };\n\n    /**\n     * get list of inputs for the branch form specified\n     */\n    module.getList = function (the_branch_form_name, the_project_id) {\n\n        var branch_edit_position = window.localStorage.branch_edit_position;\n        branch_form_name = the_branch_form_name;\n        project_id = the_project_id;\n\n        //get all the branch inputs for the branch form\n        $.when(EC.Select.getBranchInputs(branch_form_name, project_id)).then(function (branch_inputs, has_jumps) {\n\n            //set branch inputs in memory\n            EC.BranchInputs.setInputs(branch_inputs, has_jumps);\n\n            //render first input on the list or the selected position (-1) if we are editing\n            EC.BranchInputs.prepareFirstInput((branch_edit_position === undefined) ? branch_inputs[0] : branch_inputs[branch_edit_position - 1]);\n        });\n\n    };\n\n    module.setInputs = function (the_branch_inputs, the_has_jumps_flag) {\n\n        self = this;\n        self.branch_inputs = the_branch_inputs;\n        window.localStorage.branch_inputs_total = self.branch_inputs.length;\n\n        //set flag to indicate if this form has or not any jumps\n        window.localStorage.branch_form_has_jumps = (the_has_jumps_flag) ? 1 : 0;\n\n    };\n\n    module.getInputs = function () {\n        return this.branch_inputs;\n    };\n\n    module.getFormDetails = function (the_input, the_value, the_project_id) {\n        EC.Select.getBranchFormDetails(the_input, the_value, the_project_id);\n    };\n\n    module.setCachedBranchEntryKeys = function (the_branch_form_name, the_primary_keys) {\n\n        var primary_keys = the_primary_keys;\n        var branch_form_name = the_branch_form_name;\n        var all_branches_keys;\n        var current_branch_form_primary_keys;\n        var is_branch_form_cached = false;\n        var i;\n        var iLength;\n\n        //try to get branch_primary_keys object if it exists in LocalStorage\n        try {\n            all_branches_keys = JSON.parse(window.localStorage.cached_branch_entry_keys);\n        } catch (error) {\n\n            all_branches_keys = [];\n        }\n\n        iLength = all_branches_keys.length;\n\n        if (iLength > 0) {\n\n            //get cached primary keys for this branch form only\n            for (i = 0; i < iLength; i++) {\n\n                if (all_branches_keys[i].branch_form_name === branch_form_name) {\n\n                    is_branch_form_cached = true;\n\n                    current_branch_form_primary_keys = all_branches_keys[i].primary_keys;\n\n                    //add branch_primary keys to keys already in LocalStorage\n                    current_branch_form_primary_keys = current_branch_form_primary_keys.concat(primary_keys).unique();\n\n                    all_branches_keys[i].primary_keys = current_branch_form_primary_keys;\n\n                    window.localStorage.cached_branch_entry_keys = JSON.stringify(all_branches_keys);\n                }\n\n            }\n\n            //if the current branch form is not found in the cache, then add it\n            if (!is_branch_form_cached) {\n\n                //current branch form  not cached yet, add it to cached_branch_entry_keys global object\n                all_branches_keys.push({\n                    branch_form_name: branch_form_name,\n                    primary_keys: primary_keys\n                });\n\n                window.localStorage.cached_branch_entry_keys = JSON.stringify(all_branches_keys);\n\n            }\n\n        } else {\n\n            //window.localStorage.cached_branch_entry_keys is empty so this is the first branch form for this main form, add it straight away\n            all_branches_keys.push({\n                branch_form_name: branch_form_name,\n                primary_keys: primary_keys\n            });\n\n            window.localStorage.cached_branch_entry_keys = JSON.stringify(all_branches_keys);\n\n        }\n\n    };\n\n    module.getCachedBranchEntryKeys = function (the_branch_form_name) {\n\n        var branch_form_name = the_branch_form_name;\n        var all_branches_keys;\n        var i;\n        var iLength;\n        var test;\n\n        try {\n\n            all_branches_keys = JSON.parse(window.localStorage.cached_branch_entry_keys);\n\n        } catch (error) {\n\n            all_branches_keys = [];\n        }\n\n        iLength = all_branches_keys.length;\n\n        if (iLength > 0) {\n\n            for (i = 0; i < iLength; i++) {\n\n                if (all_branches_keys[i].branch_form_name === branch_form_name) {\n\n                    test = all_branches_keys[i].primary_keys;\n\n                    console.log(test, true);\n\n                    return all_branches_keys[i].primary_keys;\n                }\n\n            }\n\n        } else {\n\n            return [];\n        }\n\n    };\n\n    module.getJumpDestinationPosition = function (the_ref) {\n\n        var i;\n        var iLenght = this.branch_inputs.length;\n        var ref = the_ref;\n\n        //look for the position of the specified ref\n        for (i = 0; i < iLenght; i++) {\n            if (ref === this.branch_inputs[i].ref) {\n                return this.branch_inputs[i].position;\n            }\n        }\n    };\n\n    return module;\n\n}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n    @submodule BranchInputs\n *\n * Route back user from a branch form to the linked hierararchy form, clearing cached branch data\n * \n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.backToHierarchyForm = function() {\n\n\t\t\tvar inputs;\n\t\t\tvar current_input;\n\t\t\tvar current_input_position;\n\t\t\tvar page;\n\n\t\t\tinputs = JSON.parse(window.localStorage.inputs);\n\t\t\tcurrent_input_position = parseInt(window.localStorage.current_position, 10);\n\t\t\tcurrent_input = inputs[current_input_position - 1];\n\n\t\t\t//clear branch data cache\n\t\t\twindow.localStorage.removeItem(\"branch_current_position\");\n\t\t\twindow.localStorage.removeItem(\"branch_form_has_jumps\");\n\t\t\twindow.localStorage.removeItem(\"branch_form_name\");\n\t\t\twindow.localStorage.removeItem(\"branch_inputs_total\");\n\t\t\twindow.localStorage.removeItem(\"branch_inputs_trail\");\n\t\t\twindow.localStorage.removeItem(\"branch_inputs_values\");\n\t\t\twindow.localStorage.removeItem(\"branch_form_id\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_hash\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_key_value\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_type\");\n\n\t\t\twindow.localStorage.back_from_branch = 1;\n\n\t\t\tpage = EC.Const.INPUT_VIEWS_DIR + current_input.type + EC.Const.HTML_FILE_EXT;\n\n\t\t\t//EC.Inputs.renderInput(current_input);\n\t\t\tEC.Routing.changePage(page);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\n/*\n * @method bindBackBtn set back button label to go back from branch form to linked hierarchy form\n */\n\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.bindBackBtn = function(is_data_saved) {\n\n\t\t\tvar self = this;\n\t\t\tvar back_btn = $(\"div[data-role='header'] div[data-href='back-btn']\");\n\t\t\tvar back_btn_label = back_btn.find(\"span.main-form-name\");\n\t\t\tvar form_name = window.localStorage.form_name;\n\n\t\t\t//set back button label to go back to main form\n\t\t\tback_btn_label.text(\"Back to \" + form_name.trunc(EC.Const.FORM_NAME_MAX_LENGTH));\n\n\t\t\tback_btn.off().one('vclick', function(evt) {\n\n\t\t\t\tif (is_data_saved) {\n\t\t\t\t\t//go back to main form input\n\t\t\t\t\tself.backToHierarchyForm();\n\t\t\t\t} else {\n\t\t\t\t\t//id data are not saved, ask confirmation to user before proceeding\n\t\t\t\t\tEC.Notification.askConfirm(EC.Localise.getTranslation(\"exit\"), EC.Localise.getTranslation(\"exit_confirm\"), \"EC.BranchInputs.backToHierarchyForm\");\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n *  @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar branch_current_position;\n\t\tvar is_jump_found;\n\t\t\n\t\t/*\n\t\t * @function _checkJumps check if there is any jump to perform based on the input value and jumps mapped to that input\n\t\t */\n\t\tvar _checkJumps = function(the_jumps, the_current_value) {\n\n\t\t\tvar jumps = the_jumps;\n\t\t\tvar i;\n\t\t\tvar iLength = jumps.length;\n\t\t\tvar branch_destination_position;\n\t\t\tvar branch_destination;\n\t\t\tvar current_value = the_current_value;\n\t\t\tvar branch_inputs_total = window.localStorage.branch_inputs_total;\n\n\t\t\t//if not any jump conditions match, set destination to the next input as default\n\t\t\tbranch_destination_position = branch_current_position + 1;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//check if we jump always\n\t\t\t\tif (jumps[i].jump_when === EC.Const.JUMP_ALWAYS) {\n\t\t\t\t\t\n\t\t\t\t\tis_jump_found = true;\n\t\t\t\t\tbranch_destination = jumps[i].jump_to;\n\t\t\t\t\tbranch_destination_position = (branch_destination === EC.Const.END_OF_FORM) ? branch_inputs_total : self.getJumpDestinationPosition(branch_destination);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t//check if we jump whan a value is not selected\n\t\t\t\tif (jumps[i].jump_when === EC.Const.JUMP_FIELD_IS_BLANK && (current_value === null || current_value === EC.Const.NO_OPTION_SELECTED)) {\n\t\t\t\t\t\n\t\t\t\t\tis_jump_found = true;\n\t\t\t\t\tbranch_destination = jumps[i].jump_to;\n\t\t\t\t\tbranch_destination_position = (branch_destination === EC.Const.END_OF_FORM) ? branch_inputs_total : self.getJumpDestinationPosition(branch_destination);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (jumps[i].jump_when === EC.Const.JUMP_VALUE_IS && current_value.toString() === jumps[i].jump_value.toString()) {\n\t\t\t\t\t\n\t\t\t\t\tis_jump_found = true;\n\t\t\t\t\tbranch_destination = jumps[i].jump_to;\n\t\t\t\t\tbranch_destination_position = (branch_destination === EC.Const.END_OF_FORM) ? branch_inputs_total : self.getJumpDestinationPosition(branch_destination);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (jumps[i].jump_when === EC.Const.JUMP_VALUE_IS_NOT && current_value.toString() !== jumps[i].jump_value.toString()) {\n\t\t\t\t\t\n\t\t\t\t\tis_jump_found = true;\n\t\t\t\t\tbranch_destination = jumps[i].jump_to;\n\t\t\t\t\tbranch_destination_position = (branch_destination === EC.Const.END_OF_FORM) ? branch_inputs_total : self.getJumpDestinationPosition(branch_destination);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//override current_input_position with the position of the input set by the jump (-1 because we are adding +1 later)\n\t\t\tbranch_current_position = branch_destination_position - 1;\n\t\t\t\n\t\t\treturn branch_destination;\n\t\t};\n\t\t\n\t\t/*\n\t\t * @method gotoNextPage load next input into view, checking for jumps etc.\n\t\t */\n\t\tmodule.gotoNextPage = function(evt, the_current_value) {\n\n\t\t\tvar branch_current_input;\n\t\t\tvar current_value = the_current_value;\n\t\t\tvar next_branch_input;\n\t\t\tvar next_page;\n\t\t\tvar options;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar obj;\n\t\t\tvar branch_destination;\n\t\t\tvar branch_destination_position;\n\t\t\tvar jumps;\n\t\t\tvar is_branch_genkey_hidden = EC.Utils.isBranchFormGenKeyHidden();\n\t\t\tvar next_branch_value;\n\t\t\tvar is_checkbox = false;\n\t\t\t\n\t\t\tself = this;\n\t\t\tbranch_current_position = parseInt(window.localStorage.branch_current_position, 10);\n\t\t\t\n\t\t\t//get value from object in the case of a dropdown/radio (object is like {label:\"<label>\", index:\"<value>\"})\n\t\t\tif (current_value.hasOwnProperty(\"value\")) {\n\t\t\t\tcurrent_value = current_value.value;\n\t\t\t}\n\t\t\t\n\t\t\t//if current value is an array, we have checkbox values to parse and check each of them against jumps\n\t\t\tif (Array.isArray(current_value)) {\n\t\t\t\tis_checkbox = true;\n\t\t\t}\n\n\t\t\t//check if we have reached the end of the form\n\t\t\tif (branch_current_position === self.branch_inputs.length) {\n\t\t\t\tnext_page = EC.Const.BRANCH_VIEWS_DIR + EC.Const.BRANCH_SAVE_CONFIRM_VIEW;\n\t\t\t} else {\n\n\t\t\t\t//check if the current input triggers a jump\n\t\t\t\tbranch_current_input = self.getInputAt(branch_current_position);\n\n\t\t\t\tif (parseInt(branch_current_input.has_jump, 10) === 1) {\n\n\t\t\t\t\t//get jumps\n\t\t\t\t\tjumps = EC.Utils.parseJumpString(branch_current_input.jumps);\n\n\t\t\t\t\t//if we have an arry of values (checkboxes) check each of them if it triggers a jump\n\t\t\t\t\tif (is_checkbox) {\n\n\t\t\t\t\t\tis_jump_found = false;\n\t\t\t\t\t\tiLength = current_value.length;\n\n\t\t\t\t\t\t//loop each selected value until the first jump is found (or no more elements to check against)\n\t\t\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t\t\t\tbranch_destination = _checkJumps(jumps, current_value[i].value);\n\t\t\t\t\t\t\tif (is_jump_found) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//single value\n\t\t\t\t\t\tbranch_destination = _checkJumps(jumps, current_value);\n\t\t\t\t\t}\n\n\t\t\t\t}//if has jump\n\n\t\t\t\tif (branch_destination === EC.Const.END_OF_FORM) {\n\t\t\t\t\tnext_page = EC.Const.BRANCH_VIEWS_DIR + EC.Const.BRANCH_SAVE_CONFIRM_VIEW;\n\t\t\t\t} else {\n\n\t\t\t\t\tnext_branch_input = self.getInputAt(branch_current_position + 1);\n\n\t\t\t\t\t/*\n\t\t\t\t\t * if is_genkey_hidden = 1, the from creator decided to hide the auto genkey\n\t\t\t\t\t * The nasty form builder allows users to drag the primary key input fields to any position (lol)\n\t\t\t\t\t * therefore we have to test each input if it is a primary key field\n\t\t\t\t\t * We have to skip the next input (from the user) but add an entry to inputs_values, inputs_trail with the UUID\n\t\t\t\t\t *\n\t\t\t\t\t */\n\n\t\t\t\t\tif (is_branch_genkey_hidden && next_branch_input.is_primary_key === 1) {\n\n\t\t\t\t\t\t//add skipped genkey entry also in inputs_trail\n\t\t\t\t\t\tself.pushInputsTrail(next_branch_input);\n\n\t\t\t\t\t\t//add an entry with UUID to inputs_values if we are entering a new entry\n\t\t\t\t\t\tnext_branch_value = EC.Utils.getGenKey();\n\n\t\t\t\t\t\t//cache next value in localStorage\n\t\t\t\t\t\tself.setCachedInputValue(next_branch_value, branch_current_position + 1, next_branch_input.type, next_branch_input.is_primary_key);\n\n\t\t\t\t\t\t//go to the next  input AFTER the hidden primary key (if it exists, otherwise the save confirm page)\n\t\t\t\t\t\tnext_branch_input = self.getInputAt(branch_current_position + 2);\n\t\t\t\t\t\tif (!next_branch_input) {\n\n\t\t\t\t\t\t\tnext_page = EC.Const.BRANCH_VIEWS_DIR + EC.Const.BRANCH_SAVE_CONFIRM_VIEW;\n\n\t\t\t\t\t\t\t//TODO check this???\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//update current input position in session (store confirm screen will get a position = array.length)\n\t\t\t\t\t\twindow.localStorage.branch_current_position = branch_current_position + 2;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//update current input position in session (store confirm screen will get a position = array.length)\n\t\t\t\t\t\twindow.localStorage.branch_current_position = branch_current_position + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (next_branch_input) {\n\t\t\t\t\t\tnext_page = EC.Const.BRANCH_VIEWS_DIR + EC.Const.BRANCH_PREFIX + next_branch_input.type + EC.Const.HTML_FILE_EXT;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tEC.Routing.changePage(next_page);\n\n\t\t\t//avoid events triggering multiple times\n\t\t\tevt.preventDefault();\n\n\t\t};\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.gotoPrevPage = function(evt) {\n\n\t\t\tvar self = this;\n\t\t\tvar branch_current_position = parseInt(window.localStorage.branch_current_position, 10);\n\t\t\tvar branch_inputs_trail = JSON.parse(window.localStorage.branch_inputs_trail);\n\t\t\tvar prev_page;\n\t\t\tvar prev_input_position = branch_inputs_trail[branch_inputs_trail.length - 1].position;\n\t\t\tvar prev_input = self.getInputAt(prev_input_position);\n\t\t\tvar is_genkey_hidden = EC.Utils.isBranchFormGenKeyHidden();\n\n\t\t\t//skip prev input (from user) if it is a hidden auto genkey\n\t\t\tif (is_genkey_hidden && prev_input.is_primary_key === 1) {\n\n\t\t\t\tprev_input_position = branch_inputs_trail[branch_inputs_trail.length - 2].position;\n\t\t\t\tprev_input = self.getInputAt(prev_input_position);\n\n\t\t\t\t//update current input position in session (store confirm screen will get a position = array.length)\n\t\t\t\twindow.localStorage.branch_current_position = branch_current_position - 2;\n\n\t\t\t\t//remove last  entry from branch_inputs_trail\n\t\t\t\tself.popInputsTrail();\n\n\t\t\t} else {\n\n\t\t\t\t//update current input position in session\n\t\t\t\twindow.localStorage.branch_current_position = prev_input_position;\n\n\t\t\t}\n\n\t\t\t//remove last  entry from branch_inputs_trail\n\t\t\tself.popInputsTrail();\n\n\t\t\tprev_page = EC.Const.BRANCH_VIEWS_DIR + EC.Const.BRANCH_PREFIX + prev_input.type + EC.Const.HTML_FILE_EXT;\n\n\t\t\tEC.Routing.changePage(prev_page);\n\n\t\t\t//avoid events triggering multiple times\n\t\t\tevt.preventDefault();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *@module EC\n *@submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.onNextBtnTapped = function(e, the_input) {\n\n\t\t\tvar self = this;\n\t\t\tvar wls = window.localStorage;\n\t\t\tvar branch_input = the_input;\n\t\t\tvar branch_edit_id = wls.branch_edit_id || \"\";\n\t\t\tvar branch_edit_type = wls.branch_edit_type || \"\";\n\t\t\tvar branch_form = JSON.parse(wls.branch_form);\n\t\t\t//get input value(based on input type and layout)\n\t\t\tvar current_value = EC.BranchInputs.getCurrentValue(branch_input.type);\n\t\t\tvar branch_current_position = wls.branch_current_position;\n\t\t\tvar branch_cached_value = EC.Inputs.getCachedInputValue(branch_current_position);\n\t\t\tvar validation = self.validateValue(branch_input, current_value, branch_current_position);\n\n\t\t\t//back to same screen if invalid value\n\t\t\tif (!validation.is_valid) {\n\t\t\t\t//warn user about the type of error\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(validation.message));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//When editing, if the value of a field triggering a jump was changed, disable\n\t\t\t// intermediate \"Store Edit\" button from now on\n\t\t\tif (wls.branch_edit_mode && parseInt(branch_input.has_jump, 10) === 1) {\n\t\t\t\tif (!EC.Inputs.valuesMatch(branch_cached_value, current_value, branch_input.type)) {\n\t\t\t\t\t//set flag as from now until saving the form, store edit from an intermediate\n\t\t\t\t\t// screen is disabled\n\t\t\t\t\twls.branch_has_new_jump_sequence = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//cache current value in localStorage\n\t\t\tself.setCachedInputValue(current_value, branch_current_position, branch_input.type, branch_input.is_primary_key);\n\n\t\t\tself.pushInputsTrail(branch_input);\n\n\t\t\t//remove flag that helps to handle back button when user is just dismissing\n\t\t\t// barcode scanner\n\t\t\twindow.localStorage.removeItem('is_dismissing_barcode');\n\n\t\t\tself.gotoNextPage(e, current_value);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n *  @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.onPrevBtnTapped = function(e, the_input) {\n\n\t\t\tvar self = this;\n\t\t\tvar branch_input = the_input;\n\t\t\tvar branch_inputs_total = self.branch_inputs.length;\n\t\t\tvar branch_current_value = self.getCurrentValue(branch_input.type);\n\t\t\tvar branch_current_position = window.localStorage.branch_current_position;\n\t\t\tvar branch_cached_value = EC.Inputs.getCachedInputValue(branch_current_position);\n\n\t\t\t//When editing, if the value of a field triggering a jump was changed, disable intermediate \"Store Edit\" button from now on\n\t\t\tif (window.localStorage.branch_edit_mode && parseInt(branch_input.has_jump, 10) === 1) {\n\t\t\t\tif (!EC.Inputs.valuesMatch(branch_cached_value, branch_current_value, branch_input.type)) {\n\t\t\t\t\t//set flag as from now until saving the form, store edit from an intermediate screen is disabled\n\t\t\t\t\twindow.localStorage.branch_has_new_jump_sequence = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//check we are not coming back from #save-confirm page\n\t\t\tif (branch_current_position <= self.branch_inputs.length) {\n\n\t\t\t\t//cache current value in localStorage\n\t\t\t\tself.setCachedInputValue(branch_current_value, branch_current_position, branch_input.type, branch_input.primary_key);\n\t\t\t}\n\t\t\t\n\t\t\t//remove flag that helps to handle back button when user is just dismissing barcode scanner\n\t\t\twindow.localStorage.removeItem('is_dismissing_barcode');\n\n\t\t\tself.gotoPrevPage(e);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n *  @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.popInputsTrail = function() {\n\n\t\t\tvar branch_inputs_trail;\n\n\t\t\ttry {\n\n\t\t\t\tbranch_inputs_trail = JSON.parse(window.localStorage.branch_inputs_trail);\n\n\t\t\t\tbranch_inputs_trail.pop();\n\n\t\t\t\twindow.localStorage.branch_inputs_trail = JSON.stringify(branch_inputs_trail);\n\n\t\t\t} catch(error) {\n\t\t\t}\n\n\t\t};\n\t\t//popInputsTrail\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n    @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.pushInputsTrail = function(the_input) {\n\n\t\t\tvar input = the_input;\n\n\t\t\tvar branch_inputs_trail;\n\n\t\t\t//catch Chrome error `Uncaught SyntaxError: Unexpected end of input` when parsing empty content\n\t\t\ttry {\n\t\t\t\tbranch_inputs_trail = JSON.parse(window.localStorage.branch_inputs_trail);\n\n\t\t\t} catch(error) {\n\n\t\t\t\t//Handle errors here\n\t\t\t\tbranch_inputs_trail = [];\n\n\t\t\t}\n\n\t\t\tbranch_inputs_trail.push({\n\t\t\t\tposition : input.position,\n\t\t\t\tlabel : input.label\n\n\t\t\t});\n\n\t\t\twindow.localStorage.branch_inputs_trail = JSON.stringify(branch_inputs_trail);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n    @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.spliceInputsTrail = function(the_position) {\n\n\t\t\tvar position = parseInt(the_position, 10);\n\t\t\tvar branch_inputs_trail = JSON.parse(window.localStorage.branch_inputs_trail);\n\t\t\tvar i;\n\t\t\tvar iLength = branch_inputs_trail.length;\n\t\t\tvar index;\n\t\t\tvar how_many_to_remove;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tif (branch_inputs_trail[i].position === position) {\n\n\t\t\t\t\tindex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thow_many_to_remove = iLength - index;\n\t\t\tbranch_inputs_trail.splice(index, how_many_to_remove);\n\t\t\twindow.localStorage.branch_inputs_trail = JSON.stringify(branch_inputs_trail);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.prepareFeedback = function(the_status, the_entry_key) {\n\n\t\t\tvar self = this;\n\t\t\tvar status = the_status;\n\t\t\tvar page = EC.Const.BRANCH_VIEWS_DIR + EC.Const.BRANCH_FEEDBACK_VIEW;\n\t\t\tvar branch_form = JSON.parse(window.localStorage.branch_form);\n\t\t\tvar entry_key = the_entry_key;\n\n\t\t\t//prepare feedback based on status\n\t\t\tif (status) {\n\t\t\t\tself.message = \"Branch entry saved successfully!\";\n\n\t\t\t\t/*\n\t\t\t\t * Cache entry key value for the branch form entry just saved. If the main form does not get saved (user leaves without saving)\n\t\t\t\t * we have to remove from the DB all the rows with that entry key value. This will work no matter how many branch forms we have\n\t\t\t\t * for a main (hierarchy) form. This array is cleared when either the form is saved or all its cached entries are deleted.\n\t\t\t\t */\n\t\t\t\tself.setCachedBranchEntryKeys(branch_form.name, [entry_key]);\n\n\t\t\t} else {\n\t\t\t\tself.message = \"Error saving data...please retry\";\n\t\t\t}\n\n\t\t\tEC.Routing.changePage(page);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.prepareFirstInput = function(the_first_input) {\n\n\t\t\tvar self = this;\n\t\t\tvar first_input_position = 1;\n\t\t\tvar branch_input = the_first_input;\n\t\t\tvar page = EC.Const.BRANCH_VIEWS_DIR + EC.Const.BRANCH_PREFIX + branch_input.type + EC.Const.HTML_FILE_EXT;\n\t\t\tvar is_genkey_hidden = EC.Utils.isBranchFormGenKeyHidden();\n\n\t\t\t//set array to keep track of input navigation (get pre-built one when editing)\n\t\t\tif (!window.localStorage.branch_edit_mode) {\n\t\t\t\twindow.localStorage.branch_inputs_trail = [];\n\t\t\t} else {\n\t\t\t\t//update inputs trail to remove all the elements past the current edit position\n\t\t\t\tself.spliceInputsTrail(window.localStorage.branch_edit_position);\n\t\t\t}\n\n\t\t\t//update current position in session depending on mode\n\t\t\twindow.localStorage.branch_current_position = (window.localStorage.branch_edit_mode) ? window.localStorage.branch_edit_position : first_input_position;\n\n\t\t\t/*\n\t\t\t * If if the genkey hidden flag is set to 1 and the input is a primary key input, do not render this input on screen but:\n\t\t\t *\n\t\t\t * - just cache it with an auto genkey in localStorage if we are entering a new entry\n\t\t\t * - do nothing if we are editing, ad the inputs_values array will be set already (it is set when listing the entry values)\n\t\t\t */\n\t\t\tif (is_genkey_hidden === 1 && branch_input.is_primary_key === 1) {\n\n\t\t\t\t//skip input\n\t\t\t\twindow.localStorage.branch_current_position = first_input_position + 1;\n\n\t\t\t\t//if we are entering a new entry add an auto generated key in input_values\n\t\t\t\tif (!window.localStorage.branch_edit_mode) {\n\t\t\t\t\twindow.localStorage.branch_inputs_values = JSON.stringify([{\n\t\t\t\t\t\t_id : \"\",\n\t\t\t\t\t\ttype : \"\",\n\t\t\t\t\t\tvalue : EC.Utils.getGenKey(),\n\t\t\t\t\t\tposition : 1,\n\t\t\t\t\t\tis_primary_key : 1\n\t\t\t\t\t}]);\n\t\t\t\t}\n\t\t\t\t//get next input to set page we have to go to (first_input_position is equal to current_position-1, so...)\n\t\t\t\tbranch_input = self.branch_inputs[first_input_position];\n\t\t\t\tpage = EC.Const.BRANCH_VIEWS_DIR + EC.Const.BRANCH_PREFIX + branch_input.type + EC.Const.HTML_FILE_EXT;\n\t\t\t}\n\n\t\t\tEC.Routing.changePage(page);\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.renderFeedbackView = function() {\n\n\t\t\tvar self = this;\n\t\t\tvar form_id = window.localStorage.form_id;\n\t\t\tvar form_name = window.localStorage.form_name;\n\t\t\tvar branch_form = JSON.parse(window.localStorage.branch_form);\n\t\t\tvar add_another_entry_btn = $('div#branch-feedback div#branch-input-feedback div#add-entry-branch-form');\n\t\t\tvar back_to_main_btn = $('div#branch-feedback div#branch-input-feedback div#back-to-main-form');\n\t\t\tvar project_id = window.localStorage.project_id;\n\t\t\tvar current_form_branches;\n\n\t\t\t//handle back button with no alert on this page\n\t\t\tself.bindBackBtn(true);\n\n\t\t\t//remove branch flags from localStorage\n\t\t\twindow.localStorage.removeItem(\"branch_current_position\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_id\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_mode\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_position\");\n\t\t\twindow.localStorage.removeItem(\"branch_inputs_trail\");\n\t\t\twindow.localStorage.removeItem(\"branch_inputs_values\");\n\n\t\t\t//show branch form name in the top bar\n\t\t\t$('div.branch-form-name div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(branch_form.name);\n\n\t\t\t//Set text for buttons\n\t\t\tadd_another_entry_btn.find('span.entry').text(\"(\" + branch_form.name + \")\");\n\t\t\tback_to_main_btn.find('span.form-name-inline').text(form_name);\n\n\t\t\t//bind button to add another branch form to this entry\n\t\t\tadd_another_entry_btn.off().one('vclick', function(e) {\n\n\t\t\t\tEC.Notification.showProgressDialog();\n\t\t\t\t//get list of inputs for the branch form and render the first one on screen\n\t\t\t\tself.getList(branch_form.name, project_id);\n\t\t\t});\n\n\t\t\t//bind button to go back to main form input\n\t\t\tback_to_main_btn.off().one('vclick', function(e) {\n\t\t\t\t//go back to main form input\n\t\t\t\tself.backToHierarchyForm();\n\t\t\t});\n\t\t\tEC.Notification.hideProgressDialog();\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *\t@module EC\n @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\t//render input calling the proper page and passing input attributes\n\t\tmodule.renderInput = function(the_input) {\n\n\t\t\t//get module context\n\t\t\tvar self = this;\n\t\t\tvar wls = window.localStorage;\n\t\t\tvar branch_input = the_input;\n\t\t\tvar branch_current_value;\n\t\t\tvar branch_current_position = parseInt(wls.branch_current_position, 10);\n\t\t\tvar branch_cached_value = self.getCachedInputValue(branch_current_position);\n\t\t\tvar back_btn = $(\"div#branch-\" + branch_input.type + \" div[data-role='header'] div[data-href='back-btn']\");\n\t\t\tvar back_btn_label = $(\"div[data-role='header'] div[data-href='back-btn'] span.form-name\");\n\t\t\tvar parent_key;\n\t\t\tvar rows_to_save = [];\n\t\t\tvar prev_btn = $('div.branch-input-nav-tabs div.ui-block-a.input-prev-btn');\n\t\t\tvar next_btn = $('div.branch-input-nav-tabs div.ui-block-c.input-next-btn');\n\t\t\tvar form_name = wls.form_name;\n\t\t\tvar branch_inputs_total = self.branch_inputs.length;\n\t\t\tvar branch_form = JSON.parse(wls.branch_form);\n\t\t\tvar is_genkey_hidden = EC.Utils.isBranchFormGenKeyHidden();\n\t\t\tvar branch_inputs_values;\n\t\t\tvar first_branch_input;\n\t\t\tvar is_prev_button_hidden = false;\n\n\t\t\tback_btn.off().on('vclick', function(e) {\n\n\t\t\t\t//TODO: when editing an existing branch form, go back to entry values list?\n\n\t\t\t\tif (wls.branch_edit_mode) {\n\t\t\t\t\tif (wls.branch_has_new_jump_sequence) {\n\t\t\t\t\t\tEC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"exit_confirm\"), \"EC.Inputs.backToHierarchyForm\", false, branch_input, true);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//check if user is leaving after modifying a jump and neither \"Store Edit\", \"prev\" or \"next\" button were tapped\n\t\t\t\t\t\tif (parseInt(branch_input.has_jump, 10) === 1) {\n\n\t\t\t\t\t\t\tbranch_current_value = EC.Inputs.getCurrentValue(branch_input.type);\n\n\t\t\t\t\t\t\tif (!EC.Inputs.valuesMatch(branch_cached_value, branch_current_value, branch_input.type)) {\n\n\t\t\t\t\t\t\t\tEC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"exit_confirm\"), \"EC.Inputs.backToHierarchyForm\", false, branch_input, true);\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tEC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"save_before_leave\"), \"EC.Inputs.backToBranchEntryValuesList\", true, branch_input, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tEC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"save_before_leave\"), \"EC.Inputs.backToBranchEntryValuesList\", true, branch_input, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//not editing, go to entries list\n\t\t\t\t\tEC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"save_before_leave\"), \"EC.Inputs.backToBranchEntryValuesList\", true, branch_input, true);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tback_btn_label.text(\"Back to \" + form_name.trunc(EC.Const.FORM_NAME_MAX_LENGTH));\n\n\t\t\t//show branch form name in the top bar\n\t\t\t$('div.branch-form-name div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(branch_form.name);\n\n\t\t\t//reset button visibility\n\t\t\t$(prev_btn, next_btn).removeClass(\"invisible\");\n\n\t\t\t//TODO :doe we need to -> skip input rendering if it is the preloader screen\n\t\t\tif (branch_current_position !== 0) {\n\n\t\t\t\t//check if we have a cached value for this input in session\n\t\t\t\tbranch_current_value = self.getCachedInputValue(branch_current_position).value;\n\n\t\t\t\t//check it the value is _skipp3d_ keyword\n\t\t\t\tbranch_current_value = (branch_current_value === EC.Const.SKIPPED) ? \"\" : branch_current_value;\n\n\t\t\t\t//if the input is either photo, audio or video, no default value will be available so we pass an empty object {cached: \"\", stored: \"\"}\n\t\t\t\tif (branch_input.type === EC.Const.PHOTO || branch_input.type === EC.Const.AUDIO || branch_input.type === EC.Const.VIDEO) {\n\n\t\t\t\t\tif (branch_current_value) {\n\t\t\t\t\t\tself.renderInputView(branch_input, branch_current_value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.renderInputView(branch_input, {\n\t\t\t\t\t\t\tcached : \"\",\n\t\t\t\t\t\t\tstored : \"\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//for normal inputs, render view passing the default value (or empty if not defined) if no input value is cached\n\t\t\t\t\tif (branch_current_value) {\n\t\t\t\t\t\tself.renderInputView(branch_input, branch_current_value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.renderInputView(branch_input, branch_input.default_value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set next button to go to next input (if any)\n\t\t\tif (branch_current_position <= branch_inputs_total) {\n\n\t\t\t\t//Next button handler\n\t\t\t\tnext_btn.off().on('vclick', function(e) {\n\t\t\t\t\tself.onNextBtnTapped(e, branch_input);\n\t\t\t\t});\n\n\t\t\t\t//set previous button to fade to previous input (if any)\n\t\t\t\tif (branch_current_position - 1 > 0) {\n\n\t\t\t\t\t//check if the first input is a hidden genkey, in that case do not show prev button\n\t\t\t\t\tif (branch_current_position === 2) {\n\n\t\t\t\t\t\tbranch_inputs_values = JSON.parse(wls.branch_inputs_values);\n\t\t\t\t\t\tfirst_branch_input = branch_inputs_values[0];\n\n\t\t\t\t\t\tif (first_branch_input.is_primary_key === 1 && is_genkey_hidden === 1) {\n\n\t\t\t\t\t\t\t//hide prev button for first input of the form\n\t\t\t\t\t\t\tprev_btn.addClass(\"invisible\");\n\t\t\t\t\t\t\tis_prev_button_hidden = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//bind vclick event only if the button is not hidden\n\t\t\t\t\tif (!is_prev_button_hidden) {\n\t\t\t\t\t\t//handler for prev button, showing prev input\n\t\t\t\t\t\tprev_btn.off().on('vclick', function(e) {\n\t\t\t\t\t\t\tself.onPrevBtnTapped(e, branch_input);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//hide prev button for first input of the form\n\t\t\t\t\tprev_btn.addClass(\"invisible\");\n\n\t\t\t\t\t//reset inputs_trail in session\n\t\t\t\t\twls.removeItem('branch_inputs_trail');\n\t\t\t\t}\n\n\t\t\t\t//show store edit button if we are in \"editing mode\" and bind it to callback\n\t\t\t\tif (wls.branch_edit_mode) {\n\n\t\t\t\t\t$('div.store-edit').removeClass('hidden');\n\n\t\t\t\t\tif (branch_input.has_jump === 1) {\n\n\t\t\t\t\t\t// disable store edit button, to force the user to go through the form again to retain the jumps sequence\n\t\t\t\t\t\t$('div.store-edit').addClass('ui-disabled');\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t$('div.store-edit').removeClass('ui-disabled');\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//bind events with on(), as we need to submit again if the input does not validate successfully\n\t\t\t\t\t$('div.store-edit').off().on('vclick', function() {\n\n\t\t\t\t\t\tself.prepareStoreEdit(branch_current_value, branch_current_position, branch_input);\n\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//update completion percentage and bar for this form\n\t\t\tself.updateFormCompletion(branch_current_position, branch_inputs_total);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\n/*\n *\t@module EC\n *  @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.renderInputView = function(the_branch_input, the_value) {\n\n\t\t\tvar branch_input = the_branch_input;\n\t\t\tvar branch_value = the_value;\n\n\t\t\t//render layout based on the input type\n\t\t\tswitch(branch_input.type) {\n\n\t\t\t\tcase EC.Const.TEXT:\n\n\t\t\t\t\tEC.BranchInputTypes.text(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.TEXTAREA:\n\n\t\t\t\t\tEC.BranchInputTypes.textarea(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.INTEGER:\n\n\t\t\t\t\tEC.BranchInputTypes.integer(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.DECIMAL:\n\n\t\t\t\t\tEC.BranchInputTypes.decimal(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.DATE:\n\n\t\t\t\t\tEC.BranchInputTypes.date(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.TIME:\n\n\t\t\t\t\tEC.BranchInputTypes.time(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.RADIO:\n\n\t\t\t\t\tEC.BranchInputTypes.radio(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.CHECKBOX:\n\n\t\t\t\t\tEC.BranchInputTypes.checkbox(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.DROPDOWN:\n\n\t\t\t\t\tEC.BranchInputTypes.dropdown(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.BARCODE:\n\n\t\t\t\t\tEC.BranchInputTypes.barcode(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.LOCATION:\n\n\t\t\t\t\tEC.BranchInputTypes.location(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.PHOTO:\n\n\t\t\t\t\tEC.BranchInputTypes.photo(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\t//deal with audio recording\n\t\t\t\tcase EC.Const.AUDIO:\n\n\t\t\t\t\tEC.BranchInputTypes.audio(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.VIDEO:\n\n\t\t\t\t\tEC.BranchInputTypes.video(branch_value, branch_input);\n\t\t\t\t\tbreak;\n\n\t\t\t}//switch\n\n\t\t\t//remove progress dialog (triggered when loading inputs.html)\n\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.renderSaveConfirmView = function() {\n\n\t\t\tvar self = this;\n\t\t\tvar prev_btn = $('div#branch-save-confirm div.ui-grid-b div.ui-block-a.input-prev-btn');\n\t\t\tvar store_btn = $('div#branch-save-confirm div#branch-input-save-confirm div#store');\n\t\t\tvar store_edit_btn = $('div#branch-save-confirm div.store-edit');\n\t\t\tvar percentage_bar = $('div.ui-grid-b.branch-input-nav-tabs div.input-progress-bar div.progress.progress_tiny');\n\t\t\tvar percentage_txt = $('div.ui-grid-b.branch-input-nav-tabs div.input-progress-bar span.form-completion-percent');\n\t\t\tvar branch_inputs_total = self.branch_inputs.length;\n\t\t\tvar current_branch_input_position = parseInt(window.localStorage.branch_current_position, 10);\n\t\t\tvar branch_form = JSON.parse(window.localStorage.branch_form);\n\n\t\t\tself.bindBackBtn(false);\n\n\t\t\t//update completion percentage and bar for this form\n\t\t\tself.updateFormCompletion(branch_inputs_total + 1, branch_inputs_total, percentage_txt, percentage_bar);\n\n\t\t\t//show branch form name in the top bar\n\t\t\t$('div.branch-form-name div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(branch_form.name);\n\n\t\t\t//reset back button visibility\n\t\t\tprev_btn.removeClass(\"invisible\");\n\n\t\t\t//handler for prev button, showing prev input\n\t\t\tprev_btn.off().on('vclick', function(e) {\n\t\t\t\tself.gotoPrevPage(e);\n\t\t\t});\n\n\t\t\t//show \"store\" or \"store edit\" button based on where we are editing or adding a new entry\n\t\t\tif (window.localStorage.branch_edit_mode) {\n\n\t\t\t\tstore_btn.hide();\n\n\t\t\t\t//enable store edit button (if the form has jumps it got disabled) and show it\n\t\t\t\tstore_edit_btn.removeClass('ui-disabled hidden');\n\n\t\t\t\t//bind event with one() to enforce a single submit\n\t\t\t\tstore_edit_btn.off().one('vclick', function(e) {\n\t\t\t\t\tself.onStoreValues();\n\t\t\t\t});\n\n\t\t\t} else {\n\n\t\t\t\tstore_btn.show();\n\n\t\t\t\t//hide store edit button\n\t\t\t\t$('div.store-edit').addClass('hidden');\n\n\t\t\t\t//bind event with one() to enforce a single submit\n\t\t\t\tstore_btn.off().one('vclick', function(e) {\n\t\t\t\t\tself.onStoreValues();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t//update completion percentage and bar for this branch form\n\t\t\tself.updateFormCompletion(branch_inputs_total + 1, branch_inputs_total);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.renderStoreEditFeedback = function(is_positive) {\n\n\t\t\t//EC.Notification.hideProgressDialog();\n\n\t\t\tif (is_positive) {\n\n\t\t\t\tEC.Notification.showToast(EC.Localise.getTranslation(\"edit_saved\"), \"short\");\n\n\t\t\t\t//remove flag that disable store edit from an intermediate screen\n\t\t\t\twindow.localStorage.removeItem(\"branch_has_new_jump_sequence\");\n\n\t\t\t\t//open branch entries list page\n\t\t\t\tEC.Routing.changePage(EC.Const.BRANCH_ENTRIES_LIST_VIEW);\n\t\t\t}\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/*\n *\t@module EC\n *  @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.updateFormCompletion = function(the_position, the_length) {\n\n\t\t\tvar ratio = Math.ceil(100 * (the_position - 1) / the_length);\n\t\t\tvar percentage_bar = $('div.ui-grid-b.branch-input-nav-tabs div.input-progress-bar div.progress.progress_tiny');\n\t\t\tvar percentage_txt = $('div.ui-grid-b.branch-input-nav-tabs div.input-progress-bar span.form-completion-percent');\n\n\t\t\tpercentage_txt.text(ratio + \"%\");\n\t\t\tpercentage_bar.css(\"width\", ratio + \"%\");\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.amendSkippedValues = function() {\n\n\t\t\tvar self = this;\n\t\t\tvar wls = window.localStorage;\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar iLength;\n\t\t\tvar jLength;\n\t\t\tvar max_skipped_position;\n\t\t\tvar branch_inputs_trail = [];\n\t\t\tvar branch_inputs_values = [];\n\t\t\tvar is_found;\n\t\t\tvar is_genkey_hidden = EC.Utils.isBranchFormGenKeyHidden();\n\n\t\t\tbranch_inputs_trail = JSON.parse(wls.branch_inputs_trail);\n\t\t\tbranch_inputs_values = JSON.parse(wls.branch_inputs_values);\n\n\t\t\tiLength = branch_inputs_values.length;\n\t\t\tjLength = branch_inputs_trail.length;\n\n\t\t\tmax_skipped_position = branch_inputs_trail[branch_inputs_trail.length - 1].position;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {//for each input in inputs_values\n\n\t\t\t\tis_found = false;\n\n\t\t\t\t//jumps can generate null values in the input_values array (when entering a new entry)\n\t\t\t\tif (branch_inputs_values[i] === null) {\n\t\t\t\t\tis_found = true;\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( j = 0; j < jLength; j++) {//for each input in inputs_trail\n\t\t\t\t\t\t//check if the branch input values is in the branch input trail array OR the input value is a hidden primary key value. In both case, the value needs to be saved\n\n\t\t\t\t\t\tif (parseInt(branch_inputs_values[i].position, 10) === branch_inputs_trail[j].position || (is_genkey_hidden === 1 && parseInt(branch_inputs_values[i].is_primary_key, 10) === 1 )) {\n\n\t\t\t\t\t\t\tis_found = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}// for each inputs_trail\n\t\t\t\t}\n\n\t\t\t\t//not found values (and null values)\n\t\t\t\t// TODO: why was I also checking for inputs_values[i].position < max_skipped_position???\n\t\t\t\tif (!is_found) {\n\t\t\t\t\tbranch_inputs_values[i].value = EC.Const.SKIPPED;\n\t\t\t\t}\n\n\t\t\t}//for each inputs_values\n\n\t\t\t//store the amended values in localStorage for saving\n\t\t\twls.branch_inputs_values = JSON.stringify(branch_inputs_values);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n\n/*\n *\t@module EC\n *  @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.buildRows = function(the_filenameToTimestamp) {\n\n\t\t\tvar self = this;\n\t\t\tvar i;\n\t\t\tvar branch_input;\n\t\t\tvar value_obj;\n\t\t\tvar value;\n\t\t\tvar _id;\n\t\t\tvar ref;\n\t\t\tvar rows = [];\n\t\t\tvar iLength = EC.BranchInputs.branch_inputs.length;\n\t\t\tvar key_position = EC.BranchInputs.getPrimaryKeyRefPosition();\n\t\t\tvar hierarchy_key_position = EC.Inputs.getPrimaryKeyRefPosition();\n\t\t\tvar parts;\n\t\t\tvar filename;\n\t\t\tvar filename_parts;\n\t\t\tvar extension;\n\t\t\tvar form_name = window.localStorage.form_name;\n\t\t\tvar uuid = EC.Utils.getPhoneUUID();\n\t\t\tvar form_id = window.localStorage.form_id;\n\t\t\tvar created_on = EC.Utils.getTimestamp();\n\t\t\tvar branch_form_name = window.localStorage.branch_form_name;\n\t\t\tvar ios_filenames = the_filenameToTimestamp;\n\t\t\tvar timestamp;\n\n\t\t\t//get parent key value for the current branch form\n\t\t\tvar current_branch_input_position = parseInt(window.localStorage.branch_current_position, 10);\n\n\t\t\t//get value of primary key for this branchform\n\t\t\tvar key_value = EC.BranchInputs.getCachedInputValue(key_position).value;\n\n\t\t\t/* Get key and value of primary key for the hierarchy entry of this branch form.\n\t\t\t * The hierarchy key value is the one cached, if the user edits it before saving the entry, it will need to be updated in the database\n\t\t\t * or lock the editing after inserting a branch form.\n\t\t\t */\n\t\t\tvar hierarchy_entry_key_value = EC.Inputs.getCachedInputValue(hierarchy_key_position).value;\n\t\t\tvar hierarchy_entry_key_ref = EC.Utils.getFormPrimaryKeyRef(form_id);\n\n\t\t\t//build rows to be saved - the text value for each input is saved in an array with corresponding indexes\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//get current value\n\t\t\t\tbranch_input = EC.BranchInputs.branch_inputs[i];\n\t\t\t\tvalue_obj = EC.BranchInputs.getCachedInputValue(branch_input.position);\n\n\t\t\t\t//save cached value OR \"\" when the value cannot be found\n\t\t\t\tvalue = value_obj.value || \"\";\n\n\t\t\t\t//_id is set only when we are editing, it is the _id of the current row in the database which will be updated\n\t\t\t\t_id = value_obj._id;\n\n\t\t\t\t//deal with media types to save the correct value (full path uri)\n\t\t\t\tif (branch_input.type === EC.Const.PHOTO || branch_input.type === EC.Const.VIDEO || branch_input.type === EC.Const.AUDIO) {\n\n\t\t\t\t\t//check whether the value is defined as media value {stored: \"<path>\", cached: \"<path>\"}\n\t\t\t\t\tif (value.hasOwnProperty(\"stored\")) {\n\n\t\t\t\t\t\tif (value.stored === \"\") {\n\n\t\t\t\t\t\t\t//we are saving a new media file path from the cached one (or an empty string if the file field was optional)\n\t\t\t\t\t\t\tif (value.cached !== \"\") {\n\n\t\t\t\t\t\t\t\t//build file name (in the format <form_name>_<ref>_<uuid>_filename) with the cached value\n\t\t\t\t\t\t\t\t//Cordova Camera API unfortunately returns the timestamp as a file name on Android only, on iOS a smart guy decided to use the same file name with an incremental index (lol)\n\n\t\t\t\t\t\t\t\tparts = value.cached.split('/');\n\t\t\t\t\t\t\t\tfilename = parts[parts.length - 1];\n\n\t\t\t\t\t\t\t\tswitch(window.device.platform) {\n\n\t\t\t\t\t\t\t\t\tcase EC.Const.ANDROID:\n\t\t\t\t\t\t\t\t\t\t//do nothing\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase EC.Const.IOS:\n\n\t\t\t\t\t\t\t\t\t\t//replace filename with <timestamp>.jpg as on IOS the Camera, Audio and Video capture is inconsistent and returns weird file names\n\t\t\t\t\t\t\t\t\t\t//not always the timestamp. We want to save the files using the timestamp as we do on Android (and following Epicollect+ filename schema)\n\t\t\t\t\t\t\t\t\t\tif (branch_input.type === EC.Const.PHOTO || branch_input.type === EC.Const.AUDIO || branch_input.type === EC.Const.VIDEO) {\n\n\t\t\t\t\t\t\t\t\t\t\t//get linked timestamp as we save the file using the timestamp as the file name\n\t\t\t\t\t\t\t\t\t\t\tfilename_parts = filename.split(\".\");\n\t\t\t\t\t\t\t\t\t\t\textension = filename_parts[filename_parts.length - 1];\n\n\t\t\t\t\t\t\t\t\t\t\ttimestamp = EC.Utils.getIOSFilename(ios_filenames, filename);\n\t\t\t\t\t\t\t\t\t\t\tfilename = timestamp + \".\" + extension;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvalue = form_name + \"_\" + branch_input.ref + \"_\" + uuid + \"_\" + filename;\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//use the existing stored path\n\t\t\t\t\t\t\tvalue = value.stored;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//value was not defined as media value: use case when user leaves a form halfway through but still wants to save. Save an empty object then\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trows.push({\n\t\t\t\t\t_id : _id, //this is set only when we are editing\n\t\t\t\t\tinput_id : branch_input._id,\n\t\t\t\t\tform_id : branch_input.form_id,\n\t\t\t\t\tposition : branch_input.position,\n\t\t\t\t\thierarchy_entry_key_value : hierarchy_entry_key_value,\n\t\t\t\t\thierarchy_entry_key_ref : hierarchy_entry_key_ref,\n\t\t\t\t\tlabel : branch_input.label,\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tref : branch_input.ref,\n\t\t\t\t\tis_title : branch_input.is_title,\n\t\t\t\t\tentry_key : key_value,\n\t\t\t\t\ttype : branch_input.type,\n\t\t\t\t\tis_data_synced : 0,\n\t\t\t\t\tis_media_synced : 0,\n\t\t\t\t\tis_remote : 0,\n\t\t\t\t\tcreated_on : created_on\n\t\t\t\t});\n\n\t\t\t}//for each input\n\n\t\t\t//EC.Notification.showProgressDialog();\n\n\t\t\tconsole.log('rows');\n\t\t\tconsole.log(JSON.stringify(rows));\n\n\t\t\t//save/update values to database\n\t\t\tif (window.localStorage.branch_edit_mode) {\n\n\t\t\t\t$.when(EC.Update.commitBranchForm(rows)).then(function() {\n\n\t\t\t\t\twindow.localStorage.branch_edit_hash = '#entries?form=' + form_id + '&name=' + form_name + '&entry_key=&direction=' + EC.Const.EDITING;\n\n\t\t\t\t\t//set selected key value in localStorage to show list of values later\n\t\t\t\t\twindow.localStorage.branch_edit_key_value = key_value;\n\n\t\t\t\t\t//redirect to branch entries list page with positive flag\n\t\t\t\t\tEC.BranchInputs.renderStoreEditFeedback(true);\n\n\t\t\t\t}, function() {\n\t\t\t\t\tEC.BranchInputs.renderStoreEditFeedback(false);\n\t\t\t\t});\n\n\t\t\t} else {\n\n\t\t\t\t$.when(EC.Create.insertBranchFormValues(rows, key_value, hierarchy_entry_key_value)).then(function(entry_key) {\n\t\t\t\t\tEC.BranchInputs.prepareFeedback(true, entry_key);\n\t\t\t\t}, function() {\n\t\t\t\t\tEC.BranchInputs.prepareFeedback(false, null);\n\t\t\t\t});\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.buildRows = function() {\n\n\t\t\tvar self = this;\n\t\t\tvar i;\n\t\t\tvar branch_input;\n\t\t\tvar value;\n\t\t\tvar _id;\n\t\t\tvar ref;\n\t\t\tvar rows = [];\n\t\t\tvar iLength = EC.BranchInputs.branch_inputs.length;\n\t\t\tvar key_position = EC.BranchInputs.getPrimaryKeyRefPosition();\n\t\t\tvar parent_key_position = EC.Inputs.getPrimaryKeyRefPosition();\n\t\t\tvar parts;\n\t\t\tvar filename;\n\t\t\tvar form_name = window.localStorage.form_name;\n\t\t\tvar uuid = EC.Utils.getPhoneUUID();\n\t\t\tvar form_id = window.localStorage.form_id;\n\t\t\tvar created_on = EC.Utils.getTimestamp();\n\t\t\tvar branch_form_name = window.localStorage.branch_form_name;\n\n\t\t\t//get parent key value for the current branch form\n\t\t\tvar current_branch_input_position = parseInt(window.localStorage.branch_current_position, 10);\n\n\t\t\t//get value of primary key for this branchform\n\t\t\tvar key_value = EC.BranchInputs.getCachedInputValue(key_position).value;\n\n\t\t\t/* Get value of primary key for the parent entry of this branch form.\n\t\t\t * The parent key value is the one cached, if the user edits it before saving the entry, it will need to be updated in the database\n\t\t\t * or lock the editing after inserting a branch form\n\t\t\t */\n\n\t\t\tvar hierarchy_entry_key_value = EC.Inputs.getCachedInputValue(parent_key_position).value;\n\n\t\t\t//build rows to be saved - the text value for each input is saved in an array with corresponding indexes\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//get current value\n\t\t\t\tbranch_input = EC.BranchInputs.branch_inputs[i];\n\t\t\t\tvalue = EC.BranchInputs.getCachedInputValue(branch_input.position).value;\n\t\t\t\t_id = EC.BranchInputs.getCachedInputValue(branch_input.position)._id;\n\n\t\t\t\t//deal with media types to save the correct value (full path uri)\n\t\t\t\tif (branch_input.type === EC.Const.PHOTO || branch_input.type === EC.Const.VIDEO || branch_input.type === EC.Const.AUDIO) {\n\n\t\t\t\t\tconsole.log(\"value: \" + JSON.stringify(value));\n\n\t\t\t\t\tif (value.stored === \"\") {\n\n\t\t\t\t\t\t//we are saving a new media file path from the cached one (or an empty string if the file field was optional)\n\t\t\t\t\t\tif (value.cached !== \"\") {\n\n\t\t\t\t\t\t\t//build file name (in the format <form_name>_<ref>_<uuid>_filename) with the cached value\n\t\t\t\t\t\t\tparts = value.cached.split('/');\n\t\t\t\t\t\t\tfilename = parts[parts.length - 1];\n\n\t\t\t\t\t\t\tvalue = form_name + \"_\" + branch_input.ref + \"_\" + uuid + \"_\" + filename;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//use the existing stored path\n\t\t\t\t\t\tvalue = value.stored;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconsole.log('branch_input.type: ' + branch_input.type);\n\n\t\t\t\trows.push({\n\t\t\t\t\t_id : _id, //this is set only when we are editing\n\t\t\t\t\tinput_id : branch_input._id,\n\t\t\t\t\tform_id : branch_input.form_id,\n\t\t\t\t\tposition : branch_input.position,\n\t\t\t\t\thierarchy_entry_key_value : hierarchy_entry_key_value,\n\t\t\t\t\tlabel : branch_input.label,\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tref : branch_input.ref,\n\t\t\t\t\tis_title : branch_input.is_title,\n\t\t\t\t\tentry_key : key_value,\n\t\t\t\t\ttype : branch_input.type,\n\t\t\t\t\tis_data_synced : 0,\n\t\t\t\t\tis_media_synced : 0,\n\t\t\t\t\tis_remote : 0,\n\t\t\t\t\tcreated_on : created_on\n\t\t\t\t});\n\n\t\t\t}//for each input\n\n\t\t\tEC.Notification.showProgressDialog();\n\n\t\t\tconsole.log('rows');\n\t\t\tconsole.log(JSON.stringify(rows));\n\n\t\t\t//save/update values to database\n\t\t\tif (window.localStorage.branch_edit_mode) {\n\n\t\t\t\tEC.Update.commitBranchForm(rows);\n\t\t\t\twindow.localStorage.branch_edit_hash = '#entries?form=' + form_id + '&name=' + form_name + '&entry_key=&direction=' + EC.Const.EDITING;\n\n\t\t\t\t//set selected key value in localStorage to show list of values later\n\t\t\t\twindow.localStorage.branch_edit_key_value = key_value;\n\n\t\t\t} else {\n\n\t\t\t\tEC.Create.insertBranchFormValues(rows, key_value, hierarchy_entry_key_value);\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *\t@module EC\n*   @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.prepareStoreEdit = function(the_current_value, the_current_position, the_input) {\n\n\t\t\tvar self = this;\n\t\t\tvar clone_value = \"\";\n\t\t\tvar validation = {};\n\t\t\tvar form_has_jumps;\n\t\t\tvar current_value = the_current_value;\n\t\t\tvar current_position = the_current_position;\n\t\t\tvar input = the_input;\n\n\t\t\t//disable to avoid double submit (not unbind, as if validation is wrong, I will have to re-bind again)\n\t\t\t$(this).addClass('ui-disabled');\n\n\t\t\tform_has_jumps = window.localStorage.form_has_jumps;\n\n\t\t\t//get input value(based on input type and layout)\n\t\t\tcurrent_value = EC.BranchInputs.getCurrentValue(input.type);\n\t\t\tcurrent_position = window.localStorage.branch_current_position;\n\n\t\t\t//if we need to check for a double entry, get clone value\n\t\t\tif (parseInt(input.has_double_check, 10) === 1) {\n\n\t\t\t\tclone_value = self.getCloneValue(input.type);\n\n\t\t\t}\n\n\t\t\t//validate input before going to next page\n\t\t\tvalidation = EC.Utils.isValidValue(input, current_value, clone_value);\n\n\t\t\t//check if the editing is valid\n\t\t\tif (!validation.is_valid) {\n\n\t\t\t\t//warn user about the type of error\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(validation.message));\n\n\t\t\t\t//re-enable button to allow user to try again\n\t\t\t\t$(this).removeClass('ui-disabled');\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t//cache current value in localStorage\n\t\t\tself.setCachedInputValue(current_value, current_position, input.type, input.is_primary_key);\n\n\t\t\t//If this form has jump, edit the input_values array to set to _skipp3d_ all the values which are not part of the input_trail array\n\t\t\tif (form_has_jumps === '1') {\n\n\t\t\t\t//add current element on the view to inputs trail (as we are not tapping next)\n\t\t\t\tself.pushInputsTrail(input);\n\n\t\t\t\t//amend values skipped by the new jump sequence when editing\n\t\t\t\tself.amendSkippedValues();\n\t\t\t}\n\n\t\t\t//store data.\n\t\t\tself.storeData(self);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.saveValuesOnExit = function(the_current_input) {\n\n\t\t\tvar self = this;\n\t\t\tvar current_input = the_current_input;\n\t\t\t//get current value from the input currently on screen\n\t\t\tvar current_value = self.getCurrentValue(current_input.type);\n\t\t\tvar current_position = parseInt(window.localStorage.branch_current_position, 10);\n\t\t\tvar validation = self.validateValue(current_input, current_value, current_position);\n\n\t\t\t//back to same screen if invalid value\n\t\t\tif (!validation.is_valid) {\n\t\t\t\t//warn user about the type of error\n\t\t\t\tEC.Notification.hideProgressDialog();\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(validation.message));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//cache current value in localStorage\n\t\t\tself.setCachedInputValue(current_value, current_position, current_input.type, current_input.is_primary_key);\n\t\t\tself.pushInputsTrail(current_input);\n\n\t\t\tself.onStoreValues();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.storeData = function(the_ctx) {\n\n\t\t\t//get context\n\t\t\tvar self = the_ctx;\n\t\t\tvar branch_media_files = [];\n\n\t\t\tvar getCachedMediaFiles = function() {\n\n\t\t\t\tvar branch_inputs_values = JSON.parse(window.localStorage.branch_inputs_values);\n\t\t\t\tvar iLength = branch_inputs_values.length;\n\t\t\t\tvar i;\n\t\t\t\tvar branch_input;\n\t\t\t\tvar value;\n\n\t\t\t\tvar files = [];\n\n\t\t\t\t//count how many media files we have to save\n\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t\t//get current value\n\t\t\t\t\tbranch_input = EC.BranchInputs.branch_inputs[i];\n\t\t\t\t\tvalue = EC.BranchInputs.getCachedInputValue(branch_input.position).value;\n\n\t\t\t\t\tif (branch_input.type === EC.Const.PHOTO || branch_input.type === EC.Const.VIDEO || branch_input.type === EC.Const.AUDIO) {\n\t\t\t\t\t\t// If cache path is empty, we do not have a file to save for that input so skip\n\t\t\t\t\t\t// it\n\t\t\t\t\t\tif (value.cached !== \"\") {\n\t\t\t\t\t\t\tfiles.push({\n\t\t\t\t\t\t\t\ttype : branch_input.type,\n\t\t\t\t\t\t\t\tcached : value.cached,\n\t\t\t\t\t\t\t\tstored : value.stored,\n\t\t\t\t\t\t\t\tref : branch_input.ref\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}//for\n\n\t\t\t\t/*\n\t\t\t\t * Now we got all the file paths, so clear DOM from any references\n\t\t\t\t * otherwise on editing input some cache/stored file paths could be there and\n\t\t\t\t * that causes errors upon saving\n\t\t\t\t * as the EC.File.move() mehod will look for non-existent files\n\t\t\t\t */\n\n\t\t\t\tif (files.length > 0) {\n\t\t\t\t\t//audio\n\t\t\t\t\t$('div#branch-audio div#branch-input-audio input#cached-audio-uri').val('');\n\t\t\t\t\t$('div#branch-audio div#branch-input-audio input#stored-audio-uri').val('');\n\t\t\t\t}\n\n\t\t\t\treturn files;\n\t\t\t};\n\n\t\t\tbranch_media_files = getCachedMediaFiles();\n\n\t\t\tconsole.log('media_files.length= ' + branch_media_files.length);\n\n\t\t\t//Save data directly if no files are found (or we are using Chrome)\n\t\t\tif (branch_media_files.length === 0 || EC.Utils.isChrome()) {\n\n\t\t\t\tself.buildRows();\n\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t//save media files, when all are saved trigger buildRows();\n\t\t\t\tconsole.log(JSON.stringify(branch_media_files));\n\n\t\t\t\t//move branch media files, pass the is_branch flag as true to trigger\n\t\t\t\t// BRanchINputs,buildRows AFTER files are moved\n\t\t\t\tEC.File.move(branch_media_files, true);\n\t\t\t}\n\n\t\t};\n\n\t\t/** @method onStoreValues When the user tap the button to save data,\n\t\t *  check first we have a primary key to save, then take care of skipped (by a\n\t\t * jump) values\n\t\t */\n\t\tmodule.onStoreValues = function() {\n\n\t\t\tvar self = this;\n\n\t\t\t//check if the primary key field has a value (there are cases where jumps skip\n\t\t\t// the primary key field, so warn the user form cannot be saved)\n\t\t\tif (self.isEmptyPrimaryKey()) {\n\t\t\t\t//warn user\n\t\t\t\tEC.Notification.hideProgressDialog();\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"missing_pk\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (window.localStorage.branch_form_has_jumps === '1') {\n\t\t\t\t//amend input values to save, setting the keyword \"_skipp3d_\" to skipped fields\n\t\t\t\tself.amendSkippedValues();\n\t\t\t}\n\n\t\t\tself.storeData(self);\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*global $, jQuery, LocalFileSystem, Media, cordova*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = (function (module) {\n    'use strict';\n\n    module.audio = function (the_value, the_input) {\n\n        var span_label = $('div#branch-audio div#branch-input-audio span.label');\n        var value = the_value;\n        var input = the_input;\n        var record_btn = $('div#branch-audio div#branch-input-audio div#start-btn');\n        var stop_btn = $('div#branch-audio div#branch-input-audio div#stop-btn');\n        var play_btn = $('div#branch-audio div#branch-input-audio div#play-btn');\n        var ongoing_recording_spinner = $('div#branch-audio div#branch-input-audio div#ongoing-recording-spinner');\n        var audio_feedback = $('div#branch-audio div#branch-input-audio p#audio-feedback');\n        var cached_audio_uri = $('div#branch-audio div#branch-input-audio input#cached-audio-uri');\n        var stored_audio_uri = $('div#branch-audio div#branch-input-audio input#stored-audio-uri');\n        var header_btns = $('div#branch-audio div.ui-header');\n        var current_path;\n        var audio_full_path_uri;\n        var cache_path;\n        var mediaRec;\n        var current_audio;\n\n        //update label text\n        span_label.text(input.label);\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        //attach event handlers (removing old ones to avoid tiggering an event twice)\n        record_btn.off('vclick').one('vclick', recordAudio);\n        stop_btn.off('vclick');\n        play_btn.off('vclick').on('vclick', playAudio);\n\n        //if an audio file is stored add it to hidden input field, to be shown if no\n        // cached value is set\n        if (window.localStorage.edit_mode && value.stored === undefined) {\n\n            stored_audio_uri.val(value);\n            value = {\n                cached: '',\n                stored: value\n            };\n\n        }//if\n\n\n        //toggle 'play' button only if we have a file to play\n        if (!value.cached) {\n\n            if (value.stored) {\n\n                play_btn.removeClass('ui-disabled');\n\n                //build full path to get audio file from private app folder (depending on\n                // platform)\n                switch (window.device.platform) {\n                    case EC.Const.ANDROID:\n                        audio_full_path_uri = EC.Const.ANDROID_APP_PRIVATE_URI + EC.Const.AUDIO_DIR + window.localStorage.project_name + '/' + value.stored;\n                        break;\n                    case EC.Const.IOS:\n                        audio_full_path_uri = EC.Const.IOS_APP_PRIVATE_URI + EC.Const.AUDIO_DIR + window.localStorage.project_name + '/' + value.stored;\n                        break;\n                }\n\n                console.log('image_full_path_uri: ' + audio_full_path_uri);\n\n                current_path = audio_full_path_uri;\n\n                audio_feedback.text('Audio available');\n\n                console.log('current_path: ' + JSON.stringify(audio_full_path_uri));\n\n            }\n            else {\n\n                play_btn.addClass('ui-disabled');\n            }\n\n        }\n        else {\n\n            //we have a cached file to play, current path gets the cached value\n            play_btn.removeClass('ui-disabled');\n            current_path = cached_audio_uri.val();\n        }\n\n        console.log('value.stored ' + value.stored);\n\n        //If a cache value is set, add it to hidden field\n        //cached_audio_uri.val(value.cached || '');\n        console.log('cache_audio_uri: ' + cached_audio_uri.val());\n\n        //add store audio uri cache_path (if any)\n        stored_audio_uri.val(value.stored || '');\n\n        //reset recording buttons\n        record_btn.removeClass('enable');\n        stop_btn.addClass('ui-disabled');\n\n        //request temporary folder from file system based on platform\n        //todo this will probably change with the new Cordova iOS to match Android\n        if (window.device.platform === EC.Const.IOS) {\n\n            window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function (the_file_system) {\n\n                console.log(JSON.stringify(the_file_system));\n                cache_path = the_file_system.root.nativeURL;\n                console.log('nativeURL: ' + cache_path);\n\n\n                /* We need to provide the full path to the tmp folder to record an audio file\n                 *\n                 * iOS 7+ does not want 'file://' in the path to record an audio file\n                 *\n                 * if the path starts with 'file://', error thrown is\n                 * 'Failed to start recording using AvAudioRecorder'\n                 * so it is removed using slice(7);\n                 */\n                cache_path = cache_path.slice(7);\n            }, function (error) {\n                console.log(JSON.stringify(error));\n            });\n\n        }\n        else {\n            //Android only getting public cache directory\n            window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, function (the_file_system) {\n\n                console.log(JSON.stringify(the_file_system));\n                cache_path = the_file_system.nativeURL;\n                console.log('nativeURL: ' + cache_path);\n\n            }, function (error) {\n                console.log(JSON.stringify(error));\n            });\n        }\n\n        //record audio\n        function recordAudio(e) {\n\n            var filename;\n\n            /*\n             * disable navigation buttons while recording, to avoid users to navigate away\n             * from the page causing the media object to stay open and impossible to release\n             */\n            header_btns.addClass('ui-disabled');\n\n            //disable player buttons while recording\n            stop_btn.removeClass('ui-disabled');\n            stop_btn.one('vclick', stopRecordAudio);\n            record_btn.addClass('ui-disabled');\n            play_btn.addClass('hidden');\n            ongoing_recording_spinner.removeClass('hidden');\n\n            switch (window.device.platform) {\n\n                case EC.Const.ANDROID:\n                    //build filename timestamp + mp4 (Cordova 2.9 sources have been modified manually\n                    // to record high quality audio)\n                    filename = EC.Utils.getTimestamp() + '.mp4';\n                    break;\n\n                case EC.Const.IOS:\n                    /*build filename timestamp + wav (iOS only records to files of type .wav and\n                     returns an error if the file name extension is not correct.)\n                     */\n                    filename = EC.Utils.getTimestamp() + '.wav';\n                    break;\n\n            }\n\n            //if there is a file cached already, we replace that one upon further recordings\n            if (!current_path) {\n                current_path = cache_path + filename;\n            }\n\n            console.log('Recording... - Full path: ' + current_path);\n\n            mediaRec = new Media(current_path,\n\n                // success callback\n                function onRecordingSuccess() {\n\n                    play_btn.removeClass('ui-disabled');\n                    audio_feedback.text('Audio available');\n                    console.log('recordAudio():Audio Success');\n                    cached_audio_uri.val(current_path);\n                },\n\n                // error callback\n                function onRecordingError(err) {\n                    console.log('recordAudio():Audio Error: ' + err.code);\n                });\n\n            // Record audio\n            mediaRec.startRecord();\n\n            e.preventDefault();\n            e.stopPropagation();\n\n        }//recordAudio\n\n        //stop recording\n        function stopRecordAudio(e) {\n\n            //re-enable navigation buttons\n            header_btns.removeClass('ui-disabled');\n\n            //enable player buttons\n            stop_btn.addClass('ui-disabled');\n            record_btn.removeClass('ui-disabled');\n            play_btn.removeClass('hidden ui-disabled');\n            ongoing_recording_spinner.addClass('hidden');\n\n            record_btn.one('vclick', recordAudio);\n\n            //stop recording and release resources\n            mediaRec.stopRecord();\n            mediaRec.release();\n\n            e.preventDefault();\n            e.stopPropagation();\n\n        }\n\n        function stopPlayingAudio(e) {\n\n            console.log('Audio stopped');\n\n            //stop audio and release resources\n            current_audio.stop();\n            current_audio.release();\n\n            //re-enable navigation buttons\n            header_btns.removeClass('ui-disabled');\n\n            //re-enable player buttons\n            stop_btn.off().one('vclick', stopRecordAudio);\n            stop_btn.addClass('ui-disabled');\n            record_btn.removeClass('ui-disabled');\n            play_btn.removeClass('ui-disabled');\n\n        }\n\n        //play the audio\n        function playAudio() {\n\n            //disable navigation buttons while playing\n            header_btns.addClass('ui-disabled');\n\n            console.log('Playing... ' + current_path);\n\n            //unbind stopRecordAudio to bind stopPlayingAudio\n            stop_btn.off().one('vclick', stopPlayingAudio);\n            stop_btn.removeClass('ui-disabled');\n            play_btn.addClass('ui-disabled');\n            record_btn.addClass('ui-disabled');\n\n            function onPlayStatusChange(the_status) {\n\n                var status = the_status;\n\n                if (status === 4) {\n\n                    //re-enable navigation buttons\n                    header_btns.removeClass('ui-disabled');\n\n                    //re-enable player buttons\n                    stop_btn.addClass('ui-disabled');\n                    record_btn.removeClass('ui-disabled');\n                    play_btn.removeClass('ui-disabled');\n                }\n\n            }\n\n            current_audio = new Media(current_path, null, null, onPlayStatusChange);\n            current_audio.play();\n\n        }//playAudio\n\n    };\n\n    return module;\n\n}(EC.BranchInputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.barcode = function(the_value, the_input) {\n\n\t\t\t//to cache dom lookups\n\t\t\tvar obj;\n\t\t\tvar span_label = $('span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar scanner = $('div#branch-barcode div#branch-input-barcode div#scanner');\n\t\t\tvar scanner_confirm = $('div#branch-barcode div#branch-input-barcode div#scanner-confirm');\n\t\t\tvar scan_result = $('div#branch-barcode div#branch-input-barcode input.scan-result');\n\t\t\tvar scan_result_confirm = $('div#branch-barcode div#branch-input-barcode input.scan-result-confirm');\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we\n\t\t\t\t// recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//reset buttons\n\t\t\tscanner.removeClass('ui-disabled');\n\t\t\tscanner_confirm.removeClass('ui-disabled');\n\n\t\t\tscan_result.val(value);\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key\n\t\t\t// or it triggers a jump\n\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === '1') {\n\n\t\t\t\t//disable scan button\n\t\t\t\tscanner.addClass('ui-disabled');\n\t\t\t\t$('div#branch-input-barcode p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$('div#branch-input-barcode p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate text input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\tscan_result_confirm.val(value);\n\n\t\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t//disable clone scan button\n\t\t\t\t\tscanner_confirm.addClass('ui-disabled');\n\t\t\t\t}\n\n\t\t\t\t//add event handler to second scan button\n\t\t\t\tscanner_confirm.off().on('vclick', function() {\n\n\t\t\t\t\t//flag needed to handle case when user dismiss the barcode scanner\n\t\t\t\t\twindow.localStorage.is_dismissing_barcode = 1;\n\n\t\t\t\t\tcordova.plugins.barcodeScanner.scan(function(result) {\n\n\t\t\t\t\t\t//do not override value if the scan action is cancelled by the user\n\t\t\t\t\t\tif (!result.cancelled) {\n\t\t\t\t\t\t\tscan_result_confirm.val(result.text);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t//add hidden class if missing\n\t\t\t\tclone.addClass('hidden');\n\t\t\t}\n\n\t\t\t//set handlers for scan button\n\t\t\tscanner.off().on('vclick', function() {\n\n\t\t\t\t//flag needed to handle case when user dismiss the barcode scanner\n\t\t\t\twindow.localStorage.is_dismissing_barcode = 1;\n\n\t\t\t\tcordova.plugins.barcodeScanner.scan(function(result) {\n\n\t\t\t\t\t//do not override value if the scan action is cancelled by the user\n\t\t\t\t\tif (!result.cancelled) {\n\t\t\t\t\t\tscan_result.val(result.text);\n\t\t\t\t\t}\n\n\t\t\t\t}, function(error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.checkbox = function(the_value, the_input) {\n\n\t\t\t//to cache dom lookups\n\t\t\tvar obj;\n\t\t\tvar span_label = $('div#branch-checkbox span.label');\n\t\t\tvar clone = $('div#branch-checkbox div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar CHECKBOX_CHECKED = \"\";\n\t\t\tvar DISABLED = \"\";\n\t\t\tvar SELECTED = \"\";\n\t\t\tvar HTML = \"\";\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\t\t\t} else {\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key or it triggers a jump\n\t\t\tif (window.localStorage.branch_edit_mode && (input.is_primary_key === '1' || input.has_jump === '1')) {\n\t\t\t\tDISABLED = 'disabled=\"disabled\"';\n\t\t\t}\n\n\t\t\t//display all checkboxes options\n\t\t\t$(input.options).each(function(index) {\n\n\t\t\t\tvar name = \"choice\";\n\t\t\t\tvar option_value = this.value.trim();\n                var option_label = this.label.trim();\n\t\t\t\tvar option_id = 'checkbox-choice-' + (index + 1);\n\t\t\t\tvar i;\n\t\t\t\tvar iLength;\n\n\t\t\t\t//check if we have any value stored. For checkboxes, 'value' will be an array\n\t\t\t\tfor ( i = 0, iLength = value.length; i < iLength; i++) {\n\n\t\t\t\t\tCHECKBOX_CHECKED = \"\";\n\n\t\t\t\t\t//if any match is found, pre-select that checkbox in the markup\n\t\t\t\t\tif (value[i] === option_value) {\n\t\t\t\t\t\tCHECKBOX_CHECKED = 'checked=\"checked\"';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tHTML += '<label>';\n\t\t\t\tHTML += '<input type=\"checkbox\" ' + CHECKBOX_CHECKED + ' ' + DISABLED + ' name=\"' + option_label;\n\t\t\t\tHTML += '\" id=\"' + option_id;\n\t\t\t\tHTML += '\" value=\"' + option_value;\n\t\t\t\tHTML += '\" />' + option_label;\n\t\t\t\tHTML += '</label>';\n\n\t\t\t});\n\n\t\t\tspan_label.append(HTML);\n\t\t\t$('div#branch-input-checkbox').trigger(\"create\");\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.date = function(the_value, the_input) {\n\n\t\t\tvar datepicker;\n\t\t\tvar ios_datepicker;\n\t\t\tvar span_label = $('div#branch-date span.label');\n\t\t\tvar clone = $('div#branch-date div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar datebox_format;\n\t\t\tvar default_date;\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label + \" - \" + input.datetime_format);\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we\n\t\t\t\t// recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//Android Phonegap DatePicker plugin http://goo.gl/xLrqZl\n\t\t\tdatepicker = $('div#branch-input-date input.nativedatepicker');\n\n\t\t\t//iOS uses the HTML5 input type=\"date\"\n\t\t\tios_datepicker = $('div#branch-input-date input.ios-date');\n\n\t\t\t//hide immediate ios date input parent (JQM quirk, this is to hide the div\n\t\t\t// element border wrapping the input after JQM enhanced the markup)\n\t\t\tios_datepicker.parent().addClass(\"no-border\");\n\n\t\t\t/* Set current date in custom data attribute.\n\t\t\t * Important: since Epicollect for some bizzarre reason does not store the\n\t\t\t * timestamps, but a formatted date,\n\t\t\t * it is impossible to trigger the datapicker to the right data/time value after\n\t\t\t * a saving, as the timestamp is lost\n\t\t\t * i.e. if I save save 25th march 1988 just as 25/3, I will never get the year\n\t\t\t * back :/ and it will default to the current date\n\t\t\t * TODO: save date and time values with a timestamp attached\n\t\t\t */\n\n\t\t\tdatepicker.attr(\"data-raw-date\", new Date());\n\n\t\t\t/*show default date if input.value = input.datetime_format:\n\t\t\t *if the option to show the current date as default is selected in the web form\n\t\t\t * builder,\n\t\t\t * the input value gets the value of datetime_format when parsing the xml\n\t\t\t */\n\t\t\tif (value === input.datetime_format) {\n\t\t\t\tdatepicker.val(EC.Utils.parseDate(new Date(), input.datetime_format));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdatepicker.val(value);\n\t\t\t}\n\n\t\t\t/*****************************************************************************************\n\t\t\t * Android uses the Phonegap official DatePicker plugin\n\t\t\t ****************************************************************************************/\n\t\t\tif (window.device.platform === EC.Const.ANDROID) {\n\n\t\t\t\t/* bind input to 'vclick' insted of focus, as we set the input as readonly.\n\t\t\t\t * this solved problem on android 2.3 where the keyboard was showing because the\n\t\t\t\t * input is in focus when tapping \"cancel\"\n\t\t\t\t * on the DatePicker popup\n\t\t\t\t */\n\n\t\t\t\tdatepicker.off().on('focus', function(event) {\n\n\t\t\t\t\tvar datepicker = $(this);\n\t\t\t\t\tvar selected_date = new Date(datepicker.attr(\"data-raw-date\"));\n\n\t\t\t\t\t// Same handling for iPhone and Android\n\t\t\t\t\twindow.plugins.datePicker.show({\n\t\t\t\t\t\tdate : selected_date,\n\t\t\t\t\t\tmode : 'date', // date or time or blank for both\n\t\t\t\t\t\tallowOldDates : true\n\t\t\t\t\t}, function(returned_date) {\n\n\t\t\t\t\t\tvar new_date;\n\n\t\t\t\t\t\tif (returned_date !== undefined) {\n\t\t\t\t\t\t\tnew_date = new Date(returned_date);\n\n\t\t\t\t\t\t\tdatepicker.val(EC.Utils.parseDate(new_date, input.datetime_format));\n\t\t\t\t\t\t\tdatepicker.attr(\"data-raw-date\", new_date);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// This fixes the problem you mention at the bottom of this script with it not\n\t\t\t\t\t\t// working a second/third time around, because it is in focus.\n\t\t\t\t\t\tdatepicker.blur();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/*****************************************************************************************\n\t\t\t * iOS uses the official HTML5 input type=\"date\"\n\t\t\t ****************************************************************************************/\n\t\t\tif (window.device.platform === EC.Const.IOS) {\n\n\t\t\t\tdatepicker.off().on('vclick', function(event) {\n\t\t\t\t\tios_datepicker.focus();\n\t\t\t\t});\n\n\t\t\t\tios_datepicker.off().on('blur', function(event) {\n\n\t\t\t\t\tvar ios_date = ios_datepicker.val();\n\n\t\t\t\t\tdatepicker.val(EC.Utils.parseIOSDate(ios_date, input.datetime_format));\n\t\t\t\t\tdatepicker.attr(\"data-raw-date\", ios_date);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\"use strict\";\n\t\n\tmodule.decimal = function(the_value, the_input) {\n\n\t\t\t\n\t\t\tvar obj;\n\t\t\tvar span_label = $('span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\n\t\t\tvar min_range = $('span.min-range');\n\t\t\tvar max_range = $('span.max-range');\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t} else {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//re-enable input if needed\n\t\t\t$('div#branch-input-decimal input').removeAttr('disabled');\n\n\t\t\t//hide elements not needed\n\t\t\tclone.addClass('hidden');\n\t\t\tmin_range.addClass('hidden');\n\t\t\tmax_range.addClass('hidden');\n\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate textarea input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\t$('div.clone input').val(value);\n\n\t\t\t\t//if in editing mode, do not allow changes either if the field is a primary key or it triggers a jump\n\t\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t$('div.clone input').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//show min range if any\n\t\t\tif (input.min_range !== \"\") {\n\n\t\t\t\tmin_range.removeClass('hidden');\n\t\t\t\tmin_range.text('Min: ' + input.min_range);\n\n\t\t\t}\n\n\t\t\t//show max range if any\n\t\t\tif (input.max_range !== \"\") {\n\n\t\t\t\tmax_range.removeClass('hidden');\n\t\t\t\tmax_range.text('Max: ' + input.max_range);\n\n\t\t\t}\n\n\t\t\t$('div#input-decimal input').val(value);\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key\n\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\t\t\t\t$('div#branch-input-decimal input').attr('disabled', 'disabled');\n\t\t\t\t\t$('div#branch-input-decimal p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\t$('div#branch-input-decimal p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\n\t\t};\n\t\t\n\treturn module;\n\t\n\t}(EC.BranchInputTypes));","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\n        \"use strict\";\n\n        module.dropdown = function(the_value, the_input) {\n\n            //to cache dom lookups\n            var obj;\n            var span_label = $('div#branch-select span.label');\n            var clone = $('div.clone');\n            var double_entry;\n            var value = the_value;\n            var input = the_input;\n            var DISABLED = \"\";\n            var SELECTED = \"\";\n            var HTML = \"\";\n\n            //update label text\n            span_label.text(input.label);\n\n            //Localise\n            if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n                EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n            }\n\n            //Add attribute to flag the primary key input field\n            if (parseInt(input.is_primary_key, 10) === 1) {\n                span_label.attr('data-primary-key', 'true');\n            } else {\n                //reset the attribute to empty if not a primary key (JQM caches\n                // pages and we recycle views)\n                span_label.attr('data-primary-key', '');\n            }\n\n            //check if we need to replicate this input\n            double_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n            //if in editing mode, do not allow changes either if the field is a\n            // primary key or it triggers a jump\n            if (window.localStorage.branch_edit_mode && (input.is_primary_key === '1' || input.has_jump === '1')) {\n                DISABLED = 'disabled=\"disabled\"';\n            }\n\n            SELECTED = (value === \"\") ? 'selected' : \"\";\n\n            //TODO: check markup on jqm docs for select. Fastclick: is needclick\n            // needed?\n            HTML += '<select id=\"selection\" name=\"selection\" data-native-menu=\"true\" >';\n            HTML += '<option value =\"0\"' + SELECTED + '>' + EC.Const.NO_OPTION_SELECTED + '</option>';\n\n            $(input.options).each(function(index) {\n\n                var option_value = this.value;\n                var option_index = (index + 1);\n                var option_label = this.label;\n                var option_id = 'select-choice-' + (index + 1);\n\n                //check if we have a value cached and pre-select that input\n                SELECTED = (value === option_value) ? 'selected' : \"\";\n\n                HTML += '<option ' + SELECTED + ' ' + DISABLED + ' value =\"' + option_value + '\" data-index=\"' + option_index + '\">' + option_label + '</option>';\n            });\n\n            HTML += '</select>';\n\n            span_label.append(HTML);\n            $('div#branch-input-dropdown').trigger(\"create\");\n\n            /*****************************************************************************************************\n             *\tFollowing code is a hack to make the select native widget work on\n             * Android 4.4.2 (Nexus 5)\n             */\n            //Add needclick to all the markup as Fastclick is interfering and the\n            // native popup with the list of options is never triggered\n            // $(\"div#input-dropdown\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-select\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn\n            // span.ui-btn-inner\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn span.ui-btn-inner\n            // span.ui-btn-text\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn span.ui-btn-inner\n            // span.ui-btn-text span\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn span.ui-btn-inner\n            // span.ui-icon\").addClass(\"needsclick\");\n\n            //Manually trigger a click on a select element. Best solution I came\n            // across\n            $(\"select\").on('vmousedown', function(e) {\n                $(this).focus().click();\n            });\n\n            /*****************************************************************************************************\n             * End hack\n             */\n\n        };\n\n        return module;\n\n    }(EC.BranchInputTypes));\n","/*jslint vars: true, nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.integer = function(the_value, the_input) {\n\n\t\t\t//to cache dom lookups\n\t\t\tvar obj;\n\t\t\tvar span_label = $('div#branch-integer span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = parseInt(the_value, 10);\n\t\t\tvar input = the_input;\n\t\t\tvar min_range = $('div#branch-input-integer span.min-range');\n\t\t\tvar max_range = $('div#branch-input-integer span.max-range');\n\t\t\tvar input_holder = $('div#branch-input-integer input');\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t} else {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//re-enable input if needed\n\t\t\tinput_holder.removeAttr('disabled');\n\n\t\t\tif (window.device.platform === EC.Const.IOS) {\n\t\t\t\t//trigger numeric keyboard on iOS\n\t\t\t\t$('div#branch-input-integer input').attr('pattern', '[0-9]*');\n\t\t\t}\n\n\t\t\t//hide elements not needed\n\t\t\tclone.addClass('hidden');\n\t\t\tmin_range.addClass('hidden');\n\t\t\tmax_range.addClass('hidden');\n\n\t\t\t//check if we need to render a double entry for this input\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate integer input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\t$('div.clone input').val(value);\n\n\t\t\t\t//if in editing mode, do not allow changes either if the field is a primary key\n\t\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t$('div.clone input').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t//show min range if any\n\t\t\tif (input.min_range !== \"\") {\n\n\t\t\t\tmin_range.removeClass('hidden');\n\t\t\t\tmin_range.text('Min: ' + input.min_range);\n\n\t\t\t}\n\n\t\t\t//show max range if any\n\t\t\tif (input.max_range !== \"\") {\n\n\t\t\t\tmax_range.removeClass('hidden');\n\t\t\t\tmax_range.text('Max: ' + input.max_range);\n\n\t\t\t}\n\n\t\t\tinput_holder.val(value);\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key\n\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\t\t\t\tinput_holder.attr('disabled', 'disabled');\n\t\t\t\t$('div#branch-input-integer p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\t$('div#branch-input-integer p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputTypes)); ","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = (function (module) {\n    'use strict';\n\n    module.location = function (the_value, the_input) {\n\n\n        var span_label = $('span.label');\n        var value = the_value;\n        var input = the_input;\n        var requests = [];\n        var geolocation_request;\n\n        var is_first_attempt = true;\n        //set unlimited timeout for watch position to avoid timeout error on iOS when the device does not move\n        // see http://goo.gl/tYsBSC, http://goo.gl/jYQhgr, http://goo.gl/8oR1g2\n        var timeout = (window.device.platform === EC.Const.IOS) ? Infinity : 30000;\n\n        //update label text\n        span_label.text(input.label);\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        var set_location_btn = $('div#branch-location div#branch-input-location div#branch-set-location');\n        var set_location_result = $('textarea#branch-set-location-result');\n        var accuracy_result = $('div#branch-location  div#branch-input-location div.current-accuracy-result');\n        var accuracy_tip = $('div#branch-location  div#branch-input-location div.location-accuracy-tip');\n\n        //hide feedback when showing the view the first time\n        $(accuracy_result).addClass('hidden');\n        $(accuracy_tip).addClass('hidden');\n\n        //set previous location value if any\n        set_location_result.val(value);\n\n        function _showAcquiredLocation() {\n\n            // clearAllRequests();\n\n            $(accuracy_result).find('span').text(Math.floor(location.accuracy));\n            $(accuracy_result).removeClass('hidden');\n            $(accuracy_tip).removeClass('hidden');\n\n            EC.Notification.hideProgressDialog();\n\n            set_location_result.val(//\n                'Latitude: ' + location.latitude + ',\\n' + //\n                'Longitude: ' + location.longitude + ',\\n' + //\n                'Altitude: ' + location.altitude + ',\\n' + //\n                'Accuracy: ' + location.accuracy + ',\\n' + //\n                'Altitude Accuracy: ' + location.altitude_accuracy + ',\\n' + //\n                'Heading: ' + location.heading + '\\n');\n            //\n\n            if (!EC.Utils.isChrome()) {\n                EC.Notification.showToast(EC.Localise.getTranslation('location_acquired'), 'short');\n            }\n            set_location_btn.one('vclick', _getLocation);\n\n\n        }\n\n        function requestPosition() {\n\n            console.log('requestPosition called');\n            //on first attempt, get a quick and rough location just to get started\n            //We do not use getCurrentPosition as it tends to give back a cached position when is it called, not looking for a new one each time\n            if (is_first_attempt) {\n                geolocation_request = navigator.geolocation.watchPosition(onGCPSuccess, onGCPError, {\n                    maximumAge: 0,\n                    timeout: timeout,\n                    enableHighAccuracy: true\n                });\n            }\n            else {\n\n                /*\n                 on subsequent calls, check position for 3 secs and return.\n                 this will improve cases when watchPositionretunr immediately with the same value, as it might return more than once during the 3 secs period\n                 */\n\n                geolocation_request = navigator.geolocation.watchPosition(onGCPSuccess, onGCPError, {\n                    maximumAge: 0,\n                    timeout: timeout,\n                    enableHighAccuracy: true\n                });\n\n\n                window.setTimeout(function () {\n                        window.navigator.geolocation.clearWatch(geolocation_request);\n\n                        _showAcquiredLocation();\n\n                        console.log('setTimeout called');\n                    },\n                    3000 //stop checking after 3 seconds (value is milliseconds)\n                );\n            }\n        }\n\n        var _getLocation = function () {\n\n            set_location_btn.off('vclick');\n            requests = [];\n\n\n            //check id GPS is enabled on the device\n            $.when(EC.Utils.isGPSEnabled()).then(function () {\n\n                //gps is on\n                EC.Notification.showProgressDialog(EC.Localise.getTranslation('locating'), EC.Localise.getTranslation('wait'));\n\n                //On Android, mostly on old devices, halt the execution to solve loader spinner not hiding after a gps lock\n                if (window.device.platform === EC.Const.ANDROID) {\n                    //if the device is older than KitKat I assume it is slow to hide the spinning loader and I need the execution halt to clear race conditions\n                    if (!(EC.Const.KITKAT_REGEX.test(window.device.version) || EC.Const.LOLLIPOP_REGEX)) {\n                        EC.Utils.sleep(2000);\n                    }\n                }\n\n                requestPosition();\n\n            }, function () {\n                console.log('gps NOT enabled');\n\n                //no gps...do we have at least an internet connection?\n                //TODO: replace with location services network\n                //if (!EC.Utils.hasConnection()) {\n\n                //console.log('No internet connection');\n\n                EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('gps_disabled'));\n\n                //  }\n            });\n\n        };\n\n        var onGCPSuccess = function (position) {\n\n            console.log('onGCPSuccess called, accuracy: ' + position.coords.accuracy);\n            //get HTML5 geolocation component values replacing null with '' for not available components\n            location.latitude = (position.coords.latitude === null) ? '' : position.coords.latitude;\n            location.longitude = (position.coords.longitude === null) ? '' : position.coords.longitude;\n            location.altitude = (position.coords.altitude === null) ? '' : position.coords.altitude;\n            location.accuracy = (position.coords.accuracy === null) ? '' : position.coords.accuracy;\n            location.altitude_accuracy = (position.coords.altitudeAccuracy === null) ? '' : position.coords.altitudeAccuracy;\n            location.heading = (position.coords.heading === null) ? '' : position.coords.heading;\n\n\n        };\n\n        // onError Callback receives a PositionError object\n        //\n        var onGCPError = function (error) {\n\n            var empty = '';\n\n            window.navigator.geolocation.clearWatch(geolocation_request);\n\n            // clearAllRequests();\n\n            EC.Notification.hideProgressDialog();\n\n            console.log(JSON.stringify(error));\n\n            if (error.code === 3) {\n                EC.Notification.showAlert(EC.Localise.getTranslation('error'), error.message + EC.Localise.getTranslation('location_fail'));\n\n            } else if (error.code === 1) {\n\n                if (window.device.platform === EC.Const.IOS) {\n                    EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('location_service_fail'));\n                }\n            } else {\n                EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('unknow_error'));\n            }\n\n            //set location object to empty values\n            set_location_result.val(//\n                'Latitude: ' + empty + ',\\n' + //\n                'Longitude: ' + empty + ',\\n' + //\n                'Altitude: ' + empty + ',\\n' + //\n                'Accuracy: ' + empty + ',\\n' + //\n                'Altitude Accuracy: ' + empty + ',\\n' + //\n                'Heading: ' + empty + '\\n');\n            //\n\n            set_location_btn.one('vclick', _getLocation);\n        };\n\n        //bind set location button\n        set_location_btn.off().one('vclick', _getLocation);\n\n    };\n\n    return module;\n\n}(EC.BranchInputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery, Camera*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = (function (module) {\n    'use strict';\n\n    var app_storage_dir;\n\n    module.photo = function (the_value, the_input) {\n\n        var span_label = $('div#branch-photo span.label');\n        var value = the_value;\n        var input = the_input;\n        var camera_btn = $('div#branch-input-photo div#camera-btn');\n        var store_image_uri = $('div#branch-input-photo input#stored-image-uri');\n        var cache_image_uri = $('div#branch-input-photo input#cached-image-uri');\n        var image_full_path_uri;\n\n        //clear canvas from previous images\n        var canvas_portrait_dom = $('div#branch-input-photo #canvas-portrait');\n        var canvas_landscape_dom = $('div#branch-input-photo #canvas-landscape');\n        var canvas_portrait = $('div#branch-input-photo #canvas-portrait')[0];\n        var canvas_landscape = $('div#branch-input-photo #canvas-landscape')[0];\n\n        var context_portrait = canvas_portrait.getContext('2d');\n        context_portrait.clearRect(0, 0, canvas_portrait.width, canvas_portrait.height);\n\n        var context_landscape = canvas_landscape.getContext('2d');\n        context_landscape.clearRect(0, 0, canvas_landscape.width, canvas_landscape.height);\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        // //on iOS, close image popup on orientation change\n        if (EC.Const.IOS) {\n            //TODO\n        }\n\n        $('div#canvas-wrapper').off().on('vclick', function (e) {\n\n            var href = $('div#branch-input-photo input#cached-image-uri').val();\n            var iOS_popup = $('#branch-photo-popup');\n\n            console.log(href);\n\n            //if cached image url is empty, get stored image url\n            if (href === '') {\n                href = app_storage_dir + $('div#branch-input-photo input#stored-image-uri').val();\n            }\n\n            if (window.device) {\n                switch (window.device.platform) {\n\n                    //on Android we show the image as a opo up using swipebox\n                    case EC.Const.ANDROID:\n                        e.preventDefault();\n                        $.swipebox([{\n                            href: href\n                        }]);\n                        break;\n\n                    //on iOS we show a built in JQM popup, as swipebox has\n                    // got issues\n                    case EC.Const.IOS:\n                        iOS_popup.find('img').attr('src', href);\n\n                        /*\n                         * let's use a timeout otherwise the popup is not\n                         * centered on the first tap, because the\n                         * image is not loaded. Not the prettiest solution,\n                         * but since the image is loaded locally\n                         * and always the same size, I can assume 100 ms will\n                         * work everytime on iPhones\n                         *\n                         * see here\n                         * http://stackoverflow.com/questions/21304763/jquery-mobile-popup-not-centered-on-first-click\n                         *\n                         */\n\n                        window.setTimeout(function () {\n                            iOS_popup.popup('open');\n                        }, 100);\n\n                        $(window).on('orientationchange', function (event) {\n                            console.log('called orientationchange');\n\n                            //close popup, as it is not scaled/positioned\n                            // properly\n                            iOS_popup.popup('close');\n                        });\n\n                        break;\n                }\n\n            }\n\n        });\n\n        //Render thumbnail on <canvas>\n        var _renderThumb = function (the_image_uri) {\n\n            //load taken image on <canvas> tag\n            var image = new Image();\n            var canvas;\n            var context;\n            var source = the_image_uri;\n\n            image.src = source;\n\n            image.onerror = function () {\n                console.log('Image failed!');\n            };\n\n            image.onload = function () {\n\n                //resize image to fit in canvas -> it is not working properly!\n                console.log('on load called');\n                var width = this.width;\n                var height = this.height;\n                var thumb_height;\n                var thumb_width;\n                var canvas;\n\n                if (height > width) {\n\n                    //portrait\n                    canvas = canvas_portrait;\n                    thumb_width = 188;\n                    thumb_height = 250;\n                    canvas_landscape_dom.addClass('hidden');\n                    canvas_portrait_dom.removeClass('hidden');\n\n                }\n                else {\n\n                    //landscape\n                    canvas = canvas_landscape;\n                    thumb_width = 250;\n                    thumb_height = 188;\n                    canvas_portrait_dom.addClass('hidden');\n                    canvas_landscape_dom.removeClass('hidden');\n                }\n\n                context = canvas.getContext('2d');\n                context.clearRect(0, 0, canvas.width, canvas.height);\n\n                context.save();\n\n                //scale image based on device pixel density\n                // context.scale(window.devicePixelRatio, window.devicePixelRatio);\n                context.imageSmoothingEnabled = false;\n\n                context.drawImage(this, 0, 0, thumb_width, thumb_height);\n\n                context.restore();\n\n            };\n            //image.onload\n\n            console.log(JSON.stringify(source));\n\n        };\n\n        //hide both canvas\n        canvas_landscape_dom.addClass('hidden');\n        canvas_portrait_dom.addClass('hidden');\n\n        //unbind camera button event to avoid multiple calls to Camera API\n        camera_btn.off('vclick');\n\n        //update label text\n        span_label.text(input.label);\n\n        //if a value is stored when editing, on the first load add it to hidden input\n        // field,  to be shown if no cached value is set\n        if (window.localStorage.branch_edit_mode) {\n\n            if (value.stored === undefined) {\n                store_image_uri.val(value);\n                value = {\n                    cached: '',\n                    stored: value\n                };\n            }\n            else {\n\n                store_image_uri.val(value.stored);\n            }\n\n        }\n        else {\n            //clear any previous stored path in the DOM, otherwise it get cached and it causes the same image to be overriden when adding a new entry\n            store_image_uri.val('');\n        }\n\n        console.log('value.stored ' + JSON.stringify(value.stored));\n\n        //If a cache value is set, add it to hidden field\n        cache_image_uri.val(value.cached || '');\n        console.log('cache_image_uri: ' + cache_image_uri.val());\n\n        //Show cached image if any, otherwise the stored image, if any\n        if (value.cached === '') {\n\n            console.log('cached value empty');\n\n            if (value.stored !== '') {\n\n                //build full path to get image from private app folder\n                switch (window.device.platform) {\n\n                    case EC.Const.ANDROID:\n                        image_full_path_uri = EC.Const.ANDROID_APP_PRIVATE_URI + EC.Const.PHOTO_DIR + window.localStorage.project_name + '/' + value.stored;\n                        app_storage_dir = EC.Const.ANDROID_APP_PRIVATE_URI + EC.Const.PHOTO_DIR + window.localStorage.project_name + '/';\n\n                        break;\n                    case EC.Const.IOS:\n                        image_full_path_uri = EC.Const.IOS_APP_PRIVATE_URI + EC.Const.PHOTO_DIR + window.localStorage.project_name + '/' + value.stored;\n                        app_storage_dir = 'file://' + EC.Const.IOS_APP_PRIVATE_URI + EC.Const.PHOTO_DIR + window.localStorage.project_name + '/';\n\n                        break;\n\n                }\n\n                console.log('image_full_path_uri: ' + image_full_path_uri);\n\n                _renderThumb(image_full_path_uri);\n\n            }\n\n        }\n        else {\n\n            //render the cached image\n            _renderThumb(value.cached);\n        }\n\n        //Set camera options - anything more than 1024 x 728 will crash\n        var source = Camera.PictureSourceType.CAMERA;\n        var camera_options = {\n            quality: 50, //anything more than this will cause memory leaks\n            destinationType: Camera.DestinationType.FILE_URI,\n            sourceType: source,\n            encodingType: Camera.EncodingType.JPEG,\n            mediaType: Camera.MediaType.PICTURE,\n            correctOrientation: true,\n            saveToPhotoAlbum: false,\n            targetWidth: 1024, //more than this resoution and it will happily crash\n            targetHeight: 768\n        };\n\n        //open camera app on click\n        camera_btn.on('vclick', function () {\n\n            navigator.camera.getPicture(onGPSuccess, onGPError, camera_options);\n\n        });\n\n        //Success callback\n        var onGPSuccess = function (the_image_uri) {\n\n            console.log('image_uri: ' + the_image_uri);\n\n            var image_uri = the_image_uri;\n\n            //render the new image on canvas\n            _renderThumb(image_uri);\n\n            //save cached filename in hidden input field\n            console.log('image uri is' + image_uri);\n\n            $('div#branch-input-photo input#cached-image-uri').val(image_uri);\n\n        };\n\n        //Error callback\n        var onGPError = function (error) {\n            console.log('Error', 'Failed because: ' + error);\n        };\n    };\n\n    return module;\n\n}(EC.BranchInputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.radio = function(the_value, the_input) {\n\t\t\t\n\t\t\tvar obj;\n\t\t\tvar span_label = $('div#branch-radio div#branch-input-radio span.label');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar HTML = \"\";\n\t\t\tvar RADIO_CHECKED = \"\";\n\t\t\tvar DISABLED = \"\";\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t} else {\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key or it triggers a jump\n\t\t\tif (window.localStorage.branch_edit_mode && (input.is_primary_key === '1' || input.has_jump === '1')) {\n\t\t\t\tDISABLED = 'disabled=\"disabled\"';\n\t\t\t}\n\n\t\t\tHTML += '<fieldset data-role=\"controlgroup\">';\n\n\t\t\t//render list of options\n\t\t\t$(input.options).each(function(index) {\n\n\t\t\t\t    //increase value by 1, as we use value = 0 when no option is selected (like for select/dropdown) We are using the index as radio jumps are mapped against the index of the value\n                var option_value = this.value;\n                var option_index = (index + 1);\n                var option_label = this.label;\n\t\t\t\tvar option_id = 'radio-choice-' + (index + 1);\n\t\t\t\n\t\t\t\tRADIO_CHECKED = (value === option_value) ? 'checked=\"checked\"' : \"\";\n\n\t\t\t\tHTML += '<input type=\"radio\" name=\"radio-options\" id=\"' + option_id + '\" value=\"' + option_value + '\"' + RADIO_CHECKED + ' ' + DISABLED + ' data-index=\"' + option_index + '\">';\n                HTML += '<label for=\"' + option_id + '\">' + option_label + '</label>';\n\n\t\t\t});\n\n\t\t\tHTML += '</fieldset>';\n\t\t\t\n\t\t\t//append radio buttons and trigger layout\t\n\t\t\tspan_label.append(HTML);\n\t\t\t$('div#branch-input-radio').trigger(\"create\");\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\"use strict\";\n\t\n\tmodule.text = function(the_value, the_input) {\n\n\t\t\t//to cache dom lookups\n\t\t\tvar obj;\n\t\t\tvar span_label = $('div#branch-text div#branch-input-text span.label');\n\t\t\tvar clone = $('div#branch-text div#branch-input-text div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t} else {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//re-enable input if needed\n\t\t\t$('div#branch-input-text input').removeAttr('disabled');\n\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate text input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\t$('div.clone input').val(value);\n\n\t\t\t\t//if in editing mode, do not allow changes  if the field is a primary key\n\t\t\t\tconsole.log( typeof input.is_primary_key);\n\t\t\t\tconsole.log( typeof input.has_jump);\n\n\t\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t$('div.clone input').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t//add hidden class if missing\n\t\t\t\tclone.addClass('hidden');\n\n\t\t\t}\n\n\t\t\t$('div#branch-input-text input').val(value);\n\n\t\t\t//if it is a genkey field, disable input and pre-fill it with the genkey\n\t\t\tif (input.is_genkey === 1 && value === \"\") {\n\n\t\t\t\t$('div#branch-input-text input').attr('disabled', 'disabled').val(EC.Utils.getGenKey());\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t//if in branch editing mode, do not allow changes if the field is a primary key \n\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\t\t\t\t$('div#branch-input-text input').attr('disabled', 'disabled');\n\t\t\t\t$('div#branch-input-text p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\t$('div#branch-input-text p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\n\t\t};\n\n\t\n\treturn module;\n\t\n}(EC.BranchInputTypes));","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.textarea = function(the_value, the_input) {\n\n\t\t\tvar obj;\n\t\t\tvar span_label = $('span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t} else {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//re-enable input if needed\n\t\t\t$('div#branch-input-textarea textarea').removeAttr('disabled');\n\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate textarea input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\t$('div.clone textarea').val(value);\n\n\t\t\t\t//if in editing mode, do not allow changes  if the field is a primary key\n\t\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t$('div.clone textarea').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t//add hidden class if missing\n\t\t\t\tclone.addClass('hidden');\n\n\t\t\t}\n\n\t\t\t//Set value\n\t\t\t$('div#branch-input-textarea textarea').val(value);\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key\n\t\t\tif (window.localStorage.branch_edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t$('div#branch-input-textarea textarea').attr('disabled', 'disabled');\n\t\t\t\t$('div#branch-input-textarea p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\t$('div#branch-input-textarea p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\t\t\t\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputTypes)); ","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.time = function(the_value, the_input) {\n\n\t\t\tvar timepicker;\n\t\t\tvar ios_timepicker;\n\t\t\tvar span_label = $('div#branch-input-time span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar datebox_format;\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label + \" - \" + input.datetime_format);\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we\n\t\t\t\t// recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//Android Phonegap timepicker plugin http://goo.gl/xLrqZl\n\t\t\ttimepicker = $('div#branch-input-time input.nativedatepicker');\n\n\t\t\t//iOS uses the HTML5 input type=\"time\"\n\t\t\tios_timepicker = $('div#branch-input-time input.ios-time');\n\n\t\t\t//hide immediate ios time input parent (JQM quirk, this is to hide the div\n\t\t\t// element border wrapping the input after JQM enhanced the markup)\n\t\t\tios_timepicker.parent().addClass(\"no-border\");\n\n\t\t\t/*show default date if input.value = input.datetime_format:\n\t\t\t *if the option to show the current date as default is selected in the web form\n\t\t\t * builder,\n\t\t\t * the input value gets the value of datetime_format when parsing the xml\n\t\t\t */\n\t\t\tif (input.datetime_format === input.default_value) {\n\t\t\t\ttimepicker.val(EC.Utils.parseTime(new Date(), input.datetime_format));\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//show cached value\n\t\t\t\ttimepicker.val(value);\n\t\t\t}\n\n\t\t\t/*****************************************************************************************\n\t\t\t * Android uses the Phonegap official DatePicker plugin\n\t\t\t ****************************************************************************************/\n\t\t\tif (window.device.platform === EC.Const.ANDROID) {\n\t\t\t\t/* bind input to 'vclick' insted of focus, as we set the input as readonly.\n\t\t\t\t * this solved problem on android 2.3 where the keyboard was showing because the\n\t\t\t\t * input is in focus when tapping \"cancel\"\n\t\t\t\t * on the DatePicker popup\n\t\t\t\t */\n\t\t\t\ttimepicker.off().on('focus', function(event) {\n\n\t\t\t\t\tvar timepicker = $(this);\n\t\t\t\t\tvar selected_date = Date.parse(timepicker.val()) || new Date();\n\n\t\t\t\t\t// Same handling for iPhone and Android\n\t\t\t\t\twindow.plugins.datePicker.show({\n\t\t\t\t\t\tdate : selected_date,\n\t\t\t\t\t\tmode : 'time', // date or time or blank for both\n\t\t\t\t\t\tallowOldDates : true\n\t\t\t\t\t}, function(returned_date) {\n\n\t\t\t\t\t\tvar new_date;\n\n\t\t\t\t\t\tif (returned_date !== undefined) {\n\n\t\t\t\t\t\t\tnew_date = new Date(returned_date);\n\n\t\t\t\t\t\t\ttimepicker.val(EC.Utils.parseTime(new_date, input.datetime_format));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// This fixes the problem you mention at the bottom of this script with it not\n\t\t\t\t\t\t// working a second/third time around, because it is in focus.\n\t\t\t\t\t\ttimepicker.blur();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/*****************************************************************************************\n\t\t\t * iOS uses the official HTML5 input type=\"time\", only hours and minutes are\n\t\t\t * returned\n\t\t\t ****************************************************************************************/\n\t\t\tif (window.device.platform === EC.Const.IOS) {\n\n\t\t\t\ttimepicker.off().on('vclick', function(event) {\n\n\t\t\t\t\tios_timepicker.focus();\n\n\t\t\t\t});\n\n\t\t\t\tios_timepicker.off().on('blur', function(event) {\n\n\t\t\t\t\tvar ios_time = ios_timepicker.val();\n\n\t\t\t\t\t//get seconds (based on current time)\n\t\t\t\t\tvar date = new Date(event.timeStamp);\n\t\t\t\t\tvar seconds = date.getSeconds();\n\n\t\t\t\t\t//add seconds to have a string like HH:mm:ss\n\t\t\t\t\tios_time = ios_time + \":\" + seconds;\n\n\t\t\t\t\ttimepicker.val(EC.Utils.parseIOSTime(ios_time, input.datetime_format));\n\t\t\t\t\ttimepicker.attr(\"data-raw-date\", ios_time);\n\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputTypes));\n","/*global $, jQuery, LocalFileSystem, cordova*/\nvar EC = EC || {};\nEC.BranchInputTypes = EC.BranchInputTypes || {};\nEC.BranchInputTypes = (function (module) {\n    'use strict';\n\n    module.video = function (the_value, the_input) {\n\n        //to cache dom lookups\n        var span_label = $('div#branch-video div#branch-input-video span.label');\n        var value = the_value;\n        var input = the_input;\n        var video_btn = $('div#branch-video div#branch-input-video div#video-btn');\n        var play_video_btn = $('div#branch-video div#branch-input-video div#play-video-btn');\n        var store_video_uri = $('div#branch-video div#branch-input-video input#stored-video-uri');\n        var cache_video_uri = $('div#branch-video div#branch-input-video input#cached-video-uri');\n        var video_full_path_uri;\n        var cached_path;\n        var video_sd_path;\n        var ios_video_player_wrapper = $('div#branch-input-video div#ios-video-player-wrapper');\n        var ios_video_player = $('div#branch-input-video video#ios-video-player');\n\n        var _renderVideo = function (the_video_file_path) {\n            play_video_btn.attr('data-video-path', the_video_file_path);\n            play_video_btn.removeClass('ui-disabled');\n        };\n\n        //hide play button on ios, also hide video wrapper\n        if (window.device.platform === EC.Const.IOS) {\n            $(play_video_btn, ios_video_player_wrapper).addClass('hidden');\n        }\n\n        //update label text\n        span_label.text(input.label);\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        //if a value is stored, on the first load add it to hidden input field,  to be\n        // shown if no cached value is set\n        if (window.localStorage.edit_mode) {\n\n            if (value.stored === undefined) {\n                store_video_uri.val(value);\n                value = {\n                    cached: '',\n                    stored: value\n                };\n            }\n            else {\n\n                store_video_uri.val(value.stored);\n            }\n\n        }\n\n        console.log('value.stored ' + JSON.stringify(value.stored));\n\n        //If a cache value is set, add it to hidden field\n        cache_video_uri.val(value.cached || '');\n        console.log('cache_video_uri: ' + cache_video_uri.val());\n\n        //Show cached video if any, otherwise the stored video, if any\n        if (value.cached === '') {\n\n            console.log('cached value empty');\n\n            if (value.stored !== '') {\n\n                //build full path to get video from private app folder depending on platform\n                switch (window.device.platform) {\n                    case EC.Const.ANDROID:\n\n                        video_full_path_uri = EC.Const.ANDROID_APP_PRIVATE_URI + EC.Const.VIDEO_DIR + window.localStorage.project_name + '/' + value.stored;\n\n                        /** Copy video to cache folder to make it playable (rename it using timestamp).\n                         *    Due to permission issues, on Android files are not accessible by other\n                         * application\n                         *  Since Android support for <video> is pretty weak, we need to use an external\n                         * video player app top play the video\n                         *  (Whatever app capable of playing the video is installed on the device will be\n                         * triggered via an intent)\n                         */\n\n                        EC.Notification.showProgressDialog();\n                        $.when(EC.File.copyVideo(video_full_path_uri)).then(function (the_cached_filename) {\n\n                            //file has been copied, update view setting it as cached file to play\n                            cache_video_uri.val(the_cached_filename);\n                            play_video_btn.attr('data-video-path', the_cached_filename);\n                            play_video_btn.removeClass('ui-disabled');\n\n                            EC.Notification.hideProgressDialog();\n\n                        });\n                        break;\n\n                    case EC.Const.IOS:\n                        //build full path (file is stored in persisten storage (Documents folder))\n                        video_full_path_uri = EC.Const.IOS_APP_PRIVATE_URI + EC.Const.VIDEO_DIR + window.localStorage.project_name + '/' + value.stored;\n\n                        //add source to HTML5 video tag\n                        ios_video_player.attr('src', video_full_path_uri);\n\n                        /*this is causing the video to open automatically on iOS7,\n                         * it is here because the video preview does not work on iOS 8 without it\n                         */\n                        if (parseFloat(window.device.version) >= 8) {\n                            ios_video_player.load();\n                        }\n\n                        //show video player wrapper\n                        ios_video_player_wrapper.removeClass('hidden');\n                        break;\n                }\n\n            }\n            else {\n\n                play_video_btn.addClass('ui-disabled');\n                ios_video_player_wrapper.addClass('hidden');\n            }\n\n        }\n        else {\n\n            switch (window.device.platform) {\n\n                case EC.Const.ANDROID:\n                    //render the cached video\n                    _renderVideo(value.cached);\n                    break;\n\n                case EC.Const.IOS:\n                    ios_video_player_wrapper.removeClass('hidden');\n                    break;\n\n            }\n        }\n\n        //request temporary folder from file system based on platform\n        //todo: this will change on iOS with the next release to match Android I suppose\n        if (window.device.platform === EC.Const.IOS) {\n\n            window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function (the_file_system) {\n\n                console.log(JSON.stringify(the_file_system));\n                cached_path = the_file_system.root.nativeURL;\n                console.log('nativeURL: ' + cached_path);\n            }, function (error) {\n                console.log(JSON.stringify(error));\n            });\n\n        }\n        else {\n            //on Android only\n            window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, function (the_file_system) {\n\n                console.log(JSON.stringify(the_file_system));\n                cached_path = the_file_system.nativeURL;\n                console.log('nativeURL: ' + cached_path);\n            }, function (error) {\n                console.log(JSON.stringify(error));\n            });\n        }\n\n        //Success callback\n        var onCaptureVideoSuccess = function (the_media_object) {\n\n            var cache_video_uri = $('div#branch-video div#branch-input-video input#cached-video-uri');\n\n            console.log(JSON.stringify(the_media_object[0]));\n\n            video_sd_path = the_media_object[0].fullPath;\n\n            EC.Notification.showProgressDialog();\n\n            //move video to cache folder (temporary storage), as by default on Android is saved in the DCIM/Camera folder\n            $.when(EC.File.moveVideo(video_sd_path, cache_video_uri.val())).then(function (the_cached_video_path) {\n\n                if (window.device.platform === EC.Const.IOS) {\n\n                    ios_video_player_wrapper.removeClass('hidden');\n\n                    //request temporary folder from file system\n                    window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function (the_file_system) {\n\n                        //imp! since Cordova 3.5+ 'fullPath' became nativeURL\n                        var temp_cache_path = the_file_system.root.nativeURL;\n\n                        var video_full_path = temp_cache_path + '/' + the_cached_video_path;\n\n                        ios_video_player.attr('src', video_full_path);\n\n                        cache_video_uri.val(the_cached_video_path);\n                        EC.Notification.hideProgressDialog();\n\n                    }, function (error) {\n                        console.log(JSON.stringify(error));\n                        EC.Notification.hideProgressDialog();\n                    });\n                }\n\n                if (window.device.platform === EC.Const.ANDROID) {\n\n                    //update cached video uri to use always the same name\n                    //when taking more videos for the same input and avoid several cached videos\n\n                    cache_video_uri.val(the_cached_video_path);\n                    play_video_btn.attr('data-video-path', the_cached_video_path);\n                    play_video_btn.removeClass('ui-disabled');\n                    EC.Notification.hideProgressDialog();\n                }\n\n            });\n\n        };\n\n        //Error callback\n        var onCaptureVideoError = function (error) {\n            console.log(error.message);\n        };\n\n        //play button handler\n        play_video_btn.off().on('vclick', function () {\n\n            var current_cached_video = $(this).attr('data-video-path');\n\n            //request temporary folder from file system based on platform\n            //todo this will chnage with new Cordova iOS releases to match Android probably\n            if (window.device.platform === EC.Const.IOS) {\n                window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function (the_file_system) {\n\n                    var temp_cache_path = the_file_system.root.nativeURL;\n                    var video_full_path = temp_cache_path + '/' + current_cached_video;\n\n                    window.plugins.videoPlayer.play(video_full_path);\n\n                }, function (error) {\n                    console.log(JSON.stringify(error));\n                });\n\n            }\n            else {\n                //Android only\n                window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, function (the_file_system) {\n\n                    var temp_cache_path = the_file_system.nativeURL;\n                    var video_full_path = temp_cache_path + '/' + current_cached_video;\n\n                    window.plugins.videoPlayer.play(video_full_path);\n\n                }, function (error) {\n                    console.log(JSON.stringify(error));\n                });\n            }\n\n        });\n\n        //open camera app on click\n        video_btn.off().on('vclick', function () {\n\n            var options = {\n                limit: 1\n            };\n\n            // start video capture\n            navigator.device.capture.captureVideo(onCaptureVideoSuccess, onCaptureVideoError, options);\n        });\n\n    };\n\n    return module;\n\n}(EC.BranchInputTypes));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n * @module EC\n * @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\t/*\n\t\t * get cached bracnh input value from localStorage by the passed position\n\t\t *\n\t\t * @method getCachedBranchInputValue\n\t\t * @param {int} the input position attribute in the form input sequence\n\t\t * @return {Object} {_id: <the input id>, type: <the input type>, value: <the current value cached>, position : <the input position property>}\n\t\t */\n\t\tmodule.getCachedInputValue = function(the_position) {\n\n\t\t\tvar branch_values;\n\t\t\tvar position = parseInt(the_position, 10);\n\t\t\tvar index = position - 1;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar empty_value = {\n\t\t\t\t_id : \"\",\n\t\t\t\ttype : \"\",\n\t\t\t\tvalue : EC.Const.SKIPPED,\n\t\t\t\tposition : \"\",\n\t\t\t\tis_primary_key : \"\"\n\t\t\t};\n\n\t\t\t//catch Chrome error `Uncaught SyntaxError: Unexpected end of input` when parsing empty content\n\t\t\ttry {\n\t\t\t\tbranch_values = JSON.parse(window.localStorage.branch_inputs_values);\n\n\t\t\t\t//if index is out of bounds\n\t\t\t\tif (branch_values[index] === undefined) {\n\t\t\t\t\treturn empty_value;\n\t\t\t\t}\n\n\t\t\t\t//search all values where the passed position matches\n\t\t\t\tiLength = branch_values.length;\n\t\t\t\tfor (i = 0; i < iLength; i++) {\n\n\t\t\t\t\t//if values[i] is null, this input was skipped by a jump so create an empty one\n\t\t\t\t\tif (branch_values[i] === null) {\n\n\t\t\t\t\t\tbranch_values[i] = empty_value;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//@bug on Android 2.3 :/ be careful with this comparison\n\t\t\t\t\tif (parseInt(branch_values[i].position, 10) === position) {\n\n\t\t\t\t\t\tif (window.localStorage.branch_edit_mode) {\n\n\t\t\t\t\t\t\twindow.localStorage.branch_edit_id = branch_values[i]._id;\n\t\t\t\t\t\t\twindow.localStorage.branch_edit_type = branch_values[i].type;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//return the value object found\n\t\t\t\t\t\treturn branch_values[i];\n\n\t\t\t\t\t}\n\n\t\t\t\t}//end for each input values\n\n\t\t\t\t//return an empty value if no position match found, meaning the value was not cache because skipped by a jump\n\t\t\t\treturn empty_value;\n\n\t\t\t} catch(error) {\n\t\t\t\t//Handle errors here\n\t\t\t\tconsole.log(error);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n * @module EC\n * @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tmodule.getCloneValue = function(the_type) {\n\n\t\t\tvar type = the_type;\n\t\t\tvar clone_value;\n\n\t\t\tswitch(type) {\n\n\t\t\t\tcase EC.Const.TEXT:\n\t\t\t\t\tclone_value = $('div.clone input#branch-text-clone').val();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.TEXTAREA:\n\t\t\t\t\tclone_value = $('div.clone textarea#branch-textarea-clone').val();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.INTEGER:\n\t\t\t\t\tclone_value = $('div.clone input#branch-integer-clone').val();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.DECIMAL:\n\t\t\t\t\tclone_value = $('div.clone input#branch-decimal-clone').val();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.BARCODE:\n\t\t\t\t\tclone_value = $('div#branch-input-barcode div.clone input#scan-result-confirm').val();\n\t\t\t\t\tbreak;\n\n\t\t\t}//switch\n\n\t\t\treturn clone_value.trim();\n\n\t\t};\n\t\t//getCloneValue\n\n\t\treturn module;\n\n\t}(EC.BranchInputs)); ","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n * @module EC\n * @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\t/* Get the current branch input value based on the input type\n\t\t *\n\t\t * @return - a single value or an array of values based on the type passed\n\t\t */\n\t\tmodule.getCurrentValue = function(the_type) {\n\n\t\t\tvar type = the_type;\n\t\t\tvar values = [];\n\t\t\tvar checkboxes_values = [];\n\t\t\tvar current_value;\n\t\t\tvar got_value;\n\t\t\tvar input_holder;\n\n\t\t\tswitch(type) {\n\n\t\t\t\tcase EC.Const.TEXT:\n\t\t\t\t\tvalues.push($('div#branch-input-text input').val());\n\t\t\t\t\tgot_value = values[0].trim();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.TEXTAREA:\n\t\t\t\t\tvalues.push($('div#branch-input-textarea textarea').val());\n\t\t\t\t\tgot_value = values[0].trim();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.INTEGER:\n\t\t\t\t\tvalues.push($('div#branch-input-integer input').val());\n\t\t\t\t\tgot_value = values[0].trim();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.DECIMAL:\n\t\t\t\t\tvalues.push($('div#branch-input-decimal input#decimal-main').val());\n\t\t\t\t\tgot_value = values[0].trim();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.DATE:\n\t\t\t\t\tvalues.push($('div#branch-input-date input').val());\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.TIME:\n\t\t\t\t\tvalues.push($('div#branch-input-time input').val());\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.RADIO:\n\n\t\t\t\t\tinput_holder = $('div#branch-input-radio input[type=radio]:checked');\n\n\t\t\t\t\t/* single selection radio: grab both value and \"label\":\n\t\t\t\t\t * value is needed for the jumps/validation and label will be saved and displayed to users\n\t\t\t\t\t */\n\t\t\t\t\tcurrent_value = {\n\t\t\t\t\t\tvalue : \"\",\n\t\t\t\t\t\tindex : \"\"\n\t\t\t\t\t};\n\n\t\t\t\t\tcurrent_value.value = input_holder.val();\n\t\t\t\t\t   current_value.index = input_holder.attr(\"data-index\");\n\n\t\t\t\t\t//if no value selected among the radio options, create an empty object with NO_OPTION_SELECTED label\n                    if (current_value.value === undefined) {\n                        current_value.value = EC.Const.NO_OPTION_SELECTED;\n                        current_value.index = EC.Const.NO_OPTION_SELECTED;\n                    } else {\n                        current_value.value.trim();\n                        current_value.index.trim();\n                    }\n\t\t\t\t\t\n\n\t\t\t\t\tvalues.push(current_value);\n\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\t//multiple selection checkboxes\n\t\t\t\tcase EC.Const.CHECKBOX:\n\n\t\t\t\t\t//loop through all the selected checkboxes\n\t\t\t\t\t$('div#branch-input-checkbox input[type=checkbox]:checked').each(function() {\n\n\t\t\t\t\t\tcheckboxes_values.push({\n\t\t\t\t\t\t\tvalue : $(this).val().trim(),\n\t\t\t\t\t\t\tlabel : $(this).parent().text().trim()\n\t\t\t\t\t\t});\n\n\t\t\t\t\t});\n\n\t\t\t\t\t//cache empty string if no checkboxes are selected\n\t\t\t\t\tvalues.push((checkboxes_values.length === 0) ? EC.Const.NO_OPTION_SELECTED : checkboxes_values);\n\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.DROPDOWN:\n\n\t\t\t\t\tinput_holder = $('div#branch-input-dropdown select option:selected');\n\n\t\t\t\t\t/* single selection dropdown\" grab both value and \"label\":\n\t\t\t\t\t * value is needed for the jumps/validation and label will be saved and displayed to users\n\t\t\t\t\t */\n\t\t\t\t\tcurrent_value = {\n\t\t\t\t\t\tvalue : \"\",\n\t\t\t\t\t\tindex : \"\"\n\t\t\t\t\t};\n\n\t\t\t\t\tcurrent_value.value = input_holder.val();\n\t\t\t\t\tcurrent_value.index = input_holder.attr('data-index');\n\n\t\t\t\t\t//if the value is \"0\", for consistency set it to a default for unselected option\n                    if (current_value.index === \"0\") {\n                        current_value.index = EC.Const.NO_OPTION_SELECTED;\n                    }\n\n\t\t\t\t\tvalues.push(current_value);\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.BARCODE:\n\t\t\t\t\tcurrent_value = $('div#branch-input-barcode input.scan-result').val();\n\t\t\t\t\tvalues.push(current_value);\n\t\t\t\t\t//console.log(\"barcode current value is: \" + current_value);\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.LOCATION:\n\t\t\t\t\tcurrent_value = $('div#branch-input-location textarea#branch-set-location-result').val();\n\t\t\t\t\tvalues.push(current_value);\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.AUDIO:\n\n\t\t\t\t\tif (EC.Utils.isChrome()) {\n\n\t\t\t\t\t\tcurrent_value = {\n\t\t\t\t\t\t\tcached : \"...audio cached  uri...\",\n\t\t\t\t\t\t\tstored : \"...audio stored uri...\"\n\t\t\t\t\t\t};\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//console.log(\"getting audio file values\");\n\n\t\t\t\t\t\tcurrent_value = {\n\t\t\t\t\t\t\tcached : $('div#branch-input-audio input#cached-audio-uri').val(),\n\t\t\t\t\t\t\tstored : $('div#branch-input-audio input#stored-audio-uri').val()\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t//console.log('current_value ' + JSON.stringify(current_value));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvalues.push(current_value);\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.VIDEO:\n\n\t\t\t\t\tif (EC.Utils.isChrome()) {\n\n\t\t\t\t\t\tcurrent_value = {\n\t\t\t\t\t\t\tcached : \"...video cached  uri...\",\n\t\t\t\t\t\t\tstored : \"...video stored uri...\"\n\t\t\t\t\t\t};\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.log(\"getting video file values\");\n\n\t\t\t\t\t\tcurrent_value = {\n\t\t\t\t\t\t\tcached : $('div#branch-input-video input#cached-video-uri').val(),\n\t\t\t\t\t\t\tstored : $('div#branch-input-video input#stored-video-uri').val()\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconsole.log('current_value ' + JSON.stringify(current_value));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvalues.push(current_value);\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.PHOTO:\n\n\t\t\t\t\t//keep track of both cache value(image uri currently on canvas) and store value (image uri on the database)\n\t\t\t\t\tif (EC.Utils.isChrome()) {\n\n\t\t\t\t\t\tcurrent_value = {\n\t\t\t\t\t\t\tcached : \"placeholder.jpg\",\n\t\t\t\t\t\t\tstored : \"placeholder.jpg\"\n\t\t\t\t\t\t};\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcurrent_value = {\n\t\t\t\t\t\t\tcached : $('div#branch-input-photo input#cached-image-uri').val(),\n\t\t\t\t\t\t\tstored : $('div#branch-input-photo input#stored-image-uri').val()\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconsole.log('current_value ' + JSON.stringify(current_value));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvalues.push(current_value);\n\t\t\t\t\tgot_value = values[0];\n\t\t\t\t\tbreak;\n\n\t\t\t}//switch\n\n\t\t\treturn got_value;\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule EC.Inputs\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\t/**\n\t\t * @method isEmptyPrimaryKey: Check whether a primary key exists in the array of branch values we are abut to save.\n\t\t */\n\t\tmodule.isEmptyPrimaryKey = function() {\n\n\t\t\tvar is_empty_primary_key = true;\n\t\t\tvar branch_inputs_values = JSON.parse(window.localStorage.branch_inputs_values);\n\t\t\tvar i;\n\t\t\tvar iLength;\n\n\t\t\tif (branch_inputs_values) {\n\t\t\t\tiLength = branch_inputs_values.length;\n\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t\tif (branch_inputs_values[i].is_primary_key === 1) {\n\t\t\t\t\t\tis_empty_primary_key = (branch_inputs_values[i].value === \"\") ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn is_empty_primary_key;\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n * @module EC\n * @submodule BranchInputs\n *\n */\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\t/**\n\t\t * @method setCachedBranchInputValue Set the current branch input value in localStorage, in the array branch_inputs_values\n\t\t *\n\t\t * (the value is then fetched from localStorage when the user navigate the branch form inputs back and forth\n\t\t * and displayed on screen)\n\t\t */\n\n\t\tmodule.setCachedInputValue = function(the_value, the_position, the_type, is_primary_key_flag) {\n\n\t\t\tvar wls = window.localStorage;\n\t\t\tvar branch_values;\n\t\t\tvar value = the_value;\n\t\t\tvar checkbox_values = [];\n\t\t\tvar position = the_position;\n\t\t\tvar index = position - 1;\n\t\t\tvar type;\n\t\t\tvar _id;\n\t\t\tvar is_primary_key = is_primary_key_flag;\n\t\t\tvar is_genkey_hidden = EC.Utils.isBranchFormGenKeyHidden();\n\t\t\tvar i;\n\t\t\tvar iLength;\n\n\t\t\tif (wls.branch_edit_mode) {\n\n\t\t\t\t_id = wls.branch_edit_id;\n\t\t\t\ttype = wls.branch_edit_type;\n\n\t\t\t} else {\n\n\t\t\t\t_id = '';\n\t\t\t\ttype = the_type;\n\n\t\t\t}\n\n\t\t\t//if the value is an object from either dropdown or radio inputs, cache the label only\n\t\t\tif (type === EC.Const.DROPDOWN || type === EC.Const.RADIO) {\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\n\t\t\t//if the value is an array from checkboxes, cache an array of the labels\n\t\t\tif (type === EC.Const.CHECKBOX) {\n\n\t\t\t\t//if any checkbox was selected, get it, otherwise do nothing and let the value be EC.Const.NO_OPTION_SELECTED\n\t\t\t\tif (value !== EC.Const.NO_OPTION_SELECTED) {\n\n\t\t\t\t\tiLength = value.length;\n\t\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\t\tcheckbox_values.push(value[i].value);\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = checkbox_values;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//catch Chrome error `Uncaught SyntaxError: Unexpected end of input` when parsing empty content\n\t\t\ttry {\n\t\t\t\tbranch_values = JSON.parse(wls.branch_inputs_values);\n\t\t\t} catch(error) {\n\t\t\t\t//Handle errors here\n\t\t\t\tbranch_values = [];\n\t\t\t}\n\n\t\t\t//TODO: check against values length??? try when hidden key is last element of the form\n\t\t\tif (branch_values[index] !== null && index < branch_values.length) {\n\n\t\t\t\t//if the values already is cached in branch_inputs_values AND it is a primary_key AND it is a hidden auto generated key, do not override it but use that same value\n\t\t\t\t//This happens when the user is editing a branch form with an autogen key hidden, we do no want to override it\n\t\t\t\tif (branch_values[index].is_primary_key === 1 && is_genkey_hidden === 1) {\n\t\t\t\t\tvalue = branch_values[index].value;\n\t\t\t\t} else {\n\n\t\t\t\t\tbranch_values[index] = {\n\t\t\t\t\t\t_id : _id,\n\t\t\t\t\t\ttype : type,\n\t\t\t\t\t\tvalue : value,\n\t\t\t\t\t\tposition : position,\n\t\t\t\t\t\tis_primary_key : is_primary_key\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tbranch_values[index] = {\n\t\t\t\t\t_id : _id,\n\t\t\t\t\ttype : type,\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tposition : position,\n\t\t\t\t\tis_primary_key : is_primary_key\n\t\t\t\t};\n\t\t\t}\n\n\t\t\twls.branch_inputs_values = JSON.stringify(branch_values);\n\t\t\tconsole.log(\"branch_input_values: \" + wls.branch_inputs_values, true);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.BranchInputs = EC.BranchInputs || {};\nEC.BranchInputs = ( function(module) {\"use strict\";\n\n\t\tvar _isUniqueValue = function(the_value, the_branch_form_name) {\n\n\t\t\tvar cached_branch_entry_keys;\n\t\t\tvar current_branch_form_keys;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar value = the_value;\n\t\t\tvar branch_form_name = the_branch_form_name;\n\t\t\tvar unique = true;\n\n\t\t\t//get Branch primary keys\n\t\t\ttry {\n\t\t\t\tcached_branch_entry_keys = JSON.parse(window.localStorage.cached_branch_entry_keys);\n\t\t\t} catch (error) {\n\t\t\t\tcached_branch_entry_keys = [];\n\t\t\t}\n\n\t\t\tiLength = cached_branch_entry_keys.length;\n\t\t\tif (iLength > 0) {\n\n\t\t\t\t//get primary keys for the current form\n\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t\tif (cached_branch_entry_keys[i].branch_form_name === branch_form_name) {\n\n\t\t\t\t\t\tcurrent_branch_form_keys = cached_branch_entry_keys[i].primary_keys;\n\n\t\t\t\t\t\t//check if the current value clashes a branch primary key\n\t\t\t\t\t\tif (current_branch_form_keys.indexOf(value) !== -1) {\n\t\t\t\t\t\t\tunique = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn unique;\n\t\t};\n\n\t\tmodule.validateValue = function(the_input, the_value, the_position) {\n\n\t\t\tvar self = this;\n\t\t\tvar input = the_input;\n\t\t\tvar current_value = the_value;\n\t\t\tvar current_position = the_position;\n\t\t\tvar clone_value = \"\";\n\t\t\tvar is_primary_key = $('span.label').attr('data-primary-key');\n\t\t\tvar validation = {};\n\n\t\t\t//if we need to check for a double entry, get clone value\n\t\t\tif (parseInt(input.has_double_check, 10) === 1) {\n\t\t\t\tclone_value = self.getCloneValue(input.type);\n\t\t\t}\n\n\t\t\t//validate input\n\t\t\tvalidation = EC.Utils.isValidValue(input, current_value, clone_value);\n\n\t\t\tif (!validation.is_valid) {\n\t\t\t\t//value not valid, return\n\t\t\t\treturn validation;\n\t\t\t}\n\n\t\t\t//check if this input value is a primary key field: if it is, check uniqueness (skip when we are editing)\n\t\t\tif (is_primary_key === 'true' && !window.localStorage.branch_edit_mode) {\n\n\t\t\t\tif (!_isUniqueValue(current_value)) {\n\n\t\t\t\t\t//primary key value already exist, return\n\t\t\t\t\tvalidation = {\n\t\t\t\t\t\tis_valid : false,\n\t\t\t\t\t\tmessage : \"Value already exists!\"\n\t\t\t\t\t};\n\n\t\t\t\t\t//on Chrome native alert is not working: dump to console error message\n\t\t\t\t\tconsole.log(\"Error: value already exists\");\n\n\t\t\t\t\treturn validation;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn validation;\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.BranchInputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true */\n/*global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.Download = EC.Download || {};\nEC.Download = ( function() {\n\t\t\"use strict\";\n\n\t\tvar project_server_url;\n\t\tvar project_name;\n\t\tvar project_id;\n\t\tvar form_name;\n\t\tvar form_id;\n\t\tvar chosen_form_id;\n\t\tvar chosen_form_name;\n\t\tvar entries;\n\t\tvar data;\n\n\t\tfunction _commitRemoteEntry(the_single_remote_entry) {\n\n\t\t\t$.when(EC.Create.commitRemoteEntry(project_id, form_id, the_single_remote_entry)).then(function() {\n\n\t\t\t\tif (entries.length === 0) {\n\n\t\t\t\t\tif (data.length === 0) {\n\n\t\t\t\t\t\tEC.Notification.showToast(\"All data downloaded\", \"short\");\n\n\t\t\t\t\t\t//@bug on iOS, spinner loader not hiding, force to hide\n\t\t\t\t\t\t// it here calling it directly with no timeout\n\t\t\t\t\t\tif (window.device.platform === EC.Const.IOS) {\n\t\t\t\t\t\t\twindow.ActivityIndicator.hide();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//clear cached object for this form (table)\n\t\t\t\t\t\twindow.localStorage.removeItem(\"dre_local_entries_keys\");\n\t\t\t\t\t\twindow.localStorage.removeItem(\"dre_inputs\");\n\n\t\t\t\t\t\t//back to forms list\n\t\t\t\t\t\tEC.Routing.changePage(window.localStorage.back_nav_url);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\n\t\t\t\t\t\tentries = data.splice(0, 500);\n\t\t\t\t\t\t_commitRemoteEntry(entries.shift());\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t_commitRemoteEntry(entries.shift());\n\t\t\t\t}\n\n\t\t\t}, function() {\n\n\t\t\t\t/* When downloading remote entries, if parent entry is missing on the device database the user needs to download from the parent table first\n\t\t\t\t* to keep the database referential integrity\n\t\t\t\t*/\n\n\t\t\t\t//TODO: get parent form name\n\t\t\t\tvar parent_form = EC.Utils.getParentFormByChildID(chosen_form_id);\n\n\t\t\t\tEC.Notification.hideProgressDialog();\n\t\t\t\tEC.Notification.showAlert(\"Error\", \"Parent keys for \" + chosen_form_name + \" are missing on device database, please download \" + parent_form.name + \" entries first\");\n\n\t\t\t});\n\n\t\t}\n\n\t\tvar _performRequest = function(the_url) {\n\n\t\t\tvar url = the_url;\n\t\t\tvar hash;\n\n\t\t\t$.ajax({\n\t\t\t\turl : url, //url\n\t\t\t\ttype : 'get', //method type post or get\n\t\t\t\tcrossDomain : true,\n\t\t\t\ttimeout : 60000, // stop after 60 seconds\n\t\t\t\tdataType : 'json', //return data type\n\t\t\t\tsuccess : function(the_data) {\n\n\t\t\t\t\tdata = the_data;\n\n\t\t\t\t\t//console.log(JSON.stringify(data));\n\n\t\t\t\t\tif (data.length === 0) {\n\t\t\t\t\t\t//no entries on the server yet, go back to form list\n\t\t\t\t\t\tEC.Notification.showAlert(\"Sorry\", \"No remote entries for the selected form yet!\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tentries = data.splice(0, 500);\n\t\t\t\t\t\t_commitRemoteEntry(entries.shift());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror : function(request, status, error) {\n\n\t\t\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\t\t\t//@bug on the server, which is sending a full html page as\n\t\t\t\t\t// response when project is private\n\t\t\t\t\tif (request.responseText) {\n\t\t\t\t\t\tif (request.responseText.trim().charAt(0) === \"<\") {\n\t\t\t\t\t\t\tEC.Notification.showAlert(\"Sorry, private project\", \"This project is set as private therefore you cannot download data\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (status === \"timeout\" && error === \"timeout\") {\n\t\t\t\t\t\tEC.Notification.showAlert(\"Error\", \"Server Timeout\");\n\t\t\t\t\t}\n\n\t\t\t\t\t//show request error\n\t\t\t\t\tconsole.log(status + \", \" + error);\n\t\t\t\t\tconsole.log(request);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t};\n\n\t\tvar fetchRemoteData = function() {\n\n\t\t\tEC.Notification.showProgressDialog();\n\n\t\t\t//get request ajax\n\t\t\t_performRequest(project_server_url + project_name + \"/\" + chosen_form_name + \".json\");\n\n\t\t};\n\n\t\tvar renderDownloadView = function() {\n\n\t\t\tvar forms = JSON.parse(window.localStorage.forms);\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar iLength = forms.length;\n\t\t\tvar jLength = iLength;\n\t\t\tvar HTML = \"\";\n\t\t\tvar dom_list = $('div#download div#download-forms');\n\t\t\tvar page = $('#download');\n\t\t\tvar form_btn;\n\t\t\tvar form_tree;\n\t\t\tvar hash = \"forms.html?project=\" + project_id + \"&name=\" + project_name;\n\t\t\tvar back_btn = $(\"div#download div[data-role='header'] div[data-href='back-btn']\");\n\n\t\t\tproject_id = window.localStorage.project_id;\n\t\t\tproject_name = window.localStorage.project_name;\n\t\t\tproject_server_url = window.localStorage.project_server_url;\n\n\t\t\t//set back_nav_url for navigating back to forms list\n\t\t\twindow.localStorage.back_nav_url = \"forms.html?project=\" + project_id + \"&name=\" + project_name;\n\n\t\t\tvar _form_btn_handler = function() {\n\n\t\t\t\t//get chosen form data\n\t\t\t\tchosen_form_name = $(this).find(\"span\").text();\n\t\t\t\tchosen_form_id = $(this).attr(\"id\");\n\n\t\t\t\t//update form tree in localStorage\n\t\t\t\tform_tree = EC.Utils.getParentAndChildForms(chosen_form_id);\n\t\t\t\twindow.localStorage.form_tree = JSON.stringify(form_tree);\n\t\t\t\tform_id = chosen_form_id;\n\n\t\t\t\tEC.Notification.askConfirm(\"Download remote data\", \"Are you sure to proceed? It might take some time\", \"EC.Download.fetchRemoteData\");\n\t\t\t};\n\n\t\t\t//handle back button hash\n\t\t\tback_btn.off().one('vclick', function(e) {\n\t\t\t\tEC.Routing.changePage(window.localStorage.back_nav_url);\n\t\t\t});\n\n\t\t\t//build buttons\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\tHTML += '<div id=\"' + forms[i]._id + '\" class=\"embedded-btn\">';\n\t\t\t\tHTML += '<i class=\"fa fa-download  fa-fw fa-ep-embedded-btn\"></i>';\n\t\t\t\tHTML += '<span class=\"v-nav-item-label\">' + forms[i].name + '</span>';\n\t\t\t\tHTML += '</div>';\n\t\t\t}\n\n\t\t\t//add buttons to dom\n\t\t\tdom_list.append(HTML);\n\n\t\t\t//bind buttons\n\t\t\tfor ( j = 0; j < jLength; j++) {\n\t\t\t\tform_btn = $(\"div#download div#download-forms div#\" + forms[j]._id);\n\t\t\t\tform_btn.off().on('vclick', _form_btn_handler);\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\tfetchRemoteData : fetchRemoteData,\n\t\t\trenderDownloadView : renderDownloadView\n\t\t};\n\n\t}());\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Entries\n */\nvar EC = EC || {};\nEC.Entries = EC.Entries || {};\nEC.Entries = ( function(module) {\"use strict\";\n\n\t\tmodule.getBranchEntriesList = function() {\n\n\t\t\t/* hierarchy_entry_key_value is the current value of the primary key for the form we want to enter branches to;\n\t\t\t * we need it as we need to link the branch entries to a single hierarchy form entry (like it is its parent)\n\t\t\t */\n\t\t\tvar parent_key_position = EC.Inputs.getPrimaryKeyRefPosition();\n\t\t\tvar hierarchy_entry_key_value = EC.Inputs.getMainFormCurrentKeyValue(parent_key_position);\n\t\t\tvar project_id = parseInt(window.localStorage.project_id, 10);\n\t\t\tvar branch_form = JSON.parse(window.localStorage.branch_form);\n\t\t\tvar offset = 0;\n\n\t\t\t//look for branch entries\n\t\t\t$.when(EC.Select.getBranchEntries(project_id, branch_form.name, hierarchy_entry_key_value, 0)).then(function(the_branch_entries) {\n\n\t\t\t\tif (the_branch_entries.length > 0) {\n\t\t\t\t\t//entries found, render list\n\t\t\t\t\tEC.Entries.renderBranchEntriesList(the_branch_entries);\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\t//no branch entries, user probably deleted all of them, go back to hierarchy form\n\t\t\t\t\tEC.BranchInputs.backToHierarchyForm();\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Entries));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Entries\n */\nvar EC = EC || {};\nEC.Entries = EC.Entries || {};\nEC.Entries = ( function(module) {\n        \"use strict\";\n\n        /**\n         *\n         * @param {String} the_hash_to_parse: Query string like\n         * \"branch_form_name=awesome_form&entry_key=1297f543-fe9e-4c01-e5a0-10512e7968b0\"\n         */\n        module.getBranchEntryValues = function(the_hash_to_parse) {\n\n            //get branch form name and entry key parsing the href\n            var hash = the_hash_to_parse.split('?');\n            var parent;\n            var is_child_form_nav = window.localStorage.is_child_form_nav;\n            var form = hash[1].split('&');\n            var branch_form_name = form[0].replace(\"branch_form_name=\", \"\");\n            var entry_key = form[1].replace(\"entry_key=\", \"\");\n            var project_id = window.localStorage.project_id;\n\n            /* hierarchy_entry_key_value is the current value of the primary key\n             * for the form we want to enter branches to\n             * we need it as we need to link the branch entries to a single main\n             * form entry (like it is its parent)\n             */\n            var parent_key_position = EC.Inputs.getPrimaryKeyRefPosition();\n            var hierarchy_entry_key_value = EC.Inputs.getMainFormCurrentKeyValue(parent_key_position);\n\n            //cache hash to go back to branch-entry-values list when leaving an\n            // edit action\n            window.localStorage.branch_entry_values_url = \"branch-entry-values.html?branch_form_name=\" + branch_form_name + \"&entry_key=\" + entry_key;\n\n            //Select all values stored for this entry THEN render view\n            $.when(EC.Select.getBranchEntryValues(project_id, branch_form_name, entry_key, hierarchy_entry_key_value)).then(function(the_values) {\n\n                //get inputs to map values against labels for dropdown, radio and\n                // checkbox\n                $.when(EC.Select.getBranchInputs(branch_form_name, project_id)).then(function(branch_inputs, has_jumps) {\n\n                    //set inputs in memory\n                    EC.BranchInputs.setInputs(branch_inputs, has_jumps);\n\n                    EC.Entries.renderBranchEntryValues(the_values);\n\n                    window.localStorage.removeItem(\"branch_has_new_jump_sequence\");\n\n                });\n\n            });\n\n        };\n\n        return module;\n\n    }(EC.Entries));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Entries\n */\nvar EC = EC || {};\nEC.Entries = EC.Entries || {};\nEC.Entries = ( function(module) {\n        \"use strict\";\n\n        /**\n         * @method getEntryValues Fetches the list of values for a single entry\n         * (form)\n         * @param {String} the_hash_to_parse Info about which data to fetch\n         * \"#values?form=1&entry_key=Kingston&direction=forward\"\n         *\n         * #values we are requesting a list of values\n         * form=1 The form id\n         * entry_key=Kingston The value of the primary key for the selected entry\n         * direction=forwardThe direction the user is navigating to\n         *\n         */\n        module.getEntryValues = function(the_hash_to_parse) {\n\n            //get form id and entry key parsing the href\n            var hash = the_hash_to_parse.split('?');\n            var wls = window.localStorage;\n            var breadcrumbs_trail = [];\n            var parent;\n            var parent_path;\n            var nav_parent_path;\n            var is_child_form_nav = wls.is_child_form_nav;\n            var form = hash[1].split('&');\n            var form_id = form[0].replace(\"form=\", \"\");\n            var entry_key = form[1].replace(\"entry_key=\", \"\");\n            var direction = form[2].replace(\"direction=\", \"\");\n            var form_name = wls.form_name;\n            var form_tree = JSON.parse(wls.form_tree);\n            var entries_totals = [];\n            var children;\n            var current_view_url_parts;\n\n            //cache current page url for navigation purposes\n            current_view_url_parts = the_hash_to_parse.split(\"/\");\n            wls.current_view_url = current_view_url_parts[current_view_url_parts.length - 1];\n\n            //update entry key in localStorage\n            wls.entry_key = entry_key;\n\n            //cache url to go back to entry-values list when leaving an edit\n            // action\n            wls.back_edit_nav_url = \"entry-values.html?form=\" + form_id + \"&entry_key=\" + entry_key + \"&direction=\" + EC.Const.EDITING;\n\n            //try if a parent is defined, in that case we are selecting a child\n            // entry from a child form list\n            try {\n                parent = form[3].replace(\"parent=\", \"\");\n\n                //remove any breadcrumbs for navigation\n                wls.removeItem(\"breadcrumbs\");\n\n            } catch (e) {\n                parent = \"\";\n                console.log(e);\n            }\n\n            //get breadcrumb trail, first iteration will be \"\" when it is the top\n            // form on the tree\n            try {\n                breadcrumbs_trail = JSON.parse(wls.breadcrumbs);\n            } catch (error) {\n                breadcrumbs_trail = [];\n            }\n\n            /* Get parent path from breadcrumbs (if not defined in localStorage\n             * by a Store Edit action)\n             * When saving a form, window.localStorage.parent_path is set in\n             * EC.Inputs.buildRows\n             * We need that value to uniquely identify a set of entries when\n             * navigating down the tree structure.\n             * It will be like key|key|key... so the full path to the root.\n             */\n            nav_parent_path = wls.parent_path;\n            if (nav_parent_path === undefined) {\n                parent_path = (breadcrumbs_trail[0] === \"\") ? breadcrumbs_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR).substring(1) : breadcrumbs_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n            } else {\n                //a parent path is defined, therefore we are coming back from the\n                // inputs page after a \"Store Edit\" action\n                parent_path = nav_parent_path;\n            }\n\n            //update breadcrumb trail based on navigation direction\n            switch(direction) {\n\n                case EC.Const.FORWARD:\n                    breadcrumbs_trail.push(entry_key);\n\n                    break;\n                case EC.Const.BACKWARD:\n                    breadcrumbs_trail.pop();\n                    break;\n                case EC.Const.EDITING:\n                    console.log(\"back from editing\");\n                    //do nothing\n                    break;\n                case EC.Const.VIEW:\n\n                    breadcrumbs_trail.push(entry_key);\n\n                    break;\n\n            }\n\n            wls.setItem(\"breadcrumbs\", JSON.stringify(breadcrumbs_trail));\n            //window.localStorage.setItem(\"entries_totals\",\n            // JSON.stringify(breadcrumbs_trail));\n\n            //get current form tree (parent and child form based on the active\n            // one)\n            form_tree = EC.Utils.getParentAndChildForms(form_id);\n\n            if (parent !== \"\") {\n\n                parent_path = (parent_path === \"\") ? parent : parent + EC.Const.ENTRY_ROOT_PATH_SEPARATOR + parent_path;\n            }\n\n            //if parent_path at this point is equal to the entry key, set it to\n            // \"\" (It happens when tapping \"Store Edit\" after editing a form)\n            if (parent_path === entry_key) {\n                parent_path = \"\";\n\n                //remove last element from breadcrumb trail\n                breadcrumbs_trail = JSON.parse(wls.breadcrumbs);\n                breadcrumbs_trail.pop();\n                wls.setItem(\"breadcrumbs\", JSON.stringify(breadcrumbs_trail));\n            }\n\n            //remove parent_path flag to restore normal navigation\n            // (backward-forward)\n            wls.removeItem(\"parent_path\");\n\n            //reset offset for entries pagination\n            //wls.QUERY_ENTRIES_OFFSET = 0;\n\n            //Select all values stored for this entry\n            $.when(EC.Select.getEntryValues(form_id, entry_key, parent_path)).then(function(the_values) {\n\n                //get inputs to map values against labels for dropdown, radio and\n                // checkbox\n                $.when(EC.Select.getInputs(form_id)).then(function(inputs, has_jumps) {\n\n                    //set inputs in memory\n                    EC.Inputs.setInputs(inputs, has_jumps);\n\n                    //Render entry values list\n                    EC.Entries.renderEntryValues(the_values);\n\n                });\n\n            });\n\n        };\n\n        return module;\n\n    }(EC.Entries));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\n/**\n * @module EC\n * @submodule Entries\n */\nvar EC = EC || {};\nEC.Entries = EC.Entries || {};\nEC.Entries = ( function(module) {\"use strict\";\n\n\t\t/**\n\t\t *\n\t\t * @param {String} the_hash_to_parse Query string with information about which data will need to be fetched\n\t\t * like \"#entries?form=1&name=University&entry_key=&direction=backward\"\n\t\t *\n\t\t * #entries indicates we are requesting a list of entries\n\t\t * form=1 The form id we are requesting entries for\n\t\t * name=University The form name\n\t\t * direction=backward The direction the user is navigating to (either forward or backward)\n\t\t */\n\t\tmodule.getList = function(the_hash_to_parse) {\n\n\t\t\tvar form_id;\n\t\t\tvar form;\n\t\t\tvar form_name;\n\t\t\tvar form_tree;\n\t\t\tvar entry_key;\n\t\t\tvar direction;\n\t\t\tvar children;\n\t\t\tvar breadcrumbs_trail = [];\n\t\t\tvar entries_totals = [];\n\t\t\tvar parent_path;\n\t\t\tvar nav_parent_path;\n\t\t\tvar offset = 0;\n\t\t\tvar parent_offset = 0;\n\t\t\tvar children_offset = 0;\n\t\t\tvar total;\n\t\t\tvar current_view_url_parts;\n\t\t\tvar wls = window.localStorage;\n\n\t\t\t//cache current page url for navigation purposes\n\t\t\tcurrent_view_url_parts = the_hash_to_parse.split(\"/\");\n\t\t\twls.current_view_url = current_view_url_parts[current_view_url_parts.length - 1];\n\n\t\t\t//get form id parsing the href hash\n\t\t\tvar hash = the_hash_to_parse.split('?');\n\n\t\t\tnav_parent_path = wls.parent_path;\n\n\t\t\tform = hash[1].split('&');\n\t\t\tform_id = form[0].replace(\"form=\", \"\");\n\t\t\tform_name = form[1].replace(\"name=\", \"\");\n\t\t\tentry_key = form[2].replace(\"entry_key=\", \"\");\n\t\t\tdirection = form[3].replace(\"direction=\", \"\");\n\n\t\t\tchildren = parseInt(form[4].replace(\"children=\", \"\"), 10);\n\n\t\t\t//get breadcrumb trail, first iteration will be \"\" when it is the top form on the tree\n\t\t\tbreadcrumbs_trail = JSON.parse(wls.getItem(\"breadcrumbs\")) || breadcrumbs_trail;\n\n\t\t\t//get total of entries, first iteration generate empty object\n\t\t\tentries_totals = JSON.parse(wls.getItem(\"entries_totals\")) || entries_totals;\n\n\t\t\t//update breadcrumb trail and totals based on navigation direction\n\t\t\tswitch(direction) {\n\n\t\t\t\tcase EC.Const.FORWARD:\n\n\t\t\t\t\tbreadcrumbs_trail.push(entry_key);\n\n\t\t\t\t\tif (entries_totals.length === breadcrumbs_trail.length - 1) {\n\t\t\t\t\t\tentries_totals.push({\n\t\t\t\t\t\t\tform : form_name,\n\t\t\t\t\t\t\tentry_key : entry_key,\n\t\t\t\t\t\t\tentries_total : children\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//delete cached entries when going forward\n\t\t\t\t\twindow.localStorage.removeItem('cached_entries_list');\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.BACKWARD:\n\t\t\t\t\tbreadcrumbs_trail.pop();\n\t\t\t\t\tentries_totals.pop();\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.EDITING:\n\t\t\t\t\t//to do\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.ADDING:\n\t\t\t\t\t//to do\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.VIEW:\n\t\t\t\t\tbreadcrumbs_trail.pop();\n\t\t\t\t\t//to do\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\twls.setItem(\"breadcrumbs\", JSON.stringify(breadcrumbs_trail));\n\t\t\twls.setItem(\"entries_totals\", JSON.stringify(entries_totals));\n\n\t\t\t//get current form tree (parent and child form based on the active one)\n\t\t\tform_tree = EC.Utils.getParentAndChildForms(form_id);\n\t\t\twls.form_id = form_id;\n\t\t\twls.form_name = form_name;\n\t\t\twls.form_tree = JSON.stringify(form_tree);\n\n\t\t\t//select all entries for selected form based on tree structure\n\t\t\tif ((form_tree.parent > 0 && entry_key === \"\" && nav_parent_path === undefined) || wls.is_child_form_nav) {\n\n\t\t\t\t//we did not select the top form, select all the entries for the selected child form\n\t\t\t\tEC.Select.getChildEntries(form_id, parent_offset, children_offset);\n\n\t\t\t\t//set a flag to indicate we are in \"child form navigation mode\" i.e. user selected a child form in the forms list\n\t\t\t\twls.is_child_form_nav = 1;\n\n\t\t\t} else {\n\n\t\t\t\t//top form was selected, remove child form navigation flag\n\t\t\t\twls.removeItem(\"is_child_form_nav\");\n\n\t\t\t\tif (nav_parent_path) {\n\n\t\t\t\t\tconsole.log(nav_parent_path);\n\n\t\t\t\t\tparent_path = nav_parent_path;\n\n\t\t\t\t} else {\n\t\t\t\t\tparent_path = (breadcrumbs_trail[0] === \"\") ? breadcrumbs_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR).substring(1) : breadcrumbs_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n\n\t\t\t\t}\n\n\t\t\t\t//set parameters for pagination\n\t\t\t\twls.load_more_parameters = JSON.stringify({\n\t\t\t\t\tform_id : form_id,\n\t\t\t\t\tparent_path : parent_path\n\t\t\t\t});\n\n\t\t\t\t//TODO: if there are entries cached and we are navigating back from a VIEW action, render the cached list\n\n\t\t\t\tif (direction === EC.Const.VIEW && window.localStorage.cached_entries_list) {\n\t\t\t\t\t//EC.Entries.renderCachedList();\n\t\t\t\t\tEC.Entries.renderList(JSON.parse(window.localStorage.cached_entries_list));\n\t\t\t\t} else {\n\n\t\t\t\t\t//if entry_key=\"\" we are requesting the list of all entries (parent will be 0), typical when we are in the 'Forms' screen and select the top form\n\t\t\t\t\t$.when(EC.Select.getEntries(form_id, parent_path, offset)).then(function(the_entries) {\n\t\t\t\t\t\tEC.Entries.renderList(the_entries);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Entries));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Entries\n *\n * Deals with:\n * -getting the list of entries for a form and render it\n * -getting list of values for a single entry and render it\n * -getting and rendering list of child entries, i.e. list of entries for a child\n * form grouped by the parent form. (When the user selects a form which is not\n * the top one)\n * -unsync a single entry (to be re-uploaded if needed)\n * -delete all entries for a form\n * -delete all media for a form, but keeping the data\n * -delete all synced entries, to free space on the device. It deletes only the\n * entries fully synced, (data + media)\n *\n */\nvar EC = EC || {};\nEC.Entries = EC.Entries || {};\nEC.Entries = (function (module) {\n    'use strict';\n    /**\n     * @method unsyncEntry\n     *\n     * unsync a single entry\n     */\n    module.unsyncEntry = function () {\n\n        var rows_to_unsync = JSON.parse(window.localStorage.inputs_values);\n        var project_id = parseInt(window.localStorage.project_id, 10);\n        var entry_key = window.localStorage.entry_key;\n\n        //unsync all the value rows for this entry\n        $.when(EC.Update.unsyncOneHierarchyEntry(rows_to_unsync, entry_key, project_id)).then(function () {\n\n            //close panel\n            $('.entry-values-options').panel('close');\n\n            //disable unsync btn\n            $('div#entry-values div.entry-values-options ul li#unsync-entry').addClass('ui-disabled');\n\n            EC.Notification.showToast(EC.Localise.getTranslation('entry_unsynced'), 'short');\n\n        }, function () {\n\n            EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic_error'));\n        });\n\n    };\n\n    module.unsyncAllEntries = function () {\n\n        var forms = JSON.parse(window.localStorage.forms);\n        var project_id = parseInt(window.localStorage.project_id, 10);\n\n        //get all the rows to unsync\n        $.when(EC.Update.unsyncAllEntries(forms, project_id)).then(function () {\n            //close panel\n            $('div#forms div#project-options').panel('close');\n\n            //disable unsync entries button\n            $('div#forms div#project-options ul li#unsync-all-data').addClass('ui-disabled');\n\n            //disable delete sync entries button\n            $('div#forms div#project-options ul li#delete-synced-entries').addClass('ui-disabled');\n\n            EC.Notification.showToast(EC.Localise.getTranslation('all_data_synced'), 'short');\n\n        }, function () {\n            //close panel\n            $('div#forms div#project-options').panel('close');\n            EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic_error'));\n        });\n\n    };\n\n    /**\n     * @method deleteAllEntries Call model class to delete all the entris for\n     * the currently selected project\n     */\n    module.deleteAllEntries = function () {\n\n        var project_name = window.localStorage.project_name;\n\n        $.when(EC.Delete.deleteAllEntries(EC.Const.DELETE, project_name)).then(function () {\n\n            //disable related btns (we do not have any entries for this\n            // project now)\n            $('div#forms div#project-options ul li#delete-all-entries').addClass('ui-disabled');\n            $('div#forms div#project-options ul li#delete-synced-entries').addClass('ui-disabled');\n            $('div#forms div#project-options ul li#delete-media-files').addClass('ui-disabled');\n            $('div#forms div#project-options ul li#unsync-all-data').addClass('ui-disabled');\n\n            //update UI\n            var forms_list_items = $('div#forms-list ul li');\n\n            //update entry count bubbles in forms list\n            forms_list_items.each(function (i) {\n\n                if (i === 0) {\n                    //set top form children count to 0\n                    $(this).find('a').find('span.ui-li-count.ui-btn-up-c.ui-btn-corner-all').text('0');\n\n                }\n                else {\n                    //disable children forms and hide bubble count\n                    $(this).addClass('ui-disabled');\n                    $(this).find('a').find('span.ui-li-count.ui-btn-up-c.ui-btn-corner-all').remove();\n\n                }\n\n            });\n\n            //success\n            $('#project-options').panel('close');\n            EC.Notification.hideProgressDialog();\n            EC.Notification.showToast(EC.Localise.getTranslation('all_entries_deleted'), 'short');\n\n        }, function () {\n            //error occurred\n            $('#project-options').panel('close');\n            EC.Notification.hideProgressDialog();\n            EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic_error'));\n        });\n    };\n\n    /**\n     * @method deleteAllMedia Call model class to delete all the media files\n     * for the currently selected project\n     *\n     */\n    module.deleteAllMedia = function () {\n\n        var project_name = window.localStorage.project_name;\n        var forms = JSON.parse(window.localStorage.forms);\n\n        if (!EC.Utils.isChrome()) {\n\n            //delete media files (if any), project not deleted so 2nd argument is set to\n            // false\n            $.when(EC.File.deleteAllMedia(project_name, false, [EC.Const.PHOTO_DIR, EC.Const.AUDIO_DIR, EC.Const.VIDEO_DIR])).then(function () {\n                EC.Entries.allMediaDeletedFeedback(true);\n            });\n\n        }\n        else {\n            //in Chrome, just update database setting values to empty strings\n            // - just for debugging\n            EC.Update.emptyMediaValues(forms);\n        }\n    };\n\n    /**\n     * @method allEntriesDeletedFeedback\n     * @param {boolean} is_positive State if the entries are deleted\n     * successfully or not\n     */\n    module.allEntriesDeletedFeedback = function (is_positive) {\n\n    };\n\n    /**\n     * @method allMediaDeletedFeedback Display feedback to user after media\n     * deletion\n     * @param {boolean} is_positive State if the media are deleted\n     * successfully or not\n     */\n    module.allMediaDeletedFeedback = function (is_positive) {\n\n        //close panel\n        $('#project-options').panel('close');\n\n        EC.Notification.hideProgressDialog();\n        if (is_positive) {\n\n            //disable delete media button\n            $('div#forms div#project-options ul li#delete-media-files').addClass('ui-disabled');\n\n            EC.Notification.showToast(EC.Localise.getTranslation('all_media_deleted'), 'short');\n        }\n        else {\n            EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic_error'));\n        }\n    };\n\n    /**\n     * @method deleteAllSynced Calls model class to delete all the entries\n     * fully synced (data + media)\n     */\n    module.deleteAllSynced = function () {\n\n        var forms = JSON.parse(window.localStorage.forms);\n        var project_name = window.localStorage.project_name;\n        var project_id = parseInt(window.localStorage.project_id, 10);\n\n        //delete synced entries and media\n        $.when(EC.Delete.deleteAllSynced(project_id, project_name, forms)).then(function () {\n            _allSyncedDeletedFeedback(true);\n        }, function () {\n            _allSyncedDeletedFeedback(false);\n        });\n\n    };\n\n    /**\n     * @method allSyncedDeletedFeedback Display feedback to user after\n     * deleting synced entries\n     * @param {boolean} is_positive States id the synced entries are deleted\n     * successufully or not\n     */\n    var _allSyncedDeletedFeedback = function (is_positive) {\n\n        var forms_list = $('div#forms-list ul li');\n        var deleted_entries = JSON.parse(window.localStorage.deleted_entries);\n        var count;\n        var current_count_holder;\n        var current_form_list_item;\n\n        //close panel\n        $('#project-options').panel('close');\n\n        //update entries count on DOM to show the user the correct amount\n        // after deletion\n        if (is_positive) {\n            forms_list.each(function (i) {\n\n                var new_count;\n\n                current_form_list_item = $(this).find('a');\n                current_count_holder = current_form_list_item.find('span.ui-li-count');\n\n                new_count = parseInt(current_count_holder.text(), 10) - deleted_entries[i];\n\n                console.log('new_count' + new_count);\n\n                current_count_holder.text(new_count);\n\n                if (new_count === 0 && i > 0) {\n                    current_form_list_item.addClass('ui-disabled');\n                }\n\n            });\n            EC.Notification.showToast(EC.Localise.getTranslation('all_synced_deleted'), 'short');\n        }\n        else {\n            EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic_error'));\n        }\n    };\n\n    module.deleteEntry = function () {\n\n        var rows_to_delete = JSON.parse(window.localStorage.inputs_values);\n        var entry_key = window.localStorage.entry_key;\n        var form_id = window.localStorage.form_id;\n        var project_name = window.localStorage.project_name;\n\n        //get hash from data-hef attribute\n        window.localStorage.back_nav_url = $('div#entry-values div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i').attr('data-href');\n\n        //remove cache entries to request list gain after entry deletion\n        window.localStorage.removeItem('cached_entries_list');\n\n        //delete all the rows for this entry\n        $.when(EC.Delete.deleteEntry(project_name, rows_to_delete, entry_key, form_id)).then(function (is_positive) {\n\n            if (is_positive) {\n                EC.Notification.showToast(EC.Localise.getTranslation('entry_deleted'), 'short');\n                EC.Routing.changePage(window.localStorage.back_nav_url);\n            }\n            else {\n                EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic'));\n            }\n        });\n\n    };\n\n    /*\n     * Delete a single branch entry and linked files\n     */\n    module.deleteBranchEntry = function () {\n\n        var rows_to_delete = JSON.parse(window.localStorage.branch_inputs_values);\n\n        //delete all the rows for this branch entry and linked files (if any)\n        $.when(EC.Delete.deleteBranchEntry(rows_to_delete)).then(function () {\n\n            EC.Notification.showToast(EC.Localise.getTranslation('branch_entry_deleted'), 'short');\n\n            window.localStorage.removeItem('branch_edit_mode');\n\n            EC.Routing.changePage('branch-entries-list.html');\n\n        }, function () {\n            EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic'));\n        });\n\n    };\n\n    module.addEntry = function () {\n\n        var form_id = parseInt(window.localStorage.form_id, 10);\n\n        EC.Notification.showProgressDialog();\n\n        $.when(EC.Select.getInputs(form_id)).then(function (inputs, has_jumps, has_location) {\n\n            //set inputs in memory\n            EC.Inputs.setInputs(inputs, has_jumps, has_location);\n\n            //render first input on the list or the selected position (-1) if\n            // we are editing\n            EC.Inputs.prepareFirstInput((window.localStorage.edit_position === undefined) ? inputs[0] : inputs[window.localStorage.edit_position - 1]);\n        });\n    };\n\n    module.exportAllEntriesToCSV = function () {\n\n        var project_id = window.localStorage.project_id;\n        var forms = JSON.parse(window.localStorage.forms);\n\n        EC.Notification.showProgressDialog();\n        $.when(EC.Export.saveProjectDataToCSV(project_id, forms)).then(function (response) {\n\n            var filename = response.filename;\n            var folder = response.folder;\n\n            //close panel\n            $('#project-options').panel('close');\n            EC.Notification.hideProgressDialog();\n            EC.Notification.showAlert(EC.Localise.getTranslation('success'), filename + ' saved in folder: ' + folder);\n        });\n    };\n\n    return module;\n\n}(EC.Entries));\n\n","/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Entries\n */\n\nvar EC = EC || {};\nEC.Entries = EC.Entries || {};\nEC.Entries = (function (module) {\n    'use strict';\n\n    /**\n     *  Bind Action Bar buttons tap events\n     */\n    var _bindBackBtn = function () {\n\n        var back_btn = $('div[data-role=\"header\"] div[data-href=\"back-btn\"]');\n        var back_btn_label = $('div[data-role=\"header\"] div[data-href=\"back-btn\"] span.form-name');\n        var form_name = window.localStorage.form_name;\n\n        back_btn_label.text('Back to ' + form_name.trunc(EC.Const.FORM_NAME_MAX_LENGTH));\n\n        back_btn.off().one('vclick', function (e) {\n            window.localStorage.back_from_branch = 1;\n            EC.BranchInputs.backToHierarchyForm();\n        });\n\n    };\n\n    var _buildList = function (the_branch_form_name, the_entries) {\n\n        var branch_form_name = the_branch_form_name;\n        var entries = the_entries;\n        var i;\n        var iLength = entries.length;\n        var HTML = '';\n\n        for (i = 0; i < iLength; i++) {\n\n            //if no title set, use value of primary key as title\n            entries[i].full_title = (entries[i].full_title === '') ? entries[i].entry_key : entries[i].full_title;\n\n            HTML += '<li data-icon=\"false\">';\n            HTML += '<a href=\"branch-entry-values.html?branch_form_name=' + branch_form_name + '&entry_key=' + entries[i].entry_key + '\">';\n            HTML += entries[i].full_title;\n            HTML += '</a>';\n            HTML += '</li>';\n        }//for\n\n        return HTML;\n\n    };\n\n    module.renderBranchEntriesList = function (the_entries) {\n\n        var self = this;\n        var entries = the_entries;\n        var dom_list = $('div#branch-entries-list ul');\n        var branch_form = JSON.parse(window.localStorage.branch_form);\n        var load_more_btn = $('div#branch-entries div#branch-entries-list div.more-items-btn');\n        var load_more_spinner = $('div#branch-entries div#branch-entries-list div.more-items-btn-spinner');\n        var offset = parseInt(window.localStorage.QUERY_ENTRIES_OFFSET, 10);\n        var limit = parseInt(window.localStorage.QUERY_LIMIT, 10);\n        var current_entries_total;\n        var HTML;\n\n        //reset entries offset\n        window.localStorage.QUERY_ENTRIES_OFFSET = 0;\n\n        //bind action bar buttons for this page\n        _bindBackBtn();\n\n        //show branch form name in the top bar\n        $('div.branch-form-name div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(branch_form.name);\n\n        //show 'Show more' button if we have more entries to display\n        if (current_entries_total > (offset + limit)) {\n            load_more_btn.removeClass('hidden');\n        } else {\n            load_more_btn.addClass('hidden');\n        }\n\n        //bind 'show more button'\n        load_more_btn.off().on('vclick', function (e) {\n\n            //hide button and show loader\n            $(this).addClass('hidden');\n            load_more_spinner.removeClass('hidden');\n\n            //increase offset\n            offset = parseInt(window.localStorage.QUERY_ENTRIES_OFFSET, 10);\n            offset += parseInt(window.localStorage.QUERY_LIMIT, 10);\n            window.localStorage.QUERY_ENTRIES_OFFSET = offset;\n\n            //get more entries\n            self.getMoreEntries(offset);\n\n        });\n\n        //empty current list\n        dom_list.empty();\n\n        HTML = _buildList(branch_form.name, entries);\n\n        dom_list.append(HTML);\n        dom_list.listview('refresh');\n\n        //hide spinning loader\n        EC.Notification.hideProgressDialog();\n\n    };\n\n    module.getMoreBranchEntries = function (the_offset) {\n\n        var load_more_parameters = JSON.parse(window.localStorage.load_more_parameters);\n        var form_id = load_more_parameters.form_id;\n        var parent_path = load_more_parameters.parent_path;\n        var offset = the_offset;\n\n        EC.Select.getEntries(form_id, parent_path, offset);\n    };\n\n    module.appendMoreBranchEntries = function (the_entries) {\n\n        var dom_list = $('div#entries-list ul');\n        var entries = the_entries;\n        var form_id = parseInt(window.localStorage.form_id, 10);\n        var HTML;\n        var offset = parseInt(window.localStorage.QUERY_ENTRIES_OFFSET, 10);\n        var limit = parseInt(window.localStorage.QUERY_LIMIT, 10);\n        var totals;\n        var current_entries_total;\n\n        //get total of entries\n        totals = JSON.parse(window.localStorage.entries_totals);\n        current_entries_total = totals[totals.length - 1].entries_total;\n\n        HTML = _buildList(form_id, entries);\n\n        dom_list.append(HTML);\n        dom_list.listview('refresh');\n        dom_list.trigger('updatelayout');\n\n        //show button and hide loader\n        $('div#entries div#entries-list div.more-items-btn-spinner').addClass('hidden');\n\n        if (current_entries_total > (offset + limit)) {\n            $('div#entries div#entries-list div.more-items-btn').removeClass('hidden');\n        }\n    };\n\n    return module;\n\n}(EC.Entries));\n","/*global $, jQuery, cordova, device*/\n\n/**\n * @module EC\n * @submodule Entries\n */\nvar EC = EC || {};\n\nEC.Entries = (function (module) {\n    'use strict';\n\n    var _bindActionBarBtns = function () {\n\n        var back_btn = $('div#branch-entry-values div[data-role=\"header\"] div[data-href=\"back-btn\"]');\n        var back_btn_label = $('div#branch-entry-values div[data-role=\"header\"] div[data-href=\"back-btn\"] span.form-name');\n        var ctx_menu_btn = $('div#branch-entry-values div[data-role=\"controlgroup\"] i[data-href=\"branch-entry-values-options\"]');\n        var delete_branch_entry_btn = $('div#branch-entry-values div#branch-entry-values-options ul li#delete-branch-entry');\n        var entry_value_edit_btn = $('div#branch-entry-values div#branch-entry-values-list ul');\n        var form_name = window.localStorage.form_name;\n        var branch_form = JSON.parse(window.localStorage.branch_form);\n        var project_id = window.localStorage.project_id;\n        var unsync_entry_btn = $('div#entry-values div#entry-values-options ul li#unsync-entry');\n\n        back_btn_label.text('Back to ' + branch_form.name.trunc(EC.Const.FORM_NAME_MAX_LENGTH) + ' entries');\n\n        back_btn.off().one('vclick', function (e) {\n\n            //go back to branch entries list\n            window.localStorage.removeItem('branch_edit_mode');\n            EC.Routing.changePage(EC.Const.BRANCH_ENTRIES_LIST_VIEW);\n        });\n\n        entry_value_edit_btn.off().on('vclick', 'i', function (e) {\n\n            var hash = $(e.target).parent().attr('data-href');\n\n            EC.Notification.showProgressDialog();\n\n            if (hash) {\n\n                //set edit position\n                window.localStorage.branch_edit_position = parseInt(hash.replace('?position=', ''), 10);\n\n                //get list of inputs for the branch form and render the first\n                // one on screen\n                EC.BranchInputs.getList(branch_form.name, project_id);\n\n            }\n\n            e.preventDefault();\n\n        });\n\n        delete_branch_entry_btn.off().on('vclick', function (e) {\n            EC.Notification.askConfirm(EC.Localise.getTranslation('delete_branch_entry'), EC.Localise.getTranslation('delete_entry_confirm'), 'EC.Entries.deleteBranchEntry');\n        });\n\n        ctx_menu_btn.off().on('vclick', function (e) {\n\n            var panel = $('div#branch-entry-values-options');\n\n            panel.panel('open');\n\n\n            //Closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                panel.panel('close');\n            });\n        });\n    };\n\n    /**\n     *\n     * @param {String} the_values: values array\n     */\n    module.renderBranchEntryValues = function (the_values) {\n\n        //build HTML\n        var HTML = '';\n        var i;\n        var iLength;\n        var values = the_values;\n        var branch_inputs_values = [];\n        var branch_inputs_trail = [];\n        var dom_list = $('div#branch-entry-values-list ul');\n        var form_id = parseInt(window.localStorage.form_id, 10);\n        var branch_form = JSON.parse(window.localStorage.branch_form);\n        var allow_download_edits = window.localStorage.allow_download_edits;\n        var project_name = window.localStorage.project_name;\n        var data_synced = 0;\n        var formatted_location;\n        var current_entries_total;\n        var totals;\n        var is_genkey_hidden = EC.Utils.isBranchFormGenKeyHidden();\n        var is_primary_key;\n        var branch_inputs = EC.BranchInputs.getInputs();\n        var labels;\n        var dropdown_label;\n        var radio_label;\n\n        //bind buttons\n        _bindActionBarBtns();\n\n        //empty current list\n        dom_list.empty();\n\n        //show branch form name in the top bar\n        $('div.branch-form-name div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(branch_form.name);\n\n        for (i = 0, iLength = values.length; i < iLength; i++) {\n\n            data_synced += values[i].is_data_synced;\n\n            //check if the current value is a primary key (it is only when\n            // entry_key === value)\n            is_primary_key = (values[i].value === values[i].entry_key) ? 1 : 0;\n\n            /*\n             * Build input_values array. by default a value is a single value\n             * (string)\n             * Media value is an object which contains the path to the stored\n             * file and the path to the cached file (if any)\n             * Checkbox values are saved as csv, but they are converted back\n             * to array\n             */\n            switch (values[i].type) {\n\n                //Checkbox values are saved as csv values: they are converted\n                // back to array\n                case EC.Const.CHECKBOX:\n                    branch_inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: values[i].value.split(','),\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n                    break;\n\n                //Media files values need to be in the form {cached: '',\n                // stored: <the_filename>}\n                case EC.Const.PHOTO :\n                    branch_inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: {\n                            cached: '',\n                            stored: values[i].value\n                        },\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n                    break;\n\n                //Media files values need to be in the form {cached: '',\n                // stored: <the_filename>}\n                case EC.Const.AUDIO :\n                    branch_inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: {\n                            cached: '',\n                            stored: values[i].value\n                        },\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n                    break;\n\n                //Media files values need to be in the form {cached: '',\n                // stored: <the_filename>}\n                case EC.Const.VIDEO :\n                    branch_inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: {\n                            cached: '',\n                            stored: values[i].value\n                        },\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n                    break;\n\n                default:\n                    branch_inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: values[i].value,\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n            }//switch\n\n            //build input_trail array to be used for navigation between\n            // inputs (skip _skipp3d_ values, to retain jump sequence)\n            if (values[i].value !== EC.Const.SKIPPED) {\n\n                branch_inputs_trail.push({\n                    position: values[i].position,\n                    label: values[i].label\n                });\n\n                //build list of values (_skipp3d_ values are skipped)\n                HTML += '<li data-role=\"list-divider\">';\n                HTML += values[i].label;\n                HTML += '</li>';\n                HTML += '<li class=\"entry-value-btn-wrapper\">';\n\n                //format media and location values for displaying purposes\n                switch (values[i].type) {\n\n                    //show labels for checkbox choices, as tey are saved as\n                    // values\n                    case EC.Const.CHECKBOX:\n\n                        labels = EC.Utils.mapLabelToValue(values[i], branch_inputs);\n                        HTML += '<span class=\"h-entry-value-label\">' + labels.join(', ') + '</span>';\n\n                        break;\n\n                    case EC.Const.DROPDOWN:\n\n                        dropdown_label = EC.Utils.mapLabelToValue(values[i], branch_inputs);\n                        HTML += '<span class=\"h-entry-value-label\">' + dropdown_label + '</span>';\n\n                        break;\n\n                    case EC.Const.RADIO:\n\n                        radio_label = EC.Utils.mapLabelToValue(values[i], branch_inputs);\n                        HTML += '<span class=\"h-entry-value-label\">' + radio_label + '</span>';\n\n                        break;\n\n                    case EC.Const.LOCATION:\n\n                        var location = values[i].value;\n                        location = location.split(',');\n\n                        var j;\n                        var jLength = location.length;\n\n                        for (j = 0; j < jLength; j++) {\n\n                            HTML += '<span class=\"h-entry-value-label\">' + location[j] + '<span>';\n\n                        }\n                        break;\n\n                    case EC.Const.PHOTO:\n\n                        if (values[i].value !== '') {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.PHOTO_AVAILABLE_LABEL) + '</span>';\n                        } else {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.PHOTO_NOT_AVAILABLE_LABEL) + '</span>';\n                        }\n\n                        break;\n\n                    case EC.Const.AUDIO:\n\n                        if (values[i].value !== '') {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.AUDIO_AVAILABLE_LABEL) + '</span>';\n                        } else {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.AUDIO_NOT_AVAILABLE_LABEL) + '</span>';\n                        }\n\n                        break;\n\n                    case EC.Const.VIDEO:\n\n                        if (values[i].value !== '') {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.VIDEO_AVAILABLE_LABEL) + '</span>';\n                        } else {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.VIDEO_NOT_AVAILABLE_LABEL) + '</span>';\n                        }\n\n                        break;\n\n                    default:\n                        HTML += '<span class=\"h-entry-value-label\">' + values[i].value + '</span>';\n\n                }\n\n                HTML += '<div class=\"entry-value-embedded-btn\" data-href=\"?position=' + values[i].position + '\">';\n\n                //deal with remote entries and disable edit button if no\n                // editable\n                if (values[i].is_remote === 1) {\n\n                    if (allow_download_edits === '1') {\n                        HTML += '<i class=\"fa fa-edit  fa-fw fa-ep-entry-value-embedded-btn\"></i>';\n                    } else {\n                        HTML += '<i class=\"fa fa-edit  fa-fw fa-ep-entry-value-embedded-btn ui-disabled\"></i>';\n                    }\n\n                } else {\n                    HTML += '<i class=\"fa fa-edit  fa-fw fa-ep-entry-value-embedded-btn\"></i>';\n                }\n\n                HTML += '</div>';\n                HTML += '</li>';\n\n            }//if NOT skipped\n\n        }//for\n\n        //add values to localStorage 'branch_inputs_values', to be used to\n        // pre-populate fields when editing\n        window.localStorage.branch_inputs_values = JSON.stringify(branch_inputs_values);\n\n        //add values to localStorage 'branch_inputs_trail', to navigate back\n        // and forth input fields when editing\n        window.localStorage.branch_inputs_trail = JSON.stringify(branch_inputs_trail);\n\n        dom_list.append(HTML);\n        dom_list.listview('refresh');\n\n        //Set 'editing mode' flag for branches\n        window.localStorage.branch_edit_mode = 1;\n\n        EC.Notification.hideProgressDialog();\n\n    };\n\n    return module;\n\n}(EC.Entries));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/**\n * @module EC\n * @submodule Entries\n */\n\nvar EC = EC || {};\nEC.Entries = ( function (module) {\n    \"use strict\";\n\n    var wls;\n\n    /**\n     *  Bind Action Bar buttons tap events\n     */\n    var _bindActionBarBtns = function () {\n\n        var nav_drawer_btn = $(\"div#entries div[data-role='header'] div[data-href='entries-nav-btn']\");\n        var home_btn = $(\"div#entries div[data-role='header'] div[data-href='home']\");\n        var settings_btn = $('div#entries div[data-role=\"header\"] div#entries-nav-drawer ul li div[data-href=\"settings\"]');\n        var add_entry_btn = $(\"div#entries div[data-role='header'] i[data-href='add-entry']\");\n        var inactive_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n\n        //bind left sidebar open/close\n        nav_drawer_btn.off().on('vclick', function (e) {\n\n            var panel = $(\"#entries-nav-drawer\");\n\n            panel.panel(\"open\");\n\n            home_btn.off().one('vclick', function (e) {\n                //reset offset, as when going back we make a new request for the first entries\n                wls.QUERY_ENTRIES_OFFSET = 0;\n\n                //trigger a pgae refresh when navigating back to project list\n                wls.back_nav_url = \"#refresh\";\n                EC.Routing.changePage(EC.Const.INDEX_VIEW);\n            });\n\n            // //bind add project button (action bar)\n            settings_btn.off().one('vclick', function (e) {\n                window.localStorage.reached_settings_view_from = $.mobile.activePage.attr(\"id\");\n                EC.Routing.changePage(EC.Const.SETTINGS_VIEW);\n            });\n\n            //Closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                panel.panel('close');\n            });\n\n        });\n\n        //open inputs\n        add_entry_btn.off().on('vclick', function (e) {\n            EC.Entries.addEntry();\n        });\n\n        inactive_tab.off().on('vclick', function (e) {\n\n            var project_id = wls.project_id;\n            var project_name = wls.project_name;\n\n            //get url from data-hef attribute\n            var page = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i').attr(\"data-href\");\n\n            EC.Routing.changePage(page);\n\n        });\n\n    };\n\n    module.renderCachedList = function () {\n\n        //build HTML\n        var HTML = \"\";\n        var back_href = \"\";\n        var back_children;\n        var i;\n        var iLength;\n        var dom_list = $('div#entries-list ul');\n        var empty_entries_list = $(\"div#entries div#entries-list div#empty-entries-list\");\n        var empty_entries_list_form_name = $(\"div#entries div#entries-list div#empty-entries-list p span.form-name\");\n        var page = $('#entries');\n        var header = $('div#entries div[data-role=\"header\"] div[data-href=\"entries-nav-btn\"] span.project-name');\n        var trail;\n        var inactive_label = \"\";\n        var dom_back_home_btn = $('div#entries a.back-home');\n        var action_bar_btn = $('div#entries div#entries-actionbar');\n        var active_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.active-tab span');\n        var inactive_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n        var inactive_tab_hash = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i');\n        var inactive_tab_label = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab span');\n        var form_id;\n        var form_name;\n        var form_tree;\n        var project_name;\n        var load_more_btn = $('div#entries div#entries-list div.more-items-btn');\n        var load_more_spinner = $('div#entries div#entries-list div.more-items-btn-spinner');\n        var self = this;\n        var offset;\n        var limit;\n        var current_entries_total;\n        var totals;\n\n        wls = window.localStorage;\n        form_id = parseInt(wls.form_id, 10);\n        form_name = wls.form_name;\n        form_tree = JSON.parse(wls.form_tree);\n        project_name = wls.project_name;\n        offset = parseInt(wls.QUERY_ENTRIES_OFFSET, 10);\n        limit = parseInt(wls.QUERY_LIMIT, 10);\n\n        //reset entries offset\n        //TODO: do not do if cached...\n        //wls.QUERY_ENTRIES_OFFSET = 0;\n\n        //request pagination when going back\n        totals = JSON.parse(wls.entries_totals);\n        current_entries_total = totals[totals.length - 1].entries_total;\n        //request pagination when going back\n        back_children = (totals.length > 1) ? totals[totals.length - 2].entries_total : 0;\n\n        //bind action bar buttons for this page\n        _bindActionBarBtns();\n\n        //show action bar buttons\n        action_bar_btn.show();\n\n        //show \"Show more\" button if we have more entries to display\n        if (current_entries_total > (offset + limit)) {\n            load_more_btn.removeClass('hidden');\n        } else {\n            load_more_btn.addClass('hidden');\n        }\n\n        //bind \"show more button\"\n        load_more_btn.off().on('vclick', function (e) {\n\n            /**\n             * Embedded spinning loader works only on iOS, do not know why\n             */\n\n            if (window.device.platform === EC.Const.IOS) {\n                //hide button and show loader\n                $(this).addClass('hidden');\n                load_more_spinner.removeClass('hidden');\n            }\n\n            if (window.device.platform === EC.Const.ANDROID) {\n                EC.Notification.showProgressDialog();\n            }\n\n            //increase offset\n            offset = parseInt(wls.QUERY_ENTRIES_OFFSET, 10);\n            offset += parseInt(wls.QUERY_LIMIT, 10);\n            wls.QUERY_ENTRIES_OFFSET = offset;\n\n            //get more entries\n            self.getMoreEntries(offset);\n\n        });\n\n        //empty current list\n        dom_list.empty();\n\n        //add project name to header\n        header.text(project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n\n        //check if this form is at the top of the tree so the back button will go back to the form page (#forms)\n        if (form_tree.parent === 0) {\n\n            inactive_label = \"Forms\";\n\n            //build url\n            back_href = \"forms.html?project=\" + wls.project_id + \"&name=\" + wls.project_name;\n\n        } else {\n\n            //this is a nested form, so we need to go back to the previous form in the stack based on what entry was selected\n            trail = JSON.parse(wls.breadcrumbs);\n\n            //breadcrumb label will indicate form and last element of the breadcrumb trail\n            inactive_label = form_tree.pname + \": \" + trail[trail.length - 1];\n\n            //back button will have parent form and parent entry key (which is the next to last element in the breadcrumb trail)\n            //and number of children (parent entries when going back) for pagination\n            back_href += 'entries-list.html?form=' + form_tree.parent;\n            back_href += '&name=' + form_tree.pname;\n            back_href += '&entry_key=' + trail[trail.length - 2];\n            back_href += '&direction=' + EC.Const.BACKWARD;\n            back_href += '&children=' + back_children;\n        }\n\n        //update active tab name with the current active form\n        active_tab.text(form_name);\n\n        //update inactive tab\n        inactive_tab_label.text(inactive_label);\n        inactive_tab_hash.attr(\"data-href\", back_href);\n\n        dom_list.append(window.localStorage.cached_entries_list);\n\n        //add form name to localStorage\n        wls.form_name = form_name;\n        wls.form_id = form_id;\n\n        //remove navigation objects\n        wls.removeItem(\"inputs_values\");\n        wls.removeItem(\"inputs_trail\");\n        wls.removeItem(\"current_position\");\n        wls.removeItem(\"back_edit_nav_url\");\n\n        //reset \"editing mode\" flags\n        wls.removeItem(\"edit_mode\");\n        wls.removeItem(\"edit_position\");\n        wls.removeItem(\"edit_type\");\n        wls.removeItem(\"edit_id\");\n\n        EC.Notification.hideProgressDialog();\n    };\n\n    return module;\n\n}(EC.Entries));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Entries\n */\nvar EC = EC || {};\nEC.Entries = EC.Entries || {};\nEC.Entries = ( function (module) {\n    \"use strict\";\n\n    /**\n     * @method renderChildEntriesList Renders the list of entries for a child form grouped by the immediate parent form primary key\n     * It is triggered when the user selects a form other than the top one (the main parent)\n     *\n     * @param {Array} the_child_entries Array that contains the values of the primry key and all the children per each child form\n     * {parent: the value of the immediate parent primary key\n\t\t *  children (Array): {entry_key: the value of the primary key for this child,\n\t\t * full_title: all the title values in csv,\n\t\t * nested_children_count: the total of children belonging to this child entry, to be shown in the bubble count\n\t\t * }\n\t\t */\n\n    var wls;\n\n    var _bindActionBarBtns = function () {\n\n        var nav_drawer_btn = $(\"div#entries div[data-role='header'] div[data-href='entries-nav-btn']\");\n        var home_btn = $(\"div#entries div[data-role='header'] div[data-href='home']\");\n        var settings_btn = $('div#entries div[data-role=\"header\"] div#entries-nav-drawer ul li div[data-href=\"settings\"]');\n        var add_entry_btn = $(\"div#entries div[data-role='header'] i[data-href='add-entry']\");\n        var inactive_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n\n        //bind left sidebar open/close\n        nav_drawer_btn.off().on('vclick', function (e) {\n\n            var panel = $(\"#entries-nav-drawer\");\n\n            panel.panel(\"open\");\n\n            home_btn.off().one('vclick', function (e) {\n                //reset offset, as when going back we make a new request for the first entries\n                wls.QUERY_ENTRIES_OFFSET = 0;\n\n                //trigger a pgae refresh when navigating back to project list\n                wls.back_nav_url = \"#refresh\";\n                EC.Routing.changePage(EC.Const.INDEX_VIEW);\n            });\n\n            // //bind add project button (action bar)\n            settings_btn.off().one('vclick', function (e) {\n                wls.reached_settings_view_from = $.mobile.activePage.attr(\"id\");\n                EC.Routing.changePage(EC.Const.SETTINGS_VIEW);\n            });\n\n            //Closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                panel.panel('close');\n            });\n\n        });\n\n        inactive_tab.off().on('vclick', function (e) {\n            //get url from data-hef attribute\n            var back_url = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i').attr(\"data-href\");\n            EC.Routing.changePage(back_url);\n        });\n\n    };\n\n    var _buildChildEntriesList = function (the_form_id, the_form_tree, the_entries) {\n\n        var form_id = the_form_id;\n        var form_tree = the_form_tree;\n        var entries = the_entries;\n        var full_parent = [];\n        var i;\n        var j;\n        var iLength;\n        var jLength;\n        var HTML = \"\";\n\n        //list child entries grouped by immediate parent\n        for (i = 0, iLength = entries.length; i < iLength; i++) {\n\n            HTML += '<div class=\"parent-entry-divider\">';\n            HTML += '<span>';\n\n            //show only the immediate parent parsing the full parent\n            full_parent = entries[i].parent.split(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n            HTML += full_parent[full_parent.length - 1];\n\n            HTML += '</span>';\n            HTML += '<a id=\"' + entries[i].parent + '\" class=\"context-add-child-entry\" href=\"#\"  data-ajax=\"false\">';\n            HTML += '<i class=\"fa fa-plus-square-o fa-ep fa-ep-in-list\" data-href=\"add-project\"></i>';\n            HTML += '</a>';\n            HTML += '</div>';\n\n            //show all children\n            jLength = entries[i].children.length;\n\n            for (j = 0; j < jLength; j++) {\n\n                //each element will have the entry key in 'data-entry-key' and the parent key as a class to load the primary keys in memory when adding a new entry from here\n                HTML += '<li data-entry-key=\"' + entries[i].children[j].entry_key + '\" class=\"' + entries[i].parent + '\" data-icon=\"false\">';\n                HTML += '<a href=\"entry-values.html?form=' + form_id + '&entry_key=' + entries[i].children[j].entry_key + '&direction=' + EC.Const.FORWARD + '&parent=' + entries[i].parent + '\">';\n                HTML += entries[i].children[j].full_title;\n                HTML += '</a>';\n\n                // here we need to display the total of direct childrens for this entry (if not the last form)\n                if (form_tree.child !== 0) {\n\n                    HTML += '<span class=\"ui-li-count\">';\n                    HTML += entries[i].children[j].nested_children_count;\n                    HTML += '</span>';\n                }\n                HTML += '</li>';\n\n            }\n\n        }//for\n\n        //cache the last rendered parent (for pagination purposes) We will use this value when the user taps on \"Show more\"\n        window.localStorage.last_parent = entries[entries.length - 1].parent;\n\n        return HTML;\n\n    };\n\n    module.renderChildEntriesList = function (the_child_entries) {\n\n        //build HTML\n        var HTML = \"\";\n        var back_href;\n        var i;\n        var iLength;\n        var j;\n        var jLength;\n        var entries = the_child_entries;\n        var dom_list = $('div#entries-list ul');\n        var dom_back_home_btn = $('div#entries a.back-home');\n        var action_bar_btn = $('div#entries div#entries-actionbar');\n        var active_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.active-tab span');\n        var inactive_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n        var inactive_tab_hash = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i');\n        var inactive_tab_label = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab span');\n        var page = $('#entries');\n        var header = $('div#entries div[data-role=\"header\"] div[data-href=\"back-btn\"] span.project-name');\n        var trail;\n        var active_label = \"\";\n        var inactive_label = \"\";\n        var form_id = parseInt(window.localStorage.form_id, 10);\n        var form_name = window.localStorage.form_name;\n        var form_tree = JSON.parse(window.localStorage.form_tree);\n        var project_id = window.localStorage.project_id;\n        var project_name = window.localStorage.project_name;\n        var load_more_btn = $('div#entries div#entries-list div.more-items-btn');\n        var load_more_spinner = $('div#entries div#entries-list div.more-items-btn-spinner');\n        var children_offset = parseInt(window.localStorage.QUERY_CHILD_ENTRIES_OFFSET, 10);\n        var parent_offset = parseInt(window.localStorage.QUERY_PARENT_ENTRIES_OFFSET, 10);\n        var entries_total;\n        var self = this;\n\n        wls = window.localStorage;\n\n        //reset breadcrumbs, as if the user adds an entry from a child list, we will grab the full parent path from the dom, as we are not navigating the forms manually\n        wls.breadcrumbs = JSON.stringify([\"\"]);\n\n        //bind action bar buttons for this page\n        _bindActionBarBtns(form_id, form_tree, entries);\n\n        //empty current list\n        dom_list.empty();\n\n        //hide action bar button (top right, add and menu)\n        action_bar_btn.hide();\n\n        if (entries.length > 0) {\n            HTML = _buildChildEntriesList(form_id, form_tree, entries.slice(0));\n\n        } else {\n\n            /*no more child entries (when user deleted all the entries one by one from child entries list)\n             so redirect to forms list*/\n            EC.Forms.getList(\"forms.html?project=\" + project_id + \"&name=\" + project_name);\n\n        }\n\n        //add project name to header\n        header.text(project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n\n        //check if this form is at the top of the tree so the back button will go back to the form page (#forms)\n        inactive_label = \"Forms\";\n\n        //build back button hash\n        back_href = \"forms.html?project=\" + wls.project_id + \"&name=\" + wls.project_name;\n        wls.back_nav_url = back_href;\n\n        //update active tab name with the current active form\n        active_label = form_name;\n\n        //update active tab name with the current active form\n        active_tab.text(form_name);\n\n        //update inactive tab\n        inactive_tab_label.text(inactive_label);\n        inactive_tab_hash.attr(\"data-href\", back_href);\n\n        //append list and change page\n        dom_list.append(HTML);\n        dom_list.listview('refresh');\n\n        //attach delegate event to all links to add a child entry for the selected parent\n        dom_list.off().on('vclick', \"a.context-add-child-entry\", function () {\n\n            //add parent of selected itme in breadcrumbs\n            var breadcrumbs_trail = JSON.parse(wls.getItem(\"breadcrumbs\")) || [];\n            breadcrumbs_trail.push($(this).attr(\"id\"));\n            wls.breadcrumbs = JSON.stringify(breadcrumbs_trail);\n\n            EC.Entries.addEntry();\n\n        });\n\n        //show \"Show more\" button if we have more entries to display\n        entries_total = EC.Utils.getFormByID(form_id).entries;\n        if (entries_total > (children_offset + wls.QUERY_LIMIT)) {\n            load_more_btn.removeClass('hidden');\n        } else {\n            load_more_btn.addClass('hidden');\n        }\n\n        //bind \"show more button\"\n        load_more_btn.off().on('vclick', function (e) {\n\n            //hide button and show loader\n            $(this).addClass('hidden');\n            load_more_spinner.removeClass('hidden');\n\n            //increase offset\n            children_offset = parseInt(wls.QUERY_CHILD_ENTRIES_OFFSET, 10);\n            children_offset += parseInt(wls.QUERY_LIMIT, 10);\n            wls.QUERY_CHILD_ENTRIES_OFFSET = children_offset;\n\n            //get more entries\n            self.getMoreChildEntries(form_id, children_offset);\n\n        });\n\n        //set handler for context add button (in a child entries list)\n        $('div#entries a.context-add-btn').off().on('vclick', function (e) {\n\n            var parent_key = $(this).attr('id');\n            var primary_keys = [];\n            var breadcrumb_trail = [];\n\n            //get all <li> but exclude list dividers\n            var selected_list = $(this).parent().parent().find(\"li:not('.custom-divider')\");\n\n            //manually add parent key in breadcrumb trail as we are adding an entry from a child entries list\n            breadcrumb_trail = parent_key.split(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n            wls.breadcrumbs = JSON.stringify(breadcrumb_trail);\n\n            //collect all primary key from data-entry-key attribute for selected list\n            selected_list.each(function (i) {\n\n                if ($(this).hasClass(parent_key)) {\n\n                    console.log($(this).attr('data-entry-key'));\n                    primary_keys.push($(this).attr('data-entry-key'));\n\n                }\n            });\n\n            //store primary keys (for validate against duplication)\n            wls.primary_keys = JSON.stringify(primary_keys);\n\n            navigator.notification.activityStart(\"\", \"Loading...\");\n\n        });\n\n        //add form name to localStorage\n        wls.form_name = form_name;\n        wls.form_id = form_id;\n\n        //reset \"editing mode\" flags\n        wls.removeItem(\"edit_mode\");\n        wls.removeItem(\"edit_position\");\n        wls.removeItem(\"edit_type\");\n        wls.removeItem(\"edit_id\");\n\n        //reset inputs values and trail\n        wls.removeItem(\"inputs_values\");\n        wls.removeItem(\"inputs_trail\");\n\n        //reset child full parent path\n        wls.removeItem(\"child_full_parent_path\");\n\n        //hide spinning loader\n        EC.Notification.hideProgressDialog();\n\n    };\n\n    module.getMoreChildEntries = function (the_form_id, the_children_offset) {\n\n        var form_id = the_form_id;\n        var children_offset = the_children_offset;\n\n        //EC.Select.getChildEntries(form_id, parent_offset, children_offset);\n        EC.Select.getMoreChildEntries(form_id, children_offset);\n    };\n\n    module.appendMoreChildEntries = function (the_entries) {\n\n        var entries = the_entries;\n        var i;\n        var j;\n        var iLength = entries.length;\n        var jLength;\n        var dom_list = $('div#entries-list ul');\n        var form_id = window.localStorage.form_id;\n        var form_tree = JSON.parse(window.localStorage.form_tree);\n        var load_more_btn = $('div#entries-list .more-items-btn');\n        var HTML = \"\";\n        var children_offset = parseInt(window.localStorage.QUERY_CHILD_ENTRIES_OFFSET, 10);\n        var entries_total = EC.Utils.getFormByID(form_id).entries;\n        var query_limit = parseInt(window.localStorage.QUERY_LIMIT, 10);\n\n        for (i = 0, iLength = entries.length; i < iLength; i++) {\n\n            //Check if we still have entries to append to the current parent\n            if (entries[i].parent === window.localStorage.last_parent) {\n\n                //show all children\n                jLength = entries[i].children.length;\n                for (j = 0; j < jLength; j++) {\n\n                    //each element will have the entry key in 'data-entry-key' and the parent key as a class to load the primary keys in memory when adding a new entry from here\n                    HTML += '<li data-entry-key=\"' + entries[i].children[j].entry_key + '\" class=\"' + entries[i].parent + '\" data-icon=\"false\">';\n                    HTML += '<a href=\"#values?form=' + form_id + '&entry_key=' + entries[i].children[j].entry_key + '&direction=' + EC.Const.FORWARD + '&parent=' + entries[i].parent + '\">';\n                    HTML += entries[i].children[j].full_title;\n                    HTML += '</a>';\n\n                    // here we need to display the total of direct childrens for this entry (if not the last form)\n                    if (form_tree.child !== 0) {\n\n                        HTML += '<span class=\"ui-li-count\">';\n                        HTML += entries[i].children[j].nested_children_count;\n                        HTML += '</span>';\n                    }\n                    HTML += '</li>';\n\n                }\n\n            }\n\n            //attach new parent and its entries\n            else {\n\n                //show parent key value as divider and context button to add an entry\n                HTML += '<li data-role=\"list-divider\">';\n                HTML += entries[i].parent;\n                HTML += '<a id=\"' + entries[i].parent + '\" class=\"context-add-btn\" href=\"views/inputs.html\"  data-ajax=\"false\">';\n                HTML += '<i class=\"fa fa-plus-square-o fa-ep fa-fw fa-ep-in-list\" data-href=\"add-project\"></i>';\n                HTML += '</a>';\n                HTML += '</li>';\n\n                //show all children\n                jLength = entries[i].children.length;\n\n                for (j = 0; j < jLength; j++) {\n\n                    //each element will have the entry key in 'data-entry-key' and the parent key as a class to load the primary keys in memory when adding a new entry from here\n                    HTML += '<li data-entry-key=\"' + entries[i].children[j].entry_key + '\" class=\"' + entries[i].parent + '\" data-icon=\"false\">';\n                    HTML += '<a href=\"#values?form=' + form_id + '&entry_key=' + entries[i].children[j].entry_key + '&direction=' + EC.Const.FORWARD + '&parent=' + entries[i].parent + '\">';\n                    HTML += entries[i].children[j].full_title;\n                    HTML += '</a>';\n\n                    // here we need to display the total of direct childrens for this entry (if not the last form)\n                    if (form_tree.child !== 0) {\n\n                        HTML += '<span class=\"ui-li-count\">';\n                        HTML += entries[i].children[j].nested_children_count;\n                        HTML += '</span>';\n                    }\n                    HTML += '</li>';\n\n                }\n\n            }\n\n        }//for\n\n        //keep track of last parent which entries are listed on screen (it will be the first parent to search entries for when tapping \"Show More\")\n        window.localStorage.last_parent = entries[entries.length - 1].parent;\n\n        //append list\n        dom_list.append(HTML);\n        dom_list.listview(\"refresh\");\n        dom_list.trigger(\"updatelayout\");\n\n        //show button and hide loader (if there are more entries to show)\n        $('div#entries div#entries-list div.more-items-btn-spinner').addClass('hidden');\n        if (entries_total > (children_offset + query_limit)) {\n            $('div#entries div#entries-list div.more-items-btn').removeClass('hidden');\n        }\n\n    };\n\n    return module;\n\n}(EC.Entries));\n","/*global $, jQuery, cordova, device*/\n/**\n * @module EC\n * @submodule Entries\n */\nvar EC = EC || {};\nEC.Entries = EC.Entries || {};\nEC.Entries = (function (module) {\n    'use strict';\n\n    /**\n     * @method renderEntryValues Render a list of all the values for a single\n     * entry\n     * @param {the_values} array of values for a single entry (basically a\n     * form filled in)\n     * { _id: the row id\n         *  created_on: timestamp when entry was saved forst time\n         *  entry_key: value of primary key\n         *  form_id: id of the form\n         *  input_id: id of the input\n         *  is_data_synced: if the value is data synced\n         *  is_media_synced: if the value is media synced\n         *  is_title: if this vaue is part of the title\n         *  label: label for the field\n         *  parent: value of the parent primary key\n         *  position: the position of this field in the form fields sequence\n         *  ref: the field ref\n         *  type: the input type\n         *  value: the input value}\n     */\n\n    var unsync_entry_btn;\n    var wls;\n    var _bindActionBarBtns = function () {\n\n        var nav_drawer_btn = $('div#entry-values div[data-role=\"header\"] div[data-href=\"entry-values-nav-btn\"]');\n        var home_btn = $('div#entry-values div[data-role=\"header\"] div[data-href=\"home\"]');\n        var settings_btn = $('div#entry-values div[data-role=\"header\"] div#entry-values-nav-drawer ul li div[data-href=\"settings\"]');\n        var ctx_menu_btn = $('div#entry-values div[data-role=\"header\"] div.ui-btn-right[data-href=\"entry-values-options\"]');\n        var delete_entry_btn = $('div#entry-values div.entry-values-options ul li#delete-entry');\n        var inactive_tab = $('div#entry-values div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n        var entry_value_btn = $('div#entry-values div#entry-values-list ul');\n        var input_page_href = window.localStorage.input_page_href;\n\n        //get hold of unsync button\n        unsync_entry_btn = $('div#entry-values div.entry-values-options ul li#unsync-entry');\n\n        //bind left sidebar open/close\n        nav_drawer_btn.off().on('vclick', function (e) {\n\n            var panel = $('#entry-values-nav-drawer');\n            panel.panel('open');\n\n            home_btn.off().one('vclick', function (e) {\n                //trigger a pgae refresh when navigating back to project list\n                wls.back_nav_url = '#refresh';\n                EC.Routing.changePage(EC.Const.INDEX_VIEW);\n            });\n\n            //bind add project button (action bar)\n            settings_btn.off().one('vclick', function (e) {\n                window.localStorage.reached_settings_view_from = $.mobile.activePage.attr('id');\n                EC.Routing.changePage(EC.Const.SETTINGS_VIEW);\n            });\n\n            //Closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                panel.panel('close');\n            });\n\n        });\n\n        inactive_tab.off().on('vclick', function (e) {\n            //get url from data-hef attribute\n            var page = $('div#entry-values div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i').attr('data-href');\n            EC.Routing.changePage(page);\n            //window.history.back(-1);\n        });\n\n        entry_value_btn.off().on('vclick', 'i', function (e) {\n\n            var hash = $(e.target).parent().attr('data-href');\n            var edit_position = parseInt(hash.replace('?position=', ''), 10);\n\n            window.localStorage.edit_position = edit_position;\n            window.localStorage.edit_mode = 1;\n\n            //cache back_nav_hash, to be used for navigate back after an edit\n            // action\n            window.localStorage.back_nav_url = $('div#entry-values div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i').attr('data-href');\n\n            //open inputs page at the right input position\n            EC.Entries.addEntry();\n\n            e.preventDefault();\n\n        });\n\n        //attach event to context menu to button unsync this entry\n        unsync_entry_btn.off().on('vclick', function (e) {\n            EC.Notification.askConfirm(EC.Localise.getTranslation('unsync_entry'), EC.Localise.getTranslation('unsync_entry_confirm'), 'EC.Entries.unsyncEntry');\n        });\n\n        delete_entry_btn.off().on('vclick', function (e) {\n            EC.Notification.askConfirm(EC.Localise.getTranslation('delete_entry'), EC.Localise.getTranslation('delete_entry_with_children_confirm'), 'EC.Entries.deleteEntry');\n        });\n\n        ctx_menu_btn.off().on('vclick', function (e) {\n\n            var panel = $('.entry-values-options');\n\n            panel.panel('open');\n\n\n            //Closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                panel.panel('close');\n            });\n        });\n    };\n\n    module.renderEntryValues = function (the_values) {\n\n        //build HTML\n        var HTML = '';\n        var back_href;\n        var back_children;\n        var i;\n        var iLength;\n        var values = the_values;\n        var inputs_values = [];\n        var inputs_trail = [];\n        var dom_list = $('div#entry-values-list ul');\n        var page = $('#entry-values');\n        var header = $('div#entry-values div[data-role=\"header\"] div[data-href=\"entry-values-nav-btn\"] span.project-name');\n        var active_key = '';\n        var entry_key = window.localStorage.entry_key;\n        var active_tab_label = $('div#entry-values div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.active-tab span');\n        var inactive_tab = $('div#entry-value div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n        var inactive_tab_hash = $('div#entry-values div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i');\n        var inactive_tab_label = $('div#entry-values div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab span');\n        var form_id = parseInt(window.localStorage.form_id, 10);\n        var form_name = window.localStorage.form_name;\n        var form_tree = JSON.parse(window.localStorage.form_tree);\n        var trail;\n        var allow_download_edits = window.localStorage.allow_download_edits;\n        var project_name = window.localStorage.project_name;\n        var data_synced = 0;\n        var formatted_location;\n        var current_entries_total;\n        var totals;\n        var branch_values;\n        var is_genkey_hidden = EC.Utils.isFormGenKeyHidden(form_id);\n        var is_primary_key;\n        var inputs = EC.Inputs.getInputs();\n        var labels;\n        var dropdown_label;\n        var radio_label;\n\n        wls = window.localStorage;\n\n        //stop background watch position if any\n        window.navigator.geolocation.clearWatch(wls.watch_position);\n        window.localStorage.form_has_location = 0;\n\n        //bind buttons\n        _bindActionBarBtns();\n\n        //Add selected entry key value as the active key (it is the default if no title specified)\n        active_key = entry_key;\n\n        //empty current list\n        dom_list.empty();\n\n        for (i = 0, iLength = values.length; i < iLength; i++) {\n\n            data_synced += values[i].is_data_synced;\n\n            //check if the current value is a primary key (it is onlt when\n            // entry_key === value)\n            is_primary_key = (values[i].value === values[i].entry_key) ? 1 : 0;\n\n\n            //do we have at least a title field? If so, show the first title field value as active key\n            if (parseInt(values[i].is_title, 10) === 1 && active_key === entry_key) {\n                active_key = values[i].value;\n            }\n\n            /*\n             * Build input_values array. by default a value is a single value\n             * (string)\n             * Media value is an object which contains the path to the stored\n             * file and the path to the cached file (if any)\n             * Checkbox values are saved as csv, but they are converted back\n             * to array\n             * Branch values represent the branch form name and its total of\n             * entries\n             */\n            switch (values[i].type) {\n\n                //Checkbox values are saved as csv values: they are converted\n                // back to array\n                case EC.Const.CHECKBOX:\n                    inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: values[i].value.split(','),\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n                    break;\n\n                //Media files values need to be in the form {cached: '',\n                // stored: <the_filename>}\n                case EC.Const.PHOTO :\n                    inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: {\n                            cached: '',\n                            stored: values[i].value\n                        },\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n                    break;\n\n                //Media files values need to be in the form {cached: '',\n                // stored: <the_filename>}\n                case EC.Const.AUDIO :\n                    inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: {\n                            cached: '',\n                            stored: values[i].value\n                        },\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n                    break;\n\n                //Media files values need to be in the form {cached: '',\n                // stored: <the_filename>}\n                case EC.Const.VIDEO :\n                    inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: {\n                            cached: '',\n                            stored: values[i].value\n                        },\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n                    break;\n\n                case EC.Const.BRANCH:\n\n                    branch_values = values[i].value.split(',');\n                    inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: {\n                            branch_form_name: branch_values[0],\n                            branch_total_entries: parseInt(branch_values[1], 10)\n                        },\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n\n                    break;\n\n                default:\n                    inputs_values.push({\n                        _id: values[i]._id,\n                        type: values[i].type,\n                        value: values[i].value,\n                        position: values[i].position,\n                        is_primary_key: is_primary_key\n                    });\n            }//switch\n\n            /* build input_trail array to be used for navigation between\n             * inputs be aware that:\n             *\n             * - _skipp3d_ values are skipped, to retain jump sequence when\n             * listing values\n             * - if is_genkey_hidden is set to 1 and the value is a primary\n             * key, do not show it\n             *  (values[i].value === values[i].entry_key) i strue only if\n             * that value is the the primary key\n             */\n\n            if (values[i].value !== EC.Const.SKIPPED && !(is_genkey_hidden === 1 && values[i].value === values[i].entry_key)) {\n\n                inputs_trail.push({\n                    position: values[i].position,\n                    label: values[i].label\n                });\n\n                //build list of values (_skipp3d_ values are skipped)\n                HTML += '<li data-role=\"list-divider\">';\n                HTML += values[i].label;\n                HTML += '</li>';\n                HTML += '<li class=\"entry-value-btn-wrapper\">';\n\n                //format media and location values for displaying purposes\n                switch (values[i].type) {\n\n                    //show labels for checkbox choices, as tey are saved as\n                    // values\n                    case EC.Const.CHECKBOX:\n\n                        console.log('CHECKBOX');\n                        console.log(values[i]);\n\n                        labels = EC.Utils.mapLabelToValue(values[i], inputs);\n                        HTML += '<span class=\"h-entry-value-label\">' + labels.join(', ') + '</span>';\n\n                        break;\n\n                    case EC.Const.DROPDOWN:\n\n                        console.log('DROPDOWN');\n                        console.log(values[i]);\n\n                        if (values[i].value !== '0') {\n                            dropdown_label = EC.Utils.mapLabelToValue(values[i], inputs);\n                        }\n                        else {\n                            dropdown_label = '';\n                        }\n\n                        HTML += '<span class=\"h-entry-value-label\">' + dropdown_label + '</span>';\n\n                        break;\n\n                    case EC.Const.RADIO:\n\n                        console.log('RADIO');\n                        console.log(values[i]);\n\n                        if (values[i].value !== '') {\n                            radio_label = EC.Utils.mapLabelToValue(values[i], inputs);\n                        }\n                        else {\n                            radio_label = '';\n                        }\n\n\n                        HTML += '<span class=\"h-entry-value-label\">' + radio_label + '</span>';\n\n                        break;\n\n                    case EC.Const.LOCATION:\n\n                        var location = values[i].value;\n                        location = location.split(',');\n\n                        var j;\n                        var jLength = location.length;\n\n                        for (j = 0; j < jLength; j++) {\n\n                            HTML += '<span class=\"h-entry-value-label\">' + location[j] + '<span>';\n\n                        }\n                        break;\n\n                    case EC.Const.BRANCH:\n\n                        //show branch form mane and total of entries (we set\n                        // the branch_values array earlier)\n                        HTML += '<span class=\"h-entry-value-label\">' + branch_values[0] + '<br/>(' + branch_values[1] + ')' + '</span>';\n\n                        break;\n\n                    case EC.Const.PHOTO:\n\n                        if (values[i].value !== '') {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.PHOTO_AVAILABLE_LABEL) + '</span>';\n                        } else {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.PHOTO_NOT_AVAILABLE_LABEL) + '</span>';\n                        }\n\n                        break;\n\n                    case EC.Const.AUDIO:\n\n                        if (values[i].value !== '') {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.AUDIO_AVAILABLE_LABEL) + '</span>';\n                        } else {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.AUDIO_NOT_AVAILABLE_LABEL) + '</span>';\n                        }\n\n                        break;\n\n                    case EC.Const.VIDEO:\n\n                        if (values[i].value !== '') {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.VIDEO_AVAILABLE_LABEL) + '</span>';\n                        } else {\n                            HTML += '<span class=\"h-entry-value-label\">' + EC.Localise.getTranslation(EC.Const.VIDEO_NOT_AVAILABLE_LABEL) + '</span>';\n                        }\n\n                        break;\n\n                    default:\n                        HTML += '<span class=\"h-entry-value-label\">' + values[i].value + '</span>';\n\n                }\n\n                HTML += '<div class=\"entry-value-embedded-btn\" data-href=\"?position=' + values[i].position + '\">';\n\n                //deal with remote entries and disable edit button if no\n                // editable\n                if (values[i].is_remote === 1) {\n\n                    if (allow_download_edits === '1') {\n                        HTML += '<i class=\"fa fa-edit  fa-fw fa-ep-entry-value-embedded-btn\"></i>';\n                    } else {\n                        HTML += '<i class=\"fa fa-edit  fa-fw fa-ep-entry-value-embedded-btn ui-disabled\"></i>';\n                    }\n\n                } else {\n                    HTML += '<i class=\"fa fa-edit  fa-fw fa-ep-entry-value-embedded-btn\"></i>';\n                }\n\n                HTML += '</div>';\n                HTML += '</li>';\n\n            }//if NOT skipped\n\n        }//for\n\n        //add values to localStorage 'inputs_values', to be used to\n        // pre-populate fields when editing\n        window.localStorage.inputs_values = JSON.stringify(inputs_values);\n\n        //add values to localStorage 'inputs_trail', to navigate back and\n        // forth input fields when editing\n        window.localStorage.inputs_trail = JSON.stringify(inputs_trail);\n\n        //add project name to header (top left)\n        header.text(project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n\n        /*\n         * Build back button behaviour:\n         */\n\n        //check if this form is at the top of the tree so the back button\n        // will go back to the form page (#forms)\n        if (form_tree.parent === 0) {\n            entry_key = '';\n        } else {\n\n            //this is a nested form, so we need to go back to the previous\n            // form in the stack based on what entry was selected\n            trail = JSON.parse(window.localStorage.breadcrumbs);\n\n            entry_key = trail[trail.length - 2];\n\n            //window.localStorage.breadcrumbs = JSON.stringify(trail);\n        }\n\n        //request pagination when going back to entries list\n        totals = JSON.parse(window.localStorage.entries_totals);\n        back_children = totals[totals.length - 1].entries_total;\n\n        /*set hash to be used to list this entries when loading index.html\n         * going back\n         The direction will be VIEW as we are viewing(listing) the current\n         form entries */\n        back_href = '';\n        back_href += 'entries-list.html?form=' + form_id;\n        back_href += '&name=' + form_name;\n        back_href += '&entry_key=' + entry_key;\n        back_href += '&direction=' + EC.Const.VIEW;\n        back_href += '&children=' + back_children;\n\n        if (data_synced > 0) {\n            //enable unsync-data button\n            unsync_entry_btn.removeClass('ui-disabled');\n        } else {\n            //disable unsync-data button\n            unsync_entry_btn.addClass('ui-disabled');\n        }\n\n        //update active tab name with the current active form\n        active_tab_label.text(active_key);\n\n        //update inactive tab with back navigation href\n        inactive_tab_label.text(form_name);\n        inactive_tab_hash.attr('data-href', back_href);\n\n        //console.log(HTML);\n        dom_list.append(HTML);\n\n        //build page and refresh listview\n        page.page();\n        dom_list.listview('refresh');\n\n        //set a flag as any time we go back from entry value list page we\n        // need to show the list of entries for the previous selected entry\n        //if entry_key is undefined, it is because we are coming back from a\n        // 'Store Edit' action\n        if (entry_key !== undefined) {\n            window.localStorage.back_nav_url = back_href;\n        }\n\n        //Set 'editing mode' flag\n        window.localStorage.edit_mode = 1;\n\n        EC.Notification.hideProgressDialog();\n    };\n\n    return module;\n\n}(EC.Entries));\n","/*global $, jQuery, cordova, device*/\n/**\n * @module EC\n * @submodule Entries\n */\n\nvar EC = EC || {};\nEC.Entries = (function (module) {\n    'use strict';\n\n    /**\n     * @method renderList\n     * Update the UI listing all the entries for a form. What is listed is all the\n     * field values flagged as 'title'\n     * If no title field is found, the value of the primary key of that form is shown\n     * instead\n     *\n     * @param {array} the_entries Array with all the entries for a form.\n     * Each element is like {children: 1, entry_key: 'Kingston', full_title:\n\t\t * 'Kingston, KI6475746856'}\n     * -children- is the number of child entries belonging to each parent entry (if\n     * any)\n     * -entry_key- value of the primary key for that form\n     * -full_title- all the values flagged as title in csv format\n     *\n     */\n\n    var wls;\n\n    /**\n     *  Bind Action Bar buttons tap events\n     */\n    var _bindActionBarBtns = function () {\n\n        var nav_drawer_btn = $('div#entries div[data-role=\"header\"] div[data-href=\"entries-nav-btn\"]');\n        var home_btn = $('div#entries div[data-role=\"header\"] div[data-href=\"home\"]');\n        var settings_btn = $('div#entries div[data-role=\"header\"] div#entries-nav-drawer ul li div[data-href=\"settings\"]');\n        var add_entry_btn = $('div#entries div[data-role=\"header\"] i[data-href=\"add-entry\"]');\n        var inactive_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n\n        //bind left sidebar open/close\n        nav_drawer_btn.off().on('vclick', function (e) {\n\n            var panel = $('#entries-nav-drawer');\n\n            panel.panel('open');\n\n            home_btn.off().one('vclick', function (e) {\n                //reset offset, as when going back we make a new request for the first entries\n                wls.QUERY_ENTRIES_OFFSET = 0;\n\n                //trigger a pgae refresh when navigating back to project list\n                wls.back_nav_url = '#refresh';\n                EC.Routing.changePage(EC.Const.INDEX_VIEW);\n            });\n\n            // //bind add project button (action bar)\n            settings_btn.off().one('vclick', function (e) {\n                wls.reached_settings_view_from = $.mobile.activePage.attr('id');\n                EC.Routing.changePage(EC.Const.SETTINGS_VIEW);\n            });\n\n            //Closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                panel.panel('close');\n            });\n\n        });\n\n        //open inputs\n        add_entry_btn.off().on('vclick', function (e) {\n            EC.Entries.addEntry();\n        });\n\n        inactive_tab.off().on('vclick', function (e) {\n\n            var project_id = wls.project_id;\n            var project_name = wls.project_name;\n\n            //get url from data-hef attribute\n            var page = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i').attr('data-href');\n\n            EC.Routing.changePage(page);\n\n        });\n\n    };\n\n    var _buildList = function (the_form_id, the_form_tree, the_entries) {\n\n        var form_id = the_form_id;\n        var form_tree = the_form_tree;\n        var entries = the_entries;\n        var i;\n        var iLength = entries.length;\n        var HTML = '';\n\n        //if it is the last form, show single list view row with no nested children (no\n        // right button)\n        if (form_tree.child === 0) {\n            for (i = 0; i < iLength; i++) {\n\n                //if no title set, use value of primary key as title\n                entries[i].full_title = (entries[i].full_title === '') ? entries[i].entry_key : entries[i].full_title;\n\n                HTML += '<li data-icon=\"false\">';\n                HTML += '<a href=\"entry-values.html?form=' + form_id + '&entry_key=' + entries[i].entry_key + '&direction=' + EC.Const.FORWARD + '\">';\n\n                //show full entries title removing last comma if any\n                HTML += entries[i].full_title.replace(/,\\s*$/, '');\n                HTML += '</a>';\n                HTML += '</li>';\n            }//for\n\n        }\n        else {\n\n            //split listview to show a button on the right to navigate down the form tree\n            // entries and a button to list the inputs for the entry\n            for (i = 0,\n                     iLength = entries.length; i < iLength; i++) {\n\n                //if no title set, use value of primary key as title\n                entries[i].full_title = (entries[i].full_title === '') ? entries[i].entry_key : entries[i].full_title;\n\n                //render entry as a button to view the entry (direction =  VIEW)\n                HTML += '<li data-icon=\"ep-next-page\">';\n                HTML += '<a href=\"entry-values.html?form=' + form_id;\n                HTML += '&entry_key=' + entries[i].entry_key;\n                HTML += '&direction=' + EC.Const.VIEW;\n                HTML += '\">';\n\n                //show full entries title removing last comma if any\n                HTML += entries[i].full_title.replace(/,\\s*$/, '');\n                HTML += '</a>';\n\n                //render button to go to children entries for that entry (direction = FORWARD)\n                HTML += '<a href=\"entries-list.html?form=' + form_tree.child;\n                HTML += '&name=' + form_tree.cname;\n                HTML += '&entry_key=' + entries[i].entry_key;\n                HTML += '&direction=' + EC.Const.FORWARD;\n                HTML += '&children=' + entries[i].children;\n                HTML += '\">';\n                HTML += '</a>';\n                // here we need to display the total of direct children for this entry\n                HTML += '<span class=\"ui-li-count\">' + entries[i].children;\n                HTML += '</span>';\n                HTML += '</li>';\n            }//for\n        }\n\n        return HTML;\n\n    };\n\n    module.renderList = function (the_entries) {\n\n        //build HTML\n        var HTML = '';\n        var back_href = '';\n        var back_children;\n        var i;\n        var iLength;\n        var entries = the_entries;\n        var dom_list = $('div#entries-list ul');\n        var empty_entries_list = $('div#entries div#entries-list div#empty-entries-list');\n        var empty_entries_list_form_name = $('div#entries div#entries-list div#empty-entries-list p span.form-name');\n        var page = $('#entries');\n        var header = $('div#entries div[data-role=\"header\"] div[data-href=\"entries-nav-btn\"] span.project-name');\n        var trail;\n        var inactive_label = '';\n        var dom_back_home_btn = $('div#entries a.back-home');\n        var action_bar_btn = $('div#entries div#entries-actionbar');\n        var active_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.active-tab span');\n        var inactive_tab = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n        var inactive_tab_hash = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab i');\n        var inactive_tab_label = $('div#entries div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab span');\n        var form_id;\n        var form_name;\n        var form_tree;\n        var project_name;\n        var load_more_btn = $('div#entries div#entries-list div.more-items-btn');\n        var load_more_spinner = $('div#entries div#entries-list div.more-items-btn-spinner');\n        var self = this;\n        var offset;\n        var limit;\n        var current_entries_total;\n        var totals;\n\n        wls = window.localStorage;\n        form_id = parseInt(wls.form_id, 10);\n        form_name = wls.form_name;\n        form_tree = JSON.parse(wls.form_tree);\n        project_name = wls.project_name;\n        offset = parseInt(wls.QUERY_ENTRIES_OFFSET, 10);\n        limit = parseInt(wls.QUERY_LIMIT, 10);\n\n        //reset entries offset if we are not using the cached entries\n        if (!window.localStorage.cached_entries_list) {\n            wls.QUERY_ENTRIES_OFFSET = 0;\n        }\n\n        //stop background watch position if any\n        window.navigator.geolocation.clearWatch(window.localStorage.watch_position);\n        window.localStorage.form_has_location = 0;\n\n        //request pagination when going back\n        totals = JSON.parse(wls.entries_totals);\n        current_entries_total = totals[totals.length - 1].entries_total;\n        //request pagination when going back\n        back_children = (totals.length > 1) ? totals[totals.length - 2].entries_total : 0;\n\n        //bind action bar buttons for this page\n        _bindActionBarBtns();\n\n        //show action bar buttons\n        action_bar_btn.show();\n\n        //show 'Show more' button if we have more entries to display\n        if (current_entries_total > (offset + limit)) {\n            load_more_btn.removeClass('hidden');\n        }\n        else {\n            load_more_btn.addClass('hidden');\n        }\n\n        //bind 'show more button'\n        load_more_btn.off().on('vclick', function (e) {\n\n            /**\n             * Embedded spinning loader works only on iOS, do not know why\n             */\n\n            if (window.device.platform === EC.Const.IOS) {\n                //hide button and show loader\n                $(this).addClass('hidden');\n                load_more_spinner.removeClass('hidden');\n            }\n\n            if (window.device.platform === EC.Const.ANDROID) {\n                EC.Notification.showProgressDialog();\n            }\n\n            //increase offset\n            offset = parseInt(wls.QUERY_ENTRIES_OFFSET, 10);\n            offset += parseInt(wls.QUERY_LIMIT, 10);\n            wls.QUERY_ENTRIES_OFFSET = offset;\n\n            //get more entries\n            self.getMoreEntries(offset);\n\n        });\n\n        //empty current list\n        dom_list.empty();\n\n        //if we have entries, list them\n        if (entries.length > 0) {\n\n            //hide empty list message (no entries found)\n            empty_entries_list.addClass('hidden');\n            dom_list.removeClass('hidden');\n\n            //build list of entries markup\n            HTML = _buildList(form_id, form_tree, entries);\n\n        }\n        else {\n\n            //no entries found\n            //hide empty list message (no entries found)\n            empty_entries_list.removeClass('hidden');\n            dom_list.addClass('hidden');\n\n            empty_entries_list_form_name.text(form_name);\n\n        }\n\n        //add project name to header\n        header.text(project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n\n        //check if this form is at the top of the tree so the back button will go back to\n        // the form page (#forms)\n        if (form_tree.parent === 0) {\n\n            inactive_label = 'Forms';\n\n            //build url\n            back_href = 'forms.html?project=' + wls.project_id + '&name=' + wls.project_name;\n\n        }\n        else {\n\n            //this is a nested form, so we need to go back to the previous form in the stack\n            // based on what entry was selected\n            trail = JSON.parse(wls.breadcrumbs);\n\n            //breadcrumb label will indicate form and last element of the breadcrumb trail\n            //todo we remove the entry key from being displayed (as 99% of the time is autogenerated and not human readable)\n            //tofdo we should cjeck for auto gen key and display the entry in the navigation only when the ky is entered by the user\n            //inactive_label = form_tree.pname + ': ' + trail[trail.length - 1];\n            inactive_label = form_tree.pname;\n\n            //back button will have parent form and parent entry key (which is the next to\n            // last element in the breadcrumb trail)\n            //and number of children (parent entries when going back) for pagination\n            back_href += 'entries-list.html?form=' + form_tree.parent;\n            back_href += '&name=' + form_tree.pname;\n            back_href += '&entry_key=' + trail[trail.length - 2];\n            back_href += '&direction=' + EC.Const.BACKWARD;\n            back_href += '&children=' + back_children;\n        }\n\n        //update active tab name with the current active form\n        active_tab.text(form_name);\n\n        //update inactive tab\n        inactive_tab_label.text(inactive_label);\n        inactive_tab_hash.attr('data-href', back_href);\n\n        if (entries.length > 0) {\n            dom_list.append(HTML);\n            dom_list.listview('refresh');\n        }\n\n        //add form name to localStorage\n        wls.form_name = form_name;\n        wls.form_id = form_id;\n\n        //remove navigation objects\n        wls.removeItem('inputs_values');\n        wls.removeItem('inputs_trail');\n        wls.removeItem('current_position');\n        wls.removeItem('back_edit_nav_url');\n\n        //reset 'editing mode' flags\n        wls.removeItem('edit_mode');\n        wls.removeItem('edit_position');\n        wls.removeItem('edit_type');\n        wls.removeItem('edit_id');\n\n        //handle tap on list item: cache Y position from top of screen, to silently\n        // scroll to position when navigating back from single entry values\n        $('div#entries-list ul li').off().on('vclick', function () {\n            console.log($(this).position().top);\n            //window.localStorage.previous_tapped_entry_Y = $(this).offset().top;\n            window.localStorage.previous_tapped_entry_Y = $(this).position().top;\n\n        });\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        //cache current entries\n        window.localStorage.cached_entries_list = JSON.stringify(entries);\n\n        EC.Notification.hideProgressDialog();\n    };\n\n    module.getMoreEntries = function (the_offset) {\n\n        var load_more_parameters = JSON.parse(wls.load_more_parameters);\n        var form_id = load_more_parameters.form_id;\n        var parent_path = load_more_parameters.parent_path;\n        var offset = the_offset;\n\n        EC.Select.getEntries(form_id, parent_path, offset);\n    };\n\n    module.appendMoreEntries = function (the_entries) {\n\n        var dom_list = $('div#entries-list ul');\n        var entries = the_entries;\n        var form_id = parseInt(wls.form_id, 10);\n        var form_name = wls.form_name;\n        var form_tree = JSON.parse(wls.form_tree);\n        var project_name = wls.project_name;\n        var load_more_btn = $('div#entries-list .more-items-btn');\n        var HTML = '';\n        var offset = parseInt(wls.QUERY_ENTRIES_OFFSET, 10);\n        var limit = parseInt(wls.QUERY_LIMIT, 10);\n        var totals;\n        var current_entries_total;\n        var cached_entries;\n\n        //get total of entries\n        totals = JSON.parse(wls.entries_totals);\n        current_entries_total = totals[totals.length - 1].entries_total;\n\n        HTML = _buildList(form_id, form_tree, entries);\n\n        dom_list.append(HTML);\n        dom_list.listview('refresh');\n        dom_list.trigger('updatelayout');\n\n        //handle tap on list item: cache Y position from top of screen, to silently\n        // scroll to position when navigating back from single entry values\n        $('div#entries-list ul li').off().on('vclick', function () {\n            console.log($(this).position().top);\n            //window.localStorage.previous_tapped_entry_Y = $(this).offset().top;\n            window.localStorage.previous_tapped_entry_Y = $(this).position().top;\n\n        });\n\n        //show button and hide loader\n        if (window.device.platform === EC.Const.IOS) {\n            $('div#entries div#entries-list div.more-items-btn-spinner').addClass('hidden');\n        }\n        if (window.device.platform === EC.Const.ANDROID) {\n            EC.Notification.hideProgressDialog();\n        }\n\n        if (current_entries_total > (offset + limit)) {\n            $('div#entries div#entries-list div.more-items-btn').removeClass('hidden');\n        }\n\n        //cache new entries\n        cached_entries = JSON.parse(window.localStorage.cached_entries_list);\n        window.localStorage.cached_entries_list = JSON.stringify(cached_entries.concat(entries));\n\n    };\n\n    return module;\n\n}(EC.Entries));\n","/* global LocalFileSystem */\nvar EC = EC || {};\nEC.EmailBackup = EC.EmailBackup || {};\nEC.EmailBackup = (function () {\n    'use strict';\n\n    var project_name;\n    var project_id;\n    var mailto;\n    var backup_path;\n    var filename;\n\n    var _getBackupPath = function (the_project_name) {\n\n        filename = the_project_name + '.txt';\n\n        //todo this needs to be fixed\n        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, gotFSfail);\n\n        function gotFS(the_fileSystem) {\n\n            backup_path = the_fileSystem.root.nativeURL + filename;\n\n            console.log('Backup path: ' + backup_path);\n\n            //remove file:// from path for iOS\n            if (window.device.platform === EC.Const.IOS) {\n                backup_path = backup_path.slice(7);\n            }\n\n        }\n\n        function gotFSfail(the_error) {\n            console.log(the_error);\n        }\n\n    };\n\n    var renderSendEmailView = function () {\n\n        var mailto_holder = $('div#email-backup div#email-address-wrapper input#email-address');\n        var send_email_btn = $('div#email-backup div[data-role=\"header\"] div#send-email');\n        var back_btn = $('div#email-backup div[data-role=\"header\"] div[data-href=\"back-btn\"]');\n        var subject;\n        var body;\n        var back_btn_href;\n\n        project_name = window.localStorage.project_name;\n        project_id = window.localStorage.project_id;\n        back_btn_href = 'forms.html?project=' + project_id + '&name=' + project_name;\n\n        back_btn.off().one('vclick', function () {\n            //go back to previuos page in history\n            if (window.localStorage.current_view_url) {\n                EC.Routing.changePage(window.localStorage.current_view_url);\n            }\n            else {\n                EC.Routing.changePage(EC.Const.INDEX_VIEW);\n            }\n        });\n\n        //Set header\n        $('div#email-backup div[data-role=\"navbar\"] ul li.title-tab span#email-backup-label span.project-name-inline').text(project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n\n        subject = 'Backup for ' + project_name;\n        body = 'The backup for project ' + project_name + ' is attached';\n\n        //set backup full path variable (async)\n        _getBackupPath(project_name);\n\n        function sendingStatus(res) {\n\n            console.log('Email result: ' + res);\n\n        }\n\n\n        send_email_btn.off().on('vclick', function (e) {\n\n            if (!EC.Utils.hasConnection()) {\n                EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('no_internet'));\n                return;\n            }\n\n            //get email address from input\n            mailto = mailto_holder.val();\n\n            //validate email address\n            if (mailto === '' || !EC.Utils.isValidEmail(mailto)) {\n\n                EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('invalid_email'));\n                return;\n            }\n\n            //check if a mail client is setup on the device\n            window.plugin.email.isServiceAvailable(function (is_available) {\n\n                //no mail client set up yet? Warn user\n                if (!is_available) {\n                    EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('invalid_email_client'));\n                    return;\n                }\n\n                //open mail UI\n                window.plugin.email.open({\n                    to: [mailto], // email addresses for TO field\n                    cc: [], // email addresses for CC field\n                    bcc: [], // email addresses for BCC field\n                    attachments: [backup_path], //\n                    subject: subject, // subject of the email\n                    body: body, // email body (could be HTML code, in this case set isHtml to true)\n                    isHtml: true// indicates if the body is HTML or plain text\n                }, function () {\n                    console.log('email view dismissed');\n                }, this);\n\n            });\n\n        });\n\n    };\n\n    return {\n        renderSendEmailView: renderSendEmailView\n    };\n\n}());\n","/* global Papa*/\nvar EC = EC || {};\nEC.Export = EC.Export || {};\nEC.Export.saveProjectDataToCSV = function (the_project_id, the_forms) {\n    'use strict';\n\n    var deferred = new $.Deferred();\n    var project_id = project_id;\n    var forms = the_forms;\n    var parsed_forms_json;\n\n    function _parseFormAllEntries(the_form, has_parent_flag) {\n\n        var form = the_form;\n        var iLength = form.total_entries;\n        var i;\n        var json = [];\n        var single_entry_raw;\n        var has_parent = has_parent_flag;\n\n\n        //per each entry belonging to the current form, generate a json as key:value pair\n        for (i = 0; i < iLength; i++) {\n            single_entry_raw = form.data_rows.splice(0, form.total_inputs);\n            json.push(_parseSingleEntry(single_entry_raw, has_parent));\n        }\n        return json;\n    }\n\n    //each entry has got a number of inputs to define a single entry. Split each entry as key-value pairs\n    function _parseSingleEntry(the_single_raw_entry, has_parent_flag) {\n\n        var i;\n        var single_entry_raw = the_single_raw_entry;\n        var iLength = single_entry_raw.length;\n        var single_entry_parsed = {};\n        var has_parent = has_parent_flag;\n        var parent_key_ref;\n        var parent_key_ref_value;\n        var temp;\n        var location_value;\n        var coords = {};\n\n        //for child entries, we need the value of the parent key, so we can link a child form csv to its parent on the server\n        if (has_parent) {\n            parent_key_ref = EC.Utils.getFormParentPrimaryKeyRef(single_entry_raw[0].form_id);\n            temp = single_entry_raw[0].parent.split('|');\n            parent_key_ref_value = temp[temp.length - 1];\n            single_entry_parsed[parent_key_ref] = parent_key_ref_value;\n        }\n\n        //loop each value for a single entry and generate an object listing all ref:value as the key:value pairs\n        for (i = 0; i < iLength; i++) {\n\n            //console.log('raw entry ****************************');\n            //console.log(single_entry_raw[i]);\n\n            //replace '_skipp3ed' with empty values\n            if (single_entry_raw[i].value === EC.Const.SKIPPED) {\n                single_entry_raw[i].value = '';\n            }\n\n\n            //split location value to components (as)expected on server\n            if (single_entry_raw[i].type === EC.Const.LOCATION) {\n\n                //remove formatting\n                location_value = single_entry_raw[i].value.replace('\\n', '').replace('\\r', '');\n\n                //split the location values to different parts (as expected on Epicollect+ server)\n                if (location_value === '') {\n                    //fill with empty values\n                    single_entry_parsed[single_entry_raw[i].ref + '_lat'] = '';\n                    single_entry_parsed[single_entry_raw[i].ref + '_lon'] = '';\n                    single_entry_parsed[single_entry_raw[i].ref + '_acc'] = '';\n                    single_entry_parsed[single_entry_raw[i].ref + '_alt'] = '';\n                    single_entry_parsed[single_entry_raw[i].ref + '_bearing'] = '';\n                }\n                else {\n                    //fill with components values\n                    coords = EC.Utils.parseLocationString(single_entry_raw[i].value);\n                    single_entry_parsed[single_entry_raw[i].ref + '_lat'] = coords.latitude;\n                    single_entry_parsed[single_entry_raw[i].ref + '_lon'] = coords.longitude;\n                    single_entry_parsed[single_entry_raw[i].ref + '_acc'] = coords.accuracy;\n                    single_entry_parsed[single_entry_raw[i].ref + '_alt'] = coords.altitude;\n                    single_entry_parsed[single_entry_raw[i].ref + '_bearing'] = coords.heading;\n                }\n            }\n            else {\n                single_entry_parsed[single_entry_raw[i].ref] = single_entry_raw[i].value;\n            }\n        }\n        // console.log('Entry ' + i + ' content ********************************');\n        // console.log(single_entry_parsed);\n        return single_entry_parsed;\n    }\n\n    //get data rows for all the forms for this project\n    $.when(EC.Select.getAllProjectEntries(forms, project_id)).then(function (data) {\n        console.log(data);\n\n        var i;\n        var iLength = data.length;\n\n\n        parsed_forms_json = [];\n\n        //per each form parse all the entries, also set form mane and list headers\n        for (i = 0; i < iLength; i++) {\n\n            parsed_forms_json[i] = {\n                name: data[i].form_name,\n                entries: []\n            };\n            //parse entries to get a proper object for the csv conversion. We pass in a flag to determine if the form is the main parent or not\n            parsed_forms_json[i].entries = _parseFormAllEntries(data[i], (i !== 0));\n        }\n        console.log('parsed_forms_json **********************************************');\n        console.log(parsed_forms_json);\n\n        //write csv files, one per each form\n        $.when(EC.File.writeProjectDataAsCSV(window.localStorage.project_name, parsed_forms_json)).then(function (response) {\n            deferred.resolve(response);\n        });\n    });\n\n    return deferred.promise();\n};\n\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.Forms = EC.Forms || {};\nEC.Forms = ( function (module) {\n    \"use strict\";\n\n    module.getList = function (the_hash_to_parse) {\n\n        //get the requested form parsing the href\n        var hash = the_hash_to_parse.split('?');\n        var params = hash[1].split('&');\n        var project_id = params[0].replace(\"project=\", \"\");\n        var project_name = params[1].replace(\"name=\", \"\");\n        var wls = window.localStorage;\n        var current_view_url_parts;\n\n        //cache current page url for navigation purposes\n        current_view_url_parts = the_hash_to_parse.split(\"/\");\n        wls.current_view_url = current_view_url_parts[current_view_url_parts.length - 1];\n\n        //set project 'id' and 'name' in localStorage for navigation\n        wls.project_id = project_id;\n        wls.project_name = project_name;\n\n        //check if this project has a backup file saved and set result in localStorage (device only)\n        if (!EC.Utils.isChrome()) {\n            $.when(EC.File.hasBackup(project_name)).then(function () {\n                wls.has_backup = 1;\n            }, function () {\n                wls.removeItem(\"has_backup\");\n            });\n        }\n\n        //set allow_download_edits flag in LocalStorage\n        $.when(EC.Select.getAllowDownloadEdits(project_id)).then(function () {\n            wls.allow_download_edits = 1;\n        }, function () {\n            wls.allow_download_edits = 0;\n        });\n\n        //show forms list\n        $.when(EC.Select.getForms(project_id)).then(function (the_forms, the_btn_states) {\n\n            //reset offset for entries pagination\n            wls.QUERY_ENTRIES_OFFSET = 0;\n            wls.QUERY_CHILD_ENTRIES_OFFSET = 0;\n            wls.QUERY_PARENT_ENTRIES_OFFSET = 0;\n\n            //reset other flags for pagination\n            wls.removeItem(\"last_parent\");\n            wls.removeItem(\"entry_key\");\n            wls.removeItem(\"form_has_jumps\");\n            wls.removeItem(\"load_more_parameters\");\n            wls.removeItem(\"current_position\");\n\n            //remove child form navigation flag\n            wls.removeItem(\"is_child_form_nav\");\n\n            //remove flag that disable store edit from an intermediate screen\n            wls.removeItem(\"has_new_jump_sequence\");\n\n            //reset navigation TODO: check this, experimental\n            wls.removeItem(\"back_nav_url\");\n\n            //TODO: to be tested:\n            //remove cached entries\n            wls.removeItem(\"cached_entries_list\");\n\n            wls.removeItem(\"previous_tapped_entry_Y\");\n\n\n            EC.Forms.renderList(the_forms, the_btn_states);\n        });\n\n    };\n\n    return module;\n}(EC.Forms));\n","var EC = EC || {};\nEC.Forms = EC.Forms || {};\nEC.Forms = (function (module) {\n    'use strict';\n\n    var _bindActionBarBtns = function () {\n\n        var home_btn = $('div#forms div[data-role=\"header\"] div[data-href=\"home\"]');\n        var nav_drawer_btn = $('div#forms div[data-role=\"header\"] div[data-href=\"form-nav-btn\"]');\n        var upload_btn = $('div#forms  div[data-role=\"header\"] div.ui-btn-right[data-href=\"upload\"]');\n        var ctx_menu_btn = $('div#forms div[data-role=\"header\"] div.ui-btn-right[data-href=\"project-options\"]');\n        var inactive_tab = $('div#forms div[data-role=\"header\"] div[data-role=\"navbar\"] ul li.inactive-tab');\n        var settings_btn = $('div#forms div[data-role=\"header\"] div#form-nav-drawer ul li div[data-href=\"settings\"]');\n\n        //bind left sidebar open/close\n        nav_drawer_btn.off().on('vclick', function (e) {\n\n            var panel = $('#form-nav-drawer');\n\n            panel.panel('open');\n\n            home_btn.off().one('vclick', function (e) {\n                //reload index page TODO: try a better way: if the page is in the dom do not reload: History API\n                window.localStorage.back_nav_url = '#refresh';\n                EC.Routing.changePage(EC.Const.INDEX_VIEW, '../');\n            });\n\n            // //bind add project button (action bar)\n            settings_btn.off().one('vclick', function (e) {\n                EC.Routing.changePage(EC.Const.SETTINGS_VIEW);\n            });\n\n            //Closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                panel.panel('close');\n            });\n\n        });\n\n        upload_btn.off().one('vclick', function (e) {\n            EC.Routing.changePage(EC.Const.UPLOAD_VIEW);\n        });\n\n        ctx_menu_btn.off().on('vclick', function () {\n            $('.project-options-panel').panel('open');\n\n            //Closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                $('.project-options-panel').panel('close');\n            });\n        });\n\n        inactive_tab.off().one('vclick', function (e) {\n\n            //reload index page TODO: try a better way: if the page is in the dom do not reload: History API\n            window.localStorage.back_nav_url = '#refresh';\n            EC.Routing.changePage(EC.Const.INDEX_VIEW, '../');\n        });\n    };\n\n    module.renderList = function (the_forms, the_button_states) {\n\n        //build HTML\n        var HTML = '';\n        var i;\n        var iLength;\n        var forms = the_forms;\n        var dom_list = $('div#forms-list ul');\n        var page = $('#forms');\n        var header = $('div#forms div[data-role=\"header\"] div[data-href=\"form-nav-btn\"] span.project-name');\n        var navbar_label = $('a.ui-btn-active span.ui-btn-inner');\n        var email_backup_btn = $('div#forms div#project-options ul li#email-backup');\n        var download_remote_data_btn = $('div#forms div#project-options ul li#download-remote-data');\n        var unsync_all_entries_btn = $('div#forms div#project-options ul li#unsync-all-data');\n        var delete_project_btn = $('div#forms div#project-options ul li#delete-project');\n        var delete_all_entries_btn = $('div#forms div#project-options ul li#delete-all-entries');\n        var delete_synced_entries_btn = $('div#forms div#project-options ul li#delete-synced-entries');\n        var delete_media_files_btn = $('div#forms div#project-options ul li#delete-media-files');\n        var backup_project_data_btn = $('div#forms div#project-options ul li#backup-project-data');\n        var restore_from_backup_btn = $('div#forms div#project-options ul li#restore-data-from-backup');\n        var export_data_to_csv_btn = $('div#forms div#project-options ul li#export-project-data-to-csv');\n        var btn_states = the_button_states;\n        var has_backup = window.localStorage.has_backup;\n        var project_name = window.localStorage.project_name;\n\n        //bind action bar buttons for this page\n        _bindActionBarBtns();\n\n        dom_list.empty();\n\n        for (i = 0, iLength = forms.length; i < iLength; i++) {\n\n            //if no entries for a form yet, disable the entry (aside from the top one) and hide icon\n            if (i > 0 && parseInt(forms[i].entries, 10) === 0) {\n\n                HTML += '<li data-icon=\"false\">';\n                HTML += '<a href=\"entries-list.html?form=' + forms[i]._id + '&name=' + forms[i].name + '&entry_key=&direction=forward\" class=\"ui-disabled\">' + forms[i].name;\n                HTML += '<p>' + forms[i].total_inputs + EC.Localise.getTranslation('questions') + '</p>';\n                HTML += '</a>';\n                HTML += '</li>';\n\n            } else {\n\n                //render an active button\n                HTML += '<li data-icon=\"ep-next-page\">';\n                HTML += '<a href=\"entries-list.html?form=' + forms[i]._id + '&name=' + forms[i].name + '&entry_key=&direction=forward&children=' + forms[i].entries + '\">' + forms[i].name;\n                HTML += '<span class=\"ui-li-count\">' + forms[i].entries;\n                HTML += '</span>';\n                HTML += '<p>' + forms[i].total_inputs + EC.Localise.getTranslation('questions') + '</p>';\n                HTML += '</a>';\n                HTML += '</li>';\n            }\n        }\n\n        //reset title in navbar\n        navbar_label.text(EC.Const.FORMS);\n\n        //add project name to header\n        header.text(project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n\n        dom_list.append(HTML);\n\n        //page.page();\n\n        dom_list.listview('refresh');\n\n        //make this the current page\n        //$.mobile.changePage(page);\n\n        //init global forms object\n        EC.Utils.setForms(forms);\n\n        //remove form details from localStorage if any\n        window.localStorage.form_name = '';\n        window.localStorage.form_id = '';\n        window.localStorage.removeItem('primary_keys');\n        window.localStorage.removeItem('parent_path');\n\n        email_backup_btn.off().on('vclick', function (e) {\n            EC.Routing.changePage(EC.Const.EMAIL_BACKUP_VIEW);\n        });\n\n        download_remote_data_btn.off().on('vclick', function (e) {\n            EC.Routing.changePage(EC.Const.DOWNLOAD_VIEW);\n        });\n\n        //attach event to context menu to button unsync all synced entries. Toggle button state accordingly\n        if (btn_states.unsync_all_data === 0) {\n            unsync_all_entries_btn.addClass('ui-disabled');\n        } else {\n            unsync_all_entries_btn.removeClass('ui-disabled');\n        }\n        unsync_all_entries_btn.off().on('vclick', function (e) {\n            EC.Notification.askConfirm(EC.Localise.getTranslation('unsync_all_data'), EC.Localise.getTranslation('unsync_all_data'), 'EC.Entries.unsyncAllEntries');\n        });\n\n        //handler to delete project\n        delete_project_btn.off().on('vclick', function (e) {\n            EC.Notification.askConfirm(EC.Localise.getTranslation('delete_project'), EC.Localise.getTranslation('delete_project_confirm'), 'EC.Project.deleteProject');\n        });\n\n        //handler to delete/save all entries (if any, otherwise show as disabled)\n        if (btn_states.delete_all_entries === 0) {\n            delete_all_entries_btn.addClass('ui-disabled');\n            export_data_to_csv_btn.addClass('ui-disabled');\n        } else {\n            delete_all_entries_btn.removeClass('ui-disabled');\n            export_data_to_csv_btn.removeClass('ui-disabled');\n        }\n        delete_all_entries_btn.off().on('vclick', function (e) {\n\n            EC.Notification.askConfirm(EC.Localise.getTranslation('delete_all_entries'), EC.Localise.getTranslation('delete_all_entries_confirm'), 'EC.Entries.deleteAllEntries');\n\n        });\n\n        export_data_to_csv_btn.off().on('vclick', function (e) {\n            EC.Notification.askConfirm(EC.Localise.getTranslation('export_all_entries_to_csv'), EC.Localise.getTranslation('export_all_entries_to_csv_confirm'), 'EC.Entries.exportAllEntriesToCSV');\n        });\n\n        //handler to delete all the media files for this project (if any, otherwise disable)\n        if (btn_states.delete_media_files === 0) {\n            delete_media_files_btn.addClass('ui-disabled');\n        } else {\n            delete_media_files_btn.removeClass('ui-disabled');\n        }\n        delete_media_files_btn.off().on('vclick', function (e) {\n\n            EC.Notification.askConfirm(EC.Localise.getTranslation('delete_all_media'), EC.Localise.getTranslation('delete_all_media_confirm'), 'EC.Entries.deleteAllMedia');\n\n        });\n\n        //handler to delete all the synced entries for this project (if any, otherwise disable button)\n        if (btn_states.delete_synced_entries === 0) {\n            delete_synced_entries_btn.addClass('ui-disabled');\n        } else {\n            delete_synced_entries_btn.removeClass('ui-disabled');\n        }\n        delete_synced_entries_btn.off().on('vclick', function (e) {\n\n            EC.Notification.askConfirm(EC.Localise.getTranslation('delete_all_synced'), EC.Localise.getTranslation('delete_all_synced_confirm'), 'EC.Entries.deleteAllSynced');\n\n        });\n\n        //if there are any entries to backup, enable button\n        if (btn_states.delete_all_entries === 0) {\n            backup_project_data_btn.addClass('ui-disabled');\n        } else {\n            backup_project_data_btn.removeClass('ui-disabled');\n        }\n\n        backup_project_data_btn.off().on('vclick', function (e) {\n            EC.Notification.askConfirm(EC.Localise.getTranslation('backup_data'), EC.Localise.getTranslation('backup_data_confirm'), 'EC.Project.backupCurrentProject');\n        });\n\n        //enable -restore from backup- and -mail backup- buttons only if a backup file exists\n        if (has_backup) {\n            restore_from_backup_btn.removeClass('ui-disabled');\n            email_backup_btn.removeClass('ui-disabled');\n        } else {\n            restore_from_backup_btn.addClass('ui-disabled');\n            email_backup_btn.addClass('ui-disabled');\n        }\n\n        restore_from_backup_btn.off().on('vclick', function (e) {\n            EC.Notification.askConfirm(EC.Localise.getTranslation('restore_data'), EC.Localise.getTranslation('restore_data_confirm'), 'EC.Project.restoreFromBackup');\n        });\n\n        //hide restore backup buttons on IOS as redundant (backups on device are managed via iTunes)\n        //we still mail backups in some situations where it is not possible to upload data via wifi or mobile network\n        if (window.device) {\n            if (window.device.platform === EC.Const.IOS) {\n\n                restore_from_backup_btn.addClass('hidden');\n                //email_backup_btn.addClass('hidden');\n                //backup_project_data_btn.addClass('hidden');\n            }\n        }\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        EC.Notification.hideProgressDialog();\n\n    };\n\n    return module;\n\n}(EC.Forms));\n","var EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = (function (module) {\n    'use strict';\n\n    var input;\n\n    module.getInputs = function () {\n        return this.inputs;\n    };\n\n    module.setInputs = function (the_inputs, the_has_jumps_flag, the_has_location_flag) {\n\n        this.inputs = the_inputs;\n        //set flag to indicate if this form has or not any jumps\n        window.localStorage.form_has_jumps = (the_has_jumps_flag) ? 1 : 0;\n        window.localStorage.form_has_location = (the_has_location_flag) ? 1 : 0;\n    };\n\n    module.getPrimaryKeyRefPosition = function () {\n\n        var i;\n        var iLenght = this.inputs.length;\n\n        //look for the position of the primary key\n        for (i = 0; i < iLenght; i++) {\n            if (parseInt(this.inputs[i].is_primary_key, 10) === 1) {\n                return this.inputs[i].position;\n            }\n        }\n    };\n\n    module.getJumpDestinationPosition = function (the_ref) {\n\n        var i;\n        var iLenght = this.inputs.length;\n        var ref = the_ref;\n\n        //look for the position of the specified ref\n        for (i = 0; i < iLenght; i++) {\n            if (ref === this.inputs[i].ref) {\n                return this.inputs[i].position;\n            }\n        }\n    };\n\n    module.getInputAt = function (the_position) {\n        return this.inputs[the_position - 1];\n    };\n\n    module.updateFormCompletion = function (the_position, the_length) {\n\n        var ratio = Math.ceil(100 * (the_position - 1) / the_length);\n        var percentage_bar = $('div.ui-grid-b.input-nav-tabs div.input-progress-bar div.progress.progress_tiny');\n        var percentage_txt = $('div.ui-grid-b.input-nav-tabs div.input-progress-bar span.form-completion-percent');\n\n        percentage_txt.text(ratio + '%');\n        percentage_bar.css('width', ratio + '%');\n    };\n\n    return module;\n\n}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.backToBranchEntryValuesList = function() {\n\n\t\t\t//get hash from localStorage to navigate back to branch entry values list\n\t\t\tvar back_url = window.localStorage.branch_entry_values_url;\n\n\t\t\t//clear branch data cache\n\t\t\twindow.localStorage.removeItem(\"branch_current_position\");\n\t\t\twindow.localStorage.removeItem(\"branch_form_has_jumps\");\n\t\t\twindow.localStorage.removeItem(\"branch_form_name\");\n\t\t\twindow.localStorage.removeItem(\"branch_inputs_total\");\n\t\t\twindow.localStorage.removeItem(\"branch_inputs_trail\");\n\t\t\twindow.localStorage.removeItem(\"branch_inputs_values\");\n\t\t\twindow.localStorage.removeItem(\"branch_form_id\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_hash\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_key_value\");\n\t\t\twindow.localStorage.removeItem(\"branch_edit_type\");\n\t\t\t\n\t\t\t//clear navigation url\n\t\t\twindow.localStorage.removeItem(\"branch_entry_values_url\");\n\n\t\t\t//get branch entry values\n\t\t\tEC.Routing.changePage(back_url);\n\t\t\t\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.backToEntriesList = function() {\n\n\t\t\tvar cached_branch_entry_keys;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar has_cached = false;\n\t\t\tvar page = window.localStorage.back_nav_url;\n\n\t\t\t/*delete any cached branch entry not stored (main form not saved) BEFORE redirecting to index page\n\t\t\t * (if any)\n\t\t\t */\n\t\t\ttry {\n\n\t\t\t\tcached_branch_entry_keys = JSON.parse(window.localStorage.cached_branch_entry_keys);\n\n\t\t\t\t//if there is the cached_branch_entries, tirgger deletion if there ia at least 1 element\n\t\t\t\tiLength = cached_branch_entry_keys.length;\n\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\tif (cached_branch_entry_keys[i].primary_keys.length > 0) {\n\n\t\t\t\t\t\thas_cached = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (has_cached) {\n\n\t\t\t\t\t//remove cached branch entries keys\n\t\t\t\t\twindow.localStorage.removeItem(\"cached_branch_entry_keys\");\n\n\t\t\t\t\t//delete any cached branch entry\n\t\t\t\t\tEC.Delete.deleteCachedBranchEntries();\n\t\t\t\t} else {\n\n\t\t\t\t\t//no primary keys cached, go straight back to index page\n\n\t\t\t\t\t//remove breadcrumb for navigation\n\n\t\t\t\t\tEC.Routing.changePage(page);\n\t\t\t\t}\n\n\t\t\t} catch(error) {\n\n\t\t\t\t//no object cached, go straight back to index page\n\t\t\t\tEC.Routing.changePage(page);\n\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.backToEntryValuesList = function() {\n\n\t\t\tvar cached_branch_entry_keys;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar has_cached = false;\n\t\t\tvar page = window.localStorage.back_edit_nav_url;\n\t\t\tvar key_position = EC.Inputs.getPrimaryKeyRefPosition();\n\t\t\tvar breadcrumb_trail = JSON.parse(window.localStorage.getItem(\"breadcrumbs\"));\n\t\t\tvar parent_key = breadcrumb_trail[breadcrumb_trail.length - 1];\n\t\t\t//get value of primary key for this form\n\t\t\tvar key_value = EC.Inputs.getCachedInputValue(key_position).value;\n\n\t\t\t//save full breadcrumbs as path to parent node (node tree representation using adjacent list)\n\t\t\tvar parent_path = (breadcrumb_trail[0] === \"\") ? breadcrumb_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR).substring(1) : breadcrumb_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n\n\t\t\t//if it is a nested form, keep track of its parent and save it in localStorage\n\t\t\tif (key_value !== parent_path) {\n\n\t\t\t\tvar parent_path_array = parent_path.split(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n\t\t\t\tparent_path_array.pop();\n\t\t\t\twindow.localStorage.parent_path = parent_path_array.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n\t\t\t}\n\n\t\t\t/*delete any cached branch entry not stored (main form not saved) BEFORE redirecting to index page\n\t\t\t * (if any)\n\t\t\t */\n\t\t\ttry {\n\n\t\t\t\tcached_branch_entry_keys = JSON.parse(window.localStorage.cached_branch_entry_keys);\n\n\t\t\t\t//if there is the cached_branch_entries, tirgger deletion if there ia at least 1 element\n\t\t\t\tiLength = cached_branch_entry_keys.length;\n\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\tif (cached_branch_entry_keys[i].primary_keys.length > 0) {\n\n\t\t\t\t\t\thas_cached = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (has_cached) {\n\n\t\t\t\t\t//remove cached branch entries keys\n\t\t\t\t\twindow.localStorage.removeItem(\"cached_branch_entry_keys\");\n\n\t\t\t\t\t//delete any cached branch entry\n\t\t\t\t\tEC.Delete.deleteCachedBranchEntries();\n\t\t\t\t} else {\n\n\t\t\t\t\t//no primary keys cached, go straight back to index page\n\n\t\t\t\t\t//remove breadcrumb for navigation\n\n\t\t\t\t\tEC.Routing.changePage(page);\n\t\t\t\t}\n\n\t\t\t} catch(error) {\n\n\t\t\t\t//no object cached, go straight back to index page\n\t\t\t\tEC.Routing.changePage(page);\n\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.bindBackBtn = function(is_data_saved) {\n\n\t\t\tvar back_btn = $(\"div[data-role='header'] div[data-href='back-btn']\");\n\t\t\tback_btn.off().one('vclick', function(e) {\n\n\t\t\t\tif (is_data_saved) {\n\n\t\t\t\t\t//if user was navigating from a child from, send it back to child from list\n\t\t\t\t\tif (window.localStorage.is_child_form_nav) {\n\n\t\t\t\t\t\t//TODO: back to child entries list\n\t\t\t\t\t\tEC.Inputs.backToEntriesList();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//data saved, go back to entries list\n\t\t\t\t\t\tEC.Inputs.backToEntriesList();\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//if user was navigating from a child from, send it back to child from list\n\t\t\t\t\tif (window.localStorage.is_child_form_nav) {\n\n\t\t\t\t\t\t//TODO: back to child entries list\n\t\t\t\t\t\tEC.Inputs.backToEntriesList();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//data not saved, ask user confirmation\n\t\t\t\t\t\tEC.Notification.askConfirm(EC.Localise.getTranslation(\"exit\"), EC.Localise.getTranslation(\"exit_confirm\"), \"EC.Inputs.backToEntriesList\");\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tvar self;\n\t\tvar current_input_position;\n\t\tvar is_jump_found;\n\n\t\t/*\n\t\t * check if a selected value triggers a jump. If multiple jumps are true, the first triggered jump will win, according to the jump checking sequence\n\t\t */\n\t\tfunction _checkJumps(the_jumps, the_current_value) {\n\n\t\t\tvar jumps = the_jumps;\n\t\t\tvar i;\n\t\t\tvar iLength = jumps.length;\n\t\t\tvar destination_position;\n\t\t\tvar destination;\n\t\t\tvar current_value = the_current_value;\n\t\t\tvar inputs_length = self.inputs.length;\n\n\t\t\t//if not any jump conditions match, set destination to the next input as default\n\t\t\tdestination_position = current_input_position + 1;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//check if we jump always\n\t\t\t\tif (jumps[i].jump_when === EC.Const.JUMP_ALWAYS) {\n\n\t\t\t\t\tis_jump_found = true;\n\t\t\t\t\tdestination = jumps[i].jump_to;\n\t\t\t\t\tdestination_position = (destination === EC.Const.END_OF_FORM) ? inputs_length : self.getJumpDestinationPosition(destination);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t//check if we jump whan a value is not selected (not selected values are set to null for consistency)\n\t\t\t\t//TODO: check this\n\t\t\t\tif (jumps[i].jump_when === EC.Const.JUMP_FIELD_IS_BLANK && (current_value === null || current_value === EC.Const.NO_OPTION_SELECTED)) {\n\n\t\t\t\t\tis_jump_found = true;\n\t\t\t\t\tdestination = jumps[i].jump_to;\n\t\t\t\t\tdestination_position = (destination === EC.Const.END_OF_FORM) ? inputs_length : self.getJumpDestinationPosition(destination);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t//jump when the value IS: the jump is performed by index so the index of the <option> tag is to be checked against the \"jump_value\"\n\t\t\t\tif (jumps[i].jump_when === EC.Const.JUMP_VALUE_IS && current_value.toString() === jumps[i].jump_value.toString()) {\n\n\t\t\t\t\tis_jump_found = true;\n\t\t\t\t\tdestination = jumps[i].jump_to;\n\t\t\t\t\tdestination_position = (destination === EC.Const.END_OF_FORM) ? inputs_length : self.getJumpDestinationPosition(destination);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (jumps[i].jump_when === EC.Const.JUMP_VALUE_IS_NOT && current_value.toString() !== jumps[i].jump_value.toString()) {\n\n\t\t\t\t\tis_jump_found = true;\n\t\t\t\t\tdestination = jumps[i].jump_to;\n\t\t\t\t\tdestination_position = (destination === EC.Const.END_OF_FORM) ? inputs_length : self.getJumpDestinationPosition(destination);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//override current_input_position with the position of the input set by the jump (-1 because we are adding +1 later)\n\t\t\tcurrent_input_position = destination_position - 1;\n\n\t\t\treturn destination;\n\n\t\t}\n\n\t\tmodule.gotoNextPage = function(evt, the_current_value) {\n\n\t\t\tvar current_input;\n\t\t\tvar current_value = the_current_value;\n\t\t\tvar next_input;\n\t\t\tvar next_page;\n\t\t\tvar options;\n\t\t\tvar obj;\n\t\t\tvar destination;\n\t\t\tvar jumps;\n\t\t\tvar is_genkey_hidden = EC.Utils.isFormGenKeyHidden(parseInt(window.localStorage.form_id, 10));\n\t\t\tvar next_value;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar is_checkbox = false;\n\n\t\t\tself = this;\n\t\t\tcurrent_input_position = parseInt(window.localStorage.current_position, 10);\n\t\t\t\n\t\t\t/* DROPDOWN/RADIO*/\n\t\t\t//get index from object in the case of a dropdown/radio (object is like {label:\"<label>\", index:\"<value>\"})\n\t\t\tif (current_value.hasOwnProperty(\"index\")) {\n\t\t\t\tcurrent_value = current_value.index;\n\t\t\t}\n            \n            /* CHECKBOX*/\n\t\t\t//if current value is an array, we have checkbox values to parse and check each of them against jumps\n\t\t\tif (Array.isArray(current_value)) {\n\t\t\t\tis_checkbox = true;\n\t\t\t}\n\n\t\t\t//check if we have reached the end of the form\n\t\t\tif (current_input_position === self.inputs.length) {\n\t\t\t\tnext_page = EC.Const.INPUT_VIEWS_DIR + EC.Const.SAVE_CONFIRM_VIEW;\n\t\t\t} else {\n\n\t\t\t\t//check if the current input triggers a jump\n\t\t\t\tcurrent_input = self.getInputAt(current_input_position);\n\n\t\t\t\tif (parseInt(current_input.has_jump, 10) === 1) {\n\n\t\t\t\t\t//get jumps\n\t\t\t\t\tjumps = EC.Utils.parseJumpString(current_input.jumps);\n\n\t\t\t\t\t//if we have an arry of values (checkboxes) check each of them if it triggers a jump\n\t\t\t\t\tif (is_checkbox) {\n\n\t\t\t\t\t\tis_jump_found = false;\n\t\t\t\t\t\tiLength = current_value.length;\n\n\t\t\t\t\t\t//loop each selected value until the first jump is found (or no more elements to check against)\n\t\t\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t\t\t\tdestination = _checkJumps(jumps, current_value[i].value);\n\t\t\t\t\t\t\tif (is_jump_found) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//single value\n\t\t\t\t\t\tdestination = _checkJumps(jumps, current_value);\n\n\t\t\t\t\t}\n\n\t\t\t\t}//if has jump\n\n\t\t\t\tif (destination === EC.Const.END_OF_FORM) {\n\t\t\t\t\tnext_page = EC.Const.INPUT_VIEWS_DIR + EC.Const.SAVE_CONFIRM_VIEW;\n\t\t\t\t} else {\n\t\t\t\t\tnext_input = self.getInputAt(current_input_position + 1);\n\n\t\t\t\t\t/*\n\t\t\t\t\t * if is_genkey_hidden = 1, the from creator decided to hide the auto genkey\n\t\t\t\t\t * The nasty form builder allows users to drag the primary key input fields to any position (lol)\n\t\t\t\t\t * therefore we have to test each input if it is a primary key field\n\t\t\t\t\t * We have to skip the next input (from the user) but add an entry to inputs_values, inputs_trail with the UUID\n\t\t\t\t\t *\n\t\t\t\t\t */\n\n\t\t\t\t\tif (is_genkey_hidden && next_input.is_primary_key === 1) {\n\n\t\t\t\t\t\t//add skipped genkey entry also in inputs_trail\n\t\t\t\t\t\tself.pushInputsTrail(next_input);\n\n\t\t\t\t\t\t//add an entry with UUID to inputs_values if we are entering a new entry\n\t\t\t\t\t\tnext_value = EC.Utils.getGenKey();\n\n\t\t\t\t\t\t//cache next value in localStorage\n\t\t\t\t\t\tself.setCachedInputValue(next_value, current_input_position + 1, next_input.type, next_input.is_primary_key);\n\n\t\t\t\t\t\t//go to the next  input AFTER the hidden primary key (if it exists, otherwise the save confirm page)\n\t\t\t\t\t\tnext_input = self.getInputAt(current_input_position + 2);\n\t\t\t\t\t\tif (!next_input) {\n\t\t\t\t\t\t\tnext_page = EC.Const.INPUT_VIEWS_DIR + EC.Const.SAVE_CONFIRM_VIEW;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//update current input position in session (store confirm screen will get a position = array.length)\n\t\t\t\t\t\twindow.localStorage.current_position = current_input_position + 2;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//update current input position in session (store confirm screen will get a position = array.length)\n\t\t\t\t\t\twindow.localStorage.current_position = current_input_position + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (next_input) {\n\t\t\t\t\t\tnext_page = EC.Const.INPUT_VIEWS_DIR + next_input.type + EC.Const.HTML_FILE_EXT;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tEC.Routing.changePage(next_page);\n\n\t\t\t//avoid events triggering multiple times\n\t\t\tevt.preventDefault();\n\n\t\t};\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.gotoPrevPage = function(evt) {\n\n\t\t\tvar self = this;\n\t\t\tvar current_position = parseInt(window.localStorage.current_position, 10);\n\t\t\tvar inputs_trail = JSON.parse(window.localStorage.inputs_trail);\n\t\t\tvar prev_page;\n\t\t\tvar prev_input_position = parseInt(inputs_trail[inputs_trail.length - 1].position, 10);\n\t\t\tvar prev_input = self.getInputAt(prev_input_position);\n\t\t\tvar is_genkey_hidden = EC.Utils.isFormGenKeyHidden(window.localStorage.form_id);\n\n\t\t\t//skip prev input (from user) if it is a hidden auto genkey\n\t\t\tif (is_genkey_hidden && prev_input.is_primary_key === 1) {\n\n\t\t\t\tprev_input_position = inputs_trail[inputs_trail.length - 2].position;\n\t\t\t\tprev_input = EC.Inputs.getInputAt(prev_input_position);\n\n\t\t\t\t//update current input position in session (store confirm screen will get a position = array.length)\n\t\t\t\twindow.localStorage.current_position = current_position - 2;\n\n\t\t\t\t//remove last  entry from inputs_trail\n\t\t\t\tself.popInputsTrail();\n\n\t\t\t} else {\n\n\t\t\t\t//update current input position in session\n\t\t\t\twindow.localStorage.current_position = prev_input_position;\n\n\t\t\t}\n\n\t\t\t//remove last  entry from inputs_trail\n\t\t\tself.popInputsTrail();\n\n\t\t\tprev_page = EC.Const.INPUT_VIEWS_DIR + prev_input.type + EC.Const.HTML_FILE_EXT;\n\n\t\t\tEC.Routing.changePage(prev_page);\n\n\t\t\t//avoid events triggering multiple times\n\t\t\tevt.preventDefault();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.onNextBtnTapped = function(e, the_input) {\n\n\t\t\tvar self = this;\n\t\t\tvar wls = window.localStorage;\n\t\t\tvar edit_id = wls.edit_id || \"\";\n\t\t\tvar edit_type = wls.edit_type || \"\";\n\t\t\tvar input = the_input;\n\t\t\tvar current_value = self.getCurrentValue(input.type);\n\t\t\tvar current_position = parseInt(wls.current_position, 10);\n\t\t\tvar cached_value = EC.Inputs.getCachedInputValue(current_position);\n\t\t\tvar validation = self.validateValue(input, current_value, current_position);\n\n\t\t\t//back to same screen if invalid value\n\t\t\tif (!validation.is_valid) {\n\t\t\t\t\n\t\t\t\t//warn user about the type of error. IMP: validation.message comes localised already\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), validation.message);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//When editing, if the value of a field triggering a jump was changed, disable intermediate \"Store Edit\" button from now on\n\t\t\tif (wls.edit_mode && parseInt(input.has_jump, 10) === 1) {\n\t\t\t\tif (!self.valuesMatch(cached_value, current_value, input.type)) {\n\t\t\t\t\t//set flag as from now until saving the form, store edit from an intermediate screen is disabled\n\t\t\t\t\twls.has_new_jump_sequence = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//cache current value in localStorage\n\t\t\tself.setCachedInputValue(current_value, current_position, input.type, input.is_primary_key);\n\n\t\t\tself.pushInputsTrail(input);\n\t\t\t\n\t\t\t//remove flag that helps to handle back button when user is just dismissing barcode scanner\n\t\t\twindow.localStorage.removeItem('is_dismissing_barcode');\n\n\t\t\tself.gotoNextPage(e, current_value);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.onPrevBtnTapped = function(e, the_input) {\n\n\t\t\tvar self = this;\n\t\t\tvar input = the_input;\n\t\t\tvar inputs_total = self.inputs.length;\n\t\t\tvar current_value = self.getCurrentValue(input.type);\n\t\t\tvar current_position = parseInt(window.localStorage.current_position, 10);\n\t\t\tvar cached_value = EC.Inputs.getCachedInputValue(current_position);\n\t\t\t\n\t\t\t//When editing, if the value of a field triggering a jump was changed, disable intermediate \"Store Edit\" button from now on\n\t\t\tif (window.localStorage.edit_mode && parseInt(input.has_jump,10) === 1) {\n\t\t\t\tif (!self.valuesMatch(cached_value, current_value, input.type)) {\n\t\t\t\t\t//set flag as from now until saving the form, store edit from an intermediate screen is disabled\n\t\t\t\t\twindow.localStorage.has_new_jump_sequence = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//check we are not coming back from #save-confirm page\n\t\t\tif (current_position <= inputs_total) {\n\t\t\t\t//cache current value in localStorage\n\t\t\t\tself.setCachedInputValue(current_value, current_position, input.type, input.is_primary_key);\n\t\t\t}\n\t\t\t\n\t\t\t//remove flag that helps to handle back button when user is just dismissing barcode scanner\n\t\t\twindow.localStorage.removeItem('is_dismissing_barcode');\n\n\t\t\tself.gotoPrevPage(e);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.popInputsTrail = function() {\n\n\t\t\tvar inputs_trail;\n\n\t\t\ttry {\n\n\t\t\t\tinputs_trail = JSON.parse(window.localStorage.inputs_trail);\n\n\t\t\t\tinputs_trail.pop();\n\n\t\t\t\twindow.localStorage.inputs_trail = JSON.stringify(inputs_trail);\n\n\t\t\t} catch(error) {\n\t\t\t}\n\n\t\t};\n\t\t//popInputsTrail\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.pushInputsTrail = function(the_input) {\n\n\t\t\tvar input = the_input;\n\n\t\t\tvar inputs_trail;\n\n\t\t\t//catch Chrome error `Uncaught SyntaxError: Unexpected end of input` when parsing empty content\n\t\t\ttry {\n\t\t\t\tinputs_trail = JSON.parse(window.localStorage.inputs_trail);\n\n\t\t\t} catch(error) {\n\n\t\t\t\t//Handle errors here\n\t\t\t\tinputs_trail = [];\n\n\t\t\t}\n\n\t\t\tinputs_trail.push({\n\t\t\t\tposition : input.position,\n\t\t\t\tlabel : input.label\n\n\t\t\t});\n\n\t\t\twindow.localStorage.inputs_trail = JSON.stringify(inputs_trail);\n\n\t\t};\n\t\t//pushInputsTrail\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.spliceInputsTrail = function(the_position) {\n\n\t\t\tvar position = parseInt(the_position, 10);\n\t\t\tvar inputs_trail = JSON.parse(window.localStorage.inputs_trail);\n\t\t\tvar i;\n\t\t\tvar iLength = inputs_trail.length;\n\t\t\tvar index;\n\t\t\tvar how_many_to_remove;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tif (parseInt(inputs_trail[i].position, 10) === position) {\n\n\t\t\t\t\tindex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thow_many_to_remove = iLength - index;\n\t\t\tinputs_trail.splice(index, how_many_to_remove);\n\t\t\twindow.localStorage.inputs_trail = JSON.stringify(inputs_trail);\n\n\t\t};\n\n\t\t//spliceInputsTrail\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\n        \"use strict\";\n\n        module.prepareFeedback = function(the_status, the_entry_key) {\n\n            var self = this;\n            var status = the_status;\n            var page = EC.Const.INPUT_VIEWS_DIR + \"save-feedback.html\";\n            var primary_keys = JSON.parse(window.localStorage.primary_keys);\n            var back_nav_hash = window.localStorage.back_nav_url;\n            var back_nav_hash_parts;\n            var children;\n            var entries_totals = JSON.parse(window.localStorage.entries_totals);\n\n            self.entry_key = the_entry_key;\n\n            //prepare feedback based on status\n            if (status) {\n\n                this.message = \"Data save successfully!\";\n\n                back_nav_hash_parts = back_nav_hash.split(\"=\");\n                children = parseInt(back_nav_hash_parts[back_nav_hash_parts.length - 1], 10);\n\n                //increase children for this entry, update back nav hash and pagination object\n                back_nav_hash_parts[back_nav_hash_parts.length - 1] = children + 1;\n                back_nav_hash = back_nav_hash_parts.join(\"=\");\n                entries_totals[entries_totals.length - 1].entries_total = children + 1;\n\n                window.localStorage.back_nav_url = back_nav_hash;\n                window.localStorage.entries_totals = JSON.stringify(entries_totals);\n\n                //add last entry primary key to localStorage\n                primary_keys.push(self.entry_key);\n                window.localStorage.primary_keys = JSON.stringify(primary_keys);\n\n            } else {\n\n                this.message = \"Error saving data...please retry\";\n            }\n\n            EC.Routing.changePage(page);\n        };\n        //prepareFeedback\n\n        return module;\n\n    }(EC.Inputs));\n","/*global $, jQuery*/\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = (function (module) {\n    'use strict';\n\n    module.prepareFirstInput = function (the_first_input) {\n\n        var self = this;\n        var first_input_position = 1;\n        var back_nav_url;\n        var form_name = window.localStorage.form_name;\n        var form_id = window.localStorage.form_id;\n        var breadcrumbs = JSON.parse(window.localStorage.breadcrumbs);\n        var entry_key = breadcrumbs[breadcrumbs.length - 1];\n        var input = the_first_input;\n        var page = EC.Const.INPUT_VIEWS_DIR + input.type + EC.Const.HTML_FILE_EXT;\n        var back_btn = $('div[data-role=\"header\"] div[data-href=\"back-btn\"]');\n        var back_btn_label = $('div[data-role=\"header\"] div[data-href=\"back-btn\"] span.form-name');\n        var entries_totals = JSON.parse(window.localStorage.entries_totals);\n        var children = entries_totals[entries_totals.length - 1].entries_total;\n        var is_genkey_hidden = EC.Utils.isFormGenKeyHidden(form_id);\n\n\n        //start watching for device position if the form has got a location field\n        if (parseInt(window.localStorage.form_has_location, 10) === 1) {\n            window.localStorage.watch_position = navigator.geolocation.watchPosition(function (position) {\n                console.log(position);\n            }, function (error) {\n                console.log(error);\n            }, {\n                maximumAge: 0,\n                timeout: 300000,\n                enableHighAccuracy: true\n            });\n        }\n\n        //reset entry key\n        self.entry_key = null;\n\n        back_btn_label.text(form_name.trunc(EC.Const.FORM_NAME_MAX_LENGTH) + ' entries');\n\n        //set array to keep track of input navigation (get pre-built one when editing)\n        if (!window.localStorage.edit_mode) {\n            window.localStorage.inputs_trail = [];\n        } else {\n            //update inputs trail to remove all the elements past the current edit position\n            EC.Inputs.spliceInputsTrail(window.localStorage.edit_position);\n        }\n\n        //set hash to be used to list these entries when loading entries-list.html after a save/exit action\n        if (!window.localStorage.edit_mode) {\n            back_nav_url = 'entries-list.html';\n            back_nav_url += '?form=' + form_id;\n            back_nav_url += '&name=' + form_name;\n            back_nav_url += '&entry_key=' + entry_key;\n            back_nav_url += '&direction=' + EC.Const.ADDING;\n            back_nav_url += '&children=' + children;\n\n            window.localStorage.back_nav_url = back_nav_url;\n        }\n\n        /* Update current position if edit_mode is active. When editing, the user can start editing the form from any input\n         * not just the first one. In that case we have to update the first position to be the selected input position\n         * not 1\n         */\n        window.localStorage.current_position = (window.localStorage.edit_mode) ? window.localStorage.edit_position : first_input_position;\n\n        /*\n         * If if the genkey hidden flag is set to 1 and the input is a primary key input, do not render this input on screen but:\n         *\n         * - just cache it with an auto genkey in localStorage if we are entering a new entry\n         * - do nothing if we are editing, ad the inputs_values array will be set already (it is set when listing the entry values)\n         *\n         */\n\n        if (is_genkey_hidden === 1 && input.is_primary_key === 1) {\n\n            //skip input\n            window.localStorage.current_position = first_input_position + 1;\n\n            //if we are entering a new entry, add an auto generated key in input_values[]\n            if (!window.localStorage.edit_mode) {\n                window.localStorage.inputs_values = JSON.stringify([{\n                    _id: '',\n                    type: '',\n                    value: EC.Utils.getGenKey(),\n                    position: 1,\n                    is_primary_key: 1\n                }]);\n\n            }\n\n            //get next input to set page we have to go to (first_input_position is equal to current_position-1, so...)\n            input = self.inputs[first_input_position];\n            page = EC.Const.INPUT_VIEWS_DIR + input.type + EC.Const.HTML_FILE_EXT;\n\n        }\n\n        //remove branch flags and objects from localStorage\n        window.localStorage.removeItem('cached_branch_entry_keys');\n        window.localStorage.removeItem('stored_branch_entry_keys');\n        window.localStorage.removeItem('branch_current_position');\n        window.localStorage.removeItem('branch_form');\n        window.localStorage.removeItem('branch_form_has_jumps');\n        window.localStorage.removeItem('branch_form_id');\n        window.localStorage.removeItem('branch_form_name');\n        window.localStorage.removeItem('branch_inputs_total');\n        window.localStorage.removeItem('branch_primary_keys');\n        window.localStorage.removeItem('branch_edit_id');\n        window.localStorage.removeItem('branch_edit_mode');\n        window.localStorage.removeItem('branch_edit_position');\n        window.localStorage.removeItem('branch_inputs_trail');\n        window.localStorage.removeItem('branch_inputs_values');\n\n        //get first input view\n        EC.Routing.changePage(page);\n\n    };\n\n    return module;\n\n}(EC.Inputs));\n","/*global $, jQuery*/\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = (function (module) {\n    'use strict';\n\n    module.renderFeedbackView = function () {\n\n        var self = this;\n        var form_id = window.localStorage.form_id;\n        var form_name = window.localStorage.form_name;\n        var form_tree = EC.Utils.getParentAndChildForms(form_id);\n        var upload_btn = $('div#feedback div#input-feedback div#upload');\n        var add_another_entry_btn = $('div#feedback div#input-feedback div#add-entry-current-form');\n        var list_entries_btn = $('div#feedback div#input-feedback div#list-entries-current-form');\n        var add_child_btn = $('div#feedback div#input-feedback div#add-child-entry');\n        var back_btn_label = $('div[data-role=\"header\"] div[data-href=\"back-btn\"] span.form-name');\n\n        //stop background watch position if any\n        window.navigator.geolocation.clearWatch(window.localStorage.watch_position);\n        window.localStorage.form_has_location = 0;\n\n        back_btn_label.text(form_name.trunc(EC.Const.FORM_NAME_MAX_LENGTH) + ' entries');\n\n        //handle back button with no alert on this page\n        self.bindBackBtn(true);\n\n        //remove navigation flags from localStorage\n        window.localStorage.removeItem('edit_id');\n        window.localStorage.removeItem('edit_mode');\n        window.localStorage.removeItem('edit_position');\n        window.localStorage.removeItem('inputs_trail');\n        window.localStorage.removeItem('inputs_values');\n        window.localStorage.removeItem('current_position');\n        //clear cached branch entry keys\n        window.localStorage.removeItem('cached_branch_entry_keys');\n\n        //Set feedback message\n        $('p#message').text(this.message);\n\n        //Set text for 'add another entry' button\n        add_another_entry_btn.find('span.entry').text(form_name);\n\n        upload_btn.off().one('vclick', function () {\n            EC.Routing.changePage(EC.Const.UPLOAD_VIEW);\n        });\n\n        add_another_entry_btn.off().one('vclick', function (e) {\n            EC.Entries.addEntry();\n        });\n\n        list_entries_btn.off().one('vclick', function (e) {\n            //if user was navigating from a child from, send it back to child from list\n            if (window.localStorage.is_child_form_nav) {\n\n                //TODO: back to child entries list\n                EC.Inputs.backToEntriesList();\n            } else {\n                //data saved, go back to entries list\n                EC.Inputs.backToEntriesList();\n            }\n        });\n\n        //set text for list entries\n        list_entries_btn.find('span.form-name-inline').text(form_name);\n\n        //Set text for 'add child to form (if there is a child form)\n        if (form_tree.cname !== '') {\n\n            //show add child to current for button\n            add_child_btn.find('span').text(EC.Localise.getTranslation('add') + form_tree.cname + EC.Localise.getTranslation('to') + form_name);\n\n            //show add child button\n            add_child_btn.removeClass('hidden');\n\n            //Add a child entry btn\n            add_child_btn.one('vclick', function (e) {\n\n                var breadcrumb_trail;\n                var entries_totals;\n\n                //Set up form values to add a child form for the current form\n                window.localStorage.form_name = form_tree.cname;\n                window.localStorage.form_id = form_tree.child;\n\n                //add current entry key to breadcrumbs\n                breadcrumb_trail = JSON.parse(window.localStorage.breadcrumbs);\n                //TODO: where entry_key comes from?\n                breadcrumb_trail.push(self.entry_key);\n                window.localStorage.breadcrumbs = JSON.stringify(breadcrumb_trail);\n\n                //add current entry to pagination object\n                entries_totals = JSON.parse(window.localStorage.entries_totals);\n                entries_totals.push({\n                    form: form_tree.cname,\n                    entry_key: self.entry_key,\n                    entries_total: 1\n                });\n\n                window.localStorage.entries_totals = JSON.stringify(entries_totals);\n\n                EC.Entries.addEntry();\n            });\n        }\n        EC.Notification.hideProgressDialog();\n    };\n\n    return module;\n\n}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function (module) {\n    \"use strict\";\n\n    /**\n     * @method renderInput This method is called by JQM page events each time a new page (input type) is requested\n     * The application show a single input per page: this method prepare the DOM common to all inputs  and then calls the\n     * appropriate view based on the input type\n     *\n     * @param {Object} the_input : a single input object like:\n     *\n     * {input object here}\n     *\n     */\n\n    module.renderInput = function (the_input) {\n\n        var self = this;\n        var wls = window.localStorage;\n        var input = the_input;\n        var current_value;\n        var page = EC.Const.INPUT_VIEWS_DIR + input.type;\n        var current_position = parseInt(wls.current_position, 10);\n        var cached_value = self.getCachedInputValue(current_position);\n        var breadcrumb_trail = JSON.parse(wls.getItem(\"breadcrumbs\"));\n        var back_btn = $(\"div[data-role='header'] div[data-href='back-btn']\");\n        var back_btn_label = $(\"div[data-role='header'] div[data-href='back-btn'] span.form-name\");\n        var parent_key;\n        var rows_to_save = [];\n        var prev_btn = $('div.input-nav-tabs div.ui-block-a.input-prev-btn');\n        var next_btn = $('div.input-nav-tabs div.ui-block-c.input-next-btn');\n        var form_name = wls.form_name;\n        var form_id = wls.form_id;\n        var inputs_total = self.inputs.length;\n        var is_genkey_hidden = EC.Utils.isFormGenKeyHidden(form_id);\n        var inputs_values;\n        var first_input;\n        var is_prev_button_hidden = false;\n\n        back_btn.off().on('vclick', function (e) {\n\n            //when editing, the back button takes to the entry values list\n            if (wls.edit_mode) {\n\n                if (wls.has_new_jump_sequence) {\n                    EC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), \"Are you sure? \\nData will NOT be saved\", \"EC.Inputs.backToEntryValuesList\", false, input, false);\n\n                } else {\n\n                    //check if user is leaving after modifying a jump and neither \"Store Edit\", \"prev\" or \"next\" button were tapped\n                    if (parseInt(input.has_jump, 10) === 1) {\n\n                        current_value = EC.Inputs.getCurrentValue(input.type);\n\n                        if (!self.valuesMatch(cached_value, current_value, input.type)) {\n\n                            EC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"exit_confirm\"), \"EC.Inputs.backToEntryValuesList\", false, input, false);\n                        } else {\n\n                            EC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"save_before_leave\"), \"EC.Inputs.backToEntryValuesList\", true, input, false);\n                        }\n                    } else {\n                        EC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"save_before_leave\"), \"EC.Inputs.backToEntryValuesList\", true, input, false);\n                    }\n                }\n\n            } else {\n                //not editing, go to entries list\n                EC.Notification.askConfirm(EC.Localise.getTranslation(\"leaving_current_form\"), EC.Localise.getTranslation(\"save_before_leave\"), \"EC.Inputs.backToEntriesList\", true, input, false);\n            }\n\n        });\n\n        back_btn_label.text(form_name.trunc(EC.Const.FORM_NAME_MAX_LENGTH) + EC.Localise.getTranslation(\"entries\"));\n\n        //get parent key based on the user navigating, editing or adding from child list\n        if (wls.edit_mode) {\n            parent_key = breadcrumb_trail[breadcrumb_trail.length - 2];\n        } else {\n            parent_key = breadcrumb_trail[breadcrumb_trail.length - 1];\n        }\n\n        //reset button visibility\n        $(prev_btn, next_btn).removeClass(\"invisible\");\n\n        //show parent key in the top bar (if any)\n        if (parent_key !== \"\" && parent_key !== undefined) {\n            $('div.parent-key div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(wls.form_name + ' for ' + parent_key);\n        } else {\n            $('div.parent-key div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(wls.form_name);\n        }\n\n        //TODO :do we need to -> skip input rendering if it is the preloader screen\n        if (current_position !== 0) {\n\n            //check if we have a cached value for this input in session\n            current_value = self.getCachedInputValue(current_position).value;\n\n            //check it the value is _skipp3d_ reserved keyword\n            current_value = (current_value === EC.Const.SKIPPED) ? \"\" : current_value;\n\n            //if the input is either photo, audio or video, if no default value is available we pass an empty object {cached: \"\", stored: \"\"}\n            if (input.type === EC.Const.PHOTO || input.type === EC.Const.AUDIO || input.type === EC.Const.VIDEO) {\n\n                self.renderInputView(input, current_value || {\n                    cached: \"\",\n                    stored: \"\"\n                });\n\n            } else {\n\n                //for normal inputs, render view passing the default value (empty if not set) if no input value is cached\n                self.renderInputView(input, current_value || input.default_value);\n            }\n        }\n\n        //set next button to go to next input (if any)\n        if (current_position <= inputs_total) {\n            //Next button handler\n            next_btn.off().on('vclick', function (e) {\n                self.onNextBtnTapped(e, input, self);\n            });\n        }\n\n        //set previous button (if any)\n        if (current_position - 1 > 0) {\n\n            //check if the first input is a hidden genkey, in that case do not show prev button\n            if (current_position === 2) {\n\n                inputs_values = JSON.parse(wls.inputs_values);\n                first_input = inputs_values[0];\n\n                if (first_input.is_primary_key === 1 && is_genkey_hidden === 1) {\n                    //hide prev button for first input of the form\n                    prev_btn.addClass(\"invisible\");\n                    is_prev_button_hidden = true;\n                }\n            }\n\n            //bind vclick event only if the button is not hidden\n            if (!is_prev_button_hidden) {\n                //handler for prev button, showing prev input\n                prev_btn.off().on('vclick', function (e) {\n                    self.onPrevBtnTapped(e, input);\n                });\n            }\n\n        } else {\n\n            //hide prev button for first input of the form\n            prev_btn.addClass(\"invisible\");\n\n            //reset inputs_trail in session\n            wls.removeItem('inputs_trail');\n        }\n\n        //show store edit button if we are in \"editing mode\" and bind it to callback\n        if (wls.edit_mode) {\n\n            $('div.store-edit').removeClass('hidden');\n\n            /* Disable store edit button when a new jump sequence was triggered\n             * by the user making a change to a input field with a jump\n             * User is then forced to go through the form until it ends to follow the new jumps sequence\n             */\n            if (wls.has_new_jump_sequence) {\n                $('div.store-edit').addClass('ui-disabled');\n            } else {\n                $('div.store-edit').removeClass('ui-disabled');\n            }\n\n            //bind events with on(), as we need to submit again if the input does not validate successfully\n            $('div.store-edit').off().on('vclick', function () {\n\n                var cached_value;\n\n                if (parseInt(input.has_jump, 10) === 1) {\n\n                    current_position = wls.current_position;\n                    cached_value = EC.Inputs.getCachedInputValue(current_position);\n\n                    //TODO: do validation first??? or is it done when calling prepareStoreEdit?\n\n                    /*\n                     * if we are making a change to a field triggering a jump\n                     * ask confirmation to user he will have to complete the whole form\n                     */\n\n                    if (!self.valuesMatch(cached_value, current_value, input.type)) {\n\n                        //disable intermediate \"store edit\" button\n                        //\t$('div.store-edit').addClass('ui-disabled');\n\n                        //TODO:\n                        //Alert user there is the need to complete the whole form\n                        EC.Notification.showAlert(EC.Localise.getTranslation(\"warning\"), EC.Localise.getTranslation(\"edited_jump\"));\n\n                        //set flag as from now until saving the form, store edit from an intermediate screen is disabled\n                        wls.has_new_jump_sequence = 1;\n\n                    } else {\n\n                        wls.removeItem(\"has_new_jump_sequence\");\n                        self.prepareStoreEdit(current_position, input, self);\n                    }\n\n                } else {\n                    self.prepareStoreEdit(current_position, input, self);\n                }\n\n            });\n\n        }\n        else {\n            $('div.store-edit').addClass('hidden');\n        }\n\n        //update completion percentage and bar for this form\n        self.updateFormCompletion(current_position, inputs_total);\n\n    };\n    //renderInput\n\n    return module;\n\n}(EC.Inputs));\n","/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = (function (module) {\n    'use strict';\n\n    var branchFormCacheReady;\n    var branchEntriesCacheReady;\n    var branch_input;\n    var count;\n    var branch_form;\n\n    module.renderInputView = function (the_input, the_value) {\n\n        var input = the_input;\n        var value = the_value;\n        var self = this;\n        var offset = 0;\n        var project_id = window.localStorage.project_id;\n        var parent_key_position;\n        var hierarchy_entry_key_value;\n\n        //render layout based on the input type\n        switch (input.type) {\n\n            case EC.Const.TEXT:\n\n                EC.InputTypes.text(value, input);\n                break;\n\n            case EC.Const.TEXTAREA:\n\n                EC.InputTypes.textarea(value, input);\n                break;\n\n            case EC.Const.INTEGER:\n\n                EC.InputTypes.integer(value, input);\n                break;\n\n            case EC.Const.DECIMAL:\n\n                EC.InputTypes.decimal(value, input);\n                break;\n\n            case EC.Const.DATE:\n\n                EC.InputTypes.date(value, input);\n                break;\n\n            case EC.Const.TIME:\n\n                EC.InputTypes.time(value, input);\n                break;\n\n            case EC.Const.RADIO:\n\n                EC.InputTypes.radio(value, input);\n                break;\n\n            case EC.Const.CHECKBOX:\n\n                EC.InputTypes.checkbox(value, input);\n                break;\n\n            case EC.Const.DROPDOWN:\n\n                EC.InputTypes.dropdown(value, input);\n                break;\n\n            case EC.Const.BARCODE:\n\n                EC.InputTypes.barcode(value, input);\n                break;\n\n            case EC.Const.LOCATION:\n\n                EC.InputTypes.location(value, input);\n                break;\n\n            case EC.Const.PHOTO:\n\n                EC.InputTypes.photo(value, input);\n                break;\n\n            //deal with audio recording\n            case EC.Const.AUDIO:\n\n                EC.InputTypes.audio(value, input);\n                break;\n\n            case EC.Const.VIDEO:\n\n                EC.InputTypes.video(value, input);\n                break;\n\n            case EC.Const.BRANCH:\n\n                //if we are opening a branch form, cache inputs\n                if (!window.localStorage.back_from_branch) {\n\n                    //cache inputs in localStorage (to have them ready when coming back from branch form)\n                    window.localStorage.inputs = JSON.stringify(self.inputs);\n                } else {\n\n                    //back from a branch, remove flag\n                    window.localStorage.removeItem('back_from_branch');\n                }\n\n                //if loading a branch input, we set two deferred objects to know when the branch form and its entries are BOTH cached in LocalStorage, as SQLite queries are async\n                branchFormCacheReady = $.Deferred();\n                branchEntriesCacheReady = $.Deferred();\n\n                //For branch inputs only: when BOTH async queries are done, render AddBranch page\n                $.when(branchFormCacheReady, branchEntriesCacheReady).then(function () {\n\n                    //models ready, update UI\n                    console.log('Branch cache ready');\n                    EC.InputTypes.addBranch(count, branch_input);\n\n                });\n\n                /* hierarchy_entry_key_value is the current value of the primary key for the form we want to enter branches to\n                 * we need it as we need to link the branch entries to a single main form entry (like it is its parent)\n                 */\n                parent_key_position = EC.Inputs.getPrimaryKeyRefPosition();\n                hierarchy_entry_key_value = EC.Inputs.getMainFormCurrentKeyValue(parent_key_position);\n\n                /*\n                 * Trigger 2 database queries and use a deferred object to show the AddBranch page when tehy are BOTH completed\n                 */\n\n                //get branch count  BEFORE rendering AddBranch\n                $.when(EC.Select.getCountBranchEntries(input, hierarchy_entry_key_value, project_id, offset)).then(function (the_count, the_input) {\n\n                    branch_input = the_input;\n                    count = the_count;\n\n                    branchEntriesCacheReady.resolve();\n                    console.log('branchEntriesCacheReady called');\n\n                });\n\n                //get branch form details and cache them BEFORE rendering AddBranch\n                $.when(EC.Select.getBranchFormDetails(input, value, project_id)).then(function (the_branch_form) {\n\n                    branch_form = the_branch_form;\n\n                    window.localStorage.branch_form = JSON.stringify(branch_form);\n\n                    branchFormCacheReady.resolve();\n                    console.log('branchFormCacheReady called');\n\n                });\n\n                break;\n\n        }//switch\n\n        //remove progress dialog (triggered when loading inputs.html)\n        //for 'location' inputs, skip this as we are hiding ti from the location view\n        if (input.type !== EC.Const.LOCATION) {\n            if (window.google) {\n                //clear any events related to the google maps object\n                google.maps.event.clearListeners(EC.DevicePosition.map);\n            }\n            EC.Notification.hideProgressDialog();\n        }\n    };\n\n    return module;\n\n}(EC.Inputs));\n","/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = (function (module) {\n    'use strict';\n\n    module.renderSaveConfirmView = function () {\n\n        var self = this;\n        var prev_btn = $('div#save-confirm div.ui-block-a.input-prev-btn');\n        var store_btn = $('div#save-confirm div#input-save-confirm div#store');\n        var store_edit_btn = $('div.store-edit');\n        var back_btn_label = $('div[data-role=\"header\"] div[data-href=\"back-btn\"] span.form-name');\n        var inputs_total = self.inputs.length;\n        var breadcrumb_trail = JSON.parse(window.localStorage.getItem('breadcrumbs'));\n        var form_name = window.localStorage.form_name;\n        var parent_key;\n\n\n\n        //get parent key based on the user navigating or editing\n        if (window.localStorage.edit_mode) {\n            parent_key = breadcrumb_trail[breadcrumb_trail.length - 2];\n        } else {\n            parent_key = breadcrumb_trail[breadcrumb_trail.length - 1];\n        }\n\n        //show parent key in the top bar (if any)\n        if (parent_key !== '' && parent_key !== undefined) {\n            $('div.parent-key div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(window.localStorage.form_name + ' for ' + parent_key);\n        } else {\n            $('div.parent-key div.ui-block-a span.ui-btn-active span.ui-btn-inner').text(window.localStorage.form_name);\n        }\n\n        back_btn_label.text(form_name.trunc(EC.Const.FORM_NAME_MAX_LENGTH) + ' entries');\n\n        self.bindBackBtn(false);\n\n        //reset back button visibility\n        prev_btn.removeClass('invisible');\n\n        //handler for prev button, showing prev input\n        prev_btn.off().on('vclick', function (e) {\n            self.gotoPrevPage(e);\n        });\n\n        //show 'store' or 'store edit' button based on where we are editing or adding a new entry\n        if (window.localStorage.edit_mode) {\n\n            store_btn.hide();\n\n            //enable/show store edit button (if the form has jumps it got disabled)\n            $('div.store-edit').removeClass('ui-disabled hidden');\n\n            //bind event with one() to enforce a single submit\n            store_edit_btn.off().one('vclick', function (e) {\n\n                EC.Notification.showProgressDialog();\n                self.onStoreValues();\n            });\n\n        } else {\n\n            store_btn.show();\n\n            //hide store edit button\n            $('div.store-edit').addClass('hidden');\n\n            //bind event with one() to enforce a single submit\n            store_btn.off().one('vclick', function (e) {\n\n                EC.Notification.showProgressDialog();\n                self.onStoreValues();\n            });\n        }\n\n        //update completion percentage and bar for this form\n        self.updateFormCompletion(inputs_total + 1, inputs_total);\n\n    };\n\n\n    return module;\n\n}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\t/**\n\t\t * @method renderStoreEditFeedback Show feedback after an edit action and redirect the entries-list page\n\t\t * @param {Object} is_positive\n\t\t */\n\t\tmodule.renderStoreEditFeedback = function(is_positive) {\n\n\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\tif (is_positive) {\n\n\t\t\t\tEC.Notification.showToast(EC.Localise.getTranslation(\"edit_saved\"), \"short\");\n\n\t\t\t\twindow.localStorage.removeItem(\"edit_hash\");\n\t\t\t\twindow.localStorage.removeItem(\"edit_id\");\n\t\t\t\twindow.localStorage.removeItem(\"edit_mode\");\n\t\t\t\twindow.localStorage.removeItem(\"edit_position\");\n\t\t\t\twindow.localStorage.removeItem(\"edit_type\");\n\t\t\t\twindow.localStorage.removeItem(\"edit_key_value\");\n\n\t\t\t\t//remove flag that disable store edit from an intermediate screen\n\t\t\t\twindow.localStorage.removeItem(\"has_new_jump_sequence\");\n\n\t\t\t\t//go back to entries-list page using cached back navigation url\n\t\t\t\tEC.Routing.changePage(window.localStorage.back_nav_url);\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\t/**\n\t\t *  @method amendSkippedValues. Check the inputs_trail[] against inputs_values[]\n\t\t *  inputs_trail[] contains the inputs the user actually navigated to by jumps\n\t\t *  inputs_values[] contains all the values for all the inputs in a form, from start to finish\n\t\t *  Skipped inputs (by a jump) are null elements in inputs_values[], so they are marked as \"skipped\" by setting their value as _skipp3d_, a custom reserved word\n\t\t *  If the primary key for the form is auto generated and hidden, it will be in input_values[] but not in inputs_trail, add it manually\n\t\t *  inputs_values[] is then cached to locaStorage after being amended\n\t\t */\n\t\tmodule.amendSkippedValues = function() {\n\t\t\t\n\t\t\tvar wls = window.localStorage;\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar iLength;\n\t\t\tvar jLength;\n\t\t\tvar max_skipped_position;\n\t\t\tvar inputs_trail = [];\n\t\t\tvar inputs_values = [];\n\t\t\tvar is_found;\n\t\t\tvar is_genkey_hidden = EC.Utils.isFormGenKeyHidden();\n\n\t\t\tinputs_trail = JSON.parse(wls.inputs_trail);\n\t\t\tinputs_values = JSON.parse(wls.inputs_values);\n\n\t\t\tiLength = inputs_values.length;\n\t\t\tjLength = inputs_trail.length;\n\n\t\t\tmax_skipped_position = inputs_trail[inputs_trail.length - 1].position;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {//for each input in inputs_values\n\n\t\t\t\tis_found = false;\n\n\t\t\t\t//jumps can generate null values in the input_values array (when entering a new entry)\n\t\t\t\tif (inputs_values[i] === null) {\n\t\t\t\t\tis_found = true;\n\t\t\t\t\t// inputs_values[i] = {\n\t\t\t\t\t\t// value : EC.Const.SKIPPED\n\t\t\t\t\t// };\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( j = 0; j < jLength; j++) {//for each input in inputs_trail\n\n\t\t\t\t\t\t//check if the input values is in the input trail array OR the input value is a hidden primary key value. In both case, the value needs to be saved\n\t\t\t\t\t\tif (parseInt(inputs_values[i].position, 10) === inputs_trail[j].position || (is_genkey_hidden === 1 && parseInt(inputs_values[i].is_primary_key, 10) === 1 )) {\n\n\t\t\t\t\t\t\tis_found = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}// for each inputs_trail\n\t\t\t\t}\n\n\t\t\t\t//not found values (and null values)\n\t\t\t\t// TODO: why was I also checking for inputs_values[i].position < max_skipped_position???\n\t\t\t\tif (!is_found) {\n\t\t\t\t\tinputs_values[i].value = EC.Const.SKIPPED;\n\t\t\t\t}\n\n\t\t\t}//for each inputs_values\n\n\t\t\t//store the amended values in localStorage for saving\n\t\t\twls.inputs_values = JSON.stringify(inputs_values);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.buildRows = function(the_filenameToTimestamp) {\n\n\t\t\tvar self = this;\n\t\t\tvar i;\n\t\t\tvar input;\n\t\t\tvar value_obj;\n\t\t\tvar value;\n\t\t\tvar _id;\n\t\t\tvar ref;\n\t\t\tvar rows = [];\n\t\t\tvar iLength = EC.Inputs.inputs.length;\n\t\t\tvar key_position = EC.Inputs.getPrimaryKeyRefPosition();\n\t\t\tvar parts;\n\t\t\tvar filename;\n\t\t\tvar filename_parts;\n\t\t\tvar extension;\n\t\t\tvar form_name = window.localStorage.form_name;\n\t\t\tvar uuid = EC.Utils.getPhoneUUID();\n\t\t\tvar form_id = window.localStorage.form_id;\n\t\t\tvar created_on = EC.Utils.getTimestamp();\n\t\t\tvar ios_filenames = the_filenameToTimestamp;\n\t\t\tvar timestamp;\n\n\t\t\t//get parent key value for the current form\n\t\t\tvar current_input_position = parseInt(window.localStorage.current_position, 10);\n\t\t\tvar breadcrumb_trail = JSON.parse(window.localStorage.getItem(\"breadcrumbs\"));\n\t\t\tvar parent_key = breadcrumb_trail[breadcrumb_trail.length - 1];\n\n\t\t\t//save full breadcrumbs as path to parent node (node tree representation using adjacent list)\n\t\t\tvar parent_path = (breadcrumb_trail[0] === \"\") ? breadcrumb_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR).substring(1) : breadcrumb_trail.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n\n\t\t\t//get value of primary key for this form\n\t\t\tvar key_value = EC.Inputs.getCachedInputValue(key_position).value;\n\n\t\t\tvar branch_entries;\n\n\t\t\t//build rows to be saved - the text value for each input is saved in an array with corresponding indexes\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t//get current value details\n\t\t\t\tinput = EC.Inputs.inputs[i];\n\t\t\t\tvalue_obj = self.getCachedInputValue(input.position);\n\n\t\t\t\t//save cached value OR \"\" when input_values not found...that should never happen?\n\t\t\t\tvalue = value_obj.value || \"\";\n\n\t\t\t\t//_id is set only when we are editing, it is the _id of the current row in the database which will be updated\n\t\t\t\t_id = value_obj._id;\n\n\t\t\t\t//deal with media types to save the correct value (full path uri)\n\t\t\t\tif (input.type === EC.Const.PHOTO || input.type === EC.Const.VIDEO || input.type === EC.Const.AUDIO) {\n\n\t\t\t\t\t//check whether the value is defined as media value {stored: \"<path>\", cached: \"<path>\"}\n\t\t\t\t\tif (value.hasOwnProperty(\"stored\")) {\n\n\t\t\t\t\t\tif (value.stored === \"\") {\n\n\t\t\t\t\t\t\t//we are saving a new media file path from the cached one (or an empty string if the file field was optional)\n\t\t\t\t\t\t\tif (value.cached !== \"\") {\n\n\t\t\t\t\t\t\t\t//build file name (in the format <form_name>_<ref>_<uuid>_filename) with the cached value (Android) or the timestamp (iOS)\n\t\t\t\t\t\t\t\t//Cordova Camera API unfortunately returns the timestamp as a file name on Android only, on iOS a smart guy decided to use the same file name with an incremental index (lol)\n\t\t\t\t\t\t\t\tparts = value.cached.split('/');\n\t\t\t\t\t\t\t\tfilename = parts[parts.length - 1];\n\n\t\t\t\t\t\t\t\tswitch(window.device.platform) {\n\n\t\t\t\t\t\t\t\t\tcase EC.Const.ANDROID:\n\t\t\t\t\t\t\t\t\t\t//do nothing\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase EC.Const.IOS:\n\n\t\t\t\t\t\t\t\t\t\t//replace filename with <timestamp>.jpg as on IOS the Camera, Audio and Video capture is inconsistent and returns weird file names\n\t\t\t\t\t\t\t\t\t\t//not always the timestamp. We want to save the files using the timestamp as we do on Android (and following Epicollect+ filename schema)\n\t\t\t\t\t\t\t\t\t\tif (input.type === EC.Const.PHOTO || input.type === EC.Const.AUDIO || input.type === EC.Const.VIDEO) {\n\n\t\t\t\t\t\t\t\t\t\t\t//get linked timestamp as we save the file using the timestamp as the file name\n\t\t\t\t\t\t\t\t\t\t\tfilename_parts = filename.split(\".\");\n\t\t\t\t\t\t\t\t\t\t\textension = filename_parts[filename_parts.length - 1];\n\n\t\t\t\t\t\t\t\t\t\t\ttimestamp = EC.Utils.getIOSFilename(ios_filenames, filename);\n\t\t\t\t\t\t\t\t\t\t\tfilename = timestamp + \".\" + extension;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvalue = form_name + \"_\" + input.ref + \"_\" + uuid + \"_\" + filename;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//use the existing stored path\n\t\t\t\t\t\t\tvalue = value.stored;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//value was not defined as media value: use case when user leaves a form halfway through but still wants to save. Save an empty object then\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//deal with branch type to save the value ({branch_form_name, total_of_entries}) in the correct format\n\t\t\t\tif (input.type === EC.Const.BRANCH) {\n\n\t\t\t\t\t//check if the branch input was skipped (by jumps or exiting a form earlier)\n\n\t\t\t\t\tif (value === EC.Const.SKIPPED) {\n\n\t\t\t\t\t\tvalue = input.branch_form_name + \",0\";\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//get branch form name and total of entries and save them as csv (cannot save JSON.stringify(obj) due to quotes, balls!)\n\t\t\t\t\t\tvalue = value.branch_form_name + \",\" + value.branch_total_entries;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//dropdown/radio values\n\t\t\t\tif (input.type === EC.Const.DROPDOWN || input.type === EC.Const.RADIO) {\n\n\t\t\t\t\t//if the input was NOT skipped, save the value or \"\" when no option was selected in the dropdown\n\t\t\t\t\tif (value !== EC.Const.SKIPPED) {\n\n\t\t\t\t\t\t//if the label is the select placeholder OR the value was skipped, save an empty value\n\t\t\t\t\t\tif (value === EC.Const.NO_OPTION_SELECTED) {\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//checkbox values we save all the value  as csv\n\t\t\t\tif (input.type === EC.Const.CHECKBOX) {\n\n\t\t\t\t\t//if the input was NOT skipped, save the value or \"\" when no option was selected in the checkboxes list\n\t\t\t\t\tif (value !== EC.Const.SKIPPED) {\n\t\t\t\t\t\t//TODO: if the label is the select placeholder OR the value was skipped, save an empty value does it happen this is an empty array?\n\t\t\t\t\t\tif (value === EC.Const.NO_OPTION_SELECTED) {\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalue = value.join(\", \");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\trows.push({\n\t\t\t\t\t_id : _id, //this is set only when we are editing\n\t\t\t\t\tinput_id : input._id,\n\t\t\t\t\tform_id : input.form_id,\n\t\t\t\t\tposition : input.position,\n\t\t\t\t\tparent : parent_path,\n\t\t\t\t\tlabel : input.label,\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tref : input.ref,\n\t\t\t\t\tis_title : input.is_title,\n\t\t\t\t\tentry_key : key_value,\n\t\t\t\t\ttype : input.type,\n\t\t\t\t\tis_data_synced : 0,\n\t\t\t\t\tis_media_synced : 0,\n\t\t\t\t\tis_remote : 0,\n\t\t\t\t\tcreated_on : created_on\n\t\t\t\t});\n\n\t\t\t}//for each input\n\n\t\t\t//EC.Notification.showProgressDialog();\n\n\t\t\tconsole.log(\"rows: \" + JSON.stringify(rows));\n\n\t\t\t//save/update values to database\n\t\t\tif (window.localStorage.edit_mode) {\n\n\t\t\t\t$.when(EC.Update.updateHierarchyEntryValues(rows)).then(function() {\n\n\t\t\t\t\t//TODO: check this\n\t\t\t\t\t//set selected key value in localStorage to show list of values later\n\t\t\t\t\t//window.localStorage.entry_key = key_value;\n\n\t\t\t\t\t//check if we came to the editing from a child form list or selecting the top form and going through the whole sequence\n\t\t\t\t\tif (window.localStorage.is_child_form_nav) {\n\n\t\t\t\t\t\t//TODO\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.localStorage.back_nav_url = window.localStorage.back_edit_nav_url;\n\t\t\t\t\t}\n\n\t\t\t\t\t//if it is a nested form, keep track of its parent and save it in localStorage\n\t\t\t\t\tif (key_value !== parent_path) {\n\n\t\t\t\t\t\tvar parent_path_array = parent_path.split(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n\t\t\t\t\t\tparent_path_array.pop();\n\t\t\t\t\t\twindow.localStorage.parent_path = parent_path_array.join(EC.Const.ENTRY_ROOT_PATH_SEPARATOR);\n\t\t\t\t\t}\n\n\t\t\t\t\tEC.Inputs.renderStoreEditFeedback(true);\n\t\t\t\t}, function() {\n\t\t\t\t\tEC.Inputs.renderStoreEditFeedback(false);\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\t//insert form values, on success/fail show feedback\n\t\t\t\t$.when(EC.Create.insertFormValues(rows, key_value)).then(function(main_form_entry_key) {\n\t\t\t\t\tEC.Inputs.prepareFeedback(true, main_form_entry_key);\n\t\t\t\t}, function() {\n\t\t\t\t\tEC.Inputs.prepareFeedback(false, null);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = (function (module) {\n    'use strict';\n\n    module.prepareStoreEdit = function (the_current_position, the_input, the_ctx) {\n\n        var clone_value = '';\n        var validation = {};\n        var form_has_jumps;\n        var current_value;\n        var current_position = the_current_position;\n        var input = the_input;\n        var self = the_ctx;\n\n        //disable to avoid double submit\n        $(this).addClass('ui-disabled');\n\n        form_has_jumps = window.localStorage.form_has_jumps;\n\n        //get input value(based on input type and layout)\n        current_value = EC.Inputs.getCurrentValue(input.type);\n        current_position = window.localStorage.current_position;\n\n        //if we need to check for a double entry, get clone value\n        if (parseInt(input.has_double_check, 10) === 1) {\n\n            clone_value = EC.Inputs.getCloneValue(input.type);\n\n        }\n\n        //validate input before going to next page\n        validation = EC.Utils.isValidValue(input, current_value, clone_value);\n\n        //check if the editing is valid\n        if (!validation.is_valid) {\n            //warn user about the type of error\n            EC.Notification.showAlert('Error', validation.message);\n\n            //re-enable button to allow user to try again\n            $(this).removeClass('ui-disabled');\n            return;\n        }\n\n        //cache current value in localStorage\n        EC.Inputs.setCachedInputValue(current_value, current_position, input.type, input.is_primary_key);\n\n        //If this form has jump, edit the input_values array to set to _skipp3d_ all the values which are not part of the input_trail array\n        //todo the above is wrong, we need to force the user to go to the end of the form when modifying a form with jumps, reviewing the inputs he just entered\n        // (he can press 'next' over and over) -> quick and dirty solution would be disabling the on-screen store edit so the user needs to go to the end of the form, but only when he made a change to an input with a jump\n        // if (form_has_jumps === '1') {\n\n        //add current element on the view to inputs trail (as we are not tapping next)\n        EC.Inputs.pushInputsTrail(input);\n\n        //amend values skipped by the new jump sequence when editing\n        //   EC.Inputs.amendSkippedValues();\n        // }\n\n        //store data.\n        self.storeData(self);\n\n    };\n\n    return module;\n}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.saveValuesOnExit = function(the_current_input) {\n\n\t\t\tvar self = this;\n\t\t\tvar current_input = the_current_input;\n\t\t\t//get current value from th einput currently on screen\n\t\t\tvar current_value = self.getCurrentValue(current_input.type);\n\t\t\tvar current_position = parseInt(window.localStorage.current_position, 10);\n\t\t\tvar validation = self.validateValue(current_input, current_value, current_position);\n\n\t\t\t//back to same screen if invalid value\n\t\t\tif (!validation.is_valid) {\n\t\t\t\t//warn user about the type of error\n\t\t\t\tEC.Notification.hideProgressDialog();\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(validation.message));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//cache current value in localStorage\n\t\t\tself.setCachedInputValue(current_value, current_position, current_input.type, current_input.is_primary_key);\n\t\t\tself.pushInputsTrail(current_input);\n\n\t\t\tself.onStoreValues();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = (function (module) {\n    \"use strict\";\n\n    module.storeData = function (the_ctx) {\n\n        //get context\n        var self = the_ctx;\n        var media_files = [];\n\n        var _getCachedMediaFiles = function () {\n\n            var inputs_values = JSON.parse(window.localStorage.inputs_values);\n            var iLength = inputs_values.length;\n            var i;\n            var input;\n            var value;\n\n            var files = [];\n\n            //count how many media files we have to save\n            for (i = 0; i < iLength; i++) {\n\n                //get current value\n                input = EC.Inputs.inputs[i];\n                value = EC.Inputs.getCachedInputValue(input.position).value;\n\n                if (input.type === EC.Const.PHOTO || input.type === EC.Const.VIDEO || input.type === EC.Const.AUDIO) {\n\n                    // If cache path is empty, we do not have a file to save for that input so skip it\n                    if (value.cached !== \"\") {\n                        files.push({\n                            type: input.type,\n                            cached: value.cached,\n                            stored: value.stored,\n                            ref: input.ref\n                        });\n                    }\n                }\n            }\n\n            /*\n             * Now we got all the file paths, so clear DOM from any references\n             * otherwise on editing input some cache/stored file paths could be there and\n             * that causes errors upon saving\n             * as the EC.File.move() mehod will look for non-existent files\n             */\n\n            if (files.length > 0) {\n                //audio\n                $('div#audio div#input-audio input#cached-audio-uri').val('');\n                $('div#audio div#input-audio input#stored-audio-uri').val('');\n            }\n            return files;\n        };\n\n        media_files = _getCachedMediaFiles();\n\n        console.log('media_files.length= ' + media_files.length);\n\n        //Save data directly if no files are found (or we are using Chrome)\n        if (media_files.length === 0 || EC.Utils.isChrome()) {\n\n            self.buildRows();\n\n        }\n        else {\n\n            //save media files, when all are saved trigger buildRows();\n            console.log(JSON.stringify(media_files));\n\n            EC.File.move(media_files);\n        }\n\n    };\n\n    /** @method onStoreValues When the user tap the button to save data,\n     *  check first we have a primary key to save, then take care of skipped (by a\n     * jump) values\n     */\n    module.onStoreValues = function () {\n\n        var self = this;\n\n        //check if the primary key field has a value (there are cases where jumps skip\n        // the primary key field, so warn the user form cannot be saved)\n        if (self.isEmptyPrimaryKey()) {\n            //warn user\n            EC.Notification.hideProgressDialog();\n            EC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"missing_pk\"));\n            return;\n        }\n\n        if (window.localStorage.form_has_jumps === '1') {\n            //amend input values to save, setting the keyword \"_skipp3d_\" to skipped fields\n            self.amendSkippedValues();\n        }\n\n        self.storeData(self);\n    };\n\n    return module;\n\n}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.addBranch = function(the_count, the_input) {\n\n\t\t\tvar obj;\n\t\t\tvar span_label = $('div#branch span.label');\n\t\t\tvar count = the_count;\n\t\t\tvar input = the_input;\n\t\t\tvar project_id = window.localStorage.project_id;\n\t\t\tvar add_branch_btn = $('div#input-branch div#add-branch-btn');\n\t\t\tvar list_branch_entries_btn = $('div#input-branch div#list-branch-entries-btn');\n\t\t\tvar list_entries_count = $('div#input-branch div#list-branch-entries-btn span.branch-entries-count');\n\n\t\t\t//hierarchy_entry_key_value is the current value of the primary key for the form we want to enter branches to\n\t\t\t//var parent_key_position = EC.Inputs.getPrimaryKeyRefPosition();\n\t\t\t//var hierarchy_entry_key_value = EC.Inputs.getMainFormCurrentKeyValue(parent_key_position).value;\n\t\t\tvar branch_form = JSON.parse(window.localStorage.branch_form);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\tvar _addBranchEntry = function() {\n\t\t\t\t//get list of inputs for the branch form and render the first one on screen\n\t\t\t\tEC.BranchInputs.getList(branch_form.name, project_id);\n\t\t\t};\n\n\t\t\tvar _listBranchEntries = function() {\n\t\t\t\tEC.Routing.changePage(EC.Const.BRANCH_ENTRIES_LIST_VIEW);\n\t\t\t};\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\n\t\t\t//attach event handlers (removing old ones to avoid tiggering an event twice)\n\t\t\tadd_branch_btn.off().one('vclick', _addBranchEntry);\n\n\t\t\t//add branch form name as data value to add-branch button\n\t\t\tadd_branch_btn.attr(\"data-branch-form-name\", input.branch_form_name);\n\n\t\t\tif (count > 0) {\n\t\t\t\t//show branch entries on cick\n\t\t\t\tlist_branch_entries_btn.off('vclick').one('vclick', _listBranchEntries);\n\t\t\t\tlist_branch_entries_btn.removeClass(\"ui-disabled\");\n\t\t\t\tlist_branch_entries_btn.find(\"span.branch-entries-count\").text(count);\n\n\t\t\t} else {\n\t\t\t\t//no entries for this branch, disable button and reset counter to empty(0)\n\t\t\t\tlist_branch_entries_btn.addClass(\"ui-disabled\");\n\t\t\t\tlist_entries_count.text(\"\");\n\t\t\t}\n\n\t\t\t//add entries count as a data atttribute to button\n\t\t\tlist_branch_entries_btn.attr(\"data-entries-count\", count);\n\t\t\t\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.InputTypes));\n","/*global $, jQuery, cordova, device, Media, LocalFileSystem*/\n\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = (function (module) {\n    'use strict';\n\n    module.audio = function (the_value, the_input) {\n\n        //to cache dom lookups\n\n        var span_label = $('span.label');\n        var clone = $('div.clone');\n        var value = the_value;\n        var input = the_input;\n        var record_btn = $('div#input-audio div#start-btn');\n        var stop_btn = $('div#input-audio div#stop-btn');\n        var play_btn = $('div#input-audio div#play-btn');\n        var ongoing_recording_spinner = $('div#input-audio div#ongoing-recording-spinner');\n        var audio_feedback = $('div#input-audio p#audio-feedback');\n        var cached_audio_uri = $('div#input-audio input#cached-audio-uri');\n        var stored_audio_uri = $('div#input-audio input#stored-audio-uri');\n        var header_btns = $('div#audio div.ui-header');\n        var current_path;\n        var audio_full_path_uri;\n        var cache_path;\n        var mediaRec;\n        var current_audio;\n\n        //update label text\n        span_label.text(input.label);\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        //attach event handlers (removing old ones to avoid tiggering an event twice)\n        record_btn.off('vclick').one('vclick', recordAudio);\n        stop_btn.off('vclick');\n        play_btn.off('vclick').on('vclick', playAudio);\n\n        //if an audio file is stored add it to hidden input field, to be shown if no\n        // cached value is set\n        if (window.localStorage.edit_mode && value.stored === undefined) {\n\n            stored_audio_uri.val(value);\n            value = {\n                cached: '',\n                stored: value\n            };\n\n        }//if\n\n        //toggle 'play' button only if we have a file to play\n        if (!value.cached) {\n\n            if (value.stored) {\n\n                play_btn.removeClass('ui-disabled');\n\n                //build full path to get audio file from private app folder (depending on\n                // platform)\n                switch (window.device.platform) {\n                    case EC.Const.ANDROID:\n                        audio_full_path_uri = EC.Const.ANDROID_APP_PRIVATE_URI + EC.Const.AUDIO_DIR + window.localStorage.project_name + '/' + value.stored;\n                        break;\n                    case EC.Const.IOS:\n\n                        audio_full_path_uri = EC.Const.IOS_APP_PRIVATE_URI + EC.Const.AUDIO_DIR + window.localStorage.project_name + '/' + value.stored;\n\n                        break;\n                }\n\n                console.log('audio_full_path_uri: ' + audio_full_path_uri);\n\n                current_path = audio_full_path_uri;\n\n                audio_feedback.text('Audio available');\n\n                console.log('current_path: ' + JSON.stringify(audio_full_path_uri));\n\n            }\n            else {\n\n                play_btn.addClass('ui-disabled');\n            }\n\n        }\n        else {\n\n            console.log('we have a cached value');\n\n            //we have a cached file to play, current path gets the cached value\n            play_btn.removeClass('ui-disabled');\n            current_path = cached_audio_uri.val();\n\n        }\n\n        console.log('cache_audio_uri: ' + cached_audio_uri.val());\n\n        //add store audio uri cache_path (if any)\n        stored_audio_uri.val(value.stored || '');\n\n        //reset recording buttons\n        record_btn.removeClass('enable');\n        stop_btn.addClass('ui-disabled');\n\n        //request temporary folder from file system based on platform\n        //todo this will probably change with the new Cordova iOS to match Android\n        if (window.device.platform === EC.Const.IOS) {\n\n            window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function (the_file_system) {\n\n                console.log(JSON.stringify(the_file_system));\n                cache_path = the_file_system.root.nativeURL;\n                console.log('nativeURL: ' + cache_path);\n\n\n                /* We need to provide the full path to the tmp folder to record an audio file\n                 *\n                 * iOS 7+ does not want 'file://' in the path to record an audio file\n                 *\n                 * if the path starts with 'file://', error thrown is\n                 * 'Failed to start recording using AvAudioRecorder'\n                 * so it is removed using slice(7);\n                 */\n                cache_path = cache_path.slice(7);\n            }, function (error) {\n                console.log(JSON.stringify(error));\n            });\n\n        }\n        else {\n            //Android only getting public cache directory\n            window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, function (the_file_system) {\n\n                console.log(JSON.stringify(the_file_system));\n                cache_path = the_file_system.nativeURL;\n                console.log('nativeURL: ' + cache_path);\n\n            }, function (error) {\n                console.log(JSON.stringify(error));\n            });\n        }\n\n\n        //record audio\n        function recordAudio(e) {\n\n            var filename;\n\n            //disable navigation buttons while recording\n            header_btns.addClass('ui-disabled');\n\n            //disable player buttons while recording\n            stop_btn.removeClass('ui-disabled');\n            stop_btn.one('vclick', stopRecordAudio);\n            record_btn.addClass('ui-disabled');\n            play_btn.addClass('hidden');\n            ongoing_recording_spinner.removeClass('hidden');\n\n            //if the current path is not set yet, we are definitely recording a new audio\n            // file\n            if (!current_path) {\n                current_path = cache_path + EC.Utils.generateAudioFileName();\n            }\n            else {\n\n                /* we have a current path, is it a saved file or cached?\n                 * if it is a saved file, we have to replace the current path with the new\n                 * recording\n                 * path , pointing to the cache folder. This is to replace the existing stored\n                 * audio file with the new recording, so the new cached file will override the\n                 * stored file when saving the entry\n                 */\n                if (EC.Utils.isAudioFileStored(cache_path, current_path)) {\n                    current_path = cache_path + EC.Utils.generateAudioFileName();\n                }\n            }\n\n            console.log('Recording... - Full path: ' + current_path);\n\n            mediaRec = new Media(current_path,\n\n                // success callback\n                function onRecordingSuccess() {\n\n                    play_btn.removeClass('ui-disabled');\n                    audio_feedback.text('Audio available');\n                    console.log('recordAudio():Audio Success');\n\n                    cached_audio_uri.val(current_path);\n\n                    console.log('current_path: ' + current_path);\n\n                },\n\n                // error callback\n                function onRecordingError(err) {\n                    console.log('recordAudio():Audio Error: ' + err.code);\n                    console.log('recordAudio():Audio Error: ' + JSON.stringify(err));\n                });\n\n            // Record audio\n            mediaRec.startRecord();\n\n            e.preventDefault();\n            e.stopPropagation();\n\n        }//recordAudio\n\n        //stop recording\n        function stopRecordAudio(e) {\n\n            //re-enable navigation buttons\n            header_btns.removeClass('ui-disabled');\n\n            //enable player buttons\n            stop_btn.addClass('ui-disabled');\n            record_btn.removeClass('ui-disabled');\n            play_btn.removeClass('hidden ui-disabled');\n            ongoing_recording_spinner.addClass('hidden');\n\n            record_btn.off().one('vclick', recordAudio);\n\n            //stop recording and release resources\n            mediaRec.stopRecord();\n            mediaRec.release();\n\n            e.preventDefault();\n            e.stopPropagation();\n\n        }\n\n        function stopPlayingAudio(e) {\n\n            console.log('Audio stopped');\n\n            //stop audio and release resources\n            current_audio.stop();\n            current_audio.release();\n\n            //re-enable navigation buttons\n            header_btns.removeClass('ui-disabled');\n\n            //re-enable player buttons\n            stop_btn.off().one('vclick', stopRecordAudio);\n            stop_btn.addClass('ui-disabled');\n            record_btn.removeClass('ui-disabled');\n            play_btn.removeClass('ui-disabled');\n\n        }\n\n        //play the audio\n        function playAudio() {\n\n            //disable navigation buttons while playing\n            header_btns.addClass('ui-disabled');\n\n            //current_path = cached_audio_uri.val();\n            console.log('Playing... ' + current_path);\n\n            //unbind stopRecordAudio to bind stopPlayingAudio\n            stop_btn.off().one('vclick', stopPlayingAudio);\n            stop_btn.removeClass('ui-disabled');\n            play_btn.addClass('ui-disabled');\n            record_btn.addClass('ui-disabled');\n\n            function onPlayStatusChange(the_status) {\n\n                var status = the_status;\n\n                if (status === 4) {\n\n                    //re-enable navigation buttons\n                    header_btns.removeClass('ui-disabled');\n\n                    //re-enable player buttons\n                    stop_btn.addClass('ui-disabled');\n                    record_btn.removeClass('ui-disabled');\n                    play_btn.removeClass('ui-disabled');\n\n                }\n            }\n\n            current_audio = new Media(current_path, null, null, onPlayStatusChange);\n            current_audio.play();\n\n        }//playAudio\n\n    };\n\n    return module;\n\n}(EC.InputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery, cordova*/\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.barcode = function(the_value, the_input) {\n\n\t\t\t//to cache dom lookups\n\t\t\tvar obj;\n\t\t\tvar span_label = $('div#barcode span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar scanner = $('div#barcode div#scanner');\n\t\t\tvar scanner_confirm = $('div#barcode div#scanner-confirm');\n\t\t\tvar scan_result = $('div#barcode input.scan-result');\n\t\t\tvar scan_result_confirm = $('div#barcode input.scan-result-confirm');\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches\n\t\t\t\t// pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//reset buttons\n\t\t\tscanner.removeClass('ui-disabled');\n\t\t\tscanner_confirm.removeClass('ui-disabled');\n\n\t\t\tscan_result.val(value);\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a\n\t\t\t// primary key or it triggers a jump\n\t\t\tif (window.localStorage.edit_mode && input.is_primary_key === '1') {\n\t\t\t\t//disable scan button\n\t\t\t\tscanner.addClass('ui-disabled');\n\t\t\t\t$('div#input-barcode p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$('div#input-barcode p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate text input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\tscan_result_confirm.val(value);\n\n\t\t\t\tif (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t//disable clone scan button\n\t\t\t\t\tscanner_confirm.addClass('ui-disabled');\n\t\t\t\t}\n\n\t\t\t\t//add event handler to second scan button\n\t\t\t\tscanner_confirm.off().on('vclick', function() {\n\n\t\t\t\t\t//flag needed to handle case when user dismiss the barcode scanner\n\t\t\t\t\twindow.localStorage.is_dismissing_barcode = 1;\n\n\t\t\t\t\tcordova.plugins.barcodeScanner.scan(function(result) {\n\n\t\t\t\t\t\t//do not override value if the scan action is cancelled by the user\n\t\t\t\t\t\tif (!result.cancelled) {\n\t\t\t\t\t\t\tscan_result_confirm.val(result.text);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//add hidden class if missing\n\t\t\t\tclone.addClass('hidden');\n\t\t\t}\n\n\t\t\t//set handlers for scan button\n\t\t\tscanner.off().on('vclick', function() {\n\n\t\t\t\t//flag needed to handle case when user dismiss the barcode scanner\n\t\t\t\twindow.localStorage.is_dismissing_barcode = 1;\n\n\t\t\t\tcordova.plugins.barcodeScanner.scan(function(result) {\n\n\t\t\t\t\tconsole.log(result);\n\n\t\t\t\t\t//do not override value if the scan action is cancelled by the user\n\t\t\t\t\tif (!result.cancelled) {\n\t\t\t\t\t\tscan_result.val(result.text);\n\t\t\t\t\t}\n\n\t\t\t\t}, function(error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t//EC.Notification.showAlert(\"Scanning failed\", error);\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.InputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.checkbox = function(the_value, the_input) {\n\n\t\t\t//to cache dom lookups\n\t\t\tvar obj;\n\t\t\tvar span_label = $('div#checkbox span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar CHECKBOX_CHECKED = \"\";\n\t\t\tvar DISABLED = \"\";\n\t\t\tvar SELECTED = \"\";\n\t\t\tvar HTML = \"\";\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\t\t\t} else {\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key or it triggers a jump\n\t\t\tif (window.localStorage.edit_mode && (input.is_primary_key === '1' || input.has_jump === '1')) {\n\t\t\t\tDISABLED = 'disabled=\"disabled\"';\n\t\t\t}\n\n\t\t\t//display all checkboxes options\n\t\t\t$(input.options).each(function(index) {\n\n\t\t\t\tvar name = \"choice\";\n\t\t\t\tvar option_value = this.value.trim();\n\t\t\t\tvar option_label = this.label.trim();\n\t\t\t\tvar option_id = 'checkbox-choice-' + (index + 1);\n\t\t\t\tvar i;\n\t\t\t\tvar iLength = value.length;\n\n\t\t\t\t//check if we have any value stored. For checkboxes, 'value' will be an array\n\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t\tCHECKBOX_CHECKED = \"\";\n\t\t\t\t\t//if any match is found, pre-select that checkbox in the markup\n\t\t\t\t\tif (value[i].trim() === option_value) {\n\t\t\t\t\t\tCHECKBOX_CHECKED = 'checked=\"checked\"';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tHTML += '<label>';\n\t\t\t\tHTML += '<input type=\"checkbox\" ' + CHECKBOX_CHECKED + ' ' + DISABLED + ' name=\"' + name;\n\t\t\t\tHTML += '\" id=\"' + option_id;\n\t\t\t\tHTML += '\" value=\"' + option_value;\n\t\t\t\tHTML += '\" data-label=\"' + option_label;\n\t\t\t\tHTML += '\" />' + option_label;\n\t\t\t\tHTML += '</label>';\n\n\t\t\t});\n\n\t\t\tspan_label.append(HTML);\n\t\t\t$('div#input-checkbox').trigger(\"create\");\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.InputTypes));\n","/*jslint vars: true, nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device */\n\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.date = function(the_value, the_input) {\n\n\t\t\tvar datepicker;\n\t\t\tvar ios_datepicker;\n\t\t\tvar span_label = $('span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar datebox_format;\n\t\t\tvar default_date;\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label + \" - \" + input.datetime_format);\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we\n\t\t\t\t// recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//Android Phonegap DatePicker plugin http://goo.gl/xLrqZl\n\t\t\tdatepicker = $('div#input-date input.nativedatepicker');\n\n\t\t\t//iOS uses the HTML5 input type=\"date\"\n\t\t\tios_datepicker = $('div#input-date input.ios-date');\n\n\t\t\t//hide immediate ios date input parent (JQM quirk, this is to hide the div\n\t\t\t// element border wrapping the input after JQM enhanced the markup)\n\t\t\tios_datepicker.parent().addClass(\"no-border\");\n\n\t\t\t/* Set current date in custom data attribute.\n\t\t\t * Important: since Epicollect+  for some bizzarre reason does not store the\n\t\t\t * timestamps yet, but a formatted date,\n\t\t\t * it is impossible to trigger the datapicker to the right data/time value after\n\t\t\t * a saving, as the timestamp is lost\n\t\t\t * i.e. if I save save 25th march 1988 just as 25/3, I will never get the year\n\t\t\t * back :/ and it will default to the current date\n\t\t\t * TODO: save date and time values with a timestamp attached\n\t\t\t */\n\n\t\t\tdatepicker.attr(\"data-raw-date\", new Date());\n\n\t\t\t/*show default date if input.value = input.datetime_format:\n\t\t\t *if the option to show the current date as default is selected in the web form\n\t\t\t * builder,\n\t\t\t * the input value gets the value of datetime_format when parsing the xml\n\t\t\t */\n\t\t\tif (value === input.datetime_format) {\n\t\t\t\tdatepicker.val(EC.Utils.parseDate(new Date(), input.datetime_format));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdatepicker.val(value);\n\t\t\t}\n\n\t\t\t/*****************************************************************************************\n\t\t\t * Android uses the Phonegap official DatePicker plugin\n\t\t\t ****************************************************************************************/\n\t\t\tif (window.device.platform === EC.Const.ANDROID) {\n\n\t\t\t\t/* bind input to 'vclick' insted of focus, as we set the input as readonly.\n\t\t\t\t * this solved problem on android 2.3 where the keyboard was showing because the\n\t\t\t\t * input is in focus when tapping \"cancel\"\n\t\t\t\t * on the DatePicker popup\n\t\t\t\t */\n\t\t\t\tdatepicker.off().on('vclick', function(event) {\n\n\t\t\t\t\tvar datepicker = $(this);\n\t\t\t\t\tvar selected_date = new Date(datepicker.attr(\"data-raw-date\"));\n\n\t\t\t\t\t//use debouncing/throttling to avoid triggering multiple `focus` event\n\t\t\t\t\t// http://goo.gl/NFdHDW\n\t\t\t\t\tvar now = new Date();\n\t\t\t\t\tvar lastFocus = datepicker.data(\"lastFocus\");\n\t\t\t\t\tif (lastFocus && (now - lastFocus) < 500) {\n\t\t\t\t\t\t// Don't do anything\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdatepicker.data(\"lastFocus\", now);\n\n\t\t\t\t\t// Same handling for iPhone and Android\n\t\t\t\t\twindow.plugins.datePicker.show({\n\t\t\t\t\t\tdate : selected_date,\n\t\t\t\t\t\tmode : 'date', // date or time or blank for both\n\t\t\t\t\t\tallowOldDates : true\n\t\t\t\t\t}, function(returned_date) {\n\n\t\t\t\t\t\tvar new_date;\n\n\t\t\t\t\t\tif (returned_date !== undefined) {\n\t\t\t\t\t\t\tnew_date = new Date(returned_date);\n\n\t\t\t\t\t\t\tdatepicker.val(EC.Utils.parseDate(new_date, input.datetime_format));\n\t\t\t\t\t\t\tdatepicker.attr(\"data-raw-date\", new_date);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// This fixes the problem you mention at the bottom of this script with it not\n\t\t\t\t\t\t// working a second/third time around, because it is in focus.\n\t\t\t\t\t\tdatepicker.blur();\n\t\t\t\t\t});\n\n\t\t\t\t\t// This fixes the problem you mention at the bottom of this script with it not\n\t\t\t\t\t// working a second/third time around, because it is in focus.\n\t\t\t\t\tdatepicker.blur();\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\t/*****************************************************************************************\n\t\t\t * iOS uses the official HTML5 input type=\"date\"\n\t\t\t ****************************************************************************************/\n\t\t\tif (window.device.platform === EC.Const.IOS) {\n\n\t\t\t\tdatepicker.off().on('vclick', function(event) {\n\t\t\t\t\tios_datepicker.focus();\n\t\t\t\t});\n\n\t\t\t\tios_datepicker.off().on('blur', function(event) {\n\n\t\t\t\t\tvar ios_date = ios_datepicker.val();\n\n\t\t\t\t\tdatepicker.val(EC.Utils.parseIOSDate(ios_date, input.datetime_format));\n\t\t\t\t\tdatepicker.attr(\"data-raw-date\", ios_date);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.InputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\n        \"use strict\";\n\n        module.decimal = function(the_value, the_input) {\n\n            //to cache dom lookups\n            var obj;\n            var span_label = $('span.label');\n            var clone = $('div.clone');\n            var double_entry;\n            var value = the_value;\n            var input = the_input;\n            // var ios_decimal_part = $(\"div#input-decimal\n            // input#decimal-for-ios\");\n            var min_range = $('span.min-range');\n            var max_range = $('span.max-range');\n\n            //update label text\n            span_label.text(input.label);\n\n            //Localise\n            if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n                EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n            }\n\n            //Add attribute to flag the primary key input field\n            if (parseInt(input.is_primary_key, 10) === 1) {\n\n                span_label.attr('data-primary-key', 'true');\n\n            } else {\n\n                //reset the attribute to empty if not a primary key (JQM caches\n                // pages and we recycle views)\n                span_label.attr('data-primary-key', '');\n            }\n\n            //check if we need to replicate this input\n            double_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n            //re-enable input if needed\n            $('div#input-decimal input').removeAttr('disabled');\n\n            if (window.device.platform === EC.Const.IOS) {\n\n                /**\n                 * Trigger numeric keyboard with added key for comma or dot on\n                 * iOS\n                 * This will still bring the full keyboard but in the\n                 * number/symbol pane be default.\n                 * The user can still switch to alphanumeric BUT upon onblur\n                 * event,\n                 * the pattern kicks in and removes any alphanumeric characters\n                 * (but not numbers).\n                 */\n                //$('div#input-decimal input').attr(\"pattern\", \"\\d+(\\.\\d*)?\");\n\n            }\n\n            //hide elements not needed\n            clone.addClass('hidden');\n            min_range.addClass('hidden');\n            max_range.addClass('hidden');\n\n            if (double_entry) {\n\n                //duplicate textarea input\n                clone.removeClass('hidden');\n                $('div.clone input').val(value);\n\n                //if in editing mode, do not allow changes either if the field is\n                // a primary key or it triggers a jump\n                if (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\n                    $('div.clone input').attr('disabled', 'disabled');\n                }\n\n            }\n\n            //show min range if any\n            if (input.min_range !== \"\") {\n\n                min_range.removeClass('hidden');\n                min_range.text('Min: ' + input.min_range);\n\n            }\n\n            //show max range if any\n            if (input.max_range !== \"\") {\n\n                max_range.removeClass('hidden');\n                max_range.text('Max: ' + input.max_range);\n\n            }\n\n            $('div#input-decimal input').val(value);\n\n            //if in editing mode, do not allow changes either if the field is a\n            // primary key\n            if (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\n                $('div#input-decimal input').attr('disabled', 'disabled');\n                $('div#input-decimal p.primary-key-not-editable').removeClass(\"hidden\");\n            } else {\n                $('div#input-decimal p.primary-key-not-editable').addClass(\"hidden\");\n            }\n\n        };\n\n        return module;\n\n    }(EC.InputTypes));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\n        \"use strict\";\n\n        module.dropdown = function(the_value, the_input) {\n\n            var obj;\n            var span_label = $('div#select span.label');\n            var clone = $('div.clone');\n            var double_entry;\n            var value = the_value;\n            var input = the_input;\n            var DISABLED = \"\";\n            var SELECTED = \"\";\n            var HTML = \"\";\n\n            //update label text\n            span_label.text(input.label);\n\n            //Localise\n            if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n                EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n            }\n\n            //Add attribute to flag the primary key input field\n            if (parseInt(input.is_primary_key, 10) === 1) {\n                span_label.attr('data-primary-key', 'true');\n            } else {\n                //reset the attribute to empty if not a primary key (JQM caches\n                // pages and we recycle views)\n                span_label.attr('data-primary-key', '');\n            }\n\n            //check if we need to replicate this input\n            double_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n            //if in editing mode, do not allow changes either if the field is a\n            // primary key or it triggers a jump\n            if (window.localStorage.edit_mode && (input.is_primary_key === '1' || input.has_jump === '1')) {\n                DISABLED = 'disabled=\"disabled\"';\n            }\n\n            //set the cached value as the selcted option\n            SELECTED = (value === \"\") ? 'selected' : \"\";\n\n            //TODO: check markup on jqm docs for select. Fastclick: is needclick\n            // needed?\n            HTML += '<select id=\"selection\" name=\"selection\" data-native-menu=\"true\" >';\n            HTML += '<option value =\"0\"' + SELECTED + ' data-index=\"0\">';\n            HTML += EC.Localise.getTranslation(EC.Const.NO_OPTION_SELECTED);\n            HTML += '</option>';\n\n            $(input.options).each(function(index) {\n\n                var option_value = this.value;\n                var option_index = (index + 1);\n                var option_label = this.label;\n                var option_id = 'select-choice-' + (index + 1);\n\n                //check if we have a value cached and pre-select that input\n                SELECTED = (value === option_value) ? 'selected' : \"\";\n\n                HTML += '<option ' + SELECTED + ' ' + DISABLED + ' value =\"' + option_value + '\" data-index=\"' + option_index + '\">' + option_label + '</option>';\n\n            });\n\n            HTML += '</select>';\n\n            span_label.append(HTML);\n            $('div#input-dropdown').trigger(\"create\");\n\n            /*****************************************************************************************************\n             *\tFollowing code is a hack to make the select native widget work on\n             * Android 4.4.2 (Nexus 5)\n             */\n            //Add needclick to all the markup as Fastclick is interfering and the\n            // native popup with the list of options is never triggered\n            // $(\"div#input-dropdown\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-select\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn\n            // span.ui-btn-inner\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn span.ui-btn-inner\n            // span.ui-btn-text\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn span.ui-btn-inner\n            // span.ui-btn-text span\").addClass(\"needsclick\");\n            // $(\"div#input-dropdown div.ui-btn span.ui-btn-inner\n            // span.ui-icon\").addClass(\"needsclick\");\n\n            //Manually trigger a click on a select element. Best solution I came\n            // across\n            $(\"select\").on('vmousedown', function(e) {\n                $(this).focus().click();\n            });\n\n            /*****************************************************************************************************\n             * End hack\n             */\n\n        };\n\n        return module;\n\n    }(EC.InputTypes));\n","var EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.integer = function(the_value, the_input) {\n\n\t\t\tvar obj;\n\t\t\tvar span_label = $('span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = parseInt(the_value, 10);\n\t\t\tvar input = the_input;\n\t\t\tvar min_range = $('span.min-range');\n\t\t\tvar max_range = $('span.max-range');\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\t\t\t} else {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) == 1);\n\n\t\t\t//trigger numeric keyboard on iOS\n\t\t\tif (window.device.platform === EC.Const.IOS) {\n\t\t\t\t$('div#input-integer input').attr('pattern', '[0-9]*');\n\t\t\t}\n\n\t\t\t//hide elements not needed\n\t\t\tclone.addClass('hidden');\n\t\t\tmin_range.addClass('hidden');\n\t\t\tmax_range.addClass('hidden');\n\n\t\t\t//check if we need to render a double entry for this input\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate integer input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\t$('div.clone input').val(value  = isNaN(value) ? \"\" : value);\n\n\t\t\t\t//if in editing mode, do not allow changes either if the field is a primary key\n\t\t\t\tif (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t$('div.clone input').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t//show min range if any\n\t\t\tif (input.min_range !== \"\") {\n\n\t\t\t\tmin_range.removeClass('hidden');\n\t\t\t\tmin_range.text('Min: ' + input.min_range);\n\n\t\t\t}\n\n\t\t\t//show max range if any\n\t\t\tif (input.max_range !== \"\") {\n\n\t\t\t\tmax_range.removeClass('hidden');\n\t\t\t\tmax_range.text('Max: ' + input.max_range);\n\n\t\t\t}\n\n\t\t\t$('div#input-integer input').val(value  = isNaN(value) ? \"\" : value);\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key\n\t\t\tif (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\t\t\t\t$('div#input-integer input').attr('disabled', 'disabled');\n\t\t\t\t$('div#input-integer p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t} else {\n\t\t\t\t//re-enable input if needed\n\t\t\t\t$('div#input-integer input').removeAttr('disabled');\n\t\t\t\t$('div#input-integer p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.InputTypes));\n","/*global $, jQuery*/\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = (function (module) {\n    'use strict';\n\n    var self;\n\n    module.location = function (the_value, the_input) {\n\n        var span_label = $('span.label');\n        var value = the_value;\n        var input = the_input;\n        var set_location_btn = $('div#location div#input-location div#set-location');\n        var textarea_coords = $('textarea#coords');\n        var accuracy_result = $('div#location  div#input-location div.current-accuracy-result');\n        var accuracy_tip = $('div#location  div#input-location div.location-accuracy-tip');\n        var map_canvas = $('div#location div#input-location div#map-canvas');\n        var cached_coords = [];\n\n        self = this;\n        //update label text\n        span_label.text(input.label);\n\n        //Localise text\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        //hide feedback when showing the view the first time\n        accuracy_result.addClass('hidden');\n        accuracy_tip.addClass('hidden');\n        map_canvas.addClass('hidden');\n\n        //get a rough location when the view is first loaded (no value set yet)\n        if (value === '') {\n            EC.Notification.showProgressDialog('Wait', 'Locating...');\n            $.when(EC.DevicePosition.getCurrentPosition()).then(function () {\n\n                $(accuracy_result).find('span').text(Math.floor(EC.DevicePosition.coords.accuracy));\n                $(accuracy_result).removeClass('hidden');\n                $(accuracy_tip).removeClass('hidden');\n\n                //if the user wants to use the enhanced map, load Google Maps APi (it returns immediately if already loaded on app cold start)\n                if (EC.DevicePosition.is_enhanced_map_on()) {\n\n                    map_canvas.removeClass('hidden');\n                    textarea_coords.addClass('hidden');\n\n                    $.when(EC.DevicePosition.loadGoogleMapsApi()).then(function () {\n                        $.when(EC.DevicePosition.initGoogleMap()).then(function () {\n                            EC.Notification.hideProgressDialog();\n                        });\n                    }, function () {\n\n                        //loading Google Maps Api failed, show standard view, warn user and rever back to standard mode\n                        window.localStorage.is_enhanced_map_on = 0;\n\n                        EC.Notification.showAlert('Sorry...', 'Google Maps failed to load, reverting to standard mode');\n                        textarea_coords.val(EC.DevicePosition.getCoordsFormattedText()).removeClass('hidden');\n                        map_canvas.addClass('hidden');\n                        EC.Notification.hideProgressDialog();\n                    });\n                }\n                else {\n                    //show standard view\n                    textarea_coords.val(EC.DevicePosition.getCoordsFormattedText());\n                    $(textarea_coords).removeClass('hidden');\n                    EC.Notification.hideProgressDialog();\n                }\n            }, function (error) {\n                EC.Notification.hideProgressDialog();\n                EC.Notification.showToast('Could not locate', 'long');\n            });\n        }\n        else {\n\n            accuracy_result.find('span').text(Math.floor(EC.Utils.parseLocationString(value).accuracy));\n            accuracy_result.removeClass('hidden');\n            accuracy_tip.removeClass('hidden');\n\n\n            //set previous location value if any\n            if (EC.DevicePosition.is_enhanced_map_on()) {\n\n                //deal with enhanced maps\n                map_canvas.removeClass('hidden');\n                textarea_coords.addClass('hidden');\n\n                //if the cached coords are the same, the user is navigating back and forth the inputs only, so do not update the map\n\n                //set coords in DevicePosition object to set google maps to that value before initialising map\n                cached_coords = EC.Utils.parseLocationString(value);\n                if (cached_coords.latitude === EC.DevicePosition.coords.latitude && cached_coords.longitude === EC.DevicePosition.coords.longitude) {\n\n                    //todo: same position, do not update. If we are editing, create a map and set position\n                }\n                else {\n\n                    //todo different position, update marker, circle and bounds using existing map object if any, or create it\n                    console.log('map needs to be updated');\n                }\n\n\n                //$.when(EC.DevicePosition.loadGoogleMapsApi()).then(function () {\n                //    $.when(EC.DevicePosition.initGoogleMap()).then(function () {\n                //        window.google.maps.event.trigger(EC.DevicePosition.map, 'resize');\n                //        EC.DevicePosition.map.setZoom(EC.DevicePosition.map.getZoom());\n                //        EC.Notification.hideProgressDialog();\n                //    });\n                //}, function () {\n                //    //loading Google Maps Api failed, show standard view\n                //    //todo alert user google maps failed to load\n                //    textarea_coords.val(EC.DevicePosition.getCoordsFormattedText()).removeClass('hidden');\n                //    map_canvas.addClass('hidden');\n                //    EC.Notification.hideProgressDialog();\n                //});\n\n                EC.Notification.hideProgressDialog();\n\n            } else {\n                textarea_coords.val(value);\n                $(textarea_coords).removeClass('hidden');\n                EC.Notification.hideProgressDialog();\n            }\n        }\n\n        //todo strings need to be translated\n        function _showAcquiredLocation(has_got_location) {\n\n            accuracy_result.removeClass('hidden');\n            accuracy_tip.removeClass('hidden');\n\n            if (has_got_location) {\n\n                $(accuracy_result).find('span').text(Math.floor(EC.DevicePosition.coords.accuracy));\n\n                if (EC.DevicePosition.is_enhanced_map_on()) {\n\n                    map_canvas.removeClass('hidden');\n                    textarea_coords.addClass('hidden');\n\n                    //update enhanced view\n                    EC.DevicePosition.current_position = new google.maps.LatLng(EC.DevicePosition.coords.latitude, EC.DevicePosition.coords.longitude);\n\n                    //update marker position\n                    EC.DevicePosition.marker.setPosition(EC.DevicePosition.current_position);\n\n                    //update accuracy circle\n                    EC.DevicePosition.circle.setOptions({\n                        center: EC.DevicePosition.current_position,\n                        radius: EC.DevicePosition.coords.accuracy\n                    });\n                }\n                else {\n                    //standar view\n                    textarea_coords.val(EC.DevicePosition.getCoordsFormattedText());\n                }\n            }\n            else {\n                //set location object to empty values\n                if (EC.DevicePosition.is_enhanced_map_on()) {\n\n                    //todo what about google maps -> hide map canvas?\n                }\n                else {\n                    textarea_coords.val(EC.DevicePosition.getCoordsEmptyText());\n                }\n\n            }\n\n            if (!EC.Utils.isChrome()) {\n                EC.Notification.showToast(EC.Localise.getTranslation('location_acquired'), 'short');\n            }\n\n            set_location_btn.one('vclick', _handleSetLocation);\n            EC.Notification.hideProgressDialog();\n        }\n\n        var _handleSetLocation = function () {\n\n            set_location_btn.off('vclick');\n\n            //check id GPS is enabled on the device\n            //todo check if it on when we start watch position\n            $.when(EC.Utils.isGPSEnabled()).then(function () {\n\n                //gps is on\n                EC.Notification.showProgressDialog(EC.Localise.getTranslation('locating'), EC.Localise.getTranslation('wait'));\n\n                //On Android, mostly on old devices, halt the execution to solve loader spinner not hiding after a gps lock\n                if (window.device.platform === EC.Const.ANDROID) {\n                    //if the device is older than KitKat I assume it is slow to hide the spinning loader and I need the execution halt to clear race conditions\n                    if (!(EC.Const.KITKAT_REGEX.test(window.device.version) || EC.Const.LOLLIPOP_REGEX)) {\n                        EC.Utils.sleep(2000);\n                    }\n                }\n\n                //has the device a good connection?(showing maps and then lost the connection for some reasons? revert to standard view then)\n                if (!EC.Utils.hasGoodConnection()) {\n                    window.localStorage.is_enhanced_map_on = 0;\n                }\n\n\n                $.when(EC.DevicePosition.watchPosition()).then(function (response) {\n                    _showAcquiredLocation(response);\n                });\n\n            }, function () {\n                console.log('gps NOT enabled');\n                //no gps...do we have at least an internet connection?\n                //TODO: replace with location services network\n                EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('gps_disabled'));\n            });\n\n        };\n\n        //bind set location button\n        set_location_btn.off().one('vclick', _handleSetLocation);\n\n    };\n\n    return module;\n\n}(EC.InputTypes));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, Camera*/\n\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = (function (module) {\n    'use strict';\n\n    var app_storage_dir;\n\n    module.photo = function (the_value, the_input) {\n\n\n        var span_label = $('span.label');\n        var value = the_value;\n        var input = the_input;\n        var camera_btn = $('div#input-photo div#camera-btn');\n        var store_image_uri = $('div#input-photo input#stored-image-uri');\n        var cache_image_uri = $('div#input-photo input#cached-image-uri');\n        var image_full_path_uri;\n\n        //clear canvas from previous images\n        var canvas_portrait_dom = $('#canvas-portrait');\n        var canvas_landscape_dom = $('#canvas-landscape');\n        var canvas_portrait = $('#canvas-portrait')[0];\n        var canvas_landscape = $('#canvas-landscape')[0];\n\n        var context_portrait = canvas_portrait.getContext('2d');\n        context_portrait.clearRect(0, 0, canvas_portrait.width, canvas_portrait.height);\n\n        var context_landscape = canvas_landscape.getContext('2d');\n        context_landscape.clearRect(0, 0, canvas_landscape.width, canvas_landscape.height);\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        // //on iOS, close image popup on orientation change\n        if (EC.Const.IOS) {\n            //TODO\n        }\n\n        $('div#canvas-wrapper').off().on('vclick', function (e) {\n\n            var href = $('div#input-photo input#cached-image-uri').val();\n            var iOS_popup = $('#photo-popup');\n\n            console.log(href);\n\n            //if cached image url is empty, get stored image url\n            if (href === '') {\n                href = app_storage_dir + $('div#input-photo input#stored-image-uri').val();\n            }\n\n            if (window.device) {\n                switch (window.device.platform) {\n\n                    //on Android we show the image as a opo up using swipebox\n                    case EC.Const.ANDROID:\n                        e.preventDefault();\n                        $.swipebox([{\n                            href: href\n                        }]);\n                        break;\n\n                    //on iOS we show a built in JQM popup, as swipebox has\n                    // got issues\n                    case EC.Const.IOS:\n                        iOS_popup.find('img').attr('src', href);\n\n                        /*\n                         * let's use a timeout otherwise the popup is not\n                         * centered on the first tap, because the\n                         * image is not loaded. Not the prettiest solution,\n                         * but since the image is loaded locally\n                         * and always the same size, I can assume 100 ms will\n                         * work everytime on iPhones\n                         *\n                         * see here\n                         * http://stackoverflow.com/questions/21304763/jquery-mobile-popup-not-centered-on-first-click\n                         *\n                         */\n\n                        window.setTimeout(function () {\n                            iOS_popup.popup('open');\n                        }, 100);\n\n                        $(window).on('orientationchange', function (event) {\n                            console.log('called orientationchange');\n\n                            //close popup, as it is not scaled/positioned\n                            // properly\n                            iOS_popup.popup('close');\n                        });\n\n                        break;\n                }\n\n            }\n\n        });\n\n        //Render thumbnail on <canvas>\n        var _renderThumb = function (the_image_uri) {\n\n            //load taken image on <canvas> tag\n            var image = new Image();\n            var canvas;\n            var context;\n            var source = the_image_uri;\n\n            /**Attach a timestamp to the source URI to make the UIWebView\n             * refresh the cache\n             * and request a new image otherwise old images are loaded (iOS\n             * quirk)\n             * The same thing happens on a browser. On Android this does not\n             * happen\n             * because the image URI is saved using the timestamp as filename\n             * directly (good choice)\n             *\n             * Anyway, when editing and replacing the image with a new one the saved url does\n             * not change, so we need to force a refresh on all platforms\n             */\n            source += '?' + parseInt(new Date().getTime() / 1000, 10);\n\n            image.src = source;\n\n            image.onerror = function () {\n                console.log('Image failed!');\n            };\n\n            image.onload = function () {\n\n                //TODO:resize image to fit in canvas -> it is not working\n                // properly!\n                console.log('on load called');\n                var width = this.width;\n                var height = this.height;\n                var thumb_height;\n                var thumb_width;\n                var canvas;\n\n                if (height > width) {\n\n                    //portrait\n                    canvas = canvas_portrait;\n                    thumb_width = 188;\n                    thumb_height = 250;\n                    canvas_landscape_dom.addClass('hidden');\n                    canvas_portrait_dom.removeClass('hidden');\n\n                }\n                else {\n\n                    //landscape\n                    canvas = canvas_landscape;\n                    thumb_width = 250;\n                    thumb_height = 188;\n                    canvas_portrait_dom.addClass('hidden');\n                    canvas_landscape_dom.removeClass('hidden');\n                }\n\n                context = canvas.getContext('2d');\n                context.clearRect(0, 0, canvas.width, canvas.height);\n                context.save();\n\n                //scale image based on device pixel density\n                // context.scale(window.devicePixelRatio,\n                // window.devicePixelRatio);\n                context.imageSmoothingEnabled = false;\n                context.drawImage(this, 0, 0, thumb_width, thumb_height);\n                context.restore();\n\n            };\n            //image.onload\n\n            console.log(JSON.stringify(source));\n\n        };\n\n        //hide both canvas\n        canvas_landscape_dom.addClass('hidden');\n        canvas_portrait_dom.addClass('hidden');\n\n        //update label text\n        span_label.text(input.label);\n\n        //if a value is stored when editing, on the first load add it to\n        // hidden input field,  to be shown if no cached value is set\n        if (window.localStorage.edit_mode) {\n\n            if (value.stored === undefined) {\n                store_image_uri.val(value);\n                value = {\n                    cached: '',\n                    stored: value\n                };\n            }\n            else {\n\n                store_image_uri.val(value.stored);\n            }\n\n        }\n        else {\n            //clear any previous stored path in the DOM, otherwise it get cached and it causes the same image to be overriden when adding a new entry\n            store_image_uri.val('');\n        }\n\n        console.log('value.stored ' + JSON.stringify(value.stored));\n\n        //If a cache value is set, add it to hidden field\n        cache_image_uri.val(value.cached || '');\n        console.log('cache_image_uri: ' + cache_image_uri.val());\n\n        //Show cached image if any, otherwise the stored image, if any\n        if (value.cached === '') {\n\n            console.log('cached value empty');\n\n            if (value.stored !== '') {\n\n                //build full path to get image from private app folder\n                switch (window.device.platform) {\n\n                    case EC.Const.ANDROID:\n                        image_full_path_uri = EC.Const.ANDROID_APP_PRIVATE_URI + EC.Const.PHOTO_DIR + window.localStorage.project_name + '/' + value.stored;\n                        app_storage_dir = EC.Const.ANDROID_APP_PRIVATE_URI + EC.Const.PHOTO_DIR + window.localStorage.project_name + '/';\n                        break;\n                    case EC.Const.IOS:\n                        //prepend 'file://' to load images from iOS\n                        // application directory\n                        image_full_path_uri = 'file://' + EC.Const.IOS_APP_PRIVATE_URI + EC.Const.PHOTO_DIR + window.localStorage.project_name + '/' + value.stored;\n                        app_storage_dir = 'file://' + EC.Const.IOS_APP_PRIVATE_URI + EC.Const.PHOTO_DIR + window.localStorage.project_name + '/';\n                        break;\n\n                }\n\n                console.log('image_full_path_uri: ' + image_full_path_uri);\n\n                _renderThumb(image_full_path_uri);\n\n            }\n\n        }\n        else {\n\n            //render the cached image\n            _renderThumb(value.cached);\n        }\n\n        //Set camera options - anything more than 1024 x 728 will crash\n        var source = Camera.PictureSourceType.CAMERA;\n        var camera_options = {\n            quality: 50, //anything more than this will cause memory leaks\n            destinationType: Camera.DestinationType.FILE_URI,\n            sourceType: source,\n            encodingType: Camera.EncodingType.JPEG,\n            mediaType: Camera.MediaType.PICTURE,\n            correctOrientation: true,\n            saveToPhotoAlbum: false,\n            targetWidth: 1024,\n            targetHeight: 768\n        };\n\n        //open camera app on click\n        camera_btn.off().on('vclick', function () {\n\n            navigator.camera.getPicture(onGPSuccess, onGPError, camera_options);\n\n        });\n\n        //Success callback\n        var onGPSuccess = function (the_image_uri) {\n\n            console.log('image_uri: ' + the_image_uri);\n\n            var image_uri = the_image_uri;\n\n            //render the new image on canvas\n            _renderThumb(image_uri);\n\n            //save cached filename in hidden input field\n            console.log('image uri is' + image_uri);\n\n            $('div#input-photo input#cached-image-uri').val(image_uri);\n\n            // image_src_loaded = false;\n\n        };\n\n        //Error callback\n        var onGPError = function (error) {\n            console.log('Error', 'Failed because: ' + error);\n        };\n    };\n\n    return module;\n\n}(EC.InputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.radio = function(the_value, the_input) {\n\n\t\t\tvar obj;\n\t\t\tvar span_label = $('div#radio div#input-radio span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar old_cached_value;\n\t\t\tvar input = the_input;\n\t\t\tvar HTML = \"\";\n\t\t\tvar RADIO_CHECKED = \"\";\n\t\t\tvar DISABLED = \"\";\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\t\t\t} else {\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//if in editing mode, do not allow changes if the field is a primary key\n\t\t\tif (window.localStorage.edit_mode && parseInt(input.is_primary_key, 10) === 1) {\n\t\t\t\tDISABLED = 'disabled=\"disabled\"';\n\t\t\t}\n\t\t\t\n\t\t\tHTML += '<fieldset data-role=\"controlgroup\">';\n\n\t\t\t//render list of options\n\t\t\t$(input.options).each(function(index) {\n\n\t\t\t\t//increase value by 1, as we use value = 0 when no option is selected (like for select/dropdown) We are using the index as radio jumps are mapped against the index of the value\n\t\t\t\tvar option_value = this.value;\n\t\t\t\tvar option_index = (index + 1);\n\t\t\t\tvar option_label = this.label;\n\t\t\t\tvar option_id = 'radio-choice-' + (index + 1);\n\n\t\t\t\t//pre select an element if the value matches the cached value\n\t\t\t\tRADIO_CHECKED = (value === option_value) ? 'checked=\"checked\"' : \"\";\n\n\t\t\t\tHTML += '<input type=\"radio\" name=\"radio-options\" id=\"' + option_id + '\" value=\"' + option_value + '\"' + RADIO_CHECKED + ' ' + DISABLED + ' data-index=\"' + option_index + '\">';\n\t\t\t\tHTML += '<label for=\"' + option_id + '\">' + option_label + '</label>';\n\t\t\t});\n\n\t\t\tHTML += '</fieldset>';\n\n\t\t\tspan_label.append(HTML);\n\t\t\t$('div#input-radio').trigger(\"create\");\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.InputTypes));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\"use strict\";\n\t\n\tmodule.text = function(the_value, the_input) {\n\n\t\t\t//to cache dom lookups\n\t\t\tvar obj;\n\t\t\tvar span_label = $('span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t} else {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//re-enable input if needed\n\t\t\t$('div#input-text input').removeAttr('disabled');\n\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate text input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\t$('div.clone input').val(value);\n\n\t\t\t\t//if in editing mode, do not allow changes  if the field is a primary key\n\t\t\t\tconsole.log( typeof input.is_primary_key);\n\t\t\t\tconsole.log( typeof input.has_jump);\n\n\t\t\t\tif (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t$('div.clone input').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t//add hidden class if missing\n\t\t\t\tclone.addClass('hidden');\n\n\t\t\t}\n\n\t\t\t$('div#input-text input').val(value);\n\n\t\t\t//if it is a genkey field, disable input and pre-fill it with the genkey\n\t\t\tif (parseInt(input.is_genkey,10) === 1 && value === \"\") {\n\n\t\t\t\t$('div#input-text input').attr('disabled', 'disabled').val(EC.Utils.getGenKey());\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t//if in editing mode, do not allow changes if the field is a primary key \n\t\t\tif (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\t\t\t\t$('div#input-text input').attr('disabled', 'disabled');\n\t\t\t\t$('div#input-text p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$('div#input-text p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\t\t\t\n\n\t\t};\n\n\t\n\treturn module;\n\t\n}(EC.InputTypes));","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\"use strict\";\n\n\t\tmodule.textarea = function(the_value, the_input) {\n\n\t\t\t//to cache dom lookups\n\t\t\tvar obj;\n\t\t\tvar span_label = $('span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label);\n\t\t\t\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t} else {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//re-enable input if needed\n\t\t\t$('div#input-textarea textarea').removeAttr('disabled');\n\n\t\t\tif (double_entry) {\n\n\t\t\t\t//duplicate textarea input\n\t\t\t\tclone.removeClass('hidden');\n\t\t\t\t$('div.clone textarea').val(value);\n\n\t\t\t\t//if in editing mode, do not allow changes  if the field is a primary key\n\t\t\t\tif (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t\t$('div.clone textarea').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t//add hidden class if missing\n\t\t\t\tclone.addClass('hidden');\n\n\t\t\t}\n\n\t\t\t//Set value\n\t\t\t$('div#input-textarea textarea').val(value);\n\n\t\t\t//if in editing mode, do not allow changes either if the field is a primary key\n\t\t\tif (window.localStorage.edit_mode && input.is_primary_key === 1) {\n\n\t\t\t\t$('div#input-textarea textarea').attr('disabled', 'disabled');\n\t\t\t\t$('div#input-textarea p.primary-key-not-editable').removeClass(\"hidden\");\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$('div#input-textarea p.primary-key-not-editable').addClass(\"hidden\");\n\t\t\t}\n\t\t\t\n\t\t\t\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.InputTypes)); ","/*jslint vars: true, nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.time = function(the_value, the_input) {\n\n\t\t\tvar timepicker;\n\t\t\tvar ios_timepicker;\n\t\t\tvar span_label = $('span.label');\n\t\t\tvar clone = $('div.clone');\n\t\t\tvar double_entry;\n\t\t\tvar value = the_value;\n\t\t\tvar input = the_input;\n\t\t\tvar datebox_format;\n\n\t\t\t//update label text\n\t\t\tspan_label.text(input.label + \" - \" + input.datetime_format);\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//Add attribute to flag the primary key input field\n\t\t\tif (parseInt(input.is_primary_key, 10) === 1) {\n\n\t\t\t\tspan_label.attr('data-primary-key', 'true');\n\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t//reset the attribute to empty if not a primary key (JQM caches pages and we\n\t\t\t\t// recycle views)\n\t\t\t\tspan_label.attr('data-primary-key', '');\n\t\t\t}\n\n\t\t\t//check if we need to replicate this input\n\t\t\tdouble_entry = (parseInt(input.has_double_check, 10) === 1) ? true : false;\n\n\t\t\t//Android Phonegap timepicker plugin http://goo.gl/xLrqZl\n\t\t\ttimepicker = $('div#input-time input.nativedatepicker');\n\n\t\t\t//iOS uses the HTML5 input type=\"time\"\n\t\t\tios_timepicker = $('div#input-time input.ios-time');\n\n\t\t\t//hide immediate ios time input parent (JQM quirk, this is to hide the div\n\t\t\t// element border wrapping the input after JQM enhanced the markup)\n\t\t\tios_timepicker.parent().addClass(\"no-border\");\n\n\t\t\t/*show current time if value = input.datetime_format:\n\t\t\t *if the option to show the current time as default is selected in the web form\n\t\t\t * builder,\n\t\t\t * the input value gets the value of datetime_format when parsing the xml\n\t\t\t */\n\t\t\tif (value === input.datetime_format) {\n\t\t\t\ttimepicker.val(EC.Utils.parseTime(new Date(), input.datetime_format));\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//show cached value\n\t\t\t\ttimepicker.val(value);\n\t\t\t}\n\n\t\t\t/*****************************************************************************************\n\t\t\t * Android uses the Phonegap official DatePicker plugin\n\t\t\t ****************************************************************************************/\n\t\t\tif (window.device.platform === EC.Const.ANDROID) {\n\t\t\t\t/* bind input to 'vclick' insted of focus, as we set the input as readonly.\n\t\t\t\t * this solved problem on android 2.3 where the keyboard was showing because the\n\t\t\t\t * input is in focus when tapping \"cancel\"\n\t\t\t\t * on the DatePicker popup\n\t\t\t\t */\n\t\t\t\ttimepicker.off().on('vclick', function(e) {\n\n\t\t\t\t\tvar timepicker = $(this);\n\t\t\t\t\tvar selected_date = Date.parse(timepicker.val()) || new Date();\n\n\t\t\t\t\t//use debouncing/throttling to avoid triggering multiple `focus` event\n\t\t\t\t\t// http://goo.gl/NFdHDW\n\t\t\t\t\tvar now = new Date();\n\t\t\t\t\tvar lastFocus = timepicker.data(\"lastFocus\");\n\t\t\t\t\tif (lastFocus && (now - lastFocus) < 500) {\n\t\t\t\t\t\t// Don't do anything\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttimepicker.data(\"lastFocus\", now);\n\n\t\t\t\t\t// Same handling for iPhone and Android\n\t\t\t\t\twindow.plugins.datePicker.show({\n\t\t\t\t\t\tdate : selected_date,\n\t\t\t\t\t\tmode : 'time', // date or time or blank for both\n\t\t\t\t\t\tallowOldDates : true\n\t\t\t\t\t}, function(returned_date) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar new_date;\n\n\t\t\t\t\t\tif (returned_date !== undefined) {\n\n\t\t\t\t\t\t\tnew_date = new Date(returned_date);\n\n\t\t\t\t\t\t\ttimepicker.val(EC.Utils.parseTime(new_date, input.datetime_format));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// This fixes the problem you mention at the bottom of this script with it not\n\t\t\t\t\t\t// working a second/third time around, because it is in focus.\n\t\t\t\t\t\ttimepicker.blur();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/*****************************************************************************************\n\t\t\t * iOS uses the official HTML5 input type=\"time\", only hours and minutes are\n\t\t\t * returned\n\t\t\t ****************************************************************************************/\n\t\t\tif (window.device.platform === EC.Const.IOS) {\n\n\t\t\t\ttimepicker.off().on('vclick', function(event) {\n\n\t\t\t\t\tios_timepicker.focus();\n\n\t\t\t\t});\n\n\t\t\t\tios_timepicker.off().on('blur', function(event) {\n\n\t\t\t\t\tvar ios_time = ios_timepicker.val();\n\n\t\t\t\t\t//get seconds (based on current time)\n\t\t\t\t\tvar date = new Date(event.timeStamp);\n\t\t\t\t\tvar seconds = date.getSeconds();\n\n\t\t\t\t\t//add seconds to have a string like HH:mm:ss\n\t\t\t\t\tios_time = ios_time + \":\" + seconds;\n\n\t\t\t\t\ttimepicker.val(EC.Utils.parseIOSTime(ios_time, input.datetime_format));\n\t\t\t\t\ttimepicker.attr(\"data-raw-date\", ios_time);\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.InputTypes));\n","/*global $, jQuery, LocalFileSystem, cordova*/\nvar EC = EC || {};\nEC.InputTypes = EC.InputTypes || {};\nEC.InputTypes = (function (module) {\n    'use strict';\n\n    module.video = function (the_value, the_input) {\n\n        //to cache dom lookups\n        var span_label = $('span.label');\n        var value = the_value;\n        var input = the_input;\n        var video_btn = $('div#input-video div#video-btn');\n        var play_video_btn = $('div#input-video div#play-video-btn');\n        var store_video_uri = $('div#input-video input#stored-video-uri');\n        var cache_video_uri = $('div#input-video input#cached-video-uri');\n        var video_full_path_uri;\n        var cached_path;\n        var video_sd_path;\n        var ios_video_player_wrapper = $('div#input-video div#ios-video-player-wrapper');\n        var ios_video_player = $('div#input-video video#ios-video-player');\n\n        var _renderVideo = function (the_video_file_path) {\n\n            play_video_btn.attr('data-video-path', the_video_file_path);\n            play_video_btn.removeClass('ui-disabled');\n\n        };\n\n        //hide play button on ios, also hide video wrapper\n        if (window.device.platform === EC.Const.IOS) {\n            $(play_video_btn, ios_video_player_wrapper).addClass('hidden');\n\n        }\n\n        //update label text\n        span_label.text(input.label);\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        //if a value is stored, on the first load add it to hidden input field,  to be\n        // shown if no cached value is set\n        if (window.localStorage.edit_mode) {\n\n            if (value.stored === undefined) {\n                store_video_uri.val(value);\n                value = {\n                    cached: '',\n                    stored: value\n                };\n            }\n            else {\n                store_video_uri.val(value.stored);\n            }\n        }\n\n        console.log('value.stored ' + JSON.stringify(value.stored));\n\n        //If a cache value is set, add it to hidden field\n        cache_video_uri.val(value.cached || '');\n        console.log('cache_video_uri: ' + cache_video_uri.val());\n\n        //Show cached video if any, otherwise the stored video, if any\n        if (value.cached === '') {\n\n            console.log('cached value empty');\n\n            if (value.stored !== '') {\n\n                //build full path to get video from private app folder depending on platform\n                switch (window.device.platform) {\n                    case EC.Const.ANDROID:\n\n                        video_full_path_uri = EC.Const.ANDROID_APP_PRIVATE_URI + EC.Const.VIDEO_DIR + window.localStorage.project_name + '/' + value.stored;\n\n                        /** Copy video to cache folder to make it playable (rename it using timestamp).\n                         *    Due to permission issues, on Android files are not accessible by other\n                         * application\n                         *  Since Android support for <video> is pretty weak, we need to use an external\n                         * video player app top play the video\n                         *  (Whatever app capable of playing the video is installed on the device will be\n                         * triggered via an intent)\n                         */\n\n                        EC.Notification.showProgressDialog();\n                        $.when(EC.File.copyVideo(video_full_path_uri)).then(function (the_cached_filename) {\n\n                            //file has been copied, update view setting it as cached file to play\n                            cache_video_uri.val(the_cached_filename);\n                            play_video_btn.attr('data-video-path', the_cached_filename);\n                            play_video_btn.removeClass('ui-disabled');\n\n                            EC.Notification.hideProgressDialog();\n\n                        });\n                        break;\n\n                    case EC.Const.IOS:\n                        //build full path (file is stored in persisten storage (Documents folder))\n                        video_full_path_uri = EC.Const.IOS_APP_PRIVATE_URI + EC.Const.VIDEO_DIR + window.localStorage.project_name + '/' + value.stored;\n\n                        //add source to HTML5 video tag, 'file://' needs to be aded for file access\n                        //TODO: on first load, the preview image for the video, bug?\n                        ios_video_player.attr('src', 'file://' + video_full_path_uri);\n\n                        /*this is causing the video to open automatically on iOS7,\n                         * it is here because the video preview does not work on iOS 8 without it\n                         */\n                        if (parseFloat(window.device.version) >= 8) {\n                            ios_video_player.load();\n                        }\n\n                        //show video player wrapper\n                        ios_video_player_wrapper.removeClass('hidden');\n                        break;\n                }\n            }\n            else {\n                play_video_btn.addClass('ui-disabled');\n                ios_video_player_wrapper.addClass('hidden');\n            }\n\n        }\n        else {\n\n            switch (window.device.platform) {\n\n                case EC.Const.ANDROID:\n                    //render the cached video\n                    _renderVideo(value.cached);\n                    break;\n\n                case EC.Const.IOS:\n                    ios_video_player_wrapper.removeClass('hidden');\n                    break;\n\n            }\n\n        }\n\n        //request temporary folder from file system based on platform\n        //todo: this will change on iOS with the next release to match Android I suppose\n        if (window.device.platform === EC.Const.IOS) {\n\n            window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function (the_file_system) {\n\n                console.log(JSON.stringify(the_file_system));\n                cached_path = the_file_system.root.nativeURL;\n                console.log('nativeURL: ' + cached_path);\n            }, function (error) {\n                console.log(JSON.stringify(error));\n            });\n\n        }\n        else {\n            //on Android only\n            window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, function (the_file_system) {\n\n                console.log(JSON.stringify(the_file_system));\n                cached_path = the_file_system.nativeURL;\n                console.log('nativeURL: ' + cached_path);\n            }, function (error) {\n                console.log(JSON.stringify(error));\n            });\n        }\n\n\n        //Success callback\n        var onCaptureVideoSuccess = function (the_media_object) {\n\n            var cache_video_uri = $('div#input-video input#cached-video-uri');\n\n            console.log(cache_video_uri.val());\n\n            console.log(JSON.stringify(the_media_object[0]));\n\n            video_sd_path = the_media_object[0].fullPath;\n\n            EC.Notification.showProgressDialog();\n\n            //move video to cache folder (temporary storage)\n            $.when(EC.File.moveVideo(video_sd_path, cache_video_uri.val())).then(function (the_cached_video_path) {\n\n                if (window.device.platform === EC.Const.IOS) {\n\n                    ios_video_player_wrapper.removeClass('hidden');\n\n                    //request temporary folder from file system\n                    window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function (the_file_system) {\n\n                        //imp! since Cordova 3.5+ 'fullPath' became nativeURL\n                        var temp_cache_path = the_file_system.root.nativeURL;\n\n                        var video_full_path = temp_cache_path + '/' + the_cached_video_path;\n\n                        ios_video_player.attr('src', video_full_path);\n\n                        cache_video_uri.val(the_cached_video_path);\n                        EC.Notification.hideProgressDialog();\n\n                    }, function (error) {\n                        console.log(JSON.stringify(error));\n                        EC.Notification.hideProgressDialog();\n                    });\n                }\n\n                if (window.device.platform === EC.Const.ANDROID) {\n\n                    //update cached video uri to use always the same name\n                    //when taking more videos for the same input and avoid several cached videos\n                    cache_video_uri.val(the_cached_video_path);\n                    play_video_btn.attr('data-video-path', the_cached_video_path);\n                    play_video_btn.removeClass('ui-disabled');\n                    EC.Notification.hideProgressDialog();\n                }\n\n            });\n\n        };\n\n        var onCaptureVideoError = function (error) {\n            console.log(error.message);\n        };\n\n        //play button handler (only on Android)\n        //TODO: on kitkat maybe <video> ha got proper support, run some tests\n        if (window.device.platform === EC.Const.ANDROID) {\n\n            play_video_btn.off().on('vclick', function () {\n\n                var current_cached_video = $(this).attr('data-video-path');\n\n                //request temporary folder from file system based on platform\n\n                //Android only\n                window.resolveLocalFileSystemURL(cordova.file.externalCacheDirectory, function (the_file_system) {\n\n                    var temp_cache_path = the_file_system.nativeURL;\n                    var video_full_path = temp_cache_path + '/' + current_cached_video;\n\n                    window.plugins.videoPlayer.play(video_full_path);\n\n                }, function (error) {\n                    console.log(JSON.stringify(error));\n                });\n\n            });\n        }\n\n        //open camera app on click\n        video_btn.off().on('vclick', function () {\n\n            //record 1 video at a time\n            var options = {\n                limit: 1\n                //duration: 30//set duration to a maximum of 30 seconds\n            };\n            // start video capture\n            navigator.device.capture.captureVideo(onCaptureVideoSuccess, onCaptureVideoError, options);\n        });\n    };\n\n    return module;\n\n}(EC.InputTypes));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\n/**\n *\n * @module EC\n * @submodule Inputs\n *\n */\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\t/*\n\t\t * get cache value from localStorage by the passed position\n\t\t *\n\t\t * @method getCachedInputValue\n\t\t * @param {int} the input position attribute in the form input sequence\n\t\t * @return {Object} {_id: <the input id>, type: <the input type>, value: <the current value cached>, position : <the input position property>}\n\t\t */\n\t\tmodule.getCachedInputValue = function(the_position) {\n\n\t\t\tvar values;\n\t\t\tvar position = parseInt(the_position, 10);\n\t\t\tvar index = position - 1;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\t\t\tvar empty_value = {\n\t\t\t\t_id : \"\",\n\t\t\t\ttype : \"\",\n\t\t\t\tvalue : EC.Const.SKIPPED,\n\t\t\t\tposition : \"\",\n\t\t\t\tis_primary_key : \"\"\n\t\t\t};\n\n\t\t\t//catch Chrome error `Uncaught SyntaxError: Unexpected end of input` when parsing empty content\n\t\t\ttry {\n\t\t\t\tvalues = JSON.parse(window.localStorage.inputs_values);\n\n\t\t\t\t/* if index is out of bounds return false as value cannot be found:\n\t\t\t\t * a case scenario is when the user leaves a form half way through it but he wants to save the progress\n\t\t\t\t * Any value not found will be saved as empty string in the db\n\t\t\t\t */\n\t\t\t\tif (values[index] === undefined) {\n\t\t\t\t\treturn empty_value;\n\t\t\t\t}\n\n\t\t\t\t//search all values where the passed position matches\n\t\t\t\tiLength = values.length;\n\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\t\t//if values[i] is null, this input was skipped by a jump so create an empty one\n\t\t\t\t\tif (values[i] === null) {\n\t\t\t\t\t\tvalues[i] = empty_value;\n\t\t\t\t\t}\n\n\t\t\t\t\t//@bug Android 2.3 :/ should be solved parsing values to integer\n\t\t\t\t\tif (parseInt(values[i].position, 10) === position) {\n\n\t\t\t\t\t\tif (window.localStorage.edit_mode) {\n\n\t\t\t\t\t\t\twindow.localStorage.edit_id = values[i]._id;\n\t\t\t\t\t\t\twindow.localStorage.edit_type = values[i].type;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//return the value object found\n\t\t\t\t\t\treturn values[i];\n\n\t\t\t\t\t}\n\n\t\t\t\t}//end for each input values\n\n\t\t\t\t//return an empty value if no position match found, meaning the value was not cache because skipped by a jump\n\t\t\t\treturn empty_value;\n\n\t\t\t} catch(error) {\n\t\t\t\t//Handle errors here\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n\n/**\n *\n * @module EC\n * @submodule Inputs\n *\n */\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\t//getCurrentValue\n\t\tmodule.getCloneValue = function(the_type) {\n\n\t\t\tvar type = the_type;\n\t\t\tvar test;\n\t\t\tvar value;\n\n\t\t\tswitch(type) {\n\n\t\t\t\tcase EC.Const.TEXT:\n\t\t\t\t\tvalue = $('div.clone input#text-clone').val();\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.TEXTAREA:\n\t\t\t\t\tvalue = $('div.clone textarea#textarea-clone').val();\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.INTEGER:\n\t\t\t\t\tvalue = $('div.clone input#integer-clone').val();\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.DECIMAL:\n\t\t\t\t\tvalue = $('div.clone input#decimal-clone').val();\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.BARCODE:\n\t\t\t\t\tvalue = $('div.clone input#scan-result-confirm').val();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn value;\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*global $, jQuery*/\n/**\n *\n * @module EC\n * @submodule Inputs\n *\n */\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = (function (module) {\n    'use strict';\n\n    /* Get the current input value based on the input type\n     *\n     * @return - a single value or an array of values based on the type passed\n     */\n    module.getCurrentValue = function (the_type) {\n\n        var type = the_type;\n        var values = [];\n        var checkboxes_values = [];\n        var branch_form;\n        var branch_entries;\n        var current_value;\n        var got_value;\n        var input_holder;\n\n        switch (type) {\n\n            case EC.Const.TEXT:\n                values.push($('div#input-text input').val());\n                got_value = values[0].trim();\n                break;\n\n            case EC.Const.TEXTAREA:\n                values.push($('div#input-textarea textarea').val());\n                got_value = values[0].trim();\n                break;\n\n            case EC.Const.INTEGER:\n                values.push($('div#input-integer input').val());\n                got_value = values[0].trim();\n                break;\n\n            case EC.Const.DECIMAL:\n                values.push($('div#input-decimal input').val());\n                got_value = values[0].trim();\n                break;\n\n            case EC.Const.DATE:\n                values.push($('div#input-date input').val());\n                got_value = values[0];\n                break;\n\n            case EC.Const.TIME:\n                values.push($('div#input-time input').val());\n                got_value = values[0];\n                break;\n\n            case EC.Const.RADIO:\n\n                input_holder = $('div#input-radio input[type=radio]:checked');\n\n                /* single selection radio: grab both value and 'label':\n                 * value is needed for the jumps/validation and label will be saved and displayed to users\n                 */\n                current_value = {\n                    value: '',\n                    index: ''\n                };\n                current_value.value = input_holder.val();\n                current_value.index = input_holder.attr('data-index');\n\n                //if no value selected among the radio options, create an empty object with NO_OPTION_SELECTED label\n                if (current_value.value === undefined) {\n                    current_value.value = EC.Const.NO_OPTION_SELECTED;\n                    current_value.index = EC.Const.NO_OPTION_SELECTED;\n                } else {\n                    current_value.value.trim();\n                    current_value.index.trim();\n                }\n\n                values.push(current_value);\n\n                got_value = values[0];\n                break;\n\n            //multiple selection checkboxes\n            case EC.Const.CHECKBOX:\n\n                /*\n                 * Get all the selected checkboxes. Checkboxes jumps are mapped against the value, not the index, so use its label\n                 */\n                $('div#input-checkbox input[type=checkbox]:checked').each(function () {\n                    checkboxes_values.push({\n                        value: $(this).val().trim(),\n                        label: $(this).parent().text().trim()\n                    });\n                });\n\n                //cache empty string if no checkboxes are selected\n                values.push((checkboxes_values.length === 0) ? EC.Const.NO_OPTION_SELECTED : checkboxes_values);\n\n                //return array of object (one per each selected checkbox)\n                got_value = values[0];\n                break;\n\n            case EC.Const.DROPDOWN:\n\n                input_holder = $('div#input-dropdown select option:selected');\n\n                /* single selection dropdown' grab both value and index:\n                 * index is needed for the jumps/validation and value will be saved and displayed to users (linked to label)\n                 */\n                current_value = {\n                    value: '',\n                    index: ''\n                };\n\n                current_value.value = input_holder.val();\n                current_value.index = input_holder.attr('data-index');\n\n                //if the value is '0', for consistency set it to a default for unselected option\n                if (current_value.index === '0') {\n                    current_value.index = EC.Const.NO_OPTION_SELECTED;\n                }\n\n                values.push(current_value);\n\n                got_value = values[0];\n                break;\n\n            case EC.Const.BARCODE:\n                current_value = $('div#input-barcode input.scan-result').val();\n                values.push(current_value);\n                //console.log('barcode current value is: ' + current_value);\n                got_value = values[0];\n                break;\n\n            case EC.Const.LOCATION:\n\n                //store location as csv string\n                current_value = EC.DevicePosition.getCoordsFormattedText();\n                values.push(current_value);\n                //console.log('location current value is: ' + current_value);\n                got_value = values[0];\n                break;\n\n            case EC.Const.AUDIO:\n\n                if (EC.Utils.isChrome()) {\n\n                    current_value = {\n                        cached: '...audio cached  uri...',\n                        stored: '...audio stored uri...'\n                    };\n\n                } else {\n\n                    //console.log('getting audio file values');\n\n                    current_value = {\n                        cached: $('div#input-audio input#cached-audio-uri').val(),\n                        stored: $('div#input-audio input#stored-audio-uri').val()\n                    };\n\n                    //console.log('current_value ' + JSON.stringify(current_value));\n\n                }\n\n                values.push(current_value);\n                got_value = values[0];\n                break;\n\n            case EC.Const.VIDEO:\n\n                if (EC.Utils.isChrome()) {\n\n                    current_value = {\n                        cached: '...video cached  uri...',\n                        stored: '...video stored uri...'\n                    };\n\n                } else {\n\n                    console.log('getting video file values');\n\n                    current_value = {\n                        cached: $('div#input-video input#cached-video-uri').val(),\n                        stored: $('div#input-video input#stored-video-uri').val()\n                    };\n\n                    console.log('current_value ' + JSON.stringify(current_value));\n\n                }\n\n                values.push(current_value);\n                got_value = values[0];\n                break;\n\n            case EC.Const.PHOTO:\n\n                //keep track of both cache value(image uri currently on canvas) and store value (image uri on the database)\n                if (EC.Utils.isChrome()) {\n\n                    current_value = {\n                        cached: 'placeholder.jpg',\n                        stored: 'placeholder.jpg'\n                    };\n\n                } else {\n\n                    current_value = {\n                        cached: $('div#input-photo input#cached-image-uri').val(),\n                        stored: $('div#input-photo input#stored-image-uri').val()\n                    };\n\n                    console.log('current_value ' + JSON.stringify(current_value));\n\n                }\n\n                values.push(current_value);\n                got_value = values[0];\n                break;\n\n            case EC.Const.BRANCH:\n\n                //this is a branch form input, so its value is na object with the branch form name and the its total of entries\n                branch_form = JSON.parse(window.localStorage.branch_form);\n\n                //get branch entries for this form from DOM. If branch entries is NaN, it means we have no entries (0)\n                branch_entries = parseInt($('div#input-branch div#list-branch-entries-btn span span.branch-entries-count').text(), 10);\n\n                current_value = {\n                    branch_form_name: branch_form.name,\n                    branch_total_entries: isNaN(branch_entries) ? 0 : branch_entries\n                };\n\n                console.log(branch_entries);\n\n                values.push(current_value);\n                got_value = values[0];\n                break;\n\n        }//switch\n\n        return got_value;\n\n    };\n\n    return module;\n\n}(EC.Inputs));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/**\n *\n * @module EC\n * @submodule Inputs\n *\n */\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.getMainFormCurrentKeyValue = function(the_position) {\n\n\t\t\tvar index = the_position - 1;\n\t\t\tvar values = JSON.parse(window.localStorage.inputs_values);\n\n\t\t\treturn values[index].value;\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule EC.Inputs\n */\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\t/**\n\t\t * @method isEmptyPrimaryKey: Check whether a primary key exists in the array of values we are abut to save.\n\t\t */\n\t\tmodule.isEmptyPrimaryKey = function() {\n\n\t\t\tvar is_empty_primary_key = true;\n\t\t\tvar inputs_values;\n\t\t\tvar i;\n\t\t\tvar iLength;\n\n\t\t\t//catch Chrome error `Uncaught SyntaxError: Unexpected end of input` when parsing empty content\n\t\t\ttry {\n\t\t\t\tinputs_values = JSON.parse(window.localStorage.inputs_values);\n\t\t\t} catch(error) {\n\t\t\t\treturn is_empty_primary_key;\n\t\t\t}\n\n\t\t\tiLength = inputs_values.length;\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\n\t\t\t\t//if there is an input valus, check if it is a primary key (some values can be null in the case of jumps)\n\t\t\t\tif (inputs_values[i]) {\n\t\t\t\t\tif (parseInt(inputs_values[i].is_primary_key, 10) === 1) {\n\t\t\t\t\t\tis_empty_primary_key = (inputs_values[i].value === \"\") ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn is_empty_primary_key;\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\n/**\n *\n * @module EC\n * @submodule Inputs\n *\n */\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tmodule.setCachedInputValue = function(the_value, the_position, the_type, is_primary_key_flag) {\n\t\t\t\n\t\t\tvar wls = window.localStorage;\n\t\t\tvar values;\n\t\t\tvar value = the_value;\n\t\t\tvar checkbox_values = [];\n\t\t\tvar position = parseInt(the_position, 10);\n\t\t\tvar index = position - 1;\n\t\t\tvar type;\n\t\t\tvar _id;\n\t\t\tvar is_primary_key = is_primary_key_flag;\n\t\t\tvar is_genkey_hidden = EC.Utils.isFormGenKeyHidden(window.localStorage.form_id);\n\t\t\tvar i;\n\t\t\tvar iLength;\n\n\t\t\tif (wls.edit_mode) {\n\n\t\t\t\t_id = wls.edit_id;\n\t\t\t\ttype = wls.edit_type;\n\n\t\t\t} else {\n\n\t\t\t\t_id = '';\n\t\t\t\ttype = the_type;\n\n\t\t\t}\n\n\t\t\t//if the value is an object from either dropdown or radio inputs, cache the value only (index is needed only for jumps)\n\t\t\tif (type === EC.Const.DROPDOWN || type === EC.Const.RADIO) {\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\n\t\t\t//if the value is an array from checkboxes, cache an array of the labels\n\t\t\tif (type === EC.Const.CHECKBOX) {\n\n\t\t\t\t//if any checkbox was selected, get it, otherwise do nothing and let the value be EC.Const.NO_OPTION_SELECTED\n\t\t\t\tif (value !== EC.Const.NO_OPTION_SELECTED) {\n\n\t\t\t\t\tiLength = value.length;\n\t\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\t\tcheckbox_values.push(value[i].value);\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = checkbox_values;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//catch Chrome error `Uncaught SyntaxError: Unexpected end of input` when parsing empty content\n\t\t\ttry {\n\t\t\t\tvalues = JSON.parse(wls.inputs_values);\n\n\t\t\t} catch(error) {\n\t\t\t\t//Handle errors here\n\t\t\t\tvalues = [];\n\t\t\t}\n\t\t\t\n\t\t\t//TODO: check against values length??? try when hidden key is last element of the form\n\t\t\tif (values[index] !== null && index < values.length) {\n\n\t\t\t\t//if the values already is cached in inputs_values AND it is a primary_key AND it is a hidden auto generated key, do not override it but use that same value\n\t\t\t\t//This happens when the user is editing a form with an autogen key hidden, we do no want to override it\n\t\t\t\tif (values[index].is_primary_key === 1 && is_genkey_hidden === 1) {\n\t\t\t\t\tvalue = values[index].value;\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues[index] = {\n\t\t\t\t\t\t_id : _id,\n\t\t\t\t\t\ttype : type,\n\t\t\t\t\t\tvalue : value,\n\t\t\t\t\t\tposition : position,\n\t\t\t\t\t\tis_primary_key : is_primary_key\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvalues[index] = {\n\t\t\t\t\t_id : _id,\n\t\t\t\t\ttype : type,\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tposition : position,\n\t\t\t\t\tis_primary_key : is_primary_key\n\t\t\t\t};\n\t\t\t}\n\n\t\t\twls.inputs_values = JSON.stringify(values);\n\t\t\tconsole.log(\"input_values: \" + wls.inputs_values);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\tvar _isUniqueValue = function(the_value) {\n\n\t\t\tvar primary_keys = [];\n\t\t\tvar value = the_value;\n\t\t\tvar unique = true;\n\n\t\t\t//get Hierarchy (main) primary keys\n\t\t\tprimary_keys = JSON.parse(window.localStorage.primary_keys);\n\n\t\t\t//check if the current value clashes a global primary key\n\t\t\tif (primary_keys.indexOf(value) !== -1) {\n\t\t\t\tunique = false;\n\t\t\t}\n\n\t\t\treturn unique;\n\t\t};\n\n\t\tmodule.validateValue = function(the_input, the_value) {\n\n\t\t\tvar self = this;\n\t\t\tvar input = the_input;\n\t\t\tvar current_value = the_value;\n\t\t\tvar clone_value = \"\";\n\t\t\tvar is_primary_key = $('span.label').attr('data-primary-key');\n\t\t\tvar validation = {};\n\n\t\t\t//get value from object in the case of a dropdown, radio or checkbox\n\t\t\tif (input.type === EC.Const.DROPDOWN || input.type === EC.Const.RADIO || input.type === EC.Const.CHECKBOX) {\n\t\t\t\tcurrent_value = current_value.value;\n\t\t\t}\n\n\t\t\t//if we need to check for a double entry, get clone value\n\t\t\tif (parseInt(input.has_double_check, 10) === 1) {\n\t\t\t\tclone_value = self.getCloneValue(input.type);\n\t\t\t}\n\n\t\t\t//validate input\n\t\t\tvalidation = EC.Utils.isValidValue(input, current_value, clone_value);\n\n\t\t\tif (!validation.is_valid) {\n\t\t\t\t//value not valid, return\n\t\t\t\treturn validation;\n\t\t\t}\n\n\t\t\t//check if this input value is a primary key field: if it is, check uniqueness (skip when we are editing)\n\t\t\tif (is_primary_key === 'true' && !window.localStorage.edit_mode) {\n\n\t\t\t\tif (!_isUniqueValue(current_value)) {\n\n\t\t\t\t\t//primary key value already exist, return\n\t\t\t\t\tvalidation = {\n\t\t\t\t\t\tis_valid : false,\n\t\t\t\t\t\tmessage : EC.Localise.getTranslation(\"value_exist\")\n\t\t\t\t\t};\n\n\t\t\t\t\t//on Chrome native alert is not working: dump to console error message\n\t\t\t\t\tconsole.log(\"Error: value already exists\");\n\n\t\t\t\t\treturn validation;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn validation;\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule EC.Inputs\n */\nvar EC = EC || {};\nEC.Inputs = EC.Inputs || {};\nEC.Inputs = ( function(module) {\"use strict\";\n\n\t\t/**\n\t\t * @method valuesMatch\n\t\t */\n\t\tmodule.valuesMatch = function(the_cached_value, the_current_value, the_input_type) {\n\n\t\t\tvar cached_value = the_cached_value;\n\t\t\tvar current_value = the_current_value;\n\t\t\tvar type = the_input_type;\n\t\t\tvar is_matching = false;\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar iLength;\n\t\t\tvar jLength;\n\t\t\tvar matches_count = 0;\n\n\t\t\tswitch(type) {\n\n\t\t\t\tcase EC.Const.DROPDOWN:\n\n\t\t\t\t\tif (current_value.label === cached_value.value) {\n\t\t\t\t\t\tis_matching = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.RADIO:\n\n\t\t\t\t\tif (current_value.label === cached_value.value) {\n\t\t\t\t\t\tis_matching = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase EC.Const.CHECKBOX:\n\n\t\t\t\t\t//check if ALL the checkbox values match. A single difference might trigger a different jump\n\t\t\t\t\tiLength = current_value.length;\n\t\t\t\t\tjLength = cached_value.value.length;\n\n\t\t\t\t\tif (iLength === jLength) {\n\n\t\t\t\t\t\tfor ( i = 0; i < iLength; i++) {\n\t\t\t\t\t\t\tfor ( j = 0; j < jLength; j++) {\n\t\t\t\t\t\t\t\tif (current_value[i].label.trim() === cached_value.value[j].trim()) {\n\t\t\t\t\t\t\t\t\tmatches_count++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (matches_count === iLength) {\n\t\t\t\t\t\t\tis_matching = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t// case EC.Const.LOCATION:\n\t\t\t\t// //TODO: handle location\n\t\t\t\t// break;\n\t\t\t\tdefault:\n\t\t\t\t\tif (cached_value === current_value) {\n\t\t\t\t\t\tis_matching = true;\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn is_matching;\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Inputs));\n","var EC = EC || {};\nEC.Project = EC.Project || {};\nEC.Project = (function (module) {\n    'use strict';\n\n    function _projectBackupFeedback(is_positive) {\n\n        var restore_from_backup_btn = $('div#forms div#project-options ul li#restore-data-from-backup');\n        var mail_backup_btn = $('div#forms div#project-options ul li#email-backup');\n\n        //close panel\n        $('div#forms div#project-options').panel('close');\n        if (is_positive) {\n            EC.Notification.showAlert(EC.Localise.getTranslation('success'), EC.Localise.getTranslation('project_backup_success'));\n\n            //enable 'restore from backup' button and 'email backup'\n            restore_from_backup_btn.removeClass('ui-disabled');\n            mail_backup_btn.removeClass('ui-disabled');\n        } else {\n            EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic_error'));\n        }\n    }\n\n    module.backupCurrentProject = function () {\n\n        EC.Notification.showProgressDialog();\n\n        var forms = JSON.parse(window.localStorage.forms);\n        var project_name = window.localStorage.project_name;\n        var project_id = parseInt(window.localStorage.project_id, 10);\n\n        $.when(EC.File.backup(forms, project_name, project_id)).then(function () {\n            EC.Notification.hideProgressDialog();\n            _projectBackupFeedback(true);\n        }, function () {\n            EC.Notification.hideProgressDialog();\n            _projectBackupFeedback(false);\n        });\n    };\n\n    return module;\n\n}(EC.Project));\n","var EC = EC || {};\nEC.Project = EC.Project || {};\nEC.Project = (function (module) {\n    'use strict';\n\n    var project_xml_URL = '';\n    var projects = [];\n\n    var _bindActionBarBtns = function () {\n\n        var nav_drawer_btn = $('div#index div[data-role=\"header\"] div[data-href=\"home-settings\"]');\n        var add_project_btn = $('div#index div[data-role=\"header\"] div.ui-btn-right[data-href=\"add-project\"]');\n        var settings_btn = $('div.home-settings ul li div[data-href=\"settings\"]');\n\n        //bind left sidebar open/close\n        nav_drawer_btn.off().on('vclick', function (e) {\n\n            //we are using a class instead of an id because there is a bug with the panel not working when navigating the app\n            var panel = $('.home-settings');\n\n            panel.panel('open');\n            //bind add project button (action bar)\n            settings_btn.off().one('vclick', function (e) {\n                EC.Routing.changePage(EC.Const.SETTINGS_VIEW);\n            });\n\n            //test closing panel globally: there is bug (panel does not close tapping off the panel) using the built in jqm methods, so this hack is needed\n            //docs: http://demos.jquerymobile.com/1.3.2/widgets/panels/\n            $('.ui-panel-dismiss-open').off().on('vclick', function () {\n                panel.panel('close');\n            });\n        });\n\n        //bind add project button (action bar)\n        add_project_btn.off().one('vclick', function (e) {\n            window.localStorage.back_nav_url = '#refresh';\n            EC.Routing.changePage(EC.Const.ADD_PROJECT_VIEW);\n        });\n\n    };\n\n    function _autoload(the_project_to_autoload) {\n\n        var project_names = JSON.parse(window.localStorage.project_names);\n\n        var project_to_autoload = window.decodeURI(the_project_to_autoload);\n        var project_name;\n        var deferred = new $.Deferred();\n        var project_params = project_to_autoload.split('/');\n\n        //parse project name from full project xml url\n        project_name = project_params[project_params.length - 1];\n        project_name = project_name.split('.');\n        project_name = project_name[0];\n\n        //There is a project to autoload: warn user if the project is already loaded on\n        // the device\n        console.log('Project names **************************************');\n        console.log(JSON.stringify(project_names));\n        if (EC.Utils.inArray(project_names, project_name, false)) {\n            deferred.reject();\n        }\n        else {\n\n            //double check if have an internet connection just in case\n            if (EC.Utils.hasConnection()) {\n\n                //testing on Chrome?\n                if (EC.Utils.isChrome()) {\n                    console.log('Testing on Chrome *****************************');\n                    project_xml_URL = 'xml/' + project_name + '.xml';\n                }\n\n                project_xml_URL = project_to_autoload;\n\n                //all good, load project on device\n                $.when(EC.Project.request(project_xml_URL)).then(function () {\n                    // Commit project to database\n                    $.when(EC.Structure.commitAll()).then(function () {\n                        deferred.resolve();\n\n\n                    });\n                }, function () {\n                    //request failed\n                    deferred.reject();\n                });\n\n            }\n            else {\n                EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('connection_lost'));\n                deferred.reject();\n            }\n        }\n\n        return deferred.promise();\n    }\n\n    module.getList = function () {\n\n        //@bug in Chrome where this function is called twice, I have no idea why\n        console.log('EC.Project.getList() called ***********************************');\n\n        var self = this;\n        var project_to_autoload;\n        var project_server_url;\n        var project_xml_URL;\n\n        //remove cached project names\n        // window.localStorage.removeItem('project_names');\n\n        //remove cached current view\n        window.localStorage.removeItem('current_view_url');\n\n        //clear project upload URL\n        window.localStorage.removeItem('upload_URL');\n\n        //load a project from custom URL scheme on device?\n        if (!EC.Utils.isChrome()) {\n            project_to_autoload = window.localStorage.autoload_project_url;\n        }\n        else {\n            //testing on Chrome\n            project_to_autoload = EC.Utils.getParameterByName('project');\n        }\n\n        //select all project on device\n        $.when(EC.Select.getProjects()).then(function (the_projects) {\n\n            //local variable projects?\n            var projects = the_projects;\n            var project_names = [];\n            var i;\n            var iLength;\n\n            //cache projects in localStorage, or empty array if none yet\n            if (projects.length > 0) {\n                iLength = projects.length;\n                for (i = 0; i < iLength; i++) {\n                    project_names.push(projects[i].name);\n                }\n            }\n            window.localStorage.project_names = JSON.stringify(project_names);\n            console.log('Window Project names **************************************');\n            console.log(JSON.stringify(window.localStorage.project_names));\n\n            if (project_to_autoload === '') {\n\n                //no project to autoload? we are done, sho list of projects on the device\n                if (projects.length > 0) {\n                    self.renderList(projects);\n                }\n                else {\n                    self.renderEmptyList();\n                }\n\n            }\n            else {\n\n                //show loader we are requesting a project automatically\n                EC.Notification.showProgressDialog(EC.Localise.getTranslation('wait'), EC.Localise.getTranslation('loading_project') + '/n' + project_to_autoload);\n\n                $.when(_autoload(project_to_autoload)).then(function () {\n\n                    //add latest project to project list\n                    projects.push({\n                        _id: EC.Parse.project.insertId,\n                        name: EC.Parse.project.name,\n                        total_branch_forms: EC.Parse.project.total_branch_forms,\n                        total_hierarchy_forms: EC.Parse.project.total_hierarchy_forms\n                    });\n\n                    //remove project from localStorage (iOS only)\n                    window.localStorage.autoload_project_url = '';\n\n                    EC.Notification.hideProgressDialog();\n                    //add new project to render\n                    self.renderList(projects);\n\n                }, function () {\n                    //we get here when trying to autoload a project already on the device, just\n                    // render stored projects\n                    EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('project_already_loaded'));\n                    EC.Notification.hideProgressDialog();\n                    self.renderList(projects);\n\n                    //remove project from localStorage (iOS only)\n                    window.localStorage.ios_project_form_url = '';\n                });\n\n            }\n\n        });\n\n    };\n\n    module.renderList = function (the_projects) {\n\n        var project_names = [];\n        //build HTML\n        var HTML = '';\n        var i;\n        var iLength;\n        var dom_list = $('div#project-list ul');\n        var navbar = $('a.ui-btn-active span.ui-btn-inner');\n\n        projects = the_projects;\n\n        //bind buttons\n        _bindActionBarBtns();\n\n        $('div#empty-list').hide();\n\n        //dom_list.find('li').removeClass('ui-btn-active');\n        dom_list.empty();\n\n        for (i = 0,\n                 iLength = projects.length; i < iLength; i++) {\n\n            HTML += '<li data-icon=\"ep-next-page\" >';\n            HTML += '<a href=\"views/forms.html?project=' + projects[i]._id + '&name=' + projects[i].name + '\">' + projects[i].name;\n            HTML += '<span class=\"ui-li-count\">' + projects[i].total_hierarchy_forms;\n            HTML += '</span>';\n            HTML += '<p>' + projects[i].total_hierarchy_forms + EC.Localise.getTranslation('hierarchy_forms') + ', ' + projects[i].total_branch_forms + EC.Localise.getTranslation('branch_forms') + '</p>';\n            HTML += '</a>';\n            HTML += '</li>';\n\n            //cache the project names (unique)\n            project_names.push(projects[i].name);\n\n        }\n\n        //cache project names in localStorage, to be used when checking for project name\n        // uniqueness\n        window.localStorage.project_names = JSON.stringify(project_names);\n\n        //reset title in navbar\n        navbar.text(EC.Const.PROJECT_LIST);\n\n        dom_list.append(HTML);\n        dom_list.listview('refresh');\n\n        //remove navigation flags\n        window.localStorage.removeItem('current_position');\n        window.localStorage.removeItem('form_id');\n        window.localStorage.removeItem('form_name');\n        window.localStorage.removeItem('project_id');\n        window.localStorage.removeItem('project_name');\n        window.localStorage.removeItem('form_tree');\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        window.setTimeout(function () {\n            $('body').removeClass('hidden');\n        }, 500);\n\n        console.log('Language set to ' + window.localStorage.DEVICE_LANGUAGE);\n\n    };//renderList\n\n    module.renderEmptyList = function () {\n\n        var dom_list = $('div#project-list ul');\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n        //bind buttons\n        _bindActionBarBtns();\n\n        //empty the list (if anything)\n        dom_list.empty();\n\n        //remove cached projects\n        $('div#index div#empty-list').show();\n\n        window.setTimeout(function () {\n            $('body').removeClass('hidden');\n        }, 500);\n\n        //load a project from custom URL scheme?\n        console.log('project to be loaded = ' + EC.Utils.getParameterByName('project'));\n\n        EC.Notification.hideProgressDialog();\n\n    };\n\n    /**\n     * delete project by project ID and project name\n     */\n    module.deleteProject = function () {\n\n        var project_id = parseInt(window.localStorage.project_id, 10);\n        var project_name = window.localStorage.project_name;\n\n        //@bug: panel closes itself on changePage, .panel('close') will stop the panel\n        // from working\n        $.when(EC.Delete.deleteProject(project_id, project_name)).then(function () {\n\n            EC.Notification.showToast(EC.Localise.getTranslation('project_deleted'), 'short');\n            window.localStorage.is_project_deleted = 1;\n            window.localStorage.back_nav_url = '#refresh';\n            EC.Routing.changePage(EC.Const.INDEX_VIEW);\n\n        }, function () {\n            EC.Notification.showAlert(EC.Localise.getTranslation('error'), EC.Localise.getTranslation('generic_error'));\n        });\n    };\n\n    return module;\n}(EC.Project));\n\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Project\n */\n\nvar EC = EC || {};\nEC.Project = EC.Project || {};\nEC.Project = ( function (module) {\n    \"use strict\";\n\n    module.loadRemoteXML = function (the_project_name) {\n\n        var cached_project_names;\n        var i;\n        var iLength;\n        var project_name = the_project_name;\n        var project_xml_URL;\n        var epicollect_server_url;\n\n        //if the project is already on the device, warn user and exit\n        try {\n            cached_project_names = JSON.parse(window.localStorage.project_names);\n            iLength = cached_project_names.length;\n            for (i = 0; i < iLength; i++) {\n\n                if (cached_project_names[i] === project_name) {\n                    EC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"project_already_loaded\"));\n                    return;\n                }\n            }\n        } catch (error) {\n            //no project yet\n            console.log(\"no projects on device yet\");\n        }\n\n\n        //if the project name is a full url, use that instead of app settings\n        if (EC.Utils.isURL(project_name)) {\n            project_xml_URL = project_name;\n        } else {\n            //get the project server url (default to http://plus.epicollect.net/)\n            epicollect_server_url = window.localStorage.project_server_url;\n            project_xml_URL = epicollect_server_url + project_name + '.xml';\n        }\n\n        //all good, load project on device\n        EC.Notification.showProgressDialog();\n        $.when(EC.Project.request(project_xml_URL)).then(function () {\n            // Commit project to database\n            $.when(EC.Structure.commitAll()).then(function () {\n                //redirect to project list\n                EC.Routing.changePage(EC.Const.INDEX_VIEW);\n\n            });\n        }, function () {\n            //request failed\n            //TODO\n            console.log(\"request failed\");\n        });\n\n    };\n\n    return module;\n\n}(EC.Project));\n","/*jslint vars: true , nomen: true, devel: true, plusplus:true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Project\n */\n\nvar EC = EC || {};\nEC.Project = EC.Project || {};\nEC.Project = ( function(module) {\"use strict\";\n\n\t\tvar load_project_btn;\n\t\tvar back_btn;\n\t\tvar input_value;\n\t\tvar autocomplete_spinning_loader;\n\t\tvar project_url;\n\n\t\tvar _load = function() {\n\n\t\t\tif (EC.Utils.hasConnection()) {\n\t\t\t\t_loadProjectFromXML();\n\t\t\t} else {\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"no_internet\"));\n\t\t\t\t//load_project_btn.off().one('vclick', _load);\n\t\t\t}\n\t\t};\n\n\t\t//Load the specified project via Ajax\n\t\tvar _loadProjectFromXML = function() {\n\n\t\t\tvar project_name = input_value.val();\n\n\t\t\t//empty project name\n\t\t\tif (project_name === \"\") {\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"project_empty_not_allowed\"));\n\t\t\t\tload_project_btn.off().one('vclick', _load);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// It has any kind of whitespace\n\t\t\tif (/\\s/.test(project_name)) {\n\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"project_no_spaces_allowed\"));\n\t\t\t\tload_project_btn.off().one('vclick', _load);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//load project from remote XML\n\t\t\tEC.Project.loadRemoteXML(project_name);\n\n\t\t};\n\t\t//loadProjectFromXML\n\n\t\tmodule.renderAddProjectView = function() {\n\n\t\t\tvar dom_list = $(\"div#add-project-content ul#projects-autocomplete\");\n\t\t\tvar request_timeout;\n\n\t\t\tload_project_btn = $(\"div#add-project div[data-role='header'] div.ui-btn-right[data-href='load-project-confirm']\");\n\t\t\tback_btn = $(\"div#add-project div[data-role='header'] div[data-href='back-btn']\");\n\t\t\tinput_value = $(\"div#add-project-content form div input[data-type='search']\");\n\t\t\tautocomplete_spinning_loader = $(\".autocomplete-spinner-loader\");\n\t\t\tproject_url = window.localStorage.project_server_url;\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\tinput_value.val(\"\");\n\n            //populate lists with autocomplete suggestions based on project names on the server\n\t\t\tdom_list.on(\"listviewbeforefilter\", function(e, data) {\n\n\t\t\t    console.log(\"typing\");\n\n\t\t\t\tvar $ul = $(this);\n\t\t\t\tvar $input = $(data.input);\n\t\t\t\tvar value = $input.val();\n\t\t\t\tvar html = \"\";\n\n\t\t\t\t//wait a fifth of a second the user stops typing\n\t\t\t\tvar request_delay = 200;\n\n\t\t\t\t$ul.html(\"\");\n\n\t\t\t\t//trigger request with more than 2 chars\n\t\t\t\tif (value && value.length > 2) {\n\n\t\t\t\t    autocomplete_spinning_loader.removeClass(\"hidden\");\n\n\t\t\t\t\t$ul.html('<li class=\"autocomplete-spinner\"><i class=\"fa fa-spinner fa-spin\"></i></li>');\n\t\t\t\t\t$ul.listview(\"refresh\");\n\n\t\t\t\t\t/* Throttle requests as the user is typing on a phone. We want to send as fewer requests as possible:\n\t\t\t\t\t * Typing a new char will stop the previous ajax request, not tapping for a third of a second will let the request go through\n\t\t\t\t\t */\n\t\t\t\t\tclearTimeout(request_timeout);\n\t\t\t\t\trequest_timeout = setTimeout(function() {\n\n\t\t\t\t\t    console.log(\"requesting\");\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl : \"http://plus.epicollect.net/\" + \"projects?q=\" + value + \"&limit=25\",\n\t\t\t\t\t\t\tdataType : \"json\",\n\t\t\t\t\t\t\tcrossDomain : true,\n\t\t\t\t\t\t\tsuccess : function(response) {\n\n\t\t\t\t\t\t\t    autocomplete_spinning_loader.addClass(\"hidden\");\n\n\t\t\t\t\t\t\t\t$.each(response, function(i) {\n\t\t\t\t\t\t\t\t\thtml += \"<li class='h-nav-item'>\" + response[i].name + \"</li>\";\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t$ul.html(html);\n\t\t\t\t\t\t\t\t$ul.listview(\"refresh\");\n\t\t\t\t\t\t\t\t$ul.trigger(\"updatelayout\");\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror : function(request, status, error) {\n\t\t\t\t\t\t\t     autocomplete_spinning_loader.addClass(\"hidden\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}, request_delay);\n\t\t\t\t}//if\n\t\t\t});\n\n\t\t\tdom_list.on('vclick', function(e) {\n\n\t\t\t\tif (e.target.tagName.toLowerCase() === \"li\") {\n\n\t\t\t\t\tinput_value.val(e.target.innerText);\n\t\t\t\t\tinput_value.attr(\"value\", e.target.innerText);\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t//Load project confirm button handler\n\t\t\tload_project_btn.off().on('vclick', _load);\n\n\t\t\tback_btn.off().one('vclick', function(e) {\n\n\t\t\t\twindow.localStorage.back_nav_url = \"#refresh\";\n\t\t\t\tEC.Routing.changePage(EC.Const.INDEX_VIEW, \"../\");\n\t\t\t});\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Project));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\n *\n */\nvar EC = EC || {};\nEC.Project = EC.Project || {};\nEC.Project = (function (module) {\n    'use strict';\n\n    var project_xml_URL;\n    var deferred;\n\n    module.request = function (the_project_xml_url) {\n\n        project_xml_URL = the_project_xml_url;\n        console.log('doing request: ' + project_xml_URL);\n\n        deferred = new $.Deferred();\n\n        $.ajax({\n            url: project_xml_URL, //url\n            type: 'get', //method type post or get\n            crossDomain: true,\n            dataType: 'xml', //return data type\n            timeout: 30000, // stop after 30 seconds\n            success: function (data) {\n\n                var is_project_xml_valid = true;\n                var branch_forms = [];\n\n                //parse the xml\n                is_project_xml_valid = EC.Parse.parseXML(data);\n\n                //parse error? Alert user\n                if (is_project_xml_valid === false) {\n                    EC.Notification.hideProgressDialog();\n                    EC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"invalid_xml\"));\n                    deferred.reject();\n                    return;\n                }\n\n\n                deferred.resolve();\n\n            },\n            error: function (request, status, error) {\n\n                EC.Utils.sleep(1000);\n\n                EC.Notification.hideProgressDialog();\n\n                //show request error\n                console.log(status + \", \" + error);\n\n                switch (status) {\n\n                    case \"parsererror\":\n                        EC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"invalid_xml\"));\n                        break;\n                    case \"timeout\":\n                        EC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"connection_timeout\"));\n                        break;\n                    default:\n\n                        if (error === \"Page not found\") {\n                            EC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"project_not_found_on_server\") + window.localStorage.project_server_url);\n                            return;\n                        }\n\n                        if (error === \"Not Found\") {\n                            EC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"project_not_found\"));\n                            return;\n                        }\n\n                        //show unknow error if nothing match\n                        EC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"unknow_error\"));\n                }\n\n                deferred.reject();\n\n            }\n        });\n\n        return deferred.promise();\n\n    };\n\n    return module;\n\n}(EC.Project));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/**\n * @module EC\n * @submodule Project\n */\n\nvar EC = EC || {};\nEC.Project = EC.Project || {};\nEC.Project = ( function(module) {\"use strict\";\n\n\t\tmodule.restoreFromBackup = function() {\n\n\t\t\tvar project_name = window.localStorage.project_name;\n\t\t\tvar project_id = window.localStorage.project_id;\n\n\t\t\t//TODO: check if there is a backup\n\n\t\t\tvar _restoreFeedback = function(is_positive) {\n\n\t\t\t\tvar forms_list_items = $('div#forms-list ul li');\n\t\t\t\tvar project_id;\n\t\t\t\tvar HTML;\n\t\t\t\tvar forms;\n\t\t\t\tvar dom_list = $('div#forms-list ul');\n\n\t\t\t\t//get updated forms\n\t\t\t\tforms = JSON.parse(window.localStorage.forms);\n\t\t\t\tproject_id = parseInt(window.localStorage.project_id, 10);\n\n\t\t\t\tif (is_positive) {\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"success\"), EC.Localise.getTranslation(\"project_restored\"));\n\n\t\t\t\t\t//show forms list\n\t\t\t\t\t$.when(EC.Select.getForms(project_id)).then(function(the_forms, the_btn_states) {\n\t\t\t\t\t\tEC.Forms.renderList(the_forms, the_btn_states);\n\t\t\t\t\t\t$('div#forms div#project-options').panel(\"close\");\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"generic_error\"));\n\t\t\t\t}\n\n\t\t\t};\n\t\t\t\n\t\t\t//Show spinning loader\n\t\t\tEC.Notification.showProgressDialog();\n\n\t\t\t//delete existing data first\n\t\t\t$.when(EC.Delete.deleteAllEntries(EC.Const.RESTORE, project_name, project_id)).then(function(the_forms) {\n\n\t\t\t\t//Map local input ids against ref and cache them before restoring from backup\n\t\t\t\t$.when(EC.Select.getLocalInputIDs(the_forms)).then(function(the_input_ids) {\n\n\t\t\t\t\twindow.localStorage.local_input_ids = JSON.stringify(the_input_ids);\n\t\t\t\t\t\n\t\t\t\t\t//restore from backup file success\n\t\t\t\t\t$.when(EC.File.restoreFromBackup(project_name, project_id)).then(function() {\n\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\t\t\t\t\t\t_restoreFeedback(true);\n\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t});\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Project));\n","/*global $, jQuery*/\n/**\n *\n *\n */\nvar EC = EC || {};\nEC.Settings = EC.Settings || {};\nEC.Settings = (function () {\n    'use strict';\n\n    var project_server_url;\n    var project_server_url_holder;\n    var pagination_radio_btns;\n    var selected_radio_value;\n    var save_btn;\n    var back_btn;\n    var version_name;\n    var version_name_label;\n    var project_name;\n    var header;\n    var enhance_map_checkbox;\n\n    var renderView = function () {\n\n        //set project server url\n        project_server_url = window.localStorage.project_server_url;\n        project_server_url_holder = $('div#settings').find('div#settings-values').find('input#project-server-url');\n        save_btn = $('div#settings div[data-role=\"header\"] div.ui-btn-right[data-href=\"save-settings\"]');\n        back_btn = $('div#settings div[data-role=\"header\"] div[data-href=\"back-btn\"]');\n        version_name_label = $('div#settings div#settings-values p#version-name span.version');\n        pagination_radio_btns = $('form#pagination-options input[type=\"radio\"]');\n        enhance_map_checkbox = $('div#settings div#settings-values input#enhanced-location-google-maps');\n        project_name = window.localStorage.project_name;\n        header = $('div#settings div[data-role=\"header\"] div[data-href=\"back-btn\"] span.project-name');\n\n        //show app version (we use a deferred object as on iOS the version plugins returns a value too late)\n        $.when(EC.Utils.getVersionName()).then(function (the_version_name) {\n            version_name_label.text(the_version_name);\n        });\n\n        project_server_url_holder.val(project_server_url);\n\n        //add project name to header (if a project is actually selected)\n        //if we go directly to the settings page without selecting a project first, project name would be undefined\n        if (project_name) {\n            header.text(project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n        } else {\n            header.text(EC.Const.PROJECT_LIST);\n        }\n\n        //bind save button\n        save_btn.off().one('vclick', function (e) {\n\n            //cache user preferences todo better user a native storage for this a slocalStorage is not 100% reliable\n            window.localStorage.project_server_url = project_server_url_holder.val();\n            window.localStorage.is_enhanced_map_on = (enhance_map_checkbox.is(':checked')) ? 1 : 0;\n\n            //get the checked pagination radio\n            pagination_radio_btns.each(function (index) {\n\n                var checked = $(this).is(':checked');\n\n                if (checked) {\n                    console.log($(this).val());\n                    window.localStorage.QUERY_LIMIT = $(this).val();\n                }\n\n            });\n\n            //show toast on device\n            if (!EC.Utils.isChrome()) {\n                EC.Notification.showToast(EC.Localise.getTranslation('settings_saved_success'), 'short');\n            }\n\n            //go back to previuos page in history\n            if (window.localStorage.current_view_url) {\n                EC.Routing.changePage(window.localStorage.current_view_url);\n            } else {\n\n                //TODO: test this\n                //EC.Routing.changePage(EC.Const.INDEX_VIEW);\n                window.history.back(-1);\n            }\n\n        });\n\n        //bind back button\n        back_btn.off().one('vclick', function (e) {\n\n            if (window.localStorage.current_view_url) {\n                EC.Routing.changePage(window.localStorage.current_view_url);\n            } else {\n\n                //TODO: test this\n                //EC.Routing.changePage(EC.Const.INDEX_VIEW, '../');\n                window.history.back(-1);\n            }\n\n        });\n\n        //check (highlight) the radio button based on user preferences\n        pagination_radio_btns.each(function (index) {\n\n            if ($(this).val() === window.localStorage.QUERY_LIMIT) {\n                $(this).prop('checked', true).checkboxradio('refresh');\n            }\n        });\n\n        //Localise\n        if (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n            EC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n        }\n\n    };\n\n    return {\n        renderView: renderView\n    };\n\n}());\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *\n * Comments here TODO\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.bindUploadButtons = function(the_has_hard_reload_flag) {\n\n\t\t\tvar self = this;\n\t\t\tvar back_button_label = $(\"div#upload div[data-role='header'] div[data-href='back-btn'] span\");\n\t\t\tvar hash;\n\t\t\tvar has_hard_reload = the_has_hard_reload_flag;\n\t\t\tvar media_dir;\n\t\t\tvar project_name = window.localStorage.project_name;\n\t\t\tvar project_id = parseInt(window.localStorage.project_id, 10);\n\n\t\t\tself.upload_data_btn = $('div#upload div#upload-options div#upload-data-btn');\n\t\t\tself.upload_images_btn = $('div#upload div#upload-options div#upload-images-btn');\n\t\t\tself.upload_audios_btn = $('div#upload div#upload-options div#upload-audios-btn');\n\t\t\tself.upload_videos_btn = $('div#upload div#upload-options div#upload-videos-btn');\n\t\t\tself.back_btn = $(\"div#upload div[data-role='header'] div[data-href='back-btn']\");\n\t\t\tself.all_synced_message = $('div#upload div#upload-options .all-synced-message');\n\n\t\t\thash = \"forms.html?project=\" + project_id + \"&name=\" + project_name;\n\t\t\tif (has_hard_reload) {\n\t\t\t\tback_button_label.text(\"Forms\");\n\t\t\t}\n\n\t\t\tif (window.localStorage.back_nav_url && window.localStorage.back_nav_url !== \"#refresh\") {\n\t\t\t\tback_button_label.text(\"Entries\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tback_button_label.text(\"Forms\");\n\t\t\t}\n\n\t\t\t//bind back button for navigating back from upload page\n\t\t\tself.back_btn.off().one('vclick', function(e) {\n\n\t\t\t\t//TODO: we have to decide what is better...go back to save feedback page or\n\t\t\t\t// entries list??\n\t\t\t\t//if (window.localStorage.back_nav_url && window.localStorage.back_nav_url !==\n\t\t\t\t// \"#refresh\") {\n\t\t\t\t//go back to entries list; back_nav_url is an url when user goes to upload page\n\t\t\t\t// after adding/editing an entry\n\t\t\t\t//EC.Routing.changePage(window.localStorage.back_nav_url);\n\t\t\t\t//} else {\n\t\t\t\t//go back to form list\n\t\t\t\twindow.history.back(-1);\n\t\t\t\t//}\n\n\t\t\t});\n\n\t\t\t//bind vclicks data upload\n\t\t\tself.upload_data_btn.off().on('vclick', function(e) {\n\n\t\t\t\t// if no internet connection, show warning and exit\n\t\t\t\tif (!EC.Utils.hasConnection()) {\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"no_internet\"));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//reset rows count\n\t\t\t\tself.hierarchy_rows_to_sync=[];\n\t\t\t\tself.branch_rows_to_sync= [];\n\n\t\t\t\tEC.Notification.showProgressDialog(EC.Localise.getTranslation(\"uploaded\"), EC.Localise.getTranslation(\"wait\"));\n\n\t\t\t\tif (self.is_branch_entry) {\n\n\t\t\t\t\t//prepare branch entry\n\t\t\t\t\tself.prepareOneBranchEntry(self.current_branch_form.name, self.current_branch_entry);\n\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t//prepare hierarchy entry\n\t\t\t\t\tself.prepareOneHierarchyEntry(self.current_form.name, self.current_entry);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t//bind vclicks image upload\n\t\t\tself.upload_images_btn.off().on('vclick', function(e) {\n\n\t\t\t\t// if no internet connection, show warning and exit\n\t\t\t\tif (!EC.Utils.hasConnection()) {\n\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"no_internet\"));\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tEC.Notification.showProgressDialog(EC.Localise.getTranslation(\"uploaded\"), EC.Localise.getTranslation(\"wait\"));\n\n\t\t\t\t//post one image directly as it is already loaded in memory when requesting the\n\t\t\t\t// upload page\n\t\t\t\tmedia_dir = EC.Const.PHOTO_DIR;\n\t\t\t\tEC.File.uploadFile(self.current_image_file, media_dir);\n\n\t\t\t});\n\n\t\t\t//bind vclicks audio upload\n\t\t\tself.upload_audios_btn.off().on('vclick', function(e) {\n\n\t\t\t\t// if no internet connection, show warning and exit\n\t\t\t\tif (!EC.Utils.hasConnection()) {\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"no_internet\"));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tEC.Notification.showProgressDialog(EC.Localise.getTranslation(\"uploaded\"), EC.Localise.getTranslation(\"wait\"));\n\n\t\t\t\tmedia_dir = EC.Const.AUDIO_DIR;\n\t\t\t\tEC.File.uploadFile(self.current_audio_file, media_dir);\n\n\t\t\t});\n\n\t\t\t//bind vclicks video upload\n\t\t\tself.upload_videos_btn.off().on('vclick', function(e) {\n\n\t\t\t\t// if no internet connection, show warning and exit\n\t\t\t\tif (!EC.Utils.hasConnection()) {\n\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"no_internet\"));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tEC.Notification.showProgressDialog(EC.Localise.getTranslation(\"uploaded\"), EC.Localise.getTranslation(\"wait\"));\n\n\t\t\t\tmedia_dir = EC.Const.VIDEO_DIR;\n\t\t\t\tEC.File.uploadFile(self.current_video_file, media_dir);\n\n\t\t\t});\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.handleMedia = function() {\n\t\t\t\n\t\t\tvar self = this;\n\n\t\t\tself.audio_synced = true;\n\t\t\tself.photo_synced = true;\n\t\t\tself.video_synced = true;\n\n\t\t\tvar _audioCheck = function(the_audio) {\n\n\t\t\t\tvar deferred = new $.Deferred();\n\t\t\t\tself.current_audio_file = the_audio;\n\n\t\t\t\tif (!self.current_audio_file) {\n\n\t\t\t\t\tif (self.has_branches) {\n\t\t\t\t\t\t$.when(EC.Select.getOneBranchAudioFile(self.project_id, EC.Const.AUDIO)).then(function(the_audio) {\n\n\t\t\t\t\t\t\tself.current_audio_file = the_audio;\n\t\t\t\t\t\t\tself.is_branch_audio = true;\n\n\t\t\t\t\t\t\t//enable upload audio button\n\t\t\t\t\t\t\tself.upload_audios_btn.removeClass(\"ui-disabled\");\n\t\t\t\t\t\t\tself.audio_synced = false;\n\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\tself.is_branch_audio = false;\n\t\t\t\t\t//enable upload audio button\n\t\t\t\t\tself.upload_audios_btn.removeClass(\"ui-disabled\");\n\t\t\t\t\tself.audio_synced = false;\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t}\n\t\t\t\treturn deferred.promise();\n\t\t\t};\n\n\t\t\tvar _photoCheck = function(the_image) {\n\n\t\t\t\tvar deferred = new $.Deferred();\n\t\t\t\tself.current_image_file = the_image;\n\n\t\t\t\tif (!self.current_image_file) {\n\t\t\t\t\tif (self.has_branches) {\n\t\t\t\t\t\t$.when(EC.Select.getOneBranchPhotoFile(self.project_id, EC.Const.PHOTO)).then(function(the_image) {\n\n\t\t\t\t\t\t\tself.current_image_file = the_image;\n\t\t\t\t\t\t\tself.is_branch_image = true;\n\n\t\t\t\t\t\t\t//enable upload image button\n\t\t\t\t\t\t\tself.upload_images_btn.removeClass(\"ui-disabled\");\n\t\t\t\t\t\t\tself.photo_synced = false;\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\tself.is_branch_image = false;\n\t\t\t\t\t//enable upload image button\n\t\t\t\t\tself.upload_images_btn.removeClass(\"ui-disabled\");\n\t\t\t\t\tself.photo_synced = false;\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t}\n\t\t\t\treturn deferred.promise();\n\t\t\t};\n\n\t\t\tvar _videoCheck = function(the_video) {\n\n\t\t\t\tvar deferred = new $.Deferred();\n\t\t\t\tself.current_video_file = the_video;\n\n\t\t\t\tif (!self.current_video_file) {\n\n\t\t\t\t\tif (self.has_branches) {\n\t\t\t\t\t\t$.when(EC.Select.getOneBranchVideoFile(self.project_id, EC.Const.VIDEO)).then(function(the_video) {\n\n\t\t\t\t\t\t\tself.current_video_file = the_video;\n\t\t\t\t\t\t\tself.video_synced = false;\n\t\t\t\t\t\t\tself.is_branch_video = true;\n\n\t\t\t\t\t\t\t//enable upload audio button\n\t\t\t\t\t\t\tself.upload_videos_btn.removeClass(\"ui-disabled\");\n\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\tself.video_synced = false;\n\t\t\t\t\tEC.Upload.is_branch_video = false;\n\t\t\t\t\t//enable upload video button\n\t\t\t\t\tself.upload_videos_btn.removeClass(\"ui-disabled\");\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t}\n\t\t\t\treturn deferred.promise();\n\t\t\t};\n\n\t\t\t/*We are using a super safe approach to just fetch 1 single row (file) per media\n\t\t\t * type, and then fetch the next one recursively (like we did for data)\n\t\t\t *It is a bit slower but I will have only 1 element at a time in memory and it is\n\t\t\t * easier to recover from a failure (dropped connections, server down, phone\n\t\t\t * kills the app, etc)\n\t\t\t */\n\n\t\t\t$.when(EC.Select.getOneHierarchyMediaPerType(self.project_id)).then(function(the_image, the_audio, the_video) {\n\n\t\t\t\t//got media, enable buttons with media and look for branch file if no hierarchy\n\t\t\t\t// media found\n\t\t\t\tself.current_image_file = the_image;\n\t\t\t\tself.current_audio_file = the_audio;\n\t\t\t\tself.current_video_file = the_video;\n\n\t\t\t\t//if all media are synced, show all synced message\n\t\t\t\t$.when(_photoCheck(self.current_image_file), _audioCheck(self.current_audio_file), _videoCheck(self.current_video_file)).then(function() {\n\t\t\t\t\tif (!(self.audio_synced && self.photo_synced && self.video_synced)) {\n\t\t\t\t\t\tself.all_synced_message.addClass('hidden');\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tself.all_synced_message.removeClass('hidden');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}, function() {\n\n\t\t\t\t//TODO: no media found (image, audio, video are ALL empty)\n\t\t\t\t//do nothing yet\n\t\t\t\tself.all_synced_message.removeClass('hidden');\n\t\t\t});\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Upload));\n","var EC = EC || {};\nEC.Upload = (function (module) {\n    'use strict';\n\n    module.project_id = '';\n    module.project_name = '';\n    module.hierarchy_rows_to_sync = [];\n    module.branch_rows_to_sync = [];\n    module.main_rows_to_post = [];\n    module.main_entries = [];\n    module.hierarchy_forms = [];\n    module.action = EC.Const.START_HIERARCHY_UPLOAD;\n    module.current_entry = {};\n    module.current_branch_entry = {};\n    module.current_form = {};\n    module.current_branch_form = {};\n    module.has_branches = false;\n    module.audio_synced = '';\n    module.photo_synced = '';\n    module.video_synced = '';\n    module.current_image_file = '';\n    module.current_audio_file = '';\n    module.current_video_file = '';\n    module.upload_data_btn = '';\n    module.upload_images_btn = '';\n    module.upload_audios_btn = '';\n    module.upload_videos_btn = '';\n    module.upload_data_feedback = '';\n    module.back_btn = '';\n    module.all_synced_message = '';\n\n    //cache upload url for the current project in localStorage\n    module.setUploadURL = function (the_url) {\n        window.localStorage.upload_URL = the_url;\n    };\n\n    //get upload URL, when testing on Chrome returns 'test.php'\n    module.getUploadURL = function () {\n        return (!EC.Utils.isChrome()) ? window.localStorage.upload_URL : 'test.php';\n    };\n    return module;\n}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\"use strict\";\n\n\t\tvar branch_form_name;\n\t\tvar project_id;\n\t\tvar hierarchy_entry_key_value;\n\t\t\n\t\tmodule.branch_rows_to_sync = [];\n\n\t\tmodule.postBranchEntries = function(the_hierarchy_entry_key_value) {\n\t\t\t\n\t\t\tvar self = this;\n\t\t\tbranch_form_name = self.branch_form_name;\n\t\t\tproject_id = parseInt(window.localStorage.project_id, 10);\n\t\t\thierarchy_entry_key_value = the_hierarchy_entry_key_value;\n\n\t\t\tEC.Select.getOneBranchEntry(branch_form_name, project_id, hierarchy_entry_key_value);\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\"use strict\";\n\n\t\tmodule.postOneBranchEntry = function() {\n\n\t\t\tvar self = this;\n\t\t\tvar upload_URL;\n\t\t\tvar project_id = parseInt(window.localStorage.project_id,10);\n\t\t\tconsole.log(self.branch_entry_post_obj);\n\n\t\t\tupload_URL = self.getUploadURL();\n\n\t\t\t//set upload URL for this project if not in localStorage yet\n\t\t\tif (!EC.Utils.isChrome() && !upload_URL) {\n\t\t\t\t$.when(EC.Select.getUploadURL(project_id)).then(function(the_project_url) {\n\t\t\t\t\t//enable upload data button\n\t\t\t\t\tconsole.log(\"Project URL is: \" + the_project_url);\n\t\t\t\t\tupload_URL = the_project_url;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//branch object ready to be posted\n\t\t\t$.ajax({\n\t\t\t\ttype : \"POST\",\n\t\t\t\turl : upload_URL,\n\t\t\t\tcrossDomain : true,\n\t\t\t\ttimeout : 20000, //timeout after 20 secs\n\t\t\t\tdata : $.param(self.branch_entry_post_obj), //use $.param() to convert the object to a query string (?key=value&key2=value2...)\n\t\t\t\tsuccess : function(response) {\n\n\t\t\t\t\t//server response is 1 when successful\n\t\t\t\t\tif (response === '1') {\n\n\t\t\t\t\t\t//clear post object\n\t\t\t\t\t\tself.branch_entry_post_obj = {};\n\n\t\t\t\t\t\t// //halt execution and flag the branch rows just uploaded as synced\n\t\t\t\t\t\tEC.Update.setBranchEntryAsSynced(self.branch_rows_to_sync).then(function() {\n\n\t\t\t\t\t\t\t//entry rows synced, upload next entry (if any)\n\t\t\t\t\t\t\tself.action = EC.Const.BRANCH_RECURSION;\n\t\t\t\t\t\t\tEC.Select.getOneBranchEntry(project_id, self.current_branch_form.name, false);\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//a problem occured while uploading/saving data on the server side\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Recover an entry to be uploaded (it will be the last one the user tried to upload but the upload failed)\n\t\t\t\t\t\t */\n\n\t\t\t\t\t\t$.when(EC.Select.getOneBranchEntry(self.current_branch_form).then(function(branch_entry) {\n\n\t\t\t\t\t\t\t//Entry found, prepare entry for upload\n\t\t\t\t\t\t\tEC.Upload.current_entry = branch_entry;\n\n\t\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\t\t\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"upload_error\"));\n\n\t\t\t\t\t\t\tself.branch_rows_to_sync.length = 0;\n\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\t\t\t\terror : function(request, status, error) {\n\n\t\t\t\t\t//show request error\n\t\t\t\t\tconsole.log(status + \", \" + error);\n\t\t\t\t\tconsole.log('request: ' + JSON.stringify(request));\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Recover an entry to be uploaded (it will be the last one the user tried to upload but the upload failed)\n\t\t\t\t\t */\n\n\t\t\t\t\t$.when(EC.Select.getOneBranchEntry(self.current_branch_form).then(function(entry) {\n\n\t\t\t\t\t\t//Entry found, prepare entry for upload\n\t\t\t\t\t\tEC.Upload.current_entry = entry;\n\t\t\t\t\t\tself.branch_rows_to_sync.length = 0;\n\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\t\t\t\t//connection lost BEFORE tryng the ajax request\n\t\t\t\t\t\tif (status === \"error\" && error === \"\") {\n\n\t\t\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"connection_lost\"));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//server timeout\n\t\t\t\t\t\t//connection lost BEFORE tryng the ajax request\n\t\t\t\t\t\tif (status === \"timeout\" && error === \"timeout\") {\n\n\t\t\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"connection_timeout\"));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t});\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\"use strict\";\n\n\t\tmodule.postOneHierarchyEntry = function() {\n\n\t\t\tvar self = this;\n\t\t\tvar upload_URL;\n\t\t\tvar project_id = parseInt(window.localStorage.project_id, 10);\n\n\t\t\tfunction _sendRequest() {\n\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype : \"POST\",\n\t\t\t\t\turl : upload_URL,\n\t\t\t\t\tcrossDomain : true,\n\t\t\t\t\ttimeout : 20000, //timeout after 20 secs\n\t\t\t\t\tdata : $.param(self.hierarchy_entry_post_obj), //use $.param() to convert the object to a query string (?key=value&key2=value2...)\n\t\t\t\t\tsuccess : function(response) {\n\n\t\t\t\t\t\t//server response is 1 when successful: need to create a better object on the server side\n\t\t\t\t\t\tif (response === '1') {\n\n\t\t\t\t\t\t\t//clear post object\n\t\t\t\t\t\t\tself.hierarchy_entry_post_obj = {};\n\n\t\t\t\t\t\t\t// //halt execution and flag the hierarchy rows just uploaded as synced\n\t\t\t\t\t\t\tEC.Update.setHierarchyEntryAsSynced(self.hierarchy_rows_to_sync).then(function() {\n\n\t\t\t\t\t\t\t\t//entry rows synced, upload next entry (if any)\n\t\t\t\t\t\t\t\tself.action = EC.Const.HIERARCHY_RECURSION;\n\t\t\t\t\t\t\t\tEC.Select.getOneHierarchyEntry(self.current_form, false);\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//a problem occured while uploading/saving data on the server side\n\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Recover an entry to be uploaded (it will be the last one the user tried to upload but the upload failed)\n\t\t\t\t\t\t\t */\n\n\t\t\t\t\t\t\t$.when(EC.Select.getOneHierarchyEntry(self.current_form).then(function(entry) {\n\n\t\t\t\t\t\t\t\t//Entry found, prepare entry for upload\n\t\t\t\t\t\t\t\tEC.Upload.current_entry = entry;\n\n\t\t\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\t\t\t\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"upload_error\"));\n\n\t\t\t\t\t\t\t\tself.hierarchy_rows_to_sync.length = 0;\n\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t},\n\t\t\t\t\terror : function(request, status, error) {\n\n\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\t\t\t\t//show request error\n\t\t\t\t\t\tconsole.log(status + \", \" + error);\n\t\t\t\t\t\tconsole.log('request: ' + JSON.stringify(request));\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Recover an entry to be uploaded (it will be the last one the user tried to upload but the upload failed)\n\t\t\t\t\t\t */\n\n\t\t\t\t\t\t$.when(EC.Select.getOneHierarchyEntry(self.current_form, true).then(function(entry) {\n\n\t\t\t\t\t\t\t//Entry found, prepare entry for upload\n\t\t\t\t\t\t\tEC.Upload.current_entry = entry;\n\t\t\t\t\t\t\tself.hierarchy_rows_to_sync.length = 0;\n\t\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\t\t\t\t\t//connection lost BEFORE tryng the ajax request\n\t\t\t\t\t\t\tif (status === \"error\" && error === \"\") {\n\n\t\t\t\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"connection_lost\"));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//server timeout\n\t\t\t\t\t\t\t//connection lost BEFORE tryng the ajax request\n\t\t\t\t\t\t\tif (status === \"timeout\" && error === \"timeout\") {\n\n\t\t\t\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), EC.Localise.getTranslation(\"connection_timeout\"));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//TODO: SQL issues\n\t\t\t\t\t\t\tif (request.status === 405) {\n\t\t\t\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), request.responseText);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//TODO / network issues\n\t\t\t\t\t\t\tif (request.status === 403) {\n\t\t\t\t\t\t\t\tEC.Notification.showAlert(EC.Localise.getTranslation(\"error\"), error + EC.Localise.getTranslation(\"check_your_internet\"));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\n\t\t\tconsole.log(self.hierarchy_entry_post_obj);\n\n\t\t\tupload_URL = self.getUploadURL();\n\n\t\t\t//set upload URL for this project if not in localStorage yet\n\t\t\tif (!EC.Utils.isChrome() && !upload_URL) {\n\t\t\t\t$.when(EC.Select.getUploadURL(project_id)).then(function(the_project_url) {\n\t\t\t\t\t//enable upload data button\n\t\t\t\t\tconsole.log(\"Project URL is: \" + the_project_url);\n\t\t\t\t\tupload_URL = the_project_url;\n\t\t\t\t\t_sendRequest();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t_sendRequest();\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\"use strict\";\n\n\t\tvar branch_entry;\n\t\tvar self;\n\n\t\tmodule.branch_entry_post_obj = {};\n\n\t\tmodule.prepareOneBranchEntry = function(the_table, the_entry) {\n\n\t\t\tvar current_ref;\n\t\t\tvar current_value;\n\t\t\tvar parent_ref;\n\t\t\tvar parent_value;\n\t\t\tvar branch_entry = the_entry;\n\n\t\t\tself = this;\n\t\t\tself.values = branch_entry.values;\n\t\t\tself.branch_entry_key = branch_entry.entry_key;\n\t\t\tself.branch_rows_to_sync = [];\n\n\t\t\t//table name\n\t\t\tself.branch_entry_post_obj.table = the_table;\n\n\t\t\t//hierarchy entry owning thi branch\n\t\t\tself.branch_entry_post_obj[branch_entry.hierarchy_entry_key_ref] = branch_entry.hierarchy_entry_key_value;\n\n\t\t\t//timestamp when entry is first created\n\t\t\tself.branch_entry_post_obj.ecTimeCreated = branch_entry.created_on;\n\n\t\t\t//phone uuid\n\t\t\tself.branch_entry_post_obj.ecPhoneID = EC.Utils.getPhoneUUID();\n\n\t\t\t//append entry values to main entry object to be posted\n\t\t\tself.appendBranchEntryValue(self.values.shift(), self.branch_entry_key);\n\n\t\t};\n\n\t\tmodule.appendBranchEntryValue = function(the_entry_value) {\n\n\t\t\tvar self = this;\n\t\t\tvar current_value;\n\t\t\tvar current_ref;\n\t\t\tvar branch_form;\n\n\t\t\tcurrent_value = the_entry_value.value;\n\t\t\tcurrent_ref = the_entry_value.ref;\n\n\t\t\t/*Keep track of row _id (if _id is empty, it is because the location value was split into 4 parts but just one row is saved in the database)\n\t\t\t *rows _ids are needed later to sync the branch entry after a successful upload\n\t\t\t */\n\n\t\t\tif (the_entry_value._id !== \"\") {\n\t\t\t\tself.branch_rows_to_sync.push({\n\t\t\t\t\t_id : the_entry_value._id\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//common value, add it to main entry object\n\t\t\tself.branch_entry_post_obj[current_ref] = current_value;\n\n\t\t\t//append next value(if any)\n\t\t\tif (self.values.length > 0) {\n\n\t\t\t\tself.appendBranchEntryValue(self.values.shift(), self.branch_entry_key);\n\n\t\t\t} else {\n\n\t\t\t\t//no more values to append to the object to be posted for this branch entry, so post 1 single branch entry\n\t\t\t\tself.postOneBranchEntry();\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Upload));\n","var EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = (function (module) {\n    'use strict';\n\n    //property to hold arrays of values across module\n    module.values = [];\n    //property to hold main entry key value across module\n    module.main_entry_key = [];\n    //branch_form name across modules\n    module.branch_form_name = '';\n    module.hierarchy_entry_post_obj = {};\n\n    /**\n     * Post a single row (server side) which consists of all the input values for a form entry\n     */\n    module.prepareOneHierarchyEntry = function (the_table, the_entry) {\n\n        var self = this;\n        var parent_ref;\n        var parent_value;\n        var entry = the_entry;\n\n        self.values = entry.values;\n        self.hierarchy_rows_to_sync = [];\n\n        //table name\n        self.hierarchy_entry_post_obj.table = the_table;\n\n        //timestamp when entry is first created\n        self.hierarchy_entry_post_obj.ecTimeCreated = entry.created_on;\n\n        //phone uuid\n        self.hierarchy_entry_post_obj.ecPhoneID = EC.Utils.getPhoneUUID();\n\n        //add parent ref and parent value for a child form (if defined)\n        if (entry.parent_ref !== undefined) {\n\n            parent_ref = entry.parent_ref;\n            parent_value = entry.parent_key_value;\n            self.hierarchy_entry_post_obj[parent_ref] = parent_value;\n        }\n        //append entry values to main entry object to be posted\n        self.appendEntryValue(self.values.shift());\n    };\n\n    module.appendEntryValue = function (the_entry_value) {\n\n        var self = this;\n        var current_value;\n        var current_ref;\n\n        current_value = the_entry_value.value;\n        current_ref = the_entry_value.ref;\n\n        //keep track of row _id (if _id is empty, it is because the location value was split into 4 parts but just one row is saved in the database)\n        if (the_entry_value._id !== '') {\n            self.hierarchy_rows_to_sync.push({\n                _id: the_entry_value._id,\n                type: the_entry_value.type\n            });\n        }\n\n        /*if the current value is a branch skip it, we do not need it as part of the hierarchy post\n         * Branches need to be uploaded separately, AFTER all hierarchy entries have been uploaded\n         */\n        if (the_entry_value.type !== EC.Const.BRANCH) {\n            //common value, add it to main entry object\n            self.hierarchy_entry_post_obj[current_ref] = current_value;\n        }\n\n        //append next value(if any)\n        if (self.values.length > 0) {\n\n            self.appendEntryValue(self.values.shift());\n\n        } else {\n\n            //TODO: no more values to append to the object to be posted for this main entry, so post 1 single main entry\n            console.log(self.hierarchy_entry_post_obj);\n            //no more values to append, post main entry now as all the branch entries have been uploaded\n            self.postOneHierarchyEntry();\n        }\n\n    };\n\n    return module;\n\n}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *\n * Comments here TODO\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.renderUploadView = function(the_has_hard_reload_flag) {\n\n\t\t\tvar self = this;\n\t\t\tvar has_hard_reload = the_has_hard_reload_flag;\n\n\t\t\tself.project_name = window.localStorage.project_name;\n\t\t\tself.project_id = parseInt(window.localStorage.project_id, 10);\n\t\t\tself.has_branches = EC.Utils.projectHasBranches();\n\t\t\tself.hierarchy_forms = JSON.parse(window.localStorage.forms);\n\t\t\tself.current_form = self.hierarchy_forms.shift();\n\t\t\tself.current_entry = {};\n\t\t\tself.action = EC.Const.START_HIERARCHY_UPLOAD;\n\n\t\t\t//set label (page title)\n\t\t\tconsole.log(self.project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n\t\t\t$(\"div#upload div[data-role='navbar'] ul li.title-tab span#upload-label span.project-name\").text(self.project_name.trunc(EC.Const.PROJECT_NAME_MAX_LENGTH));\n\n\t\t\t//bind view buttons\n\t\t\tself.bindUploadButtons(has_hard_reload, self);\n\n\t\t\t//Localise\n\t\t\tif (window.localStorage.DEVICE_LANGUAGE !== EC.Const.ENGLISH) {\n\t\t\t\tEC.Localise.applyToHTML(window.localStorage.DEVICE_LANGUAGE);\n\t\t\t}\n\n\t\t\t//callback when a single un-synced hierarchy entry is found\n\t\t\tfunction _onOneHierarchyEntryFound(the_entry) {\n\n\t\t\t\t//Entry found, prepare entry for upload\n\t\t\t\tself.current_entry = the_entry;\n\n\t\t\t\t//keep track this is a hierarchy entry\n\t\t\t\tself.is_branch_entry = false;\n\n\t\t\t\t//enable upload data button\n\t\t\t\tself.upload_data_btn.removeClass(\"ui-disabled\");\n\n\t\t\t\t//hide all synced message\n\t\t\t\tself.all_synced_message.addClass('hidden');\n\t\t\t}\n\n\t\t\t//callback when no hierarchy un-synced entries are found upon first page load\n\t\t\tfunction _onOneHierarchyEntryNotFound() {\n\n\t\t\t\tconsole.log(\"No unsynced hierarchy data entry found\");\n\n\t\t\t\t//reset branch forms array to get rid of old cahced forms\n\t\t\t\tself.branch_forms = [];\n\n\t\t\t\t//no hierarchy entry found, if the project has branches check for any un-synced\n\t\t\t\t// branch entries\n\t\t\t\tif (self.has_branches) {\n\n\t\t\t\t\tvar _onOneBranchEntryFound = function(the_branch_entry) {\n\n\t\t\t\t\t\t//Entry found, prepare entry for upload\n\t\t\t\t\t\tself.current_branch_entry = the_branch_entry;\n\n\t\t\t\t\t\t//keep track this is a branch entry\n\t\t\t\t\t\tself.is_branch_entry = true;\n\n\t\t\t\t\t\t//enable upload data button\n\t\t\t\t\t\tself.upload_data_btn.removeClass(\"ui-disabled\");\n\t\t\t\t\t\tself.all_synced_message.addClass('hidden');\n\t\t\t\t\t};\n\n\t\t\t\t\tvar _onOneBranchEntryNotFound = function() {\n\n\t\t\t\t\t\t//no branch entries found, handle media\n\t\t\t\t\t\tself.handleMedia();\n\n\t\t\t\t\t};\n\n\t\t\t\t\t//start brach upload\n\t\t\t\t\tself.action = EC.Const.START_BRANCH_UPLOAD;\n\n\t\t\t\t\t//get branch forms for this project BEFORE tryng to look for a branch entry\n\t\t\t\t\t$.when(EC.Select.getBranchForms(self.project_id)).then(function(the_branch_forms) {\n\n\t\t\t\t\t\tself.branch_forms = the_branch_forms;\n\t\t\t\t\t\tself.current_branch_form = self.branch_forms.shift();\n\n\t\t\t\t\t\t//look for a branch entry for the first form\n\t\t\t\t\t\t$.when(EC.Select.getOneBranchEntry(self.project_id, self.current_branch_form.name, true).then(_onOneBranchEntryFound, _onOneBranchEntryNotFound));\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t/* This project does not have branches: since no hierarchy entries were found,\n\t\t\t\t\t * check if we have any media ready to upload (is_data_synced = 1 AND\n\t\t\t\t\t * is_media_synced = 0)\n\t\t\t\t\t */\n\t\t\t\t\tself.handleMedia();\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//let's start looking at hierarchy branches first, then branches\n\t\t\tself.is_branch_image = false;\n\t\t\tself.is_branch_audio = false;\n\t\t\tself.is_branch_video = false;\n\n\t\t\t//get first hierarchy entry not yet synced. The approach is to upload and sync a\n\t\t\t// single entry (cluster of rows) at a time\n\t\t\t$.when(EC.Select.getOneHierarchyEntry(self.current_form, true).then(_onOneHierarchyEntryFound, _onOneHierarchyEntryNotFound));\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery, cordova, device*/\n/*\n *\n * Comments here TODO\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\n\t\t\"use strict\";\n\n\t\tmodule.renderUploadViewFeedback = function(is_successful) {\n\n\t\t\tvar self = this;\n\n\t\t\t//notify user all data were uploaded successfully\n\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\t//show upload success notification only after an upload. When the user first\n\t\t\t// request the uplad view, that will not be shown\n\t\t\tif (self.action === EC.Const.STOP_HIERARCHY_UPLOAD || self.action === EC.Const.STOP_BRANCH_UPLOAD) {\n\t\t\t\tif (is_successful) {\n\n\t\t\t\t\t//disable data upload button as no data to upload any more\n\t\t\t\t\tself.upload_data_btn.addClass('ui-disabled');\n\t\t\t\t\tself.all_synced_message.removeClass('hidden');\n\n\t\t\t\t\tEC.Notification.showToast(EC.Localise.getTranslation(\"data_upload_success\"), \"short\");\n\n\t\t\t\t\t//look for media to upload (if any)\n\t\t\t\t\tself.handleMedia();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\treturn module;\n\n\t}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n/*\n *\n * Comments here - todo\n *\n */\nvar EC = EC || {};\nEC.Upload = EC.Upload || {};\nEC.Upload = ( function(module) {\n\t\t\"use strict\";\n\n\t\tvar upload_images_btn;\n\t\tvar upload_audios_btn;\n\t\tvar upload_videos_btn;\n\n\t\tmodule.uploadNextFile = function(the_media_type) {\n\n\t\t\tvar self = this;\n\t\t\tvar media_dir;\n\t\t\tvar project_id = parseInt(window.localStorage.project_id, 10);\n\t\t\tvar all_synced_message = $('div#upload div#upload-options .all-synced-message');\n\n\t\t\t//upload another file of same type (if any)\n\t\t\tswitch(the_media_type) {\n\n\t\t\t\tcase EC.Const.PHOTO:\n\n\t\t\t\t\t//get next image (if any)\n\t\t\t\t\t$.when(EC.Select.getOneHierarchyMediaFile(project_id, EC.Const.PHOTO).then(function(the_image) {\n\n\t\t\t\t\t\t//post image\n\t\t\t\t\t\tmedia_dir = EC.Const.PHOTO_DIR;\n\t\t\t\t\t\tEC.Upload.is_branch_image = false;\n\t\t\t\t\t\tEC.File.uploadFile(the_image, media_dir);\n\n\t\t\t\t\t}, function() {\n\n\t\t\t\t\t\t/* no more hierarchy images to post\n\t\t\t\t\t\t * check branches for images\n\t\t\t\t\t\t */\n\t\t\t\t\t\t$.when(EC.Select.getOneBranchPhotoFile(project_id)).then(function(the_branch_image) {\n\n\t\t\t\t\t\t\t//post image\n\t\t\t\t\t\t\tmedia_dir = EC.Const.PHOTO_DIR;\n\t\t\t\t\t\t\tEC.Upload.is_branch_image = true;\n\t\t\t\t\t\t\tEC.File.uploadFile(the_branch_image, media_dir);\n\n\t\t\t\t\t\t}, function() {\n\n\t\t\t\t\t\t\t//disable upload images button, as no more images to upload\n\t\t\t\t\t\t\tupload_images_btn = $('div#upload div#upload-options div#upload-images-btn');\n\t\t\t\t\t\t\tupload_images_btn.addClass(\"ui-disabled\");\n\t\t\t\t\t\t\tself.photo_synced = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//if all sync show message\n\t\t\t\t\t\t\tif (!(self.audio_synced && self.photo_synced && self.video_synced)) {\n\t\t\t\t\t\t\t\tall_synced_message.addClass('hidden');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tall_synced_message.removeClass('hidden');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//notify user all data were uploaded successfully\n\t\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\t\t\t\t\t//show feedback message to user\n\t\t\t\t\t\t\tEC.Notification.showToast(EC.Localise.getTranslation(\"all_images_uploaded\"), \"short\");\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}));\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.AUDIO:\n\n\t\t\t\t\t//get next audio file (if any)\n\t\t\t\t\t$.when(EC.Select.getOneHierarchyMediaFile(project_id, EC.Const.AUDIO).then(function(the_audio) {\n\n\t\t\t\t\t\t//post audio file\n\t\t\t\t\t\tmedia_dir = EC.Const.AUDIO_DIR;\n\t\t\t\t\t\tEC.Upload.is_branch_audio = false;\n\t\t\t\t\t\tEC.File.uploadFile(the_audio, media_dir);\n\n\t\t\t\t\t}, function() {\n\n\t\t\t\t\t\t/* No more audio files to post\n\t\t\t\t\t\t * check branches for audios\n\t\t\t\t\t\t */\n\t\t\t\t\t\t$.when(EC.Select.getOneBranchAudioFile(project_id)).then(function(the_branch_audio) {\n\n\t\t\t\t\t\t\t//post image\n\t\t\t\t\t\t\tmedia_dir = EC.Const.AUDIO_DIR;\n\t\t\t\t\t\t\tEC.Upload.is_branch_audio = true;\n\t\t\t\t\t\t\tEC.File.uploadFile(the_branch_audio, media_dir);\n\n\t\t\t\t\t\t}, function() {\n\n\t\t\t\t\t\t\t//disable upload audios button, as no more audio files to upload\n\t\t\t\t\t\t\tupload_audios_btn = $('div#upload div#upload-options div#upload-audios-btn');\n\t\t\t\t\t\t\tupload_audios_btn.addClass(\"ui-disabled\");\n\t\t\t\t\t\t\tself.audio_synced = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//if all sync show message\n\t\t\t\t\t\t\tif (!(self.audio_synced && self.photo_synced && self.video_synced)) {\n\t\t\t\t\t\t\t\tall_synced_message.addClass('hidden');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tall_synced_message.removeClass('hidden');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//notify user all data were uploaded successfully\n\t\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\t\t\t\t\t//show feedback message to user\n\t\t\t\t\t\t\tEC.Notification.showToast(EC.Localise.getTranslation(\"all_audios_uploaded\"), \"short\");\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EC.Const.VIDEO:\n\n\t\t\t\t\t//get next image (if any)\n\t\t\t\t\t$.when(EC.Select.getOneHierarchyMediaFile(project_id, EC.Const.VIDEO).then(function(the_video) {\n\n\t\t\t\t\t\t//post video\n\t\t\t\t\t\tmedia_dir = EC.Const.VIDEO_DIR;\n\t\t\t\t\t\tEC.File.uploadFile(the_video, media_dir);\n\n\t\t\t\t\t}, function() {\n\n\t\t\t\t\t\t/* No more video files to post\n\t\t\t\t\t\t * check branches for video files\n\t\t\t\t\t\t */\n\t\t\t\t\t\t$.when(EC.Select.getOneBranchVideoFile(project_id)).then(function(the_branch_video) {\n\n\t\t\t\t\t\t\t//post image\n\t\t\t\t\t\t\tmedia_dir = EC.Const.VIDEO_DIR;\n\t\t\t\t\t\t\tEC.Upload.is_branch_video = true;\n\t\t\t\t\t\t\tEC.File.uploadFile(the_branch_video, media_dir);\n\n\t\t\t\t\t\t}, function() {\n\n\t\t\t\t\t\t\t//disable upload audios button, as no more audio files to upload\n\t\t\t\t\t\t\tupload_videos_btn = $('div#upload div#upload-options div#upload-videos-btn');\n\t\t\t\t\t\t\tupload_videos_btn.addClass(\"ui-disabled\");\n\t\t\t\t\t\t\tself.video_synced = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//if all sync show message\n\t\t\t\t\t\t\tif (!(self.audio_synced && self.photo_synced && self.video_synced)) {\n\t\t\t\t\t\t\t\tall_synced_message.addClass('hidden');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tall_synced_message.removeClass('hidden');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//notify user all data were uploaded successfully\n\t\t\t\t\t\t\tEC.Notification.hideProgressDialog();\n\n\t\t\t\t\t\t\t//show feedback message to user\n\t\t\t\t\t\t\tEC.Notification.showToast(EC.Localise.getTranslation(\"all_videos_uploaded\"), \"short\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}));\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Upload));\n","/*jslint vars: true , nomen: true devel: true, plusplus: true*/\n/*global $, jQuery*/\n\n/**\n * @module EC\n * @submodule Test\n *\n */\n\nvar EC = EC || {};\nEC.Test = EC.Test || {};\nEC.Test = ( function(module) {\"use strict\";\n\n\t\tvar total;\n\t\tvar deferred;\n\n\t\tfunction _makeString(how_long) {\n\n\t\t\tvar text = \"\";\n\t\t\tvar possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\t\t\tvar i;\n\n\t\t\tfor ( i = 0; i < how_long; i++) {\n\t\t\t\ttext += possible.charAt(Math.floor(Math.random() * possible.length));\n\t\t\t}\n\t\t\treturn text;\n\t\t}\n\n\t\tvar _insertFormValuesTX = function(tx) {\n\n\t\t\tvar i;\n\t\t\tvar iLength = total;\n\t\t\tvar query;\n\t\t\tvar obj;\n\t\t\tvar remote_flag = 0;\n\n\t\t\tfor ( i = 0; i < iLength; i++) {\n\n\t\t\t\tquery = \"\";\n\t\t\t\tobj = {};\n\t\t\t\tobj.parent = \"\";\n\t\t\t\tobj.is_data_synced = 0;\n\t\t\t\tobj.is_media_synced = 0;\n\t\t\t\tobj.created_on = EC.Utils.getTimestamp();\n\n\t\t\t\tif (i % 2 === 0) {\n\n\t\t\t\t\t//this is the ID input\n\t\t\t\t\tobj.label = \"ID\";\n\t\t\t\t\tobj.ref = \"id\";\n\n\t\t\t\t\tquery += 'INSERT INTO ec_data (';\n\t\t\t\t\tquery += 'input_id, ';\n\t\t\t\t\tquery += 'form_id, ';\n\t\t\t\t\tquery += 'position, ';\n\t\t\t\t\tquery += 'parent, ';\n\t\t\t\t\tquery += 'label, ';\n\t\t\t\t\tquery += 'ref, ';\n\t\t\t\t\tquery += 'value, ';\n\t\t\t\t\tquery += 'is_title, ';\n\t\t\t\t\tquery += 'entry_key, ';\n\t\t\t\t\tquery += 'type, ';\n\t\t\t\t\tquery += 'created_on, ';\n\t\t\t\t\tquery += 'is_data_synced, ';\n\t\t\t\t\tquery += 'is_remote, ';\n\t\t\t\t\tquery += 'is_media_synced) ';\n\t\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\t\tquery += 1 + '\", \"';\n\t\t\t\t\tquery += 1 + '\", \"';\n\t\t\t\t\tquery += 1 + '\", \"';\n\t\t\t\t\tquery += obj.parent + '\", \"';\n\t\t\t\t\tquery += obj.label + '\", \"';\n\t\t\t\t\tquery += obj.ref + '\", \"';\n\t\t\t\t\tquery += i+10000 + '\", \"';\n\t\t\t\t\tquery += 1 + '\", \"';\n\t\t\t\t\tquery += i+10000 + '\", \"';\n\t\t\t\t\tquery += EC.Const.INTEGER + '\", \"';\n\t\t\t\t\tquery += obj.created_on + '\", \"';\n\t\t\t\t\tquery += obj.is_data_synced + '\", \"';\n\t\t\t\t\tquery += remote_flag + '\", \"';\n\t\t\t\t\tquery += obj.is_media_synced + '\");';\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//this is the name input\n\t\t\t\t\tobj.label = \"Name\";\n\t\t\t\t\tobj.ref = \"ecplus_form_ctrl2\";\n\n\t\t\t\t\tquery += 'INSERT INTO ec_data (';\n\t\t\t\t\tquery += 'input_id, ';\n\t\t\t\t\tquery += 'form_id, ';\n\t\t\t\t\tquery += 'position, ';\n\t\t\t\t\tquery += 'parent, ';\n\t\t\t\t\tquery += 'label, ';\n\t\t\t\t\tquery += 'ref, ';\n\t\t\t\t\tquery += 'value, ';\n\t\t\t\t\tquery += 'is_title, ';\n\t\t\t\t\tquery += 'entry_key, ';\n\t\t\t\t\tquery += 'type, ';\n\t\t\t\t\tquery += 'created_on, ';\n\t\t\t\t\tquery += 'is_data_synced, ';\n\t\t\t\t\tquery += 'is_remote, ';\n\t\t\t\t\tquery += 'is_media_synced) ';\n\t\t\t\t\tquery += 'VALUES (\"';\n\t\t\t\t\tquery += 2 + '\", \"';\n\t\t\t\t\tquery += 1 + '\", \"';\n\t\t\t\t\tquery += 2 + '\", \"';\n\t\t\t\t\tquery += obj.parent + '\", \"';\n\t\t\t\t\tquery += obj.label + '\", \"';\n\t\t\t\t\tquery += obj.ref + '\", \"';\n\t\t\t\t\tquery += _makeString(25) + '\", \"';\n\t\t\t\t\tquery += 1 + '\", \"';\n\t\t\t\t\tquery += i-1 + 10000+ '\", \"';\n\t\t\t\t\tquery += EC.Const.TEXT + '\", \"';\n\t\t\t\t\tquery += obj.created_on + '\", \"';\n\t\t\t\t\tquery += obj.is_data_synced + '\", \"';\n\t\t\t\t\tquery += remote_flag + '\", \"';\n\t\t\t\t\tquery += obj.is_media_synced + '\");';\n\n\t\t\t\t}\n\n\t\t\t\ttx.executeSql(query, [], _insertFormValuesSQLSuccessCB, _errorCB);\n\n\t\t\t}//for\n\n\t\t};\n\n\t\tvar _onupdateHierarchyEntriesCounterSQLCB = function() {\n\t\t};\n\n\t\tvar _updateHierarchyEntriesCounterTX = function(tx) {\n\n\t\t\tvar query = 'UPDATE ec_forms SET entries = entries + ' + total/2 + ' WHERE _id=?';\n\n\t\t\ttx.executeSql(query, [1], _onupdateHierarchyEntriesCounterSQLCB, _errorCB);\n\t\t};\n\n\t\tvar _onCounterUpdateSuccessCB = function() {\n\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tvar _insertFormValuesSQLSuccessCB = function() {\n\t\t\tconsole.log(\"FORM VALUE SQL QUERY SUCCESS\");\n\t\t};\n\n\t\tvar _errorCB = function(the_tx, the_result) {\n\t\t\tconsole.log(the_result);\n\t\t\tdeferred.reject();\n\t\t};\n\n\t\tvar _insertFormValuesSuccessCB = function() {\n\n\t\t\tEC.db.transaction(_updateHierarchyEntriesCounterTX, _errorCB, _onCounterUpdateSuccessCB);\n\n\t\t};\n\n\t\t/*\n\t\t * Commit a form to database; each value is a row in the table ec_data\n\t\t * a single entry get multiple rows\n\t\t */\n\t\tmodule.insertEntries = function(the_total) {\n\n\t\t\ttotal = the_total;\n\t\t\tdeferred = new $.Deferred();\n\n\t\t\tEC.db.transaction(_insertFormValuesTX, _errorCB, _insertFormValuesSuccessCB);\n\n\t\t\treturn deferred.promise();\n\n\t\t};\n\n\t\treturn module;\n\n\t}(EC.Test));\n"],"sourceRoot":"/source/"}